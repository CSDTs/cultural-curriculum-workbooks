/*! For license information please see main.2dfcb1c1.js.LICENSE.txt */
(function(){var __webpack_modules__={930:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{gJ:function(){return version}});var _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(313),__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};function __awaiter(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function __generator(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof __webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var aspromise=asPromise;function asPromise(e,t){for(var n=new Array(arguments.length-1),r=0,a=2,i=!0;a<arguments.length;)n[r++]=arguments[a++];return new Promise((function(a,o){n[r]=function(e){if(i)if(i=!1,e)o(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];a.apply(null,t)}};try{e.apply(t||null,n)}catch(e){i&&(i=!1,o(e))}}))}var base64_1=createCommonjsModule((function(e,t){var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),a=new Array(123),i=0;i<64;)a[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;n.encode=function(e,t,n){for(var a,i=null,o=[],s=0,u=0;t<n;){var l=e[t++];switch(u){case 0:o[s++]=r[l>>2],a=(3&l)<<4,u=1;break;case 1:o[s++]=r[a|l>>4],a=(15&l)<<2,u=2;break;case 2:o[s++]=r[a|l>>6],o[s++]=r[63&l],u=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0)}return u&&(o[s++]=r[a],o[s++]=61,1===u&&(o[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},n.decode=function(e,t,n){for(var r,i=n,o=0,s=0;s<e.length;){var u=e.charCodeAt(s++);if(61===u&&o>1)break;if(void 0===(u=a[u]))throw Error("invalid encoding");switch(o){case 0:r=u,o=1;break;case 1:t[n++]=r<<2|(48&u)>>4,r=u,o=2;break;case 2:t[n++]=(15&r)<<4|(60&u)>>2,r=u,o=3;break;case 3:t[n++]=(3&r)<<6|u,o=0}}if(1===o)throw Error("invalid encoding");return n-i},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}})),eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},EventEmitter.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},EventEmitter.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this};var float_1=factory(factory);function factory(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function a(e,r,a){t[0]=e,r[a]=n[0],r[a+1]=n[1],r[a+2]=n[2],r[a+3]=n[3]}function i(e,r,a){t[0]=e,r[a]=n[3],r[a+1]=n[2],r[a+2]=n[1],r[a+3]=n[0]}function o(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function s(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?a:i,e.writeFloatBE=r?i:a,e.readFloatLE=r?o:s,e.readFloatBE=r?s:o}():function(){function t(e,t,n,r){var a=t<0?1:0;if(a&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((a<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((a<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var i=Math.floor(Math.log(t)/Math.LN2);e((a<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,n,r)}}function n(e,t,n){var r=e(t,n),a=2*(r>>31)+1,i=r>>>23&255,o=8388607&r;return 255===i?o?NaN:a*(1/0):0===i?1401298464324817e-60*a*o:a*Math.pow(2,i-150)*(o+8388608)}e.writeFloatLE=t.bind(null,writeUintLE),e.writeFloatBE=t.bind(null,writeUintBE),e.readFloatLE=n.bind(null,readUintLE),e.readFloatBE=n.bind(null,readUintBE)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function a(e,r,a){t[0]=e,r[a]=n[0],r[a+1]=n[1],r[a+2]=n[2],r[a+3]=n[3],r[a+4]=n[4],r[a+5]=n[5],r[a+6]=n[6],r[a+7]=n[7]}function i(e,r,a){t[0]=e,r[a]=n[7],r[a+1]=n[6],r[a+2]=n[5],r[a+3]=n[4],r[a+4]=n[3],r[a+5]=n[2],r[a+6]=n[1],r[a+7]=n[0]}function o(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function s(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?a:i,e.writeDoubleBE=r?i:a,e.readDoubleLE=r?o:s,e.readDoubleBE=r?s:o}():function(){function t(e,t,n,r,a,i){var o=r<0?1:0;if(o&&(r=-r),0===r)e(0,a,i+t),e(1/r>0?0:2147483648,a,i+n);else if(isNaN(r))e(0,a,i+t),e(2146959360,a,i+n);else if(r>17976931348623157e292)e(0,a,i+t),e((o<<31|2146435072)>>>0,a,i+n);else{var s;if(r<22250738585072014e-324)e((s=r/5e-324)>>>0,a,i+t),e((o<<31|s/4294967296)>>>0,a,i+n);else{var u=Math.floor(Math.log(r)/Math.LN2);1024===u&&(u=1023),e(4503599627370496*(s=r*Math.pow(2,-u))>>>0,a,i+t),e((o<<31|u+1023<<20|1048576*s&1048575)>>>0,a,i+n)}}}function n(e,t,n,r,a){var i=e(r,a+t),o=e(r,a+n),s=2*(o>>31)+1,u=o>>>20&2047,l=4294967296*(1048575&o)+i;return 2047===u?l?NaN:s*(1/0):0===u?5e-324*s*l:s*Math.pow(2,u-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,writeUintLE,0,4),e.writeDoubleBE=t.bind(null,writeUintBE,4,0),e.readDoubleLE=n.bind(null,readUintLE,0,4),e.readDoubleBE=n.bind(null,readUintBE,4,0)}(),e}function writeUintLE(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function writeUintBE(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod$$1=eval("quire".replace(/^/,"re"))(moduleName);if(mod$$1&&(mod$$1.length||Object.keys(mod$$1).length))return mod$$1}catch(e){}return null}var utf8_1=createCommonjsModule((function(e,t){var n=t;n.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},n.read=function(e,t,n){if(n-t<1)return"";for(var r,a=null,i=[],o=0;t<n;)(r=e[t++])<128?i[o++]=r:r>191&&r<224?i[o++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[o++]=55296+(r>>10),i[o++]=56320+(1023&r)):i[o++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],o>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,i)),o=0);return a?(o&&a.push(String.fromCharCode.apply(String,i.slice(0,o))),a.join("")):String.fromCharCode.apply(String,i.slice(0,o))},n.write=function(e,t,n){for(var r,a,i=n,o=0;o<e.length;++o)(r=e.charCodeAt(o))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(a=e.charCodeAt(o+1)))?(r=65536+((1023&r)<<10)+(1023&a),++o,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-i}})),pool_1=pool;function pool(e,t,n){var r=n||8192,a=r>>>1,i=null,o=r;return function(n){if(n<1||n>a)return e(n);o+n>r&&(i=e(r),o=0);var s=t.call(i,o,o+=n);return 7&o&&(o=1+(7|o)),s}}var longbits=LongBits;function LongBits(e,t){this.lo=e>>>0,this.hi=t>>>0}var zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function(e){if(0===e)return zero;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new LongBits(n,r)},LongBits.from=function(e){if("number"==typeof e)return LongBits.fromNumber(e);if(minimal.isString(e)){if(!minimal.Long)return LongBits.fromNumber(parseInt(e,10));e=minimal.Long.fromString(e)}return e.low||e.high?new LongBits(e.low>>>0,e.high>>>0):zero},LongBits.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function(e){return minimal.Long?new minimal.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function(e){return e===zeroHash?zero:new LongBits((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0)},LongBits.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},LongBits.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},LongBits.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10};var minimal=createCommonjsModule((function(e,t){var n=t;function r(e,t,n){for(var r=Object.keys(t),a=0;a<r.length;++a)void 0!==e[r[a]]&&n||(e[r[a]]=t[r[a]]);return e}function a(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&r(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=aspromise,n.base64=base64_1,n.EventEmitter=eventemitter,n.float=float_1,n.inquire=inquire_1,n.utf8=utf8_1,n.pool=pool_1,n.LongBits=longbits,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isNode=Boolean(commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=commonjsGlobal.dcodeIO&&commonjsGlobal.dcodeIO.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=r,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=a,n.ProtocolError=a("ProtocolError"),n.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},n.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}})),writer=Writer,BufferWriter,LongBits$1=minimal.LongBits,base64=minimal.base64,utf8=minimal.utf8;function Op(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function noop(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}function writeByte(e,t,n){t[n]=255&e}function writeVarint32(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}function writeVarint64(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function writeFixed32(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}Writer.create=minimal.Buffer?function(){return(Writer.create=function(){return new BufferWriter})()}:function(){return new Writer},Writer.alloc=function(e){return new minimal.Array(e)},minimal.Array!==Array&&(Writer.alloc=minimal.pool(Writer.alloc,minimal.Array.prototype.subarray)),Writer.prototype._push=function(e,t,n){return this.tail=this.tail.next=new Op(e,t,n),this.len+=t,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer.prototype.uint64=function(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)},Writer.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(e){return this._push(minimal.float.writeFloatLE,4,e)},Writer.prototype.double=function(e){return this._push(minimal.float.writeDoubleLE,8,e)};var writeBytes=minimal.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};Writer.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(minimal.isString(e)){var n=Writer.alloc(t=base64.length(e));base64.decode(e,n,0),e=n}return this.uint32(t)._push(writeBytes,t,e)},Writer.prototype.string=function(e){var t=utf8.length(e);return t?this.uint32(t)._push(utf8.write,t,e):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},Writer.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},Writer._configure=function(e){BufferWriter=e};var writer_buffer=BufferWriter$1;(BufferWriter$1.prototype=Object.create(writer.prototype)).constructor=BufferWriter$1;var Buffer=minimal.Buffer;function BufferWriter$1(){writer.call(this)}BufferWriter$1.alloc=function(e){return(BufferWriter$1.alloc=minimal._Buffer_allocUnsafe)(e)};var writeBytesBuffer=Buffer&&Buffer.prototype instanceof Uint8Array&&"set"===Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]};function writeStringBuffer(e,t,n){e.length<40?minimal.utf8.write(e,t,n):t.utf8Write(e,n)}BufferWriter$1.prototype.bytes=function(e){minimal.isString(e)&&(e=minimal._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(writeBytesBuffer,t,e),this},BufferWriter$1.prototype.string=function(e){var t=Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this};var reader=Reader,BufferReader,LongBits$2=minimal.LongBits,utf8$1=minimal.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader(e){this.buf=e,this.pos=0,this.len=e.length}var create_array="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader(e);throw Error("illegal buffer")};function readLongVarint(){var e=new LongBits$2(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$2(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.create=minimal.Buffer?function(e){return(Reader.create=function(e){return minimal.Buffer.isBuffer(e)?new BufferReader(e):create_array(e)})(e)}:create_array,Reader.prototype._slice=minimal.Array.prototype.subarray||minimal.Array.prototype.slice,Reader.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}(),Reader.prototype.int32=function(){return 0|this.uint32()},Reader.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Reader.prototype.bool=function(){return 0!==this.uint32()},Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},Reader.prototype.string=function(){var e=this.bytes();return utf8$1.read(e,0,e.length)},Reader.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader._configure=function(e){BufferReader=e;var t=minimal.Long?"toLong":"toNumber";minimal.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader$1;function BufferReader$1(e){reader.call(this,e)}(BufferReader$1.prototype=Object.create(reader.prototype)).constructor=BufferReader$1,minimal.Buffer&&(BufferReader$1.prototype._slice=minimal.Buffer.prototype.slice),BufferReader$1.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len))};var service=Service;function Service(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");minimal.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(Service.prototype=Object.create(minimal.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(t,n,r,a,i){if(!a)throw TypeError("request must be specified");var o=this;if(!i)return minimal.asPromise(e,o,t,n,r,a);if(o.rpcImpl)try{return o.rpcImpl(t,n[o.requestDelimited?"encodeDelimited":"encode"](a).finish(),(function(e,n){if(e)return o.emit("error",e,t),i(e);if(null!==n){if(!(n instanceof r))try{n=r[o.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return o.emit("error",e,t),i(e)}return o.emit("data",n,t),i(null,n)}o.end(!0)}))}catch(e){return o.emit("error",e,t),void setTimeout((function(){i(e)}),0)}else setTimeout((function(){i(Error("already ended"))}),0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var rpc_1=createCommonjsModule((function(e,t){t.Service=service})),roots={},indexMinimal=createCommonjsModule((function(e,t){var n=t;function r(){n.Reader._configure(n.BufferReader),n.util._configure()}n.build="minimal",n.Writer=writer,n.BufferWriter=writer_buffer,n.Reader=reader,n.BufferReader=reader_buffer,n.util=minimal,n.rpc=rpc_1,n.roots=roots,n.configure=r,n.Writer._configure(n.BufferWriter),r()})),minimal$1=indexMinimal,minimal_1=minimal$1.roots,minimal_2=minimal$1.Reader,minimal_3=minimal$1.util,$Reader=minimal$1.Reader,$util=minimal$1.util,$root=minimal$1.roots.default||(minimal$1.roots.default={});$root.tensorflow=function(){var e,t,n={};return n.Any=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.typeUrl="",e.prototype.value=$util.newBuffer([]),e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.Any;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.typeUrl=e.string();break;case 2:r.value=e.bytes();break;default:e.skipType(7&a)}}return r},e}(),n.DataType=(e={},(t=Object.create(e))[e[0]="DT_INVALID"]=0,t[e[1]="DT_FLOAT"]=1,t[e[2]="DT_DOUBLE"]=2,t[e[3]="DT_INT32"]=3,t[e[4]="DT_UINT8"]=4,t[e[5]="DT_INT16"]=5,t[e[6]="DT_INT8"]=6,t[e[7]="DT_STRING"]=7,t[e[8]="DT_COMPLEX64"]=8,t[e[9]="DT_INT64"]=9,t[e[10]="DT_BOOL"]=10,t[e[11]="DT_QINT8"]=11,t[e[12]="DT_QUINT8"]=12,t[e[13]="DT_QINT32"]=13,t[e[14]="DT_BFLOAT16"]=14,t[e[101]="DT_FLOAT_REF"]=101,t[e[102]="DT_DOUBLE_REF"]=102,t[e[103]="DT_INT32_REF"]=103,t[e[104]="DT_UINT8_REF"]=104,t[e[105]="DT_INT16_REF"]=105,t[e[106]="DT_INT8_REF"]=106,t[e[107]="DT_STRING_REF"]=107,t[e[108]="DT_COMPLEX64_REF"]=108,t[e[109]="DT_INT64_REF"]=109,t[e[110]="DT_BOOL_REF"]=110,t[e[111]="DT_QINT8_REF"]=111,t[e[112]="DT_QUINT8_REF"]=112,t[e[113]="DT_QINT32_REF"]=113,t[e[114]="DT_BFLOAT16_REF"]=114,t),n.TensorShape=function(){function e(e){if(this.dim=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.dim=$util.emptyArray,e.prototype.unknownRank=!1,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.TensorShape;e.pos<n;){var a=e.uint32();switch(a>>>3){case 2:r.dim&&r.dim.length||(r.dim=[]),r.dim.push($root.tensorflow.TensorShape.Dim.decode(e,e.uint32()));break;case 3:r.unknownRank=e.bool();break;default:e.skipType(7&a)}}return r},e.Dim=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.size=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.name="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.TensorShape.Dim;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.size=e.int64();break;case 2:r.name=e.string();break;default:e.skipType(7&a)}}return r},e}(),e}(),n.Tensor=function(){function e(e){if(this.floatVal=[],this.doubleVal=[],this.intVal=[],this.stringVal=[],this.scomplexVal=[],this.int64Val=[],this.boolVal=[],this.uint32Val=[],this.uint64Val=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.dtype=0,e.prototype.tensorShape=null,e.prototype.versionNumber=0,e.prototype.tensorContent=$util.newBuffer([]),e.prototype.floatVal=$util.emptyArray,e.prototype.doubleVal=$util.emptyArray,e.prototype.intVal=$util.emptyArray,e.prototype.stringVal=$util.emptyArray,e.prototype.scomplexVal=$util.emptyArray,e.prototype.int64Val=$util.emptyArray,e.prototype.boolVal=$util.emptyArray,e.prototype.uint32Val=$util.emptyArray,e.prototype.uint64Val=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.Tensor;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.dtype=e.int32();break;case 2:r.tensorShape=$root.tensorflow.TensorShape.decode(e,e.uint32());break;case 3:r.versionNumber=e.int32();break;case 4:r.tensorContent=e.bytes();break;case 5:if(r.floatVal&&r.floatVal.length||(r.floatVal=[]),2==(7&a))for(var i=e.uint32()+e.pos;e.pos<i;)r.floatVal.push(e.float());else r.floatVal.push(e.float());break;case 6:if(r.doubleVal&&r.doubleVal.length||(r.doubleVal=[]),2==(7&a))for(i=e.uint32()+e.pos;e.pos<i;)r.doubleVal.push(e.double());else r.doubleVal.push(e.double());break;case 7:if(r.intVal&&r.intVal.length||(r.intVal=[]),2==(7&a))for(i=e.uint32()+e.pos;e.pos<i;)r.intVal.push(e.int32());else r.intVal.push(e.int32());break;case 8:r.stringVal&&r.stringVal.length||(r.stringVal=[]),r.stringVal.push(e.bytes());break;case 9:if(r.scomplexVal&&r.scomplexVal.length||(r.scomplexVal=[]),2==(7&a))for(i=e.uint32()+e.pos;e.pos<i;)r.scomplexVal.push(e.float());else r.scomplexVal.push(e.float());break;case 10:if(r.int64Val&&r.int64Val.length||(r.int64Val=[]),2==(7&a))for(i=e.uint32()+e.pos;e.pos<i;)r.int64Val.push(e.int64());else r.int64Val.push(e.int64());break;case 11:if(r.boolVal&&r.boolVal.length||(r.boolVal=[]),2==(7&a))for(i=e.uint32()+e.pos;e.pos<i;)r.boolVal.push(e.bool());else r.boolVal.push(e.bool());break;case 16:if(r.uint32Val&&r.uint32Val.length||(r.uint32Val=[]),2==(7&a))for(i=e.uint32()+e.pos;e.pos<i;)r.uint32Val.push(e.uint32());else r.uint32Val.push(e.uint32());break;case 17:if(r.uint64Val&&r.uint64Val.length||(r.uint64Val=[]),2==(7&a))for(i=e.uint32()+e.pos;e.pos<i;)r.uint64Val.push(e.uint64());else r.uint64Val.push(e.uint64());break;default:e.skipType(7&a)}}return r},e}(),n.AttrValue=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t;return e.prototype.list=null,e.prototype.s=$util.newBuffer([]),e.prototype.i=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.f=0,e.prototype.b=!1,e.prototype.type=0,e.prototype.shape=null,e.prototype.tensor=null,e.prototype.placeholder="",e.prototype.func=null,Object.defineProperty(e.prototype,"value",{get:$util.oneOfGetter(t=["list","s","i","f","b","type","shape","tensor","placeholder","func"]),set:$util.oneOfSetter(t)}),e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.AttrValue;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.list=$root.tensorflow.AttrValue.ListValue.decode(e,e.uint32());break;case 2:r.s=e.bytes();break;case 3:r.i=e.int64();break;case 4:r.f=e.float();break;case 5:r.b=e.bool();break;case 6:r.type=e.int32();break;case 7:r.shape=$root.tensorflow.TensorShape.decode(e,e.uint32());break;case 8:r.tensor=$root.tensorflow.Tensor.decode(e,e.uint32());break;case 9:r.placeholder=e.string();break;case 10:r.func=$root.tensorflow.NameAttrList.decode(e,e.uint32());break;default:e.skipType(7&a)}}return r},e.ListValue=function(){function e(e){if(this.s=[],this.i=[],this.f=[],this.b=[],this.type=[],this.shape=[],this.tensor=[],this.func=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.s=$util.emptyArray,e.prototype.i=$util.emptyArray,e.prototype.f=$util.emptyArray,e.prototype.b=$util.emptyArray,e.prototype.type=$util.emptyArray,e.prototype.shape=$util.emptyArray,e.prototype.tensor=$util.emptyArray,e.prototype.func=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.AttrValue.ListValue;e.pos<n;){var a=e.uint32();switch(a>>>3){case 2:r.s&&r.s.length||(r.s=[]),r.s.push(e.bytes());break;case 3:if(r.i&&r.i.length||(r.i=[]),2==(7&a))for(var i=e.uint32()+e.pos;e.pos<i;)r.i.push(e.int64());else r.i.push(e.int64());break;case 4:if(r.f&&r.f.length||(r.f=[]),2==(7&a))for(i=e.uint32()+e.pos;e.pos<i;)r.f.push(e.float());else r.f.push(e.float());break;case 5:if(r.b&&r.b.length||(r.b=[]),2==(7&a))for(i=e.uint32()+e.pos;e.pos<i;)r.b.push(e.bool());else r.b.push(e.bool());break;case 6:if(r.type&&r.type.length||(r.type=[]),2==(7&a))for(i=e.uint32()+e.pos;e.pos<i;)r.type.push(e.int32());else r.type.push(e.int32());break;case 7:r.shape&&r.shape.length||(r.shape=[]),r.shape.push($root.tensorflow.TensorShape.decode(e,e.uint32()));break;case 8:r.tensor&&r.tensor.length||(r.tensor=[]),r.tensor.push($root.tensorflow.Tensor.decode(e,e.uint32()));break;case 9:r.func&&r.func.length||(r.func=[]),r.func.push($root.tensorflow.NameAttrList.decode(e,e.uint32()));break;default:e.skipType(7&a)}}return r},e}(),e}(),n.NameAttrList=function(){function e(e){if(this.attr={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.attr=$util.emptyObject,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n,r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.NameAttrList;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:a.name=e.string();break;case 2:e.skip().pos++,a.attr===$util.emptyObject&&(a.attr={}),n=e.string(),e.pos++,a.attr[n]=$root.tensorflow.AttrValue.decode(e,e.uint32());break;default:e.skipType(7&i)}}return a},e}(),n.NodeDef=function(){function e(e){if(this.input=[],this.attr={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.op="",e.prototype.input=$util.emptyArray,e.prototype.device="",e.prototype.attr=$util.emptyObject,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n,r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.NodeDef;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:a.name=e.string();break;case 2:a.op=e.string();break;case 3:a.input&&a.input.length||(a.input=[]),a.input.push(e.string());break;case 4:a.device=e.string();break;case 5:e.skip().pos++,a.attr===$util.emptyObject&&(a.attr={}),n=e.string(),e.pos++,a.attr[n]=$root.tensorflow.AttrValue.decode(e,e.uint32());break;default:e.skipType(7&i)}}return a},e}(),n.VersionDef=function(){function e(e){if(this.badConsumers=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.producer=0,e.prototype.minConsumer=0,e.prototype.badConsumers=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.VersionDef;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.producer=e.int32();break;case 2:r.minConsumer=e.int32();break;case 3:if(r.badConsumers&&r.badConsumers.length||(r.badConsumers=[]),2==(7&a))for(var i=e.uint32()+e.pos;e.pos<i;)r.badConsumers.push(e.int32());else r.badConsumers.push(e.int32());break;default:e.skipType(7&a)}}return r},e}(),n.GraphDef=function(){function e(e){if(this.node=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.node=$util.emptyArray,e.prototype.versions=null,e.prototype.library=null,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.GraphDef;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.node&&r.node.length||(r.node=[]),r.node.push($root.tensorflow.NodeDef.decode(e,e.uint32()));break;case 4:r.versions=$root.tensorflow.VersionDef.decode(e,e.uint32());break;case 2:r.library=$root.tensorflow.FunctionDefLibrary.decode(e,e.uint32());break;default:e.skipType(7&a)}}return r},e}(),n.CollectionDef=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t;return e.prototype.nodeList=null,e.prototype.bytesList=null,e.prototype.int64List=null,e.prototype.floatList=null,e.prototype.anyList=null,Object.defineProperty(e.prototype,"kind",{get:$util.oneOfGetter(t=["nodeList","bytesList","int64List","floatList","anyList"]),set:$util.oneOfSetter(t)}),e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.CollectionDef;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.nodeList=$root.tensorflow.CollectionDef.NodeList.decode(e,e.uint32());break;case 2:r.bytesList=$root.tensorflow.CollectionDef.BytesList.decode(e,e.uint32());break;case 3:r.int64List=$root.tensorflow.CollectionDef.Int64List.decode(e,e.uint32());break;case 4:r.floatList=$root.tensorflow.CollectionDef.FloatList.decode(e,e.uint32());break;case 5:r.anyList=$root.tensorflow.CollectionDef.AnyList.decode(e,e.uint32());break;default:e.skipType(7&a)}}return r},e.NodeList=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.CollectionDef.NodeList;e.pos<n;){var a=e.uint32();if(a>>>3===1)r.value&&r.value.length||(r.value=[]),r.value.push(e.string());else e.skipType(7&a)}return r},e}(),e.BytesList=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.CollectionDef.BytesList;e.pos<n;){var a=e.uint32();if(a>>>3===1)r.value&&r.value.length||(r.value=[]),r.value.push(e.bytes());else e.skipType(7&a)}return r},e}(),e.Int64List=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.CollectionDef.Int64List;e.pos<n;){var a=e.uint32();if(a>>>3===1)if(r.value&&r.value.length||(r.value=[]),2==(7&a))for(var i=e.uint32()+e.pos;e.pos<i;)r.value.push(e.int64());else r.value.push(e.int64());else e.skipType(7&a)}return r},e}(),e.FloatList=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.CollectionDef.FloatList;e.pos<n;){var a=e.uint32();if(a>>>3===1)if(r.value&&r.value.length||(r.value=[]),2==(7&a))for(var i=e.uint32()+e.pos;e.pos<i;)r.value.push(e.float());else r.value.push(e.float());else e.skipType(7&a)}return r},e}(),e.AnyList=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.CollectionDef.AnyList;e.pos<n;){var a=e.uint32();if(a>>>3===1)r.value&&r.value.length||(r.value=[]),r.value.push($root.tensorflow.Any.decode(e,e.uint32()));else e.skipType(7&a)}return r},e}(),e}(),n.SaverDef=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t,n;return e.prototype.filenameTensorName="",e.prototype.saveTensorName="",e.prototype.restoreOpName="",e.prototype.maxToKeep=0,e.prototype.sharded=!1,e.prototype.keepCheckpointEveryNHours=0,e.prototype.version=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.SaverDef;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.filenameTensorName=e.string();break;case 2:r.saveTensorName=e.string();break;case 3:r.restoreOpName=e.string();break;case 4:r.maxToKeep=e.int32();break;case 5:r.sharded=e.bool();break;case 6:r.keepCheckpointEveryNHours=e.float();break;case 7:r.version=e.int32();break;default:e.skipType(7&a)}}return r},e.CheckpointFormatVersion=(t={},(n=Object.create(t))[t[0]="LEGACY"]=0,n[t[1]="V1"]=1,n[t[2]="V2"]=2,n),e}(),n.TensorInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t;return e.prototype.name="",e.prototype.cooSparse=null,e.prototype.dtype=0,e.prototype.tensorShape=null,Object.defineProperty(e.prototype,"encoding",{get:$util.oneOfGetter(t=["name","cooSparse"]),set:$util.oneOfSetter(t)}),e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.TensorInfo;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.name=e.string();break;case 4:r.cooSparse=$root.tensorflow.TensorInfo.CooSparse.decode(e,e.uint32());break;case 2:r.dtype=e.int32();break;case 3:r.tensorShape=$root.tensorflow.TensorShape.decode(e,e.uint32());break;default:e.skipType(7&a)}}return r},e.CooSparse=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.valuesTensorName="",e.prototype.indicesTensorName="",e.prototype.denseShapeTensorName="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.TensorInfo.CooSparse;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.valuesTensorName=e.string();break;case 2:r.indicesTensorName=e.string();break;case 3:r.denseShapeTensorName=e.string();break;default:e.skipType(7&a)}}return r},e}(),e}(),n.SignatureDef=function(){function e(e){if(this.inputs={},this.outputs={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.inputs=$util.emptyObject,e.prototype.outputs=$util.emptyObject,e.prototype.methodName="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n,r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.SignatureDef;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:e.skip().pos++,a.inputs===$util.emptyObject&&(a.inputs={}),n=e.string(),e.pos++,a.inputs[n]=$root.tensorflow.TensorInfo.decode(e,e.uint32());break;case 2:e.skip().pos++,a.outputs===$util.emptyObject&&(a.outputs={}),n=e.string(),e.pos++,a.outputs[n]=$root.tensorflow.TensorInfo.decode(e,e.uint32());break;case 3:a.methodName=e.string();break;default:e.skipType(7&i)}}return a},e}(),n.AssetFileDef=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.tensorInfo=null,e.prototype.filename="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.AssetFileDef;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.tensorInfo=$root.tensorflow.TensorInfo.decode(e,e.uint32());break;case 2:r.filename=e.string();break;default:e.skipType(7&a)}}return r},e}(),n.OpDef=function(){function e(e){if(this.inputArg=[],this.outputArg=[],this.attr=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.inputArg=$util.emptyArray,e.prototype.outputArg=$util.emptyArray,e.prototype.attr=$util.emptyArray,e.prototype.deprecation=null,e.prototype.summary="",e.prototype.description="",e.prototype.isCommutative=!1,e.prototype.isAggregate=!1,e.prototype.isStateful=!1,e.prototype.allowsUninitializedInput=!1,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.OpDef;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.name=e.string();break;case 2:r.inputArg&&r.inputArg.length||(r.inputArg=[]),r.inputArg.push($root.tensorflow.OpDef.ArgDef.decode(e,e.uint32()));break;case 3:r.outputArg&&r.outputArg.length||(r.outputArg=[]),r.outputArg.push($root.tensorflow.OpDef.ArgDef.decode(e,e.uint32()));break;case 4:r.attr&&r.attr.length||(r.attr=[]),r.attr.push($root.tensorflow.OpDef.AttrDef.decode(e,e.uint32()));break;case 8:r.deprecation=$root.tensorflow.OpDef.OpDeprecation.decode(e,e.uint32());break;case 5:r.summary=e.string();break;case 6:r.description=e.string();break;case 18:r.isCommutative=e.bool();break;case 16:r.isAggregate=e.bool();break;case 17:r.isStateful=e.bool();break;case 19:r.allowsUninitializedInput=e.bool();break;default:e.skipType(7&a)}}return r},e.ArgDef=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.description="",e.prototype.type=0,e.prototype.typeAttr="",e.prototype.numberAttr="",e.prototype.typeListAttr="",e.prototype.isRef=!1,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.OpDef.ArgDef;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.name=e.string();break;case 2:r.description=e.string();break;case 3:r.type=e.int32();break;case 4:r.typeAttr=e.string();break;case 5:r.numberAttr=e.string();break;case 6:r.typeListAttr=e.string();break;case 16:r.isRef=e.bool();break;default:e.skipType(7&a)}}return r},e}(),e.AttrDef=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.type="",e.prototype.defaultValue=null,e.prototype.description="",e.prototype.hasMinimum=!1,e.prototype.minimum=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.allowedValues=null,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.OpDef.AttrDef;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.name=e.string();break;case 2:r.type=e.string();break;case 3:r.defaultValue=$root.tensorflow.AttrValue.decode(e,e.uint32());break;case 4:r.description=e.string();break;case 5:r.hasMinimum=e.bool();break;case 6:r.minimum=e.int64();break;case 7:r.allowedValues=$root.tensorflow.AttrValue.decode(e,e.uint32());break;default:e.skipType(7&a)}}return r},e}(),e.OpDeprecation=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.explanation="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.OpDef.OpDeprecation;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.version=e.int32();break;case 2:r.explanation=e.string();break;default:e.skipType(7&a)}}return r},e}(),e}(),n.OpList=function(){function e(e){if(this.op=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.op=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.OpList;e.pos<n;){var a=e.uint32();if(a>>>3===1)r.op&&r.op.length||(r.op=[]),r.op.push($root.tensorflow.OpDef.decode(e,e.uint32()));else e.skipType(7&a)}return r},e}(),n.MetaGraphDef=function(){function e(e){if(this.collectionDef={},this.signatureDef={},this.assetFileDef=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.metaInfoDef=null,e.prototype.graphDef=null,e.prototype.saverDef=null,e.prototype.collectionDef=$util.emptyObject,e.prototype.signatureDef=$util.emptyObject,e.prototype.assetFileDef=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n,r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.MetaGraphDef;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:a.metaInfoDef=$root.tensorflow.MetaGraphDef.MetaInfoDef.decode(e,e.uint32());break;case 2:a.graphDef=$root.tensorflow.GraphDef.decode(e,e.uint32());break;case 3:a.saverDef=$root.tensorflow.SaverDef.decode(e,e.uint32());break;case 4:e.skip().pos++,a.collectionDef===$util.emptyObject&&(a.collectionDef={}),n=e.string(),e.pos++,a.collectionDef[n]=$root.tensorflow.CollectionDef.decode(e,e.uint32());break;case 5:e.skip().pos++,a.signatureDef===$util.emptyObject&&(a.signatureDef={}),n=e.string(),e.pos++,a.signatureDef[n]=$root.tensorflow.SignatureDef.decode(e,e.uint32());break;case 6:a.assetFileDef&&a.assetFileDef.length||(a.assetFileDef=[]),a.assetFileDef.push($root.tensorflow.AssetFileDef.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return a},e.MetaInfoDef=function(){function e(e){if(this.tags=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.metaGraphVersion="",e.prototype.strippedOpList=null,e.prototype.anyInfo=null,e.prototype.tags=$util.emptyArray,e.prototype.tensorflowVersion="",e.prototype.tensorflowGitVersion="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.MetaGraphDef.MetaInfoDef;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.metaGraphVersion=e.string();break;case 2:r.strippedOpList=$root.tensorflow.OpList.decode(e,e.uint32());break;case 3:r.anyInfo=$root.tensorflow.Any.decode(e,e.uint32());break;case 4:r.tags&&r.tags.length||(r.tags=[]),r.tags.push(e.string());break;case 5:r.tensorflowVersion=e.string();break;case 6:r.tensorflowGitVersion=e.string();break;default:e.skipType(7&a)}}return r},e}(),e}(),n.SavedModel=function(){function e(e){if(this.metaGraphs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.savedModelSchemaVersion=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.metaGraphs=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.SavedModel;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.savedModelSchemaVersion=e.int64();break;case 2:r.metaGraphs&&r.metaGraphs.length||(r.metaGraphs=[]),r.metaGraphs.push($root.tensorflow.MetaGraphDef.decode(e,e.uint32()));break;default:e.skipType(7&a)}}return r},e}(),n.FunctionDefLibrary=function(){function e(e){if(this.function=[],this.gradient=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.function=$util.emptyArray,e.prototype.gradient=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.FunctionDefLibrary;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.function&&r.function.length||(r.function=[]),r.function.push($root.tensorflow.FunctionDef.decode(e,e.uint32()));break;case 2:r.gradient&&r.gradient.length||(r.gradient=[]),r.gradient.push($root.tensorflow.GradientDef.decode(e,e.uint32()));break;default:e.skipType(7&a)}}return r},e}(),n.FunctionDef=function(){function e(e){if(this.attr={},this.nodeDef=[],this.ret={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.signature=null,e.prototype.attr=$util.emptyObject,e.prototype.nodeDef=$util.emptyArray,e.prototype.ret=$util.emptyObject,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n,r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.FunctionDef;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:a.signature=$root.tensorflow.OpDef.decode(e,e.uint32());break;case 5:e.skip().pos++,a.attr===$util.emptyObject&&(a.attr={}),n=e.string(),e.pos++,a.attr[n]=$root.tensorflow.AttrValue.decode(e,e.uint32());break;case 3:a.nodeDef&&a.nodeDef.length||(a.nodeDef=[]),a.nodeDef.push($root.tensorflow.NodeDef.decode(e,e.uint32()));break;case 4:e.skip().pos++,a.ret===$util.emptyObject&&(a.ret={}),n=e.string(),e.pos++,a.ret[n]=e.string();break;default:e.skipType(7&i)}}return a},e}(),n.GradientDef=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.functionName="",e.prototype.gradientFunc="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.GradientDef;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.functionName=e.string();break;case 2:r.gradientFunc=e.string();break;default:e.skipType(7&a)}}return r},e}(),n}();var compiled_api=$root,compiled_api_1=compiled_api.tensorflow;function getParamValue(e,t,n,r){var a=t.params[e];if(a&&void 0!==a.inputIndex){if("tensor"===a.type)return getTensor(t.inputNames[a.inputIndex],n,r);if("tensors"===a.type)return(0===a.inputIndex?0===a.inputParamLength?t.inputNames:t.inputNames.slice(a.inputIndex,-a.inputParamLength):t.inputNames.splice(a.inputIndex)).map((function(e){return getTensor(e,n,r)}));var i=Array.prototype.slice.call(getTensor(t.inputNames.slice(a.inputIndex)[0],n,r).dataSync());return"number"===a.type?i[0]:i}return a&&a.value}function getTensor(e,t,n){var r=parseNodeName(e),a=r[0],i=r[1],o=n.currentContextIds.find((function(e){return!!t[getNodeNameWithContextId(a,e)]}));return void 0!==o?t[getNodeNameWithContextId(a,o)][i]:void 0}function getNodeNameAndIndex(e,t){var n=parseNodeName(e),r=n[0],a=n[1];return[getNodeNameWithContextId(r,t&&t.currentContextId),a]}function getNodeNameWithContextId(e,t){return t?e+"-"+t:e}function parseNodeName(e){var t=e.lastIndexOf(":");return-1===t?[e,0]:[e.substring(0,t),Number(e.substring(t+1))]}function split$1(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}var json=[{tfOpName:"Add",dlOpName:"add",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",dlOpName:"addN",category:"arithmetic",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",dlOpName:"add",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",dlOpName:"sub",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",dlOpName:"div",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",dlOpName:"div",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",dlOpName:"floorDiv",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",dlOpName:"mul",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",dlOpName:"maximum",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"}]},{tfOpName:"Minimum",dlOpName:"minimum",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"}]},{tfOpName:"Pow",dlOpName:"pow",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",dlOpName:"squaredDifference",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",dlOpName:"mod",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],arithmetic=Object.freeze({json:json}),json$1=[{tfOpName:"Abs",dlOpName:"abs",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",dlOpName:"acos",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",dlOpName:"asin",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"atan",dlOpName:"atan",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",dlOpName:"ceil",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",dlOpName:"clipByValue",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"clip_value_min",dlParamName:"clipValueMin",type:"number"},{tfParamName:"clip_value_max",dlParamName:"clipValueMax",type:"number"}]},{tfOpName:"Cos",dlOpName:"cos",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",dlOpName:"cosh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",dlOpName:"elu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",dlOpName:"exp",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",dlOpName:"floor",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",dlOpName:"log",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",dlOpName:"neg",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",dlOpName:"relu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",dlOpName:"clipByValue",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{dlParamName:"clipValueMin",type:"number",defaultValue:0},{dlParamName:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",dlOpName:"selu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",dlOpName:"sigmoid",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",dlOpName:"sin",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",dlOpName:"sinh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",dlOpName:"sqrt",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",dlOpName:"rsqrt",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",dlOpName:"square",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",dlOpName:"tan",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",dlOpName:"tanh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",dlOpName:"sign",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",dlOpName:"round",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",dlOpName:"expm1",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",dlOpName:"log1p",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",dlOpName:"reciprocal",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",dlOpName:"reciprocal",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",dlOpName:"softplus",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",dlOpName:"asinh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",dlOpName:"acosh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",dlOpName:"atanh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",dlOpName:"erf",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],basicMath=Object.freeze({json:json$1}),json$2=[{tfOpName:"LoopCond",dlOpName:"loopCond",category:"control",params:[{tfInputIndex:0,dlParamName:"pred",type:"tensor"}]},{tfOpName:"Switch",dlOpName:"switch",category:"control",params:[{tfInputIndex:0,dlParamName:"data",type:"tensor"},{tfInputIndex:1,dlParamName:"pred",type:"tensor"}]},{tfOpName:"Merge",dlOpName:"merge",category:"control",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensors",type:"tensors"}]},{tfOpName:"Enter",dlOpName:"enter",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"frame_name",dlParamName:"frameName",type:"string"},{tfParamName:"is_constant",dlParamName:"isConstant",type:"bool"}]},{tfOpName:"Exit",dlOpName:"exit",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",dlOpName:"nextIteration",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",dlOpName:"tensorArray",category:"control",params:[{tfInputIndex:0,dlParamName:"size",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape",dlParamName:"elementShape",type:"shape"},{tfParamName:"dynamic_size",dlParamName:"dynamicSize",type:"bool"},{tfParamName:"clear_after_read",dlParamName:"clearAfterRead",type:"bool"},{tfParamName:"identical_element_shapes",dlParamName:"identicalElementShapes",type:"bool"},{tfParamName:"tensor_array_name",dlParamName:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",dlOpName:"tensorArrayWrite",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"index",type:"number"},{tfInputIndex:2,dlParamName:"tensor",type:"tensor"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",dlOpName:"tensorArrayRead",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"index",type:"number"},{tfInputIndex:2,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",dlOpName:"tensorArrayGather",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"indices",type:"number[]"},{tfInputIndex:2,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape",dlParamName:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",dlOpName:"tensorArrayScatter",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"indices",type:"number[]"},{tfInputIndex:2,dlParamName:"tensor",type:"tensor"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",dlOpName:"tensorArrayConcat",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape_except0",dlParamName:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",dlOpName:"tensorArraySplit",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"tensor",type:"tensor"},{tfInputIndex:2,dlParamName:"lengths",type:"number[]"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",dlOpName:"tensorArraySize",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",dlOpName:"tensorArrayClose",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"}]}],control=Object.freeze({json:json$2}),json$3=[{tfOpName:"AvgPool",dlOpName:"avgPool",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0},{tfParamName:"ksize",dlParamName:"kernelSize",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",dlOpName:"maxPool",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0},{tfParamName:"ksize",dlParamName:"kernelSize",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",dlOpName:"conv1d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"stride",dlParamName:"stride",type:"number"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NWC"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"dilation",dlParamName:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",dlOpName:"conv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"useCudnnOnGpu",dlParamName:"useCudnnOnGpu",type:"bool"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]},{tfOpName:"Conv2DBackpropInput",dlOpName:"conv2dTranspose",category:"convolution",params:[{tfInputIndex:2,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfInputIndex:0,dlParamName:"outputShape",type:"number[]"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",dlOpName:"depthwiseConv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"input",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",dlOpName:"depthwiseConv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"input",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]}],convolution=Object.freeze({json:json$3}),json$4=[{tfOpName:"Fill",dlOpName:"fill",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfInputIndex:1,dlParamName:"value",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",dlOpName:"linspace",category:"creation",params:[{tfInputIndex:0,dlParamName:"start",type:"number"},{tfInputIndex:1,dlParamName:"stop",type:"number"},{tfInputIndex:2,dlParamName:"num",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",dlOpName:"oneHot",category:"creation",params:[{tfInputIndex:0,dlParamName:"indices",type:"tensor"},{tfInputIndex:1,dlParamName:"depth",type:"number"},{tfInputIndex:2,dlParamName:"onValue",type:"number",defaultValue:1},{tfInputIndex:3,dlParamName:"offValue",type:"number",defaultValue:0},{tfParamName:"axis",dlParamName:"axis",type:"number",notSupported:!0},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",dlOpName:"ones",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",dlOpName:"onesLike",category:"creation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",dlOpName:"randomUniform",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"minval",dlParamName:"minval",type:"number",defaultValue:0},{tfParamName:"maxval",dlParamName:"maxval",type:"number",defaultValue:1},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"seed",dlParamName:"seed",type:"number",defaultValue:0},{tfParamName:"seed2",dlParamName:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfParamName:"T",dlParamName:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",dlOpName:"range",category:"creation",params:[{tfInputIndex:0,dlParamName:"start",type:"number"},{tfInputIndex:1,dlParamName:"stop",type:"number"},{tfInputIndex:2,dlParamName:"step",type:"number",defaultValue:0},{tfParamName:"Tidx",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"truncatedNormal",dlOpName:"truncatedNormal",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"means",dlParamName:"mean",type:"number",defaultValue:0},{tfParamName:"stddev",dlParamName:"stdDev",type:"number",defaultValue:1},{tfParamName:"seed",dlParamName:"seed",type:"number"},{tfParamName:"seed2",dlParamName:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"T",dlParamName:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",dlOpName:"zeros",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",dlOpName:"zerosLike",category:"creation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]}],creation=Object.freeze({json:json$4}),json$5=[{tfOpName:"NonMaxSuppressionV2",dlOpName:"nonMaxSuppression",category:"dynamic",params:[{tfInputIndex:0,dlParamName:"boxes",type:"tensor"},{tfInputIndex:1,dlParamName:"scores",type:"tensor"},{tfInputIndex:2,dlParamName:"maxOutputSize",type:"number"},{tfInputIndex:3,dlParamName:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",dlOpName:"nonMaxSuppression",category:"dynamic",params:[{tfInputIndex:0,dlParamName:"boxes",type:"tensor"},{tfInputIndex:1,dlParamName:"scores",type:"tensor"},{tfInputIndex:2,dlParamName:"maxOutputSize",type:"number"},{tfInputIndex:3,dlParamName:"iouThreshold",type:"number"},{tfInputIndex:4,dlParamName:"scoreThreshold",type:"number"}]},{tfOpName:"Where",dlOpName:"whereAsync",category:"dynamic",params:[{tfInputIndex:0,dlParamName:"condition",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],dynamic=Object.freeze({json:json$5}),json$6=[{tfOpName:"TopKV2",dlOpName:"topK",category:"evaluation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"k",type:"number"},{tfParamName:"sorted",dlParamName:"sorted",type:"bool"}]}],evaluation=Object.freeze({json:json$6}),json$7=[{tfOpName:"PlaceholderWithDefault",dlOpName:"placeholder",category:"graph",params:[{tfInputIndex:0,dlParamName:"default",type:"tensor"},{tfParamName:"shape",dlParamName:"shape",type:"shape"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",dlOpName:"placeholder",category:"graph",params:[{tfParamName:"shape",dlParamName:"shape",type:"shape"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"Const",dlOpName:"const",category:"graph"},{tfOpName:"Identity",dlOpName:"identity",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Snapshot",dlOpName:"snapshot",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Rank",dlOpName:"rank",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Size",dlOpName:"size",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Shape",dlOpName:"shape",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Print",dlOpName:"print",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,tfInputParamLength:1,dlParamName:"data",type:"tensors"},{tfParamName:"message",dlParamName:"message",type:"string"},{tfParamName:"first_n",dlParamName:"firstN",type:"number",notSupprted:!0},{tfParamName:"summarize",dlParamName:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",dlOpName:"noop",category:"graph",params:[]},{tfOpName:"StopGradient",dlOpName:"stopGradient",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",dlOpName:"fakeQuantWithMinMaxVars",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"min",dlParamName:"min",type:"number"},{tfParamName:"max",dlParamName:"max",type:"number"}]}],graph=Object.freeze({json:json$7}),json$8=[{tfOpName:"ResizeBilinear",dlOpName:"resizeBilinear",category:"image",params:[{tfInputIndex:0,dlParamName:"images",type:"tensor"},{tfInputIndex:1,dlParamName:"size",type:"number[]"},{tfParamName:"align_corners",dlParamName:"alignCorners",type:"bool"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",dlOpName:"resizeNearestNeighbor",category:"image",params:[{tfInputIndex:0,dlParamName:"images",type:"tensor"},{tfInputIndex:1,dlParamName:"size",type:"number[]"},{tfParamName:"align_corners",dlParamName:"alignCorners",type:"bool"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],image$1=Object.freeze({json:json$8}),json$9=[{tfOpName:"Equal",dlOpName:"equal",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",dlOpName:"notEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",dlOpName:"greater",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",dlOpName:"greaterEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",dlOpName:"less",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",dlOpName:"lessEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",dlOpName:"logicalAnd",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",dlOpName:"logicalNot",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",dlOpName:"logicalOr",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",dlOpName:"where",category:"logical",params:[{tfInputIndex:0,dlParamName:"condition",type:"tensor"},{tfInputIndex:1,dlParamName:"a",type:"tensor"},{tfInputIndex:2,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],logical=Object.freeze({json:json$9}),json$10=[{tfOpName:"MatMul",dlOpName:"matMul",category:"matrices",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"transpose_a",dlParamName:"transposeA",type:"bool",defaultValue:!1},{tfParamName:"transpose_b",dlParamName:"transposeB",type:"bool",defaultValue:!1},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",dlOpName:"transpose",category:"matrices",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"perm",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],matrices=Object.freeze({json:json$10}),json$11=[{tfOpName:"FusedBatchNorm",dlOpName:"batchNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"scale",type:"tensor"},{tfInputIndex:2,dlParamName:"offset",type:"tensor"},{tfInputIndex:3,dlParamName:"mean",type:"tensor"},{tfInputIndex:4,dlParamName:"variance",type:"tensor"},{tfParamName:"epsilon",dlParamName:"epsilon",type:"number",defaultValue:.001},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",dlOpName:"batchNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"scale",type:"tensor"},{tfInputIndex:2,dlParamName:"offset",type:"tensor"},{tfInputIndex:3,dlParamName:"mean",type:"tensor"},{tfInputIndex:4,dlParamName:"variance",type:"tensor"},{tfParamName:"epsilon",dlParamName:"epsilon",type:"number",defaultValue:.001},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",dlOpName:"localResponseNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"depth_radius",dlParamName:"radius",type:"number",defaultValue:5},{tfParamName:"bias",dlParamName:"bias",type:"number",defaultValue:1},{tfParamName:"alpha",dlParamName:"alpha",type:"number",defaultValue:1},{tfParamName:"beta",dlParamName:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",dlOpName:"softmax",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]}],normalization=Object.freeze({json:json$11}),json$12=[{tfOpName:"Max",dlOpName:"max",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Mean",dlOpName:"mean",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Min",dlOpName:"min",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Sum",dlOpName:"sum",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"All",dlOpName:"all",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Any",dlOpName:"any",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",dlOpName:"argMax",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"ArgMin",dlOpName:"argMin",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]}],reduction=Object.freeze({json:json$12}),json$13=[{tfOpName:"ConcatV2",dlOpName:"concat",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:1,dlParamName:"tensors",type:"tensors"},{tfInputIndex:-1,dlParamName:"axis",type:"number"}]},{tfOpName:"Concat",dlOpName:"concat",category:"slice_join",params:[{tfInputIndex:1,tfInputParamLength:1,dlParamName:"tensors",type:"tensors"},{tfInputIndex:0,dlParamName:"axis",type:"number"}]},{tfOpName:"GatherV2",dlOpName:"gather",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"indices",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",dlOpName:"gather",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"indices",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0},{tfParamName:"validate_indices",dlParamName:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",dlOpName:"reverse",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"ReverseV2",dlOpName:"reverse",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"Slice",dlOpName:"slice",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"begin",type:"number[]"},{tfInputIndex:2,dlParamName:"size",type:"number[]"}]},{tfOpName:"StridedSlice",dlOpName:"stridedSlice",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"begin",type:"number[]"},{tfInputIndex:2,dlParamName:"end",type:"number[]"},{tfInputIndex:3,dlParamName:"strides",type:"number[]"},{tfParamName:"begin_mask",dlParamName:"beginMask",type:"number",defaultValue:0},{tfParamName:"end_mask",dlParamName:"endMask",type:"number",defaultValue:0},{tfParamName:"new_axis_mask",dlParamName:"newAxisMask",type:"number",defaultValue:0},{tfParamName:"ellipsis_mask",dlParamName:"ellipsisMask",type:"number",defaultValue:0},{tfParamName:"shrink_axis_mask",dlParamName:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",dlOpName:"stack",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensors",type:"tensors"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",dlOpName:"unstack",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0},{tfParamName:"num",dlParamName:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",dlOpName:"tile",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"reps",type:"number[]"}]},{tfOpName:"Split",dlOpName:"split",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"axis",type:"number",defaultValue:0},{tfInputIndex:1,dlParamName:"x",type:"tensor"},{tfParamName:"num_split",dlParamName:"numOrSizeSplits",type:"number",defaultValue:1}]}],sliceJoin=Object.freeze({json:json$13}),json$14=[{tfOpName:"Cast",dlOpName:"cast",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"SrcT",dlParamName:"sdtype",type:"dtype",notSupported:!0},{tfParamName:"DstT",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",dlOpName:"expandDims",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,tfParamNameDeprecated:"dim",dlParamName:"axis",type:"number"}]},{tfOpName:"Pad",dlOpName:"pad",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"padding",type:"number[]"},{tfParamName:"constant_value",dlParamName:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",dlOpName:"pad",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"padding",type:"number[]"},{tfInputIndex:2,dlParamName:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",dlOpName:"reshape",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"shape",type:"number[]"}]},{tfOpName:"Squeeze",dlOpName:"squeeze",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"axis",tfParamNameDeprecated:"squeeze_dims",dlParamName:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",dlOpName:"spaceToBatchND",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"blockShape",type:"number[]"},{tfInputIndex:2,dlParamName:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",dlOpName:"batchToSpaceND",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"blockShape",type:"number[]"},{tfInputIndex:2,dlParamName:"crops",type:"number[]"}]}],transformation=Object.freeze({json:json$14}),CONTROL_FLOW_OPS=["Switch","Merge","Enter","Exit","NextIteration"],DYNAMIC_SHAPE_OPS=["NonMaxSuppressionV2","NonMaxSuppressionV3","Where"],OperationMapper=function(){function e(){var e=[arithmetic,basicMath,control,convolution,creation,dynamic,evaluation,logical,image$1,graph,matrices,normalization,reduction,sliceJoin,transformation],t=[].concat.apply([],e.map((function(e){return e.json})));this.opMappers=t.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),e.prototype.isControlFlow=function(e){return CONTROL_FLOW_OPS.some((function(t){return t===e.op}))},e.prototype.isDynamicShape=function(e){return DYNAMIC_SHAPE_OPS.some((function(t){return t===e.op}))},e.prototype.transformGraph=function(e){var t=this,n=!1,r=!1,a=[],i=e.node.reduce((function(e,i){return e[i.name]=t.mapNode(i),t.isControlFlow(i)&&(n=!0),t.isDynamicShape(i)&&(r=!0),"Placeholder"===i.op&&a.push(e[i.name]),e}),{}),o=[],s=[];return Object.keys(i).forEach((function(e){var t=i[e];t.inputNames.forEach((function(e){var n=getNodeNameAndIndex(e)[0];t.inputs.push(i[n]),i[n].children.push(t)})),0===t.inputs.length&&o.push(t)})),Object.keys(i).forEach((function(e){var t=i[e];0===t.children.length&&s.push(t)})),{nodes:i,inputs:o,outputs:s,placeholders:a,withControlFlow:n,withDynamicShape:r}},e.prototype.mapNode=function(e){var t=this,n=this.opMappers[e.op];if(void 0===n)throw new Error("Tensorflow Op is not supported: "+e.op);var r={name:e.name,op:n.dlOpName,category:n.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.substr(1):e})),inputs:[],children:[],params:{}};return n.params&&(r.params=n.params.reduce((function(n,r){var a=r.tfInputIndex,i=r.tfInputParamLength,o=r.type,s=void 0;if(void 0===a)switch(r.type){case"string":void 0===(s=t.getStringParam(e.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=t.getStringParam(e.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"number":void 0===(s=t.getNumberParam(e.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=t.getNumberParam(e.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"number[]":void 0===(s=t.getNumericArrayParam(e.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=t.getNumericArrayParam(e.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"bool":void 0===(s=t.getBoolParam(e.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=t.getBoolParam(e.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"shape":void 0===(s=t.getTensorShapeParam(e.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=t.getTensorShapeParam(e.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"dtype":void 0===(s=t.getDtypeParam(e.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=t.getDtypeParam(e.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+r.type+" for op: "+e.op)}return n[r.dlParamName]={value:s,inputIndex:a,type:o,inputParamLength:i},n}),{})),r},e.prototype.getStringParam=function(e,t,n,r){void 0===r&&(r=!1);var a=e[t];if(void 0!==a){var i=String.fromCharCode.apply(null,a.s);return r?i:i.toLowerCase()}return n},e.prototype.getBoolParam=function(e,t,n){var r=e[t];return r?r.b:n},e.prototype.getNumberParam=function(e,t,n){var r=e[t],a=r?r[r.value]:n;return"number"==typeof a?a:a.toInt()},e.prototype.getDtypeParam=function(e,t,n){var r=e[t];if(r&&r.type)switch(r.type){case compiled_api_1.DataType.DT_FLOAT:return"float32";case compiled_api_1.DataType.DT_INT32:return"int32";case compiled_api_1.DataType.DT_BOOL:return"bool";default:return n}return n},e.prototype.getTensorShapeParam=function(e,t,n){var r=e[t];return r&&r.shape?r.shape.dim.map((function(e){return"number"==typeof e.size?e.size:e.size.toInt()})):n},e.prototype.getNumericArrayParam=function(e,t,n){var r=e[t];return r?(r.list.f&&r.list.f.length?r.list.f:r.list.i).map((function(e){return"number"==typeof e?e:e.toInt()})):n},e}(),executeOp=function(e,t,n){switch(e.op){case"add":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.IHx)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"addN":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.QBD)(getParamValue("tensors",e,t,n))];case"mod":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.wQq)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"mul":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.dC7)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"div":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.hiC)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"floorDiv":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.qPi)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"sub":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.luU)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"minimum":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.LTh)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"maximum":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.gWQ)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"pow":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.sQ3)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"squaredDifference":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.$i)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$1=function(e,t,n){switch(e.op){case"abs":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.WnP)(getParamValue("x",e,t,n))];case"acos":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Khb)(getParamValue("x",e,t,n))];case"acosh":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.__u)(getParamValue("x",e,t,n))];case"asin":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ZRM)(getParamValue("x",e,t,n))];case"asinh":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.VfV)(getParamValue("x",e,t,n))];case"atan":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.z4N)(getParamValue("x",e,t,n))];case"atanh":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.C80)(getParamValue("x",e,t,n))];case"ceil":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.mDi)(getParamValue("x",e,t,n))];case"cos":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.mCk)(getParamValue("x",e,t,n))];case"cosh":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.f9Y)(getParamValue("x",e,t,n))];case"elu":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.pyx)(getParamValue("x",e,t,n))];case"erf":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.qNN)(getParamValue("x",e,t,n))];case"exp":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qqt)(getParamValue("x",e,t,n))];case"expm1":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.t$B)(getParamValue("x",e,t,n))];case"floor":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.GWj)(getParamValue("x",e,t,n))];case"log":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.cM7)(getParamValue("x",e,t,n))];case"log1p":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Krr)(getParamValue("x",e,t,n))];case"neg":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.W76)(getParamValue("x",e,t,n))];case"reciprocal":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.M25)(getParamValue("x",e,t,n))];case"relu":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.UYe)(getParamValue("x",e,t,n))];case"round":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.NMM)(getParamValue("x",e,t,n))];case"selu":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.U8D)(getParamValue("x",e,t,n))];case"sigmoid":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.XD2)(getParamValue("x",e,t,n))];case"sin":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.O$l)(getParamValue("x",e,t,n))];case"sign":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Xxe)(getParamValue("x",e,t,n))];case"sinh":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.R_K)(getParamValue("x",e,t,n))];case"softplus":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Wvh)(getParamValue("x",e,t,n))];case"sqrt":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__._b3)(getParamValue("x",e,t,n))];case"square":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.h62)(getParamValue("x",e,t,n))];case"tanh":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.AEp)(getParamValue("x",e,t,n))];case"tan":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ORZ)(getParamValue("x",e,t,n))];case"clipByValue":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iUl)(getParamValue("x",e,t,n),getParamValue("clipValueMin",e,t,n),getParamValue("clipValueMax",e,t,n))];case"rsqrt":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.hiC)((0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iD$)(1,"float32"),(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__._b3)(getTensor(e.inputNames[0],t,n)))];default:throw TypeError("Node type "+e.op+" is not implemented")}},TensorArray=function(){function e(t,n,r,a,i,o,s){this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.id=e.nextId++}return Object.defineProperty(e.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),e.prototype.clearAndClose=function(){this.tensors.forEach((function(e){return e.tensor.dispose()})),this.tensors=[],this.closed_=!0},e.prototype.size=function(){return this.tensors.length},e.prototype.read=function(e){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||e>=this.tensors.length)throw new Error("Tried to read from index "+e+", but array size is: "+this.tensors.length);var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+e+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor},e.prototype.readMany=function(e){var t=this;return e.map((function(e){return t.read(e)}))},e.prototype.write=function(e,t){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index "+e+", but array is not resizeable and size is: "+this.maxSize);var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+",\n          because the value dtype is "+t.dtype+", but TensorArray dtype is "+this.dtype+".");if(0===this.size()&&0===this.elementShape.length&&(this.elementShape=t.shape),this.assertShapesMatch(this.elementShape,t.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+e+"."),n&&n.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been read.");if(n&&n.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been written.");n.tensor=t,n.written=!0,this.tensors[e]=n},e.prototype.writeMany=function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,because the index size: "+e.length+" is not the same as tensors size: "+t.length+".");e.forEach((function(e,r){return n.write(e,t[r])}))},e.prototype.gather=function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+t);if(!e){e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.XeE)([],[0].concat(this.elementShape));var r=this.readMany(e);return this.assertShapesMatch(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.knu)(r,0)},e.prototype.concat=function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+e);if(0===this.size())return(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.XeE)([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return this.assertShapesMatch(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+r[0].shape+")"),(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.zoF)(r,0)},e.prototype.scatter=function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+t.dtype);if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+e.length+" vs. "+t.shape[0]);var n=Math.max.apply(Math,e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size ("+n+"  vs. "+this.maxSize+")");this.writeMany(e,(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.HHK)(t,0))},e.prototype.split=function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+t.dtype);var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        "+r+", and tensor's shape is: "+t.shape);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+e.length+"), and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:t.size/r,o=[];(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.lub)((function(){t=t.reshape([1,r,i]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],l=[1,e[s],i];o[s]=(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.tPi)(t,u,l).reshape(n.elementShape)}return o}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,o)},e.prototype.assertShapesMatch=function(e,t,n){void 0===n&&(n=""),_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.D5U.assert(this.arraysEqual(e,t),n+" Shapes "+e+" and "+t+" must match")},e.prototype.arraysEqual=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(-1!==e[n]&&-1!==t[n]&&e[n]!==t[n])return!1;return!0},e.nextId=0,e}();function executeOp$2(e,t,n){return __awaiter(this,void 0,void 0,(function(){var r,a,i,o,s,u,l,c,f,p,d,h,m,g,v,y,b,w,x,_,N,k,E,S,C,I,O,P,T,A,R,D,M,L,z;return __generator(this,(function(j){switch(j.label){case 0:switch(e.op){case"loopCond":return[3,1];case"switch":return[3,2];case"merge":return[3,4];case"enter":return[3,5];case"exit":return[3,6];case"nextIteration":return[3,7];case"tensorArray":return[3,8];case"tensorArrayWrite":return[3,9];case"tensorArrayRead":return[3,10];case"tensorArrayGather":return[3,11];case"tensorArrayScatter":return[3,12];case"tensorArrayConcat":return[3,13];case"tensorArraySplit":return[3,14];case"tensorArraySize":return[3,15];case"tensorArrayClose":return[3,16]}return[3,17];case 1:return[2,[getParamValue("pred",e,t,n)]];case 2:return r=getParamValue("pred",e,t,n),a=getParamValue("data",e,t,n),[4,r.data()];case 3:return[2,j.sent()[0]?[void 0,a]:[a,void 0]];case 4:return[2,(i=e.inputNames.find((function(e){return void 0!==getTensor(e,t,n)})))?[getTensor(i,t,n)]:void 0];case 5:return o=getParamValue("frameName",e,t,n),s=getParamValue("tensor",e,t,n),n.enterFrame(o),[2,[s]];case 6:return u=getParamValue("tensor",e,t,n),n.exitFrame(),[2,[u]];case 7:return l=getParamValue("tensor",e,t,n),n.nextIteration(),[2,[l]];case 8:return c=getParamValue("size",e,t,n),f=getParamValue("dtype",e,t,n),p=getParamValue("elementShape",e,t,n),d=getParamValue("dynamicSize",e,t,n),h=getParamValue("clearAfterRead",e,t,n),m=getParamValue("identicalElementShapes",e,t,n),g=getParamValue("name",e,t,n),v=new TensorArray(g,f,c,p,m,d,h),n.addTensorArray(v),[2,[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iD$)(v.id),(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iD$)(1)]];case 9:return y=getParamValue("tensorArrayId",e,t,n),b=getParamValue("index",e,t,n),w=getParamValue("tensor",e,t,n),n.getTensorArray(y).write(b,w),[2,[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iD$)(1)]];case 10:return x=getParamValue("tensorArrayId",e,t,n),_=getParamValue("index",e,t,n),[2,[n.getTensorArray(x).read(_)]];case 11:return N=getParamValue("tensorArrayId",e,t,n),k=getParamValue("indices",e,t,n),E=getParamValue("dtype",e,t,n),[2,[n.getTensorArray(N).gather(k,E)]];case 12:return S=getParamValue("tensorArrayId",e,t,n),C=getParamValue("indices",e,t,n),I=getParamValue("tensor",e,t,n),n.getTensorArray(S).scatter(C,I),[2,[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iD$)(1)]];case 13:return O=getParamValue("tensorArrayId",e,t,n),P=n.getTensorArray(O),T=getParamValue("dtype",e,t,n),[2,[P.concat(T)]];case 14:return A=getParamValue("tensorArrayId",e,t,n),R=getParamValue("tensor",e,t,n),D=getParamValue("lengths",e,t,n),n.getTensorArray(A).split(D,R),[2,[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iD$)(1)]];case 15:return M=getParamValue("tensorArrayId",e,t,n),L=n.getTensorArray(M),[2,[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iD$)(L.size(),"int32")]];case 16:return z=getParamValue("tensorArrayId",e,t,n),n.getTensorArray(z).clearAndClose(),[2,[]];case 17:throw TypeError("Node type "+e.op+" is not implemented")}}))}))}var executeOp$3=function(e,t,n){switch(e.op){case"conv1d":var r=getParamValue("stride",e,t,n),a=getParamValue("pad",e,t,n),i=getParamValue("dataFormat",e,t,n).toUpperCase(),o=getParamValue("dilation",e,t,n);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.PAt)(getParamValue("x",e,t,n),getParamValue("filter",e,t,n),r,a,i,o)];case"conv2d":r=getParamValue("strides",e,t,n),a=getParamValue("pad",e,t,n),i=getParamValue("dataFormat",e,t,n).toUpperCase();var s=getParamValue("dilations",e,t,n);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Tek)(getParamValue("x",e,t,n),getParamValue("filter",e,t,n),[r[1],r[2]],a,i,[s[0],s[1]])];case"conv2dTranspose":var u=getParamValue("outputShape",e,t,n);return r=getParamValue("strides",e,t,n),a=getParamValue("pad",e,t,n),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.bc)(getParamValue("x",e,t,n),getParamValue("filter",e,t,n),u,[r[1],r[2]],a)];case"depthwiseConv2d":return r=getParamValue("strides",e,t,n),a=getParamValue("pad",e,t,n),s=getParamValue("dilations",e,t,n),i=getParamValue("dataFormat",e,t,n).toUpperCase(),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.B10)(getParamValue("input",e,t,n),getParamValue("filter",e,t,n),[r[1],r[2]],a,i,[s[0],s[1]])];case"avgPool":r=getParamValue("strides",e,t,n),a=getParamValue("pad",e,t,n);var l=getParamValue("kernelSize",e,t,n);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.wS1)(getParamValue("x",e,t,n),[l[1],l[2]],[r[1],r[2]],a)];case"maxPool":return r=getParamValue("strides",e,t,n),a=getParamValue("pad",e,t,n),l=getParamValue("kernelSize",e,t,n),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__._sB)(getParamValue("x",e,t,n),[l[1],l[2]],[r[1],r[2]],a)];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$4=function(e,t,n){switch(e.op){case"fill":var r=getParamValue("shape",e,t,n),a=getParamValue("dtype",e,t,n),i=getParamValue("value",e,t,n);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.hlL)(r,i,a)];case"linspace":var o=getParamValue("start",e,t,n),s=getParamValue("stop",e,t,n),u=getParamValue("num",e,t,n);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.SX3)(o,s,u)];case"oneHot":var l=getParamValue("indices",e,t,n),c=getParamValue("depth",e,t,n),f=getParamValue("onValue",e,t,n),p=getParamValue("offValue",e,t,n);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.lfX)(l,c,f,p)];case"ones":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iUs)(getParamValue("shape",e,t,n),getParamValue("dtype",e,t,n))];case"onesLike":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.JpU)(getParamValue("x",e,t,n))];case"randomUniform":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.LGj)(getParamValue("shape",e,t,n),getParamValue("minval",e,t,n),getParamValue("maxval",e,t,n),getParamValue("dtype",e,t,n))];case"range":o=getParamValue("start",e,t,n);var d=getParamValue("stop",e,t,n),h=getParamValue("step",e,t,n);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.w6H)(o,d,h,getParamValue("dtype",e,t,n))];case"truncatedNormal":r=getParamValue("shape",e,t,n);var m=getParamValue("mean",e,t,n),g=getParamValue("stdDev",e,t,n),v=getParamValue("seed",e,t,n);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Xu6)(r,m,g,getParamValue("dtype",e,t,n),v)];case"zeros":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.lls)(getParamValue("shape",e,t,n),getParamValue("dtype",e,t,n))];case"zerosLike":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.P84)(getParamValue("x",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}};function executeOp$5(e,t,n){return __awaiter(this,void 0,void 0,(function(){var r,a,i,o,s;return __generator(this,(function(u){switch(u.label){case 0:switch(e.op){case"nonMaxSuppression":return[3,1];case"whereAsync":return[3,3]}return[3,5];case 1:return r=getParamValue("boxes",e,t,n),a=getParamValue("scores",e,t,n),i=getParamValue("maxOutputSize",e,t,n),o=getParamValue("iouThreshold",e,t,n),s=getParamValue("scoreThreshold",e,t,n),[4,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.BHj.nonMaxSuppressionAsync(r,a,i,o,s)];case 2:case 4:return[2,[u.sent()]];case 3:return[4,(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.itS)(getParamValue("condition",e,t,n))];case 5:throw TypeError("Node type "+e.op+" is not implemented")}}))}))}var executeOp$6=function(e,t,n){if("topK"===e.op){var r=getParamValue("x",e,t,n),a=getParamValue("k",e,t,n),i=getParamValue("sorted",e,t,n),o=(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.hg7)(r,a,i);return[o.values,o.indices]}throw TypeError("Node type "+e.op+" is not implemented")},executeOp$7=function(e,t,n){switch(e.op){case"const":return t[e.name];case"placeholder":var r=getParamValue("default",e,t,n);return[getTensor(e.name,t,n)||r];case"identity":case"stopGradient":case"fakeQuantWithMinMaxVars":return[getParamValue("x",e,t,n)];case"snapshot":return[getParamValue("x",e,t,n).clone()];case"shape":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.RRF)(getParamValue("x",e,t,n).shape,"int32")];case"size":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iD$)(getParamValue("x",e,t,n).size,"int32")];case"rank":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iD$)(getParamValue("x",e,t,n).rank,"int32")];case"noop":return[];case"print":var a=getParamValue("x",e,t,n),i=getParamValue("data",e,t,n),o=getParamValue("message",e,t,n),s=getParamValue("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(var u=0;u<i.length;u++)console.log(Array.prototype.slice.call(i[0].dataSync()).slice(0,s));return[a];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$8=function(e,t,n){switch(e.op){case"resizeBilinear":var r=getParamValue("images",e,t,n),a=getParamValue("size",e,t,n),i=getParamValue("alignCorners",e,t,n);return[_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.BHj.resizeBilinear(r,[a[0],a[1]],i)];case"resizeNearestNeighbor":return r=getParamValue("images",e,t,n),a=getParamValue("size",e,t,n),i=getParamValue("alignCorners",e,t,n),[_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.BHj.resizeNearestNeighbor(r,[a[0],a[1]],i)];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$9=function(e,t,n){switch(e.op){case"equal":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.DgJ)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"notEqual":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Quu)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"greater":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.pjt)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"greaterEqual":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.brS)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"less":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.d9m)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"lessEqual":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.zN1)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"logicalAnd":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.HvI)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"logicalNot":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.hJK)(getParamValue("a",e,t,n))];case"logicalOr":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.K5V)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"where":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.arb)(getParamValue("condition",e,t,n),getParamValue("a",e,t,n),getParamValue("b",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$10=function(e,t,n){switch(e.op){case"matMul":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.OI3)(getParamValue("a",e,t,n),getParamValue("b",e,t,n),getParamValue("transposeA",e,t,n),getParamValue("transposeB",e,t,n))];case"transpose":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.p4s)(getParamValue("x",e,t,n),getParamValue("perm",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$11=function(e,t,n){switch(e.op){case"batchNormalization":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.F08)(getParamValue("x",e,t,n),getParamValue("mean",e,t,n),getParamValue("variance",e,t,n),getParamValue("epsilon",e,t,n),getParamValue("scale",e,t,n),getParamValue("offset",e,t,n))];case"localResponseNormalization":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.G9k)(getParamValue("x",e,t,n),getParamValue("radius",e,t,n),getParamValue("bias",e,t,n),getParamValue("alpha",e,t,n),getParamValue("beta",e,t,n))];case"softmax":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.XAC)(getParamValue("x",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$12=function(e,t,n){switch(e.op){case"max":var r=getParamValue("axis",e,t,n),a=getParamValue("keepDims",e,t,n);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Fp7)(getParamValue("x",e,t,n),r,a)];case"mean":return r=getParamValue("axis",e,t,n),a=getParamValue("keepDims",e,t,n),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.J69)(getParamValue("x",e,t,n),r,a)];case"min":return r=getParamValue("axis",e,t,n),a=getParamValue("keepDims",e,t,n),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.VV$)(getParamValue("x",e,t,n),r,a)];case"sum":return r=getParamValue("axis",e,t,n),a=getParamValue("keepDims",e,t,n),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Smz)(getParamValue("x",e,t,n),r,a)];case"all":return r=getParamValue("axis",e,t,n),a=getParamValue("keepDims",e,t,n),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.$6P)(getParamValue("x",e,t,n),r,a)];case"any":return r=getParamValue("axis",e,t,n),a=getParamValue("keepDims",e,t,n),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.YjB)(getParamValue("x",e,t,n),r,a)];case"argMax":return r=getParamValue("axis",e,t,n),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.NqF)(getParamValue("x",e,t,n),r)];case"argMin":return r=getParamValue("axis",e,t,n),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.vHJ)(getParamValue("x",e,t,n),r)];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$13=function(e,t,n){switch(e.op){case"concat":var r=getParamValue("axis",e,t,n),a=getParamValue("tensors",e,t,n);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.zoF)(a,r)];case"gather":r=getParamValue("axis",e,t,n);var i=getParamValue("x",e,t,n),o=getParamValue("indices",e,t,n);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Iqj)(i,o,r)];case"reverse":return r=getParamValue("axis",e,t,n),i=getParamValue("x",e,t,n),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.GYS)(i,r)];case"slice":var s=getParamValue("begin",e,t,n),u=getParamValue("size",e,t,n);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.tPi)(getParamValue("x",e,t,n),s,u)];case"stridedSlice":s=getParamValue("begin",e,t,n);var l=getParamValue("end",e,t,n),c=getParamValue("strides",e,t,n),f=getParamValue("beginMask",e,t,n),p=getParamValue("endMask",e,t,n),d=getParamValue("ellipsisMask",e,t,n),h=getParamValue("newAxisMask",e,t,n),m=getParamValue("shrinkAxisMask",e,t,n),g=getParamValue("x",e,t,n);if(1===s.length&&g.shape.length>1)for(var v=1;v<g.shape.length;v++)s.push(0),l.push(g.shape[v]),c.push(c[0]);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.NXj)(g,s,l,c,f,p,d,h,m)];case"stack":return(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.lub)((function(){var r=getParamValue("axis",e,t,n),a=getParamValue("tensors",e,t,n),i=a[0].shape,o=a[0].squeeze().shape,s=a.map((function(e){var t=_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.D5U.arraysEqual(e.shape,i);if(!t&&!_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.D5U.arraysEqual(e.squeeze().shape,o))throw new Error("the input tensors shape does not match");return t?e:e.reshape(i)}));return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.knu)(s,r)]}));case"unstack":return(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.lub)((function(){var r=getParamValue("axis",e,t,n),a=getParamValue("tensor",e,t,n);return(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.HHK)(a,r)}));case"tile":var y=getParamValue("reps",e,t,n);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Gg6)(getParamValue("x",e,t,n),y)];case"split":r=getParamValue("axis",e,t,n);var b=getParamValue("numOrSizeSplits",e,t,n);return(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Vl2)(getParamValue("x",e,t,n),b,r);default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$14=function(e,t,n){switch(e.op){case"cast":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.pju)(getParamValue("x",e,t,n),getParamValue("dtype",e,t,n))];case"expandDims":var r=getParamValue("axis",e,t,n);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.dt4)(getParamValue("x",e,t,n),r)];case"squeeze":return r=getParamValue("axis",e,t,n),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.L9e)(getParamValue("x",e,t,n),r)];case"reshape":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.XLQ)(getParamValue("x",e,t,n),getParamValue("shape",e,t,n))];case"pad":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.vku)(getParamValue("x",e,t,n),split$1(getParamValue("padding",e,t,n),2),getParamValue("constantValue",e,t,n))];case"spaceToBatchND":var a=getParamValue("blockShape",e,t,n),i=split$1(getParamValue("paddings",e,t,n),2);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.fBT)(getParamValue("x",e,t,n),a,i)];case"batchToSpaceND":a=getParamValue("blockShape",e,t,n);var o=split$1(getParamValue("crops",e,t,n),2);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.E4h)(getParamValue("x",e,t,n),a,o)];default:throw TypeError("Node type "+e.op+" is not implemented")}};function executeOp$15(e,t,n){switch(e.category){case"arithmetic":return executeOp(e,t,n);case"basic_math":return executeOp$1(e,t,n);case"control":return executeOp$2(e,t,n);case"convolution":return executeOp$3(e,t,n);case"creation":return executeOp$4(e,t,n);case"dynamic":return executeOp$5(e,t,n);case"evaluation":return executeOp$6(e,t,n);case"image":return executeOp$8(e,t,n);case"graph":return executeOp$7(e,t,n);case"logical":return executeOp$9(e,t,n);case"matrices":return executeOp$10(e,t,n);case"normalization":return executeOp$11(e,t,n);case"reduction":return executeOp$12(e,t,n);case"slice_join":return executeOp$13(e,t,n);case"transformation":return executeOp$14(e,t,n);default:throw TypeError("Node type "+e.op+" is not implemented")}}var ExecutionContext=function(){function e(e,t){this.weightMap=e,this.tensorArrayMap=t,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return e.prototype.newFrame=function(e,t){return{id:e,frameName:t,iterationId:0}},Object.defineProperty(e.prototype,"currentContext",{get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),e.prototype.generateCurrentContextIds=function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e},e.prototype.contextIdforContexts=function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":e.frameName+"-"+e.iterationId})).join("/"):""},e.prototype.enterFrame=function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},e.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},e.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},e.prototype.getWeight=function(e){return this.weightMap[e]},e.prototype.addTensorArray=function(e){this.tensorArrayMap[e.id]=e},e.prototype.getTensorArray=function(e){return this.tensorArrayMap[e]},e}(),GraphExecutor=function(){function e(e){this.graph=e,this.compiledOrder=[],this._weightMap={},this.placeholders=e.placeholders,this._outputs=e.outputs,this.compile()}return Object.defineProperty(e.prototype,"weightMap",{get:function(){return this._weightMap},set:function(e){var t=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this.weightIds=[].concat.apply([],t),this._weightMap=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this.placeholders.map((function(e){return{name:e.name,shape:e.params.shape?e.params.shape.value:void 0,dtype:e.params.dtype?e.params.dtype.value:void 0}}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.params.shape?e.params.shape.value:void 0,dtype:e.params.dtype?e.params.dtype.value:void 0}}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputNodes",{get:function(){return this.placeholders.map((function(e){return e.name}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputNodes",{get:function(){return this.outputs.map((function(e){return e.name}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isControlFlowModel",{get:function(){return this.graph.withControlFlow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDynamicShapeModel",{get:function(){return this.graph.withDynamicShape},enumerable:!0,configurable:!0}),e.prototype.compile=function(){if(!this.graph.withControlFlow&&!this.graph.withDynamicShape)for(var e=this.graph.inputs.slice(),t={};e.length>0;){var n=e.pop();t[n.name]=!0,this.compiledOrder.push(n),n.children.forEach((function(n){!t[n.name]&&n.inputNames.every((function(e){var n=getNodeNameAndIndex(e)[0];return t[n]}))&&e.push(n)}))}},e.prototype.execute=function(e,t){var n=this;this.checkInput(e),this.checkInputShapeAndType(e);var r={};return(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.lub)((function(){var a=new ExecutionContext(n._weightMap,r),i=n.compiledOrder.reduce((function(e,t){return e[t.name]=executeOp$15(t,e,a),e}),__assign({},n.weightMap,e));return n.findOutputs(i,a,t)}))},e.prototype.executeAsync=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,r,a,i,o,s,u,l=this;return __generator(this,(function(c){switch(c.label){case 0:return this.checkInput(e),this.checkInputShapeAndType(e),n={},r=new ExecutionContext(this._weightMap,n),[4,this.executeWithControlFlow(e,r)];case 1:return a=c.sent(),i=this.findOutputs(a,r,t),o=Object.keys(i).map((function(e){return i[e].id})),s=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))})),u=[].concat.apply([],s),Object.keys(a).forEach((function(e){a[e].forEach((function(e){e&&-1===o.indexOf(e.id)&&-1===u.indexOf(e.id)&&-1===l.weightIds.indexOf(e.id)&&e.dispose()}))})),[2,i]}}))}))},e.prototype.executeWithControlFlow=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,r,a,i;return __generator(this,(function(o){switch(o.label){case 0:n=this.graph.inputs.map((function(e){return{node:e,contexts:t.currentContext}})),r=__assign({},this.weightMap,e),a={},o.label=1;case 1:return n.length>0?(i=this.processStack(n,t,r,a),[4,Promise.all(i)]):[3,3];case 2:return o.sent(),[3,1];case 3:return[2,r]}}))}))},e.prototype.processStack=function(e,t,n,r){for(var a=this,i=[],o=function(){var o=e.pop();t.currentContext=o.contexts;var u="";"enter"===o.node.op&&getParamValue("isConstant",o.node,n,t)&&(u=getNodeNameAndIndex(o.node.name,t)[0]);var l=executeOp$15(o.node,n,t);u||(u=getNodeNameAndIndex(o.node.name,t)[0]);var c=t.currentContext;l instanceof Promise?i.push(l.then((function(i){return n[u]=i,t.currentContext=c,a.processChildNodes(o.node,e,t,n,r),i}))):(n[u]=l,s.processChildNodes(o.node,e,t,n,r))},s=this;e.length>0;)o();return i},e.prototype.processChildNodes=function(e,t,n,r,a){e.children.forEach((function(e){var i=getNodeNameAndIndex(e.name,n)[0];a[i]||("merge"===e.op?e.inputNames.some((function(e){return!!getTensor(e,r,n)}))&&(a[i]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!getTensor(e,r,n)}))&&(a[i]=!0,t.push({contexts:n.currentContext,node:e})))}))},e.prototype.findOutputs=function(e,t,n){return!n||n instanceof Array||(n=[n]),(n||this.graph.outputs.map((function(e){return e.name}))).reduce((function(n,r){return n[r]=getTensor(r,e,t),n}),{})},e.prototype.dispose=function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))},e.prototype.checkInputShapeAndType=function(e){this.placeholders.forEach((function(t){var n=e[t.name][0];if(t.params.shape&&t.params.shape.value){var r=t.params.shape.value,a=r.length===n.shape.length&&n.shape.every((function(e,t){return-1===r[t]||r[t]===e}));_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.D5U.assert(a,"The shape of dict['"+t.name+"'] provided in model.execute(dict) must be ["+r+"], but was ["+n.shape+"]")}t.params.dtype&&t.params.dtype.value&&_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.D5U.assert(n.dtype===t.params.dtype.value,"The dtype of dict['"+t.name+"'] provided in model.execute(dict) must be "+t.params.dtype.value+", but was "+n.dtype)}))},e.prototype.checkInput=function(e){var t=this,n=Object.keys(e),r=[],a=[];if(this.inputNodes.forEach((function(e){-1===n.indexOf(e)&&r.push(e)})),n.forEach((function(e){-1===t.inputNodes.indexOf(e)&&a.push(e)})),r.length>0)throw new Error("The dict provided in model.execute(dict) has the keys ["+n+"], but is missing the required keys: ["+r+"].");if(a.length>0)throw new Error("The dict provided in model.execute(dict) has unused keys: ["+a+"]. Please provide only the following keys: ["+this.inputNodes+"].")},e}(),FrozenModel=function(){function e(e,t,n){this.modelUrl=e,this.weightManifestUrl=t,this.requestOption=n,this.version="n/a"}return Object.defineProperty(e.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),e.prototype.findIOHandler=function(){var e=[this.modelUrl,this.weightManifestUrl];if(this.requestOption)this.handler=_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.io.browserHTTPRequest(e,this.requestOption);else{var t=_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.io.getLoadHandlers(e);if(0===t.length)t.push(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.io.browserHTTPRequest(e,this.requestOption));else if(t.length>1)throw new Error("Found more than one ("+t.length+") load handlers for URL '"+[e]+"'");this.handler=t[0]}},e.prototype.load=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n;return __generator(this,(function(r){switch(r.label){case 0:if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,this.handler.load()];case 1:return e=r.sent(),t=compiled_api_1.GraphDef.decode(new Uint8Array(e.modelTopology)),this.version=t.versions.producer+"."+t.versions.minConsumer,n=_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.io.decodeWeights(e.weightData,e.weightSpecs),this.executor=new GraphExecutor(OperationMapper.Instance.transformGraph(t)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),[2,!0]}}))}))},e.prototype.predict=function(e,t){return this.execute(e,this.outputNodes)},e.prototype.constructTensorMap=function(e){var t=e instanceof _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.esB?[e]:e;if(t.length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the frozen model has "+this.inputNodes.length+" placeholders, while there are "+t.length+" input tensors.");return this.inputNodes.reduce((function(e,n,r){return e[n]=t[r],e}),{})},e.prototype.execute=function(e,t){if(t=t||this.outputNodes,(e instanceof _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.esB||Array.isArray(e))&&(e=this.constructTensorMap(e)),this.executor.isControlFlowModel||this.executor.isDynamicShapeModel)throw new Error("The model contains control flow or dynamic shape ops, please use executeAsync method");var n=this.executor.execute(this.convertTensorMapToTensorsMap(e),t),r=Object.keys(n);return Array.isArray(t)&&t.length>1?t.map((function(e){return n[e]})):n[r[0]]},e.prototype.executeAsync=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,r;return __generator(this,(function(a){switch(a.label){case 0:if(!this.executor.isControlFlowModel&&!this.executor.isDynamicShapeModel)throw new Error("The model does not contain control flow or dynamic shape ops, please use execute method for better performance.");return t=t||this.outputNodes,(e instanceof _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.esB||Array.isArray(e))&&(e=this.constructTensorMap(e)),[4,this.executor.executeAsync(this.convertTensorMapToTensorsMap(e),t)];case 1:return n=a.sent(),r=Object.keys(n),[2,Array.isArray(t)&&t.length>1?t.map((function(e){return n[e]})):n[r[0]]]}}))}))},e.prototype.convertTensorMapToTensorsMap=function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})},e.prototype.dispose=function(){this.executor.dispose()},e}();function loadFrozenModel(e,t,n){return __awaiter(this,void 0,void 0,(function(){var r;return __generator(this,(function(a){switch(a.label){case 0:return[4,(r=new FrozenModel(e,t,n)).load()];case 1:return a.sent(),[2,r]}}))}))}var version="0.5.9"},313:function(e,t,n){"use strict";n.d(t,{$6P:function(){return Wi},$i:function(){return Oo},$r2:function(){return vs},AEp:function(){return li},B10:function(){return Ei},B90:function(){return be},BHj:function(){return ks},C80:function(){return ja},CnO:function(){return Vi},CnY:function(){return ye},D5U:function(){return B},DgJ:function(){return Zi},E4h:function(){return ia},F08:function(){return hi},Fp7:function(){return Gi},G9k:function(){return $o},GWj:function(){return Ha},GYS:function(){return Ti},Gg6:function(){return Ca},Gi7:function(){return Ji},HHK:function(){return Oa},HvI:function(){return Ro},IHx:function(){return fo},Iqj:function(){return Xo},Izb:function(){return qr},J69:function(){return Yi},JHc:function(){return fi},JpU:function(){return lt},K5V:function(){return Mo},Khb:function(){return Ra},Krr:function(){return Ga},L9e:function(){return Ea},LGj:function(){return _a},LTh:function(){return xo},M25:function(){return Ja},MNy:function(){return $r},NMM:function(){return Qa},NT4:function(){return So},NXj:function(){return ts},Nbs:function(){return si},NqF:function(){return $i},O$l:function(){return ni},OI3:function(){return Ii},ORZ:function(){return ui},P84:function(){return ct},PAt:function(){return Ni},QBD:function(){return po},Qqt:function(){return qa},Quu:function(){return lo},RRF:function(){return Ge},R_K:function(){return ri},SX3:function(){return tt},SmN:function(){return Fi},Smz:function(){return Qi},Tek:function(){return ki},U8D:function(){return Wo},UYe:function(){return Uo},U_I:function(){return Si},VD$:function(){return Q},VV$:function(){return Xi},VfV:function(){return La},ViN:function(){return me},Vl2:function(){return Kr},W76:function(){return Xa},WnP:function(){return Aa},Wvh:function(){return ai},XAC:function(){return Ue},XD2:function(){return ei},XLQ:function(){return Na},XeE:function(){return He},Xu6:function(){return Ia},Xxe:function(){return ti},YjB:function(){return qi},ZRM:function(){return Ma},ZaL:function(){return Hr},__u:function(){return Da},_b3:function(){return ii},_sB:function(){return Li},arb:function(){return zo},bVb:function(){return di},bc:function(){return Ci},brS:function(){return no},cM7:function(){return Ka},csF:function(){return pi},d9m:function(){return io},dC7:function(){return Eo},dt4:function(){return ca},esB:function(){return X},f9Y:function(){return Ua},fBT:function(){return ka},gME:function(){return Wr},gWQ:function(){return bo},gaJ:function(){return Iu},glt:function(){return Is},h62:function(){return oi},hJK:function(){return Do},hg7:function(){return rs},hi7:function(){return Fo},hiC:function(){return go},hlL:function(){return et},iD$:function(){return Ke},iUl:function(){return Fa},iUs:function(){return Qe},io:function(){return wu},itS:function(){return jo},iyy:function(){return fa},jTM:function(){return Cu},jZU:function(){return Bi},knu:function(){return Sa},lfX:function(){return ha},lls:function(){return Ze},luU:function(){return To},lub:function(){return ve},m7h:function(){return ku},mCk:function(){return Va},mDi:function(){return Ba},nGf:function(){return xa},p0P:function(){return Ui},p4s:function(){return qo},p_:function(){return es},p_j:function(){return zu},pjt:function(){return to},pju:function(){return oa},pyx:function(){return Bo},qNN:function(){return Wa},qPi:function(){return yo},sQ3:function(){return Co},t$B:function(){return $a},tPi:function(){return ji},vHJ:function(){return Hi},vku:function(){return ma},w6H:function(){return nt},wOQ:function(){return Xe},wQq:function(){return No},wS1:function(){return zi},z4N:function(){return za},zN1:function(){return oo},zoF:function(){return Ur}});var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function a(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};function o(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function u(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function l(e,t,n){return Math.max(e,Math.min(t,n))}function c(e,t){var n=Math.random();return t*n+(1-n)*e}function f(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function p(e,t,n){void 0===n&&(n=""),f(y(e,t),n+" Shapes "+e+" and "+t+" must match")}function d(e){f(null!=e,"The input to the tensor constructor must be a non-null value.")}function h(e,t){if(void 0===t&&(t=[]),Array.isArray(e))for(var n=0;n<e.length;++n)h(e[n],t);else t.push(e);return t}function m(e){var t=e;if(P(e))return[e.length];if(!Array.isArray(e))return[];for(var n=[];t instanceof Array;)n.push(t.length),t=t[0];return e instanceof Array&&g(e,n,[]),n}function g(e,t,n){if(n=n||[],e instanceof Array){f(t.length>0,(function(){return"Element arr["+n.join("][")+"] should be a primitive, but is an array of "+e.length+" elements"})),f(e.length===t[0],(function(){return"Element arr["+n.join("][")+"] should have "+t[0]+" elements, but has "+e.length+" elements"}));for(var r=t.slice(1),a=0;a<e.length;++a)g(e[a],r,n.concat(a))}else f(0===t.length,(function(){return"Element arr["+n.join("][")+"] is a primitive, but should be an array of "+t[0]+" elements"}))}function v(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function y(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function b(e){return e%1==0}function w(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function x(e){for(var t=Math.floor(Math.sqrt(e));t>1;--t)if(e%t==0)return[t,e/t];return[1,e]}function _(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function N(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise((function(r,a){var i=0;!function o(){if(e())r();else{var s=t(++i);null!=n&&i>=n?a():setTimeout(o,s)}}()}))}function k(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found "+e[a]+" at dim "+a);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var i=e.slice();return i[r]=t/n,i}function E(e,t){for(var n=[],r=[],a=0,i=0;i<e.length;++i){if(null!=t){if(t[a]===i&&1!==e[i])throw new Error("Can't squeeze axis "+i+" since its dim '"+e[i]+"' is not 1");(null==t[a]||t[a]>i)&&1===e[i]&&(n.push(e[i]),r.push(i)),t[a]<=i&&a++}1!==e[i]&&(n.push(e[i]),r.push(i))}return{newShape:n,keptDims:r}}function S(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function C(e,t,n){if("float32"===t)for(var r=0;r<e.length;r++)if(isNaN(e[r]))throw Error("The result of the '"+n+"' has NaNs.")}function I(e,t){if("float32"!==t)for(var n=0;n<e.length;n++)if(isNaN(e[n]))throw Error("NaN is not a valid value for dtype: '"+t+"'.")}function O(e,t){return"complex64"!==t&&("float32"!==t||"complex64"===e)&&("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)}function P(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function T(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function A(e){return!!(e&&e.constructor&&e.call&&e.apply)}function R(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function D(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function M(e,t,n){return function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t)?e:(Array.isArray(e)&&(e=h(e)),function(e,t,n){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return n&&I(e,t),new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),a=0;a<r.length;++a)0!==Math.round(e[a])&&(r[a]=1);return r}throw new Error("Unknown data type "+t)}(e,t,n))}function L(e,t){for(var n=z(e,t),r=0;r<n.length;r++)n[r]=1;return n}function z(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function j(){if("undefined"!=typeof performance)return performance.now();if("undefined"!=typeof process){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}throw new Error("Cannot measure time in this environment. You should run tf.js in the browser or in Node.js")}var B=Object.freeze({shuffle:u,clamp:l,randUniform:c,distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n},assert:f,assertShapesMatch:p,assertNonNull:d,flatten:h,inferShape:m,sizeFromShape:v,isScalarShape:function(e){return 0===e.length},arraysEqual:y,isInt:b,tanh:w,sizeToSquarishShape:x,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return u(t),t},rightPad:_,repeatedTry:N,inferFromImplicitShape:k,squeezeShape:E,getTypedArrayFromDType:S,checkComputationForNaN:C,checkConversionForNaN:I,hasEncodingLoss:O,isTypedArray:P,bytesPerElement:T,isFunction:A,nearestDivisor:R,computeStrides:D,toTypedArray:M,makeOnesTypedArray:L,makeZerosTypedArray:z,now:j}),F=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new V)}return e.prototype.profileKernel=function(e,t){var n,r=this,a=this.backendTimer.time((function(){n=t()}));return(Array.isArray(n)?n:[n]).forEach((function(t){var n=t.dataSync();C(n,t.dtype,e),a.then((function(a){r.logger.logKernelProfile(e,t,n,a.kernelMs)}))})),n},e}(),V=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r){var a=_(r+"ms",9),i=_(e,25),o=t.rank,s=t.size,u=_(t.shape.toString(),14);console.log("%c"+i+"\t%c"+a+"\t%c"+o+"D "+u+"\t%c"+s,"font-weight:bold","color:red","color:blue","color: orange")},e}();function U(e,t,n,r){var a=D(t),i=function(e,t,n,r){var a=v(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?$(e):e;if(s>1)for(var l=0;l<a/i;l++)for(var c=l*i,f=0;f<i;f++)o[f]=Math.max(o[f],W(u[c+f],0).length);return o}(e,t,n,a),o=t.length,s=q(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+o),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function W(e,t){return _(Array.isArray(e)?parseFloat(e[0].toFixed(7))+" + "+parseFloat(e[1].toFixed(7))+"j":parseFloat(e.toFixed(7)).toString(),t)}function q(e,t,n,r,a,i){void 0===i&&(i=!0);var o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u)return"complex64"===n?[W($(e)[0],0)]:[e[0].toString()];if(1===u){if(s>20){var l=3*o,c=Array.from(e.subarray(0,l)),f=Array.from(e.subarray(s-3*o,s));return"complex64"===n&&(c=$(c),f=$(f)),["["+c.map((function(e,t){return W(e,a[t])})).join(", ")+", ..., "+f.map((function(e,t){return W(e,a[s-3+t])})).join(", ")+"]"]}return["["+("complex64"===n?$(e):Array.from(e)).map((function(e,t){return W(e,a[t])})).join(", ")+"]"]}var p=t.slice(1),d=r.slice(1),h=r[0]*o,m=[];if(s>20){for(var g=0;g<3;g++){var v=(y=g*h)+h;m.push.apply(m,q(e.subarray(y,v),p,n,d,a,!1))}for(m.push("..."),g=s-3;g<s;g++)v=(y=g*h)+h,m.push.apply(m,q(e.subarray(y,v),p,n,d,a,g===s-1))}else for(g=0;g<s;g++){var y;v=(y=g*h)+h,m.push.apply(m,q(e.subarray(y,v),p,n,d,a,g===s-1))}var b=2===u?",":"";for(m[0]="["+m[0]+b,g=1;g<m.length-1;g++)m[g]=" "+m[g]+b;var w=",\n";for(g=2;g<u;g++)w+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(i?"":w),m}function $(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var H=function(){function e(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=v(e),null!=n){var r=n.length;f(r===this.size,"Length of values '"+r+"' does not match the size inferred by the shape '"+this.size+"'.")}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||S(t,v(this.shape)),this.strides=D(e)}return e.prototype.set=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];0===t.length&&(t=[0]),f(t.length===this.rank,"The number of provided coordinates ("+t.length+") must match the rank ("+this.rank+")");var r=this.locToIndex(t);this.values[r]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return this.values[n]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return X.make(this.shape,{values:this.values},this.dtype)},e}(),K=null,G=null;function Y(e){K=e}var X=function(){function e(t,n,r,a){this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=v(t),null!=r&&f(this.size===r.length,"Based on the provided shape, ["+t+"], and dtype "+this.dtype+", the tensor should have "+this.size+" values but has "+r.length),this.strides=D(t),this.dataId=null!=a?a:{},this.id=e.nextId++,this.rankType=this.rank<5?this.rank.toString():"higher",K().registerTensor(this),null!=r&&K().write(this.dataId,r)}return e.make=function(t,n,r){return new e(t,r,n.values,n.dataId)},e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),f(1===this.size,"The array must have only 1 element."),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.asType=function(e){return this.throwIfDisposed(),G.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];f(e.length===this.rank,"Number of coordinates in get() must match the rank of the tensor"),f("complex64"!==this.dtype,"Tensor.get() is not supported for complex64 tensors yet."),this.throwIfDisposed(),0===e.length&&(e=[0]);for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return this.dataSync()[n]},e.prototype.buffer=function(){return G.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.data=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){return this.throwIfDisposed(),[2,K().read(this.dataId)]}))}))},e.prototype.dataSync=function(){return this.throwIfDisposed(),K().readSync(this.dataId)},e.prototype.dispose=function(){this.isDisposed||(K().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),G.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),G.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),G.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),G.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),G.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),G.clone(this)},e.prototype.toString=function(e){return void 0===e&&(e=!1),U(this.dataSync(),this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),G.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),G.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),G.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),G.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),G.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),G.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),G.reverse(this,e)},e.prototype.concat=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),G.concat([this,e],t)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),G.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),G.stack([this,e],t)},e.prototype.unstack=function(e,t){return void 0===t&&(t=0),G.unstack(this,t)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),G.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,a){return void 0===n&&(n=.001),this.throwIfDisposed(),G.batchNormalization(this,e,t,n,r,a)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),G.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),G.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),G.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),G.sum(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),G.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),G.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),G.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),G.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),G.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),G.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),G.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),G.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),G.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),G.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),G.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),G.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),G.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),G.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),G.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),G.div(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),G.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),G.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),G.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),G.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),G.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),G.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),G.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),G.modStrict(this,e)},e.prototype.squaredDifference=function(e){return this.throwIfDisposed(),G.squaredDifference(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),G.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),G.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),G.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),G.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),G.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),G.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),G.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),G.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),G.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),G.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),G.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),G.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),G.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),G.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),G.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),G.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),G.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),G.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),G.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),G.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),G.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),G.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),G.sign(this)},e.prototype.exp=function(){return this.throwIfDisposed(),G.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),G.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),G.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),G.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),G.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),G.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),G.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),G.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),G.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),G.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),G.relu(this)},e.prototype.elu=function(){return this.throwIfDisposed(),G.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),G.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),G.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),G.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),G.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),G.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),G.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),G.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),G.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),G.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),G.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),G.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),G.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),G.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),G.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),G.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),G.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),G.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),G.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),G.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),G.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),G.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),G.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),G.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),G.softmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),G.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),G.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,a,i){return void 0===r&&(r="NWC"),void 0===a&&(a=1),this.throwIfDisposed(),G.conv1d(this,e,t,n,r,a,i)},e.prototype.conv2d=function(e,t,n,r,a,i){return void 0===r&&(r="NHWC"),void 0===a&&(a=[1,1]),this.throwIfDisposed(),G.conv2d(this,e,t,n,r,a,i)},e.prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),G.conv2dTranspose(this,e,t,n,r,a)},e.prototype.depthwiseConv2D=function(e,t,n,r,a,i){return void 0===r&&(r="NHWC"),void 0===a&&(a=[1,1]),this.throwIfDisposed(),G.depthwiseConv2d(this,e,t,n,r,a,i)},e.prototype.separableConv2d=function(e,t,n,r,a,i){return void 0===a&&(a=[1,1]),void 0===i&&(i="NHWC"),this.throwIfDisposed(),G.separableConv2d(this,e,t,n,r,a,i)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),G.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),G.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),G.localResponseNormalization(this,e,t,n,r)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),J.variable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),G.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),G.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),G.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),G.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),this.throwIfDisposed(),G.stridedSlice(this,e,t,n,r,a)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),G.depthToSpace(this,e,t)},e.nextId=0,e}();Object.defineProperty(X,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.shape&&null!=e.dtype}});var J=function(e){function t(n,r,a){void 0===r&&(r=!0);var i=e.call(this,n.shape,n.dtype,null,n.dataId)||this;i.trainable=r,i.name=a,null==i.name&&(i.name=t.nextVarId.toString(),t.nextVarId++);try{K().registerVariable(i)}catch(e){throw K().disposeTensor(i),e}return i}return a(t,e),t.variable=function(e,n,r,a){return void 0===n&&(n=!0),null!=a&&a!==e.dtype&&(e=e.asType(a)),new t(e,n,r)},t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!y(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");K().disposeTensor(this),this.dataId=e.dataId,K().registerTensor(this)},t.nextVarId=0,t}(X);Object.defineProperty(J,Symbol.hasInstance,{value:function(e){return e instanceof X&&null!=e.assign&&e.assign instanceof Function}});var Q=J.variable;function Z(e,t){f(e.dtype===t.dtype,"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match")}function ee(e){var t=[];return te(e,t,new Set),t}function te(e,t,n){if(null!=e)if(e instanceof X)t.push(e);else if(function(e){return Array.isArray(e)||"object"==typeof e}(e)){var r=e;for(var a in r){var i=r[a];n.has(i)||(n.add(i),te(i,t,n))}}}var ne,re,ae=function(){function e(e,t,n){this.backend=e,this.safeMode=t,this.debugMode=n,this.registeredVariables={},this.refCounter=new WeakMap,this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numDataBuffers=0,this.gradientScopeCount=0,this.customGradientDepth=0,this.keepTensors=new Set,this.activeScope={track:[],name:"default scope"},this.scopeStack=[this.activeScope],this.profiler=new F(e)}return e.prototype.tidy=function(e,t,n){var r=this;void 0===n&&(n=!1);var a,i=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=e}return this.scopedRun((function(){return r.startScope(i,n)}),(function(){return r.endScope(a,n)}),(function(){return(a=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a}))},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.runKernel=function(e,t,n){var r,a=this,i=[],o=function(e){return i.push(e),e},s=this.activeScope.name;if(this.scopedRun((function(){return a.customGradientDepth++}),(function(){return a.customGradientDepth--}),(function(){r=a.debugMode()?a.profiler.profileKernel(s,(function(){return e(a.backend,o)})):e(a.backend,o)})),this.shouldRecord()){var u={id:this.nextTapeNodeId++,name:s,inputs:t,outputs:Array.isArray(r)?r:[r]};null!=n&&(u.gradient=function(e){return n(e,i)}),this.activeTape.push(u)}return r},e.prototype.registerTensor=function(e){var t=this.refCounter.has(e.dataId)?this.refCounter.get(e.dataId):0;this.numTensors++,0===t&&(this.numDataBuffers++,"complex64"!==e.dtype&&(this.numBytes+=v(e.shape)*T(e.dtype)),this.backend.register(e.dataId,e.shape,e.dtype)),this.refCounter.set(e.dataId,t+1),e instanceof J||this.track(e)},e.prototype.registerVariable=function(e){if(null!=this.registeredVariables[e.name])throw new Error("Variable with name "+e.name+" was already registered");this.registeredVariables[e.name]=e},e.prototype.disposeTensor=function(e){if(this.refCounter.has(e.dataId)){this.keepTensors.has(e.id)&&this.keepTensors.delete(e.id),this.numTensors--;var t=this.refCounter.get(e.dataId);t<=1?(this.refCounter.delete(e.dataId),this.backend.disposeData(e.dataId),this.numDataBuffers--,"complex64"!==e.dtype&&(this.numBytes-=v(e.shape)*T(e.dtype))):this.refCounter.set(e.dataId,t-1)}},e.prototype.disposeVariables=function(){for(var e in this.registeredVariables){var t=this.registeredVariables[e];this.disposeTensor(t),delete this.registeredVariables[e]}},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.numTensors,e.numDataBuffers=this.numDataBuffers,e.numBytes=this.numBytes,e},e.prototype.shouldRecord=function(){return null!=this.activeTape&&0===this.customGradientDepth},e.prototype.addTapeNode=function(e,t,n){var r={};e.forEach((function(e,t){r[t]=e}));var a={id:this.nextTapeNodeId++,name:this.activeScope.name,inputs:r,outputs:[t],gradient:function(e){var t={};return n(e).forEach((function(e,n){t[n]=function(){return e}})),t}};this.activeTape.push(a)},e.prototype.keep=function(e){if(1===this.scopeStack.length&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {...}) to avoid memory leaks.");return this.keepTensors.add(e.id),e},e.prototype.startScope=function(e,t){void 0===t&&(t=!1),t&&0===this.gradientScopeCount&&(this.activeTape=[]),t&&this.gradientScopeCount++;var n={track:[],name:"unnamed scope"};e&&(n.name=e),this.scopeStack.push(n),this.activeScope=n},e.prototype.endScope=function(e,t){var n=this;void 0===t&&(t=!1),t&&(this.gradientScopeCount--,0===this.gradientScopeCount&&(this.activeTape=null));var r=new Set(this.keepTensors),a=ee(e);a.forEach((function(e){return r.add(e.id)}));for(var i=0;i<this.activeScope.track.length;i++){var o=this.activeScope.track[i];r.has(o.id)||(null!=this.activeTape?a.push(o):o.dispose())}var s=this.scopeStack.pop();this.activeScope=0===this.scopeStack.length?{track:[],name:"default scope"}:this.scopeStack[this.scopeStack.length-1],a.forEach((function(e){!n.keepTensors.has(e.id)&&function(e,t){for(var n=0;n<t.length;n++)if(t[n].id===e.id)return!0;return!1}(e,s.track)&&n.track(e)}))},e.prototype.gradients=function(e,t,n,r){var a=this;return void 0===r&&(r=!1),f(t.length>0,"gradients() received an empty list of xs."),this.tidy("gradients",(function(){var i=e();f(i instanceof X,"The result y returned by f() must be a tensor.");var o=function(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(i=0;i<e.length;i++){var o=(h=e[i]).inputs;for(var s in o){for(var u=o[s],l=!1,c=0;c<t.length;c++)if(r[u.id]){h.outputs.forEach((function(e){return r[e.id]=!0})),l=!0,a[h.id]=!0;break}if(l)break}}var f={};f[n.id]=!0;var p={};for(i=e.length-1;i>=0;i--)for(o=(h=e[i]).inputs,c=0;c<h.outputs.length;c++)if(f[h.outputs[c].id]){for(var s in o)f[o[s].id]=!0,p[h.id]=!0;break}var d=[];for(i=0;i<e.length;i++){var h;if(a[(h=e[i]).id]&&p[h.id]){var m={};for(var s in h.inputs){var g=h.inputs[s];r[g.id]&&(m[s]=g)}var v=Object.assign({},h);v.inputs=m,v.outputs=h.outputs,d.push(v)}}return d}(a.activeTape,t,i);if(!r&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");var s={};return s[i.id]=null==n?function(e){var t=L(v(e),"float32");return X.make(e,{values:t})}(i.shape):n,function(e,t){for(var n=function(n){var r=t[n],a=[];if(r.outputs.forEach((function(t){var n=e[t.id];if(null!=n)a.push(n);else{var r=X.make(t.shape,{values:z(t.size,t.dtype)},t.dtype);a.push(r)}})),null==r.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+r.name+".");var i=r.gradient(1===r.outputs.length?a[0]:a);for(var o in r.inputs){if(!(o in i))throw new Error("Cannot backprop through input "+o+". Available gradients found: "+Object.keys(i)+".");var s=i[o](),u=r.inputs[o];if(!y(s.shape,u.shape))throw new Error("Error in gradient for op "+r.name+". The gradient of input '"+o+"' has shape '"+s.shape+"', which does not match the shape of the input '"+u.shape+"'");if(null==e[u.id])e[u.id]=s;else{var l=e[u.id];e[u.id]=l.add(s),l.dispose()}}},r=t.length-1;r>=0;r--)n(r)}(s,o),{value:i,grads:t.map((function(e){return s[e.id]}))}}),!0)},e.prototype.customGrad=function(e){var t=this;return f(A(e),"The f passed in customGrad(f) must be a function."),function(){for(var n,r,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return f(a.every((function(e){return e instanceof X})),"The args passed in customGrad(f)(x1, x2,...) must all be tensors"),t.scopedRun((function(){return t.customGradientDepth++}),(function(){return t.customGradientDepth--}),(function(){r=t.tidy(e.name,(function(){var t=e.apply(void 0,a),r=t.value,i=t.gradFunc;return f(r instanceof X,"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),f(A(i),"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n=i,r}),!0)})),t.shouldRecord()&&t.addTapeNode(a,r,(function(e){var t=n(e),r=Array.isArray(t)?t:[t];return f(r.length===a.length,"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),f(r.every((function(e){return e instanceof X})),"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."),r})),r}},e.prototype.write=function(e,t){this.backend.write(e,t)},e.prototype.readSync=function(e){return this.backend.readSync(e)},e.prototype.read=function(e){return this.backend.read(e)},e.prototype.fromPixels=function(e,t){return this.backend.fromPixels(e,t)},e.prototype.time=function(e){return o(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return t=j(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=j()-t,[2,n]}}))}))},e.prototype.track=function(e){if(1===this.scopeStack.length&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {op();...}); to avoid memory leaks.");return this.activeScope.track.push(e),e},e}();(re=ne||(ne={}))[re.NUMBER=0]="NUMBER",re[re.BOOLEAN=1]="BOOLEAN",re[re.STRING=2]="STRING";var ie=[{name:"DEBUG",type:ne.BOOLEAN},{name:"IS_BROWSER",type:ne.BOOLEAN},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",type:ne.NUMBER},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",type:ne.BOOLEAN},{name:"WEBGL_VERSION",type:ne.NUMBER},{name:"WEBGL_RENDER_FLOAT32_ENABLED",type:ne.BOOLEAN},{name:"WEBGL_DOWNLOAD_FLOAT_ENABLED",type:ne.BOOLEAN},{name:"WEBGL_FENCE_API_ENABLED",type:ne.BOOLEAN},{name:"BACKEND",type:ne.STRING},{name:"EPSILON",type:ne.NUMBER}];function oe(e,t){var n;try{n=ce(e,t)}catch(e){return!1}return null!=n&&(fe(n),!0)}var se="tfjsflags";function ue(){var e={};if("undefined"==typeof window||void 0===window.location)return e;var t=function(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return de(t,n[0],n[1]),n.join("=")})),t}(window.location.search);if(se in t){var n={};t.tfjsflags.split(",").forEach((function(e){var t=e.split(":"),r=t[0],a=t[1];n[r]=a})),ie.forEach((function(t){t.name in n&&(console.log("Setting feature override from URL "+t.name+": "+n[t.name]),t.type===ne.NUMBER?e[t.name]=+n[t.name]:t.type===ne.BOOLEAN?e[t.name]="true"===n[t.name]:t.type===ne.STRING?e[t.name]=n[t.name]:console.warn("Unknown URL param: "+t.name+"."))}))}return e}function le(e,t){return null!=e.getExtension(t)}function ce(e,t){if(0===e||!t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=document.createElement("canvas");return 1===e?n.getContext("webgl")||n.getContext("experimental-webgl"):n.getContext("webgl2")}function fe(e){if(null!=e){var t=e.getExtension("WEBGL_lose_context");if(null==t)throw new Error("Extension WEBGL_lose_context not supported on this browser.");t.loseContext()}}function pe(e,t){var n=e.createFramebuffer(),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=2===t?e.RGBA32F:e.RGBA;e.texImage2D(e.TEXTURE_2D,0,a,1,1,0,e.RGBA,e.FLOAT,null),e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(n),i}function de(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}var he=function(){function e(e){this.features={},this.engines={},this.registry={},null!=e&&(this.features=e),this.get("DEBUG")&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}return e.setBackend=function(e,t){if(void 0===t&&(t=!1),!(e in me.registry))throw new Error("Backend name '"+e+"' not found in registry");me.initBackend(e,t)},e.getBackend=function(){return me.initDefaultBackend(),me.backendName},e.disposeVariables=function(){me.engine.disposeVariables()},e.memory=function(){return me.engine.memory()},e.tidy=function(e,t,n){return void 0===n&&(n=!1),me.engine.tidy(e,t,n)},e.dispose=function(e){ee(e).forEach((function(e){return e.dispose()}))},e.keep=function(e){return me.engine.keep(e)},e.time=function(e){return me.engine.time(e)},e.prototype.get=function(e){return e in this.features||(this.features[e]=this.evaluateFeature(e)),this.features[e]},e.prototype.getFeatures=function(){return this.features},e.prototype.set=function(e,t){this.features[e]=t},e.prototype.getBestBackendName=function(){var e=this;if(0===Object.keys(this.registry).length)throw new Error("No backend found in registry.");return Object.keys(this.registry).map((function(t){return{name:t,entry:e.registry[t]}})).sort((function(e,t){return t.entry.priority-e.entry.priority}))[0].name},e.prototype.evaluateFeature=function(e){if("DEBUG"===e)return!1;if("IS_BROWSER"===e)return"undefined"!=typeof window;if("IS_NODE"===e)return"undefined"!=typeof process&&void 0!==process.versions.node;if("IS_CHROME"===e)return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);if("IS_TEST"===e)return!1;if("BACKEND"===e)return this.getBestBackendName();if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"===e){var t=this.get("WEBGL_VERSION");return 0===t||t>0?0:function(e,t){if(0===e)return 0;var n,r=ce(e,t);return n=le(r,"EXT_disjoint_timer_query_webgl2")&&2===e?2:le(r,"EXT_disjoint_timer_query")?1:0,null!=r&&fe(r),n}(t,this.get("IS_BROWSER"))}if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE"===e)return this.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}();if("HAS_WEBGL"===e)return this.get("WEBGL_VERSION")>0;if("WEBGL_VERSION"===e)return oe(2,this.get("IS_BROWSER"))?2:oe(1,this.get("IS_BROWSER"))?1:0;if("WEBGL_RENDER_FLOAT32_ENABLED"===e)return function(e,t){if(0===e)return!1;var n=ce(e,t);if(1===e){if(!le(n,"OES_texture_float"))return!1}else if(!le(n,"EXT_color_buffer_float"))return!1;var r=pe(n,e);return fe(n),r}(this.get("WEBGL_VERSION"),this.get("IS_BROWSER"));if("WEBGL_DOWNLOAD_FLOAT_ENABLED"===e)return function(e,t){if(0===e)return!1;var n=ce(e,t);if(1===e){if(!le(n,"OES_texture_float"))return!1;if(!le(n,"WEBGL_color_buffer_float"))return!1}else if(!le(n,"EXT_color_buffer_float"))return!1;var r=pe(n,e);return fe(n),r}(this.get("WEBGL_VERSION"),this.get("IS_BROWSER"));if("WEBGL_FENCE_API_ENABLED"===e)return function(e,t){if(2!==e)return!1;var n=ce(e,t),r=null!=n.fenceSync;return fe(n),r}(this.get("WEBGL_VERSION"),this.get("IS_BROWSER"));if("TEST_EPSILON"===e)return 32===this.backend.floatPrecision()?.001:.1;if("EPSILON"===e)return 32===this.backend.floatPrecision()?1e-7:.001;throw new Error("Unknown feature "+e+".")},e.prototype.setFeatures=function(e){this.features=Object.assign({},e)},e.prototype.reset=function(){this.features=ue(),null!=this.globalEngine&&(this.globalEngine=null)},e.prototype.initBackend=function(e,t){var n=this;if(void 0===t&&(t=!1),this.backendName=e,this.engines[e])this.globalEngine=this.engines[e];else{var r=this.findBackend(e);this.globalEngine=new ae(r,t,(function(){return n.get("DEBUG")})),this.engines[e]=this.globalEngine}},Object.defineProperty(e.prototype,"backend",{get:function(){return this.engine.backend},enumerable:!0,configurable:!0}),e.prototype.findBackend=function(e){return e in this.registry?this.registry[e].backend:null},e.prototype.registerBackend=function(e,t,n,r){var a=this;if(void 0===n&&(n=1),e in this.registry)return console.warn(e+" backend was already registered. Reusing existing backend"),null!=r&&r((function(){return a.engine})),!1;try{var i=t();return this.registry[e]={backend:i,priority:n},!0}catch(t){return console.warn("Registration of backend "+e+" failed"),console.warn(t.stack||t.message),!1}},e.prototype.removeBackend=function(e){if(!(e in this.registry))throw new Error(e+" backend not found in registry");this.registry[e].backend.dispose(),delete this.registry[e],e in this.engines&&delete this.engines[e]},Object.defineProperty(e.prototype,"engine",{get:function(){return this.initDefaultBackend(),this.globalEngine},enumerable:!0,configurable:!0}),e.prototype.initDefaultBackend=function(){null==this.globalEngine&&this.initBackend(this.get("BACKEND"),!1)},e}();var me=function(){var e=function(){var e;if("undefined"!=typeof window)e=window;else{if("undefined"==typeof process)throw new Error("Could not find a global object");e=process}return e}();return null==e.ENV&&(e.ENV=new he(ue()),Y((function(){return e.ENV.engine}))),e.ENV}();Object.freeze({Environment:he,ENV:me});function ge(e){return me.engine.customGrad(e)}var ve=he.tidy,ye=he.keep,be=he.dispose;he.time;function we(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];me.get("IS_TEST")||console.warn.apply(console,e)}function xe(e,t,n,r){void 0===r&&(r=!0);var a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function _e(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{var i=[],o=[];for(a=1;a<e;++a)a>=2*t+1||a%2==1?o.push(a):i.push(a);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function Ne(e,t,n,r){void 0===r&&(r=!0);var a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function ke(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Ee(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function Se(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Ce(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map((function(t){return e[t]}))]}function Ie(e,t){return function(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}(e,t.map((function(e){return 1})),t)}function Oe(e,t){var n=t.length;return f((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e),f(e.every((function(e){return b(e)})),"All values in axis param must be integers but got axis "+e),e.map((function(e){return e<0?n+e:e}))}function Pe(e,t,n){f(Se(t,n),e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input.")}function Te(e,t){if(Se(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function Ae(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function Re(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function De(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function Me(e){return e<=30?e:R(e,Math.floor(Math.sqrt(e)))}function Le(e,t,n,r,a,i,o,s,u){if(void 0===a&&(a=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===u&&(u=0),0!==o)throw new Error("ellipsis mask is not yet supported");if(0!==s)throw new Error("new axis mask is not yet supported");for(var l=[],c=[],f=[],p=0;p<e.length;p++)l[p]=ze(a,t,r,e,p),c[p]=je(i,n,r,e,p),u&1<<p&&(c[p]=l[p]+1,f.push(p));var d=new Array(e.length).fill(0);return d=d.map((function(e,t){for(var n=0,a=l[t];!(r[t]>0?a>=c[t]:a<=c[t]);a+=r[t])n+=1;return n})),[l,d,f]}function ze(e,t,n,r,a){var i=t[a];e&1<<a&&(i=n[a]>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var o=r[a];return i<0&&(i+=o),l(0,i,o-1)}function je(e,t,n,r,a){var i=t[a];e&1<<a&&(i=n[a]>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var o=r[a];return i<0&&(i+=o),n[a]>0?l(0,i,o):l(-1,i,o-1)}function Be(e,t,n,r){if(void 0===r&&(r="float32"),r=r||"float32",e instanceof X)return e;if(!P(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e)throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got "+e.constructor.name);var a=m(e);return P(e)||Array.isArray(e)||(e=[e]),X.make(a,{values:M(e,r,me.get("DEBUG"))},r)}function Fe(e,t,n){if(!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map((function(e,r){return Be(e,t+"["+r+"]",n)}))}function Ve(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];me.engine.startScope(n);try{var a=r.apply(void 0,e);return a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),me.engine.endScope(a),a}catch(e){throw me.engine.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var Ue=Ve({softmax_:function(e,t){void 0===t&&(t=-1);var n=Be(e,"logits","softmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return ge((function(e){var n=e.logSumExp([t],!0),r=e.toFloat().sub(n).exp();return{value:r,gradFunc:function(e){var n=e.mul(r);return n.sub(n.sum([t],!0).mul(r))}}}))(n)}});var We=Ve({complex_:function(e,t){var n=Be(e,"real","complex"),r=Be(t,"imag","complex");return p(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),me.engine.runKernel((function(e){return e.complex(n,r)}),{$real:n,$imag:r})}}),qe=Ve({real_:function(e){var t=Be(e,"input","real");return me.engine.runKernel((function(e){return e.real(t)}),{$input:t})}}),$e=Ve({imag_:function(e){var t=Be(e,"input","imag");return me.engine.runKernel((function(e){return e.imag(t)}),{$input:t})}});function He(e,t,n){if(void 0===n&&(n="float32"),"complex64"===n)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!P(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e)throw new Error("values passed to tensor(values) must be an array of numbers or booleans, or a TypedArray");var r=m(e);return null!=t&&1!==r.length&&p(t,r,"Error creating a new Tensor. Inferred shape ("+r+") does not match the provided shape ("+t+"). "),P(e)||Array.isArray(e)||(e=[e]),t=t||r,X.make(t,{values:M(e,n,me.get("DEBUG"))},n)}function Ke(e,t){if(void 0===t&&(t="float32"),(P(e)||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean)");return He(e,[],t)}function Ge(e,t){void 0===t&&(t="float32"),d(e);var n=m(e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return He(e,n,t)}function Ye(e,t,n){if(void 0===n&&(n="float32"),d(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=m(e);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return He(e,t=t||r,n)}function Xe(e,t,n){if(void 0===n&&(n="float32"),d(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=m(e);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return He(e,t=t||r,n)}function Je(e,t,n){if(void 0===n&&(n="float32"),d(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=m(e);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return He(e,t=t||r,n)}function Qe(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Qe(e,"float32"),r=Qe(e,"float32");return We(n,r)}var a=L(v(e),t);return X.make(e,{values:a},t)}function Ze(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Ze(e,"float32"),r=Ze(e,"float32");return We(n,r)}var a=z(v(e),t);return X.make(e,{values:a},t)}function et(e,t,n){void 0===n&&(n="float32");var r=S(n,v(e));return r.fill(t),X.make(e,{values:r},n)}function tt(e,t,n){if(0===n)throw new Error("Cannot request zero samples");var r=(t-e)/(n-1),a=z(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return Ge(a,"float32")}function nt(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return Ze([0],r);var a=z(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return Ge(a,r)}var rt,at,it,ot,st,ut,lt=Ve({onesLike_:function(e){var t=Be(e,"x","onesLike");return Qe(t.shape,t.dtype)}}),ct=Ve({zerosLike_:function(e){var t=Be(e,"x","zerosLike");return Ze(t.shape,t.dtype)}});!function(e){e.float32="float32",e.int32="int32",e.bool="bool"}(rt||(rt={})),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(at||(at={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(it||(it={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(ot||(ot={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(st||(st={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(ut||(ut={}));var ft={float32:st,int32:it,bool:ot,complex64:ut};function pt(e,t){return ft[e][t]}function dt(e){return pt(e,"int32")}function ht(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=Ze(e.shape),a=e.toFloat(),i=n.complex(a,r);return r.dispose(),a.dispose(),i}if(!O(e.dtype,t))return X.make(e.shape,{dataId:e.dataId},t);if("complex64"===e.dtype){var o=n.real(e);return i=o.cast(t),o.dispose(),i}if("int32"===t)return n.int(e);if("bool"===t){var s=Ke(0,e.dtype);return i=n.notEqual(e,s),s.dispose(),i}throw new Error("Error in Cast: unknown dtype argument ("+t+")")}function mt(e,t){return X.make(t,{dataId:e.dataId},e.dtype)}function gt(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function vt(e,t,n,r,a){for(var i=Array.from(t).map((function(e,t){return{score:e,boxIndex:t}})).filter((function(e){return e.score>a})).sort((function(e,t){return t.score-e.score})),o=[],s=0;s<i.length;s++){var u=i[s],l=u.score,c=u.boxIndex;if(l<a)break;for(var f=!1,p=o.length-1;p>=0;--p)if(yt(e,c,o[p])>=r){f=!0;break}if(!f&&(o.push(c),o.length>=n))break}return Ge(o,"int32")}function yt(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),f=Math.max(a[0],a[2]),p=Math.max(a[1],a[3]),d=(s-i)*(u-o),h=(f-l)*(p-c);if(d<=0||h<=0)return 0;var m=Math.max(i,l),g=Math.max(o,c),v=Math.min(s,f),y=Math.min(u,p),b=Math.max(v-m,0)*Math.max(y-g,0);return b/(d+h-b)}function bt(e,t,n){var r=Array(e.rank).fill(0),a=e.shape.slice();return t.map((function(t){a[n]=t;var i=e.slice(r,a);return r[n]+=t,i}))}function wt(e,t,n,r,a){for(var i=t[t.length-1],o=[e.length/i,i],s=o[0],u=o[1],l=S(n,s*r),c=S("int32",s*r),f=0;f<s;f++){for(var p=f*u,d=e.subarray(p,p+u),h=[],m=0;m<d.length;m++)h.push({value:d[m],index:m});h.sort((function(e,t){return t.value-e.value}));var g=f*r,v=l.subarray(g,g+r),y=c.subarray(g,g+r);for(m=0;m<r;m++)v[m]=h[m].value,y[m]=h[m].index}var b=t.slice();return b[b.length-1]=r,[He(l,b,n),He(c,b,"int32")]}var xt=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,a=e.batchSize,i=e.inSize,o=Math.ceil(i/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,o];var s="max"===t?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = 0;\n        float bestValue = getA(batch, inOffset);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "},_t=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=t-1-e.padInfo.top,o=n-1-e.padInfo.left,s=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+i+", "+o+");\n      const float avgMultiplier = float("+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "};function Nt(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function kt(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function Et(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(i)}}return n}var St=function(e,t,n,r,a,i){this.outputShape=[],this.supportsBroadcasting=!0,this.variableNames=["x","mean","variance"],Et(e,t),Et(e,n);var o="0.0";null!=r&&(Et(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="1.0";null!=a&&(Et(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+o+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+i+"));\n        setOutput((x - mean) * inv + offset);\n      }\n    "},Ct="return areal * breal - aimag * bimag;",It="return areal * bimag + aimag * breal;",Ot=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.supportsBroadcasting=!0,this.outputShape=Et(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},Pt="return a + b;",Tt="return a - b;",At=function(){function e(e,t,n){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.outputShape=Et(t,n),this.userCode="\n      uniform float NAN;\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(){var e=this;return function(t,n){null==e.startLoc&&(e.startLoc=t.getUniformLocationNoThrow(n,"NAN"),null==e.startLoc)||t.gl.uniform1f(e.startLoc,NaN)}},e}(),Rt=function(e,t,n){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      void main() {\n        float value = getAAtOutCoords();\n        if (isNaN(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, float("+t+"), float("+n+")));\n      }\n    "},Dt=function(e,t){this.variableNames=["A","B"],this.outputShape=[],this.outputShape=De([e,t],1),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        float value = 0.0;\n        if (yC < "+e[1]+") {\n          value = getA(yR, yC);\n        } else {\n          yC -= "+e[1]+";\n          value = getB(yR, yC);\n        }\n\n        setOutput(value);\n      }\n    "},Mt=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+a+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Lt=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=t-1-e.padInfo.top,o=n-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},zt=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+i+" + dm;\n\n        float dotProd = 0.0;\n\n        // TODO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+a+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},jt=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=t-1-e.padInfo.top,o=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TODO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Bt=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.top,n=e.padInfo.left,r=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,s=e.filterHeight,u=e.filterWidth,l=4*Math.floor(e.inChannels/4),c=e.inChannels%4;this.userCode="\n      const ivec2 strides = ivec2("+r+", "+a+");\n      const ivec2 pads = ivec2("+t+", "+n+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+"; wR++) {\n          int xR = xRCorner + wR * "+i+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+u+"; wC++) {\n            int xC = xCCorner + wC * "+o+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+l+"; d1 += 4) {\n              vec4 xValues = vec4(\n                getX(batch, xR, xC, d1),\n                getX(batch, xR, xC, d1 + 1),\n                getX(batch, xR, xC, d1 + 2),\n                getX(batch, xR, xC, d1 + 3)\n              );\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              dotProd += dot(xValues, wValues);\n            }\n\n            if ("+(1===c)+") {\n              dotProd +=\n                getX(batch, xR, xC, "+l+") *\n                getW(wR, wC, "+l+", d2);\n            } else if ("+(2===c)+") {\n              vec2 xValues = vec2(\n                getX(batch, xR, xC, "+l+"),\n                getX(batch, xR, xC, "+l+" + 1)\n              );\n              vec2 wValues = vec2(\n                getW(wR, wC, "+l+", d2),\n                getW(wR, wC, "+l+" + 1, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            } else if ("+(3===c)+") {\n              vec3 xValues = vec3(\n                getX(batch, xR, xC, "+l+"),\n                getX(batch, xR, xC, "+l+" + 1),\n                getX(batch, xR, xC, "+l+" + 2)\n              );\n              vec3 wValues = vec3(\n                getW(wR, wC, "+l+", d2),\n                getW(wR, wC, "+l+" + 1, d2),\n                getW(wR, wC, "+l+" + 2, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ft=function(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],o=e[1],s=e[2],u=e[3],l=t[0],c=n[0],f=n[1];this.outputShape=[l,c,f,u];var p="bilinear"===r?1:0,d=[o-1+".0",s-1+".0"],h=d[0],m=d[1],g=c>1?[""+(o-1)/(c-1),"(y2-y1) * height_ratio","y1*"+h+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+h],v=g[0],y=g[1],b=g[2],w=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],x=w[0],_=w[1],N=w[2];this.userCode="\n      const float height_ratio = float("+v+");\n      const float width_ratio = float("+x+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+i+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+_+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+h+" ) {\n          setOutput(float("+a+"));\n          return;\n        }\n        float in_x = "+N+";\n        if( in_x < 0.0 || in_x > "+m+" ) {\n          setOutput(float("+a+"));\n          return;\n        }\n\n        vec2 sourceFracIndexRC = vec2(in_y,in_x);\n        if("+p+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n          ivec2 sourceCeilRC = ivec2(ceil(sourceFracIndexRC));\n\n          float topLeft = getImage(b, sourceFloorRC.x, sourceFloorRC.y, d);\n          float bottomLeft = getImage(b, sourceCeilRC.x, sourceFloorRC.y, d);\n          float topRight = getImage(b, sourceFloorRC.x, sourceCeilRC.y, d);\n          float bottomRight = getImage(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n          vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n          float top = topLeft + (topRight - topLeft) * fracRC.y;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n          float newValue = top + (bottom - top) * fracRC.x;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestRC = ivec2(floor(\n            sourceFracIndexRC + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestRC.x, sourceNearestRC.y, d);\n          setOutput(newValue);\n        }\n      }\n    "},Vt=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.inHeight,n=e.inWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.strideHeight,o=e.strideWidth,s=e.dilationHeight,u=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,f=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 strides = ivec2("+i+", "+o+");\n      const ivec2 pads = ivec2("+r+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+f+";\n        int q = d2 - d1 * "+f+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+l+"; wR++) {\n          int xR = xRCorner + wR * "+s+";\n\n          if (xR < 0 || xR >= "+t+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+c+"; wC++) {\n            int xC = xCCorner + wC * "+u+";\n\n            if (xC < 0 || xC >= "+n+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "};function Ut(e,t,n,r){var a=e.map((function(e){var t=v(e.shapeInfo.logicalShape);return e.shapeInfo.isUniform?"uniform float "+e.name+(t>1?"["+t+"]":"")+";":"uniform sampler2D "+e.name+";"}));a=a.join("\n");var i=e.map((function(e){return function(e,t,n){var r=function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1)+"Flat",r=v(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform)return 1===r?"float "+n+"(int index) {return "+t+";}":"\n      float "+n+"(int index) {\n        for (int i = 0; i < "+r+"; i++) {\n          if (i == index) {\n            return "+t+"[i];\n          }\n        }\n      }\n    ";var a=e.shapeInfo.texShape,i=a[0],o=a[1];return 1===o&&1===i?"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ":1===o?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index) + 0.5) / "+i+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index) + 0.5) / "+o+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = UVfrom1D("+i+", "+o+", index);\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);return r+=Wt(e),(n||y(e.shapeInfo.logicalShape,t.logicalShape))&&(r+=function(e,t,n){var r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=Nt(e.shapeInfo.logicalShape,t.logicalShape),s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length,l=n&&(u>s||o.length>0),c=function(e){for(var t=0;t<e.length;t++)if(e[t]!==t)return!1;return!0}(o),f=e.shapeInfo.isUniform;if(l&&!c)return function(e,t,n,r){var a=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,o="int";2===i?o="ivec2":3===i?o="ivec3":4===i&&(o="ivec4");var s=Nt(e.shapeInfo.logicalShape,t.logicalShape),u=i-a;return"\n    float "+r+"() {\n      "+o+" coords = getOutputCoords();\n      "+(0===a?"":i<2&&s.length>=1?"coords = 0;":s.map((function(e){return"coords["+(e+u)+"] = 0;"})).join("\n"))+"\n      return get"+n+"("+(i<2&&a>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords["+(t+u)+"]"})).join(", "))+");\n    }\n  "}(e,t,a,i);var p=v(e.shapeInfo.logicalShape),d="";l&&c&&(d="\n        int mainPart = index / "+p+";\n        index -= mainPart * "+p+";\n      ");var h=t.texShape;if(f)return 1===p?"float "+i+"() {return "+r+";}":"\n      float "+i+"() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                              vec2("+h[0]+", "+h[1]+"));\n        int index = resTexRC.x * "+h[1]+" + resTexRC.y;\n        "+d+"\n        return get"+a+"Flat(index);\n      }\n    ";var m=e.shapeInfo.texShape;return y(m,h)?"\n      float "+i+"() {\n        return sampleTexture("+r+", resultUV);\n      }\n    ":"\n    float "+i+"() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+h[0]+", "+h[1]+"));\n      int index = resTexRC.x * "+h[1]+" + resTexRC.y;\n      "+d+"\n      int texR = index / "+m[1]+";\n      int texC = index - texR * "+m[1]+";\n      vec2 uv = (vec2(texC, texR) + halfCR) /\n                 vec2("+m[1]+".0, "+m[0]+".0);\n\n      return sampleTexture("+r+", uv);\n    }\n  "}(e,t,n)),r}(e,t,r)})).join("\n"),o=t.texShape,s=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return y(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return function(e,t){var n=e[1]*e[2],r=e[2];return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+n+";\n      index -= r * "+n+";\n      int c = index / "+r+";\n      int d = index - c * "+r+";\n      return ivec3(r, c, d);\n    }\n  "}(e,t);case 4:return function(e,t){var n=e[3],r=e[2]*n,a=e[1]*r;return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      int r = index / "+a+";\n      index -= r * "+a+";\n\n      int c = index / "+r+";\n      index -= c * "+r+";\n\n      int d = index / "+n+";\n      int d2 = index - d * "+n+";\n\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=e[4],r=e[3]*n,a=e[2]*r,i=e[1]*a;return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      int r = index / "+i+";\n      index -= r * "+i+";\n\n      int c = index / "+a+";\n      index -= c * "+a+";\n\n      int d = index / "+r+";\n      index -= d * "+r+";\n\n      int d2 = index  / "+n+";\n      int d3 = index - d2 * "+n+";\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=e[5],r=e[4]*n,a=e[3]*r,i=e[2]*a,o=e[1]*i;return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      int r = index / "+o+";\n      index -= r * "+o+";\n\n      int c = index / "+i+";\n      index -= c * "+i+";\n\n      int d = index / "+a+";\n      index -= d * "+a+";\n\n      int d2 = index / "+r+";\n      index -= d2 * "+r+";\n\n      int d3 = index / "+n+";\n      int d4 = index - d3 * "+n+";\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}}(t.logicalShape,o);return[Ht,qt,$t,a,s,i,n].join("\n")}function Wt(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);return e.shapeInfo.isUniform?"float "+n+"() {return "+t+";}":"\n    float "+n+"() {\n      return sampleTexture("+t+", halfCR);\n    }\n  "}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);return"\n    float "+n+"(int index) {\n      return "+n+"Flat(index);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape;if(null!=a&&y(t,a)){var i=a[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+a[1]+".0, "+i+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var o=E(t),s=o.newShape,u=o.keptDims,l=s;if(l.length<t.length)return"\n      "+Wt(Gt(e,l))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+Yt(["row","col"],u)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = row * "+t[1]+" + col;\n        return "+r+"Flat(index);\n      }\n    ";var c=a[0],f=a[1];return 1===f?"\n    float "+r+"(int row, int col) {\n      int index = row * "+t[1]+" + col;\n      vec2 uv = vec2(0.5, (float(index) + 0.5) / "+c+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===c?"\n    float "+r+"(int row, int col) {\n      int index = row * "+t[1]+" + col;\n      vec2 uv = vec2((float(index) + 0.5) / "+f+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    vec2 uv = UVfrom2D("+c+", "+f+", "+t[1]+", row, col);\n    return sampleTexture("+n+", uv);\n  }\n"}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[1]*t[2],i=t[2],o=E(t),s=o.newShape,u=o.keptDims,l=s;if(l.length<t.length)return"\n        "+Wt(Gt(e,l))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+Yt(["row","col","depth"],u)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = row * "+a+" + col * "+i+" + depth;\n        return "+r+"Flat(index);\n      }\n    ";var c=e.shapeInfo.texShape,f=c[0],p=c[1];return p===a?"\n        float "+r+"(int row, int col, int depth) {\n          int texR = row;\n          int texC = col * "+i+" + depth;\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+p+".0, "+f+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":p===i?"\n    float "+r+"(int row, int col, int depth) {\n      int texR = row * "+t[1]+" + col;\n      int texC = depth;\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+p+".0, "+f+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        vec2 uv = UVfrom3D(\n            "+f+", "+p+", "+a+", "+i+", row, col, depth);\n        return sampleTexture("+n+", uv);\n      }\n  "}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[3],i=t[2]*a,o=t[1]*i,s=E(t),u=s.newShape,l=s.keptDims;if(u.length<t.length)return"\n      "+Wt(Gt(e,u))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+Yt(["row","col","depth","depth2"],l)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = row * "+o+" + col * "+i+" +\n            depth * "+a+" + depth2;\n        return "+r+"Flat(index);\n      }\n    ";var c=e.shapeInfo.texShape,f=c[0],p=c[1];return p===o?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int texR = row;\n        int texC = col * "+i+" + depth * "+a+" + depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+p+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":p===a?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int texR = row * "+t[1]*t[2]+" + col * "+t[2]+" + depth;\n        int texC = depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+p+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      vec2 uv = UVfrom4D("+f+", "+p+", "+o+", "+i+",\n          "+a+", row, col, depth, depth2);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,u=E(t),l=u.newShape,c=u.keptDims;if(l.length<t.length)return"\n      "+Wt(Gt(e,l))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+Yt(["row","col","depth","depth2","depth3"],c)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int index = row * "+s+" + col * "+o+" +\n            depth * "+i+" + depth2 * "+a+" + depth3;\n        return "+r+"Flat(index);\n      }\n    ";var f=e.shapeInfo.texShape,p=f[0],d=f[1];return d===s?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        int texC = col * "+o+" + depth * "+i+" +\n                   depth2 * "+a+" + depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+d+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":d===a?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row * "+t[1]*t[2]+" + col * "+t[2]+" +\n                   depth * "+t[3]+" + depth2;\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+d+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      vec2 uv = UVfrom5D("+p+", "+d+", "+s+", "+o+",\n          "+i+", "+a+", row, col, depth, depth2, depth3);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[5],i=t[4]*a,o=t[3]*i,s=t[2]*o,u=t[1]*s,l=E(t),c=l.newShape,f=l.keptDims;if(c.length<t.length)return"\n      "+Wt(Gt(e,c))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+Yt(["row","col","depth","depth2","depth3","depth4"],f)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = row * "+u+" + col * "+s+" +\n            depth * "+o+" + depth2 * "+i+" + depth3 * "+i+"\n            + depth4\n        return "+r+"Flat(index);\n      }\n    ";var p=e.shapeInfo.texShape,d=p[0],h=p[1];return h===u?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        int texC = col * "+s+" + depth * "+o+" + depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+h+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":h===a?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row * "+t[1]*t[2]+" + col * "+t[2]+" + depth;\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+h+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      vec2 uv = UVfrom6D("+d+", "+h+", "+u+", "+s+",\n          "+o+", "+i+", "+a+"\n          ,row, col, depth, depth2, depth3, depth4);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}var qt="\n  float sampleTexture(sampler2D textureSampler, vec2 uv) {\n    return texture2D(textureSampler, uv).r;\n  }\n",$t="\n  void setOutput(float val) {\n    gl_FragColor = vec4(val, 0, 0, 0);\n  }\n",Ht="\n  precision highp float;\n  precision highp int;\n  varying vec2 resultUV;\n  const vec2 halfCR = vec2(0.5, 0.5);\n\n  struct ivec5\n  {\n    int x;\n    int y;\n    int z;\n    int w;\n    int u;\n  };\n\n  struct ivec6\n  {\n    int x;\n    int y;\n    int z;\n    int w;\n    int u;\n    int v;\n  };\n\n  bool isNaN(float val) {\n    return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;\n  }\n\n  bool hasNaN(vec4 values) {\n    vec4 v1 = values * values;\n    vec4 v2 = values * values;\n    return any(notEqual(v1, v2));\n  }\n\n  float getNaN(vec4 values) {\n    return dot(vec4(1), values);\n  }\n\n  int round(float value) {\n    return int(floor(value + 0.5));\n  }\n\n  int imod(int x, int y) {\n    return x - y * (x / y);\n  }\n\n  //Based on the work of Dave Hoskins\n  //https://www.shadertoy.com/view/4djSRW\n  #define HASHSCALE1 443.8975\n  float random(float seed){\n    vec2 p = resultUV * seed;\n    vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n  }\n\n  \nvec2 UVfrom1D(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom2D(int texNumR, int texNumC, int numC, int row, int col) {\n  int index = row * numC + col;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom3D(int texNumR, int texNumC, int stride0,\n    int stride1, int row, int col, int depth) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom4D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int row, int col, int depth,\n    int depth2) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth * stride2 + depth2;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom5D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int stride3, int row, int col, int depth,\n    int depth2, int depth3) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 +\n              depth * stride2 + depth2 * stride3 + depth3;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom6D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int stride3, int stride4,\n    int row, int col, int depth, int depth2, int depth3, int depth4) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth * stride2 + depth2 *\n    stride3 + depth3 * stride4 + depth4;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n";function Kt(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function Gt(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Yt(e,t){return t.map((function(t){return e[t]})).join(", ")}var Xt=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,a=e[e.length-1],i=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+a+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+Kt(r)+" coords = getOutputCoords();\n        int end = "+Jt(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+a+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+i+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+Jt(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function Jt(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var Qt,Zt,en=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),tn=function(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      const float FLOAT_MAX = 1.70141184e38;\n      const float FLOAT_MIN = 1.17549435e-38;\n\n      lowp vec4 encode_float(highp float v) {\n        if (isNaN(v)) {\n          return vec4(255, 255, 255, 255);\n        }\n\n        highp float av = abs(v);\n\n        if(av < FLOAT_MIN) {\n          return vec4(0.0, 0.0, 0.0, 0.0);\n        } else if(v > FLOAT_MAX) {\n          return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n        } else if(v < -FLOAT_MAX) {\n          return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n        }\n\n        highp vec4 c = vec4(0,0,0,0);\n\n        highp float e = floor(log2(av));\n        highp float m = exp2(fract(log2(av))) - 1.0;\n\n        c[2] = floor(128.0 * m);\n        m -= c[2] / 128.0;\n        c[1] = floor(32768.0 * m);\n        m -= c[1] / 32768.0;\n        c[0] = floor(8388608.0 * m);\n\n        highp float ebias = e + 127.0;\n        c[3] = floor(ebias / 2.0);\n        ebias -= c[3] * 2.0;\n        c[2] += floor(ebias) * 128.0;\n\n        c[3] += 128.0 * step(0.0, -v);\n\n        return c / 255.0;\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        gl_FragColor = encode_float(x);\n      }\n    "},nn=function(e){this.variableNames=["A"];var t=e[0],n=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+n+".0, "+t+".0);\n\n        vec4 values = texture2D(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},rn=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var a=Kt(this.rank),i=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],i=0;i<e.length;i++)i===t?a.push("int(getIndices("+r[i]+"))"):a.push(""+r[i]);return a.join()}(e,n);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "};function an(e,t){return[t,e]}function on(e,t){return e*t}function sn(e,t,n){var r=function(e,t){if(e%t!=0)throw new Error("unpackedSize ("+e+") must be a multiple of "+t);return e/t}(e.length,n);if(t.length<r)throw new Error("matrix length ("+t.length+") must be >= "+r);for(var a=0,i=0;i<e.length;i+=n)t[a++]=e[i]}function un(e,t){return[Math.ceil(t/2),Math.ceil(e/2)]}function ln(e,t){var n=un(e,t);return n[0]*n[1]*4}!function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(Qt||(Qt={})),function(e){e[e.FLOAT16=0]="FLOAT16",e[e.FLOAT32=1]="FLOAT32",e[e.UNSIGNED_BYTE=2]="UNSIGNED_BYTE"}(Zt||(Zt={}));var cn=null;function fn(e){var t=document.createElement("canvas");return t.width=1,t.height=1,pn(t,e)}function pn(e,t){var n,r=me.get("WEBGL_VERSION");if(2===r?n=e.getContext("webgl2",t):1===r&&(n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)),0===r||null==n)throw new Error("This browser does not support WebGL.");return n}function dn(e,t){var n=t();return gn(e),n}var hn=!1;function mn(e){hn=e}function gn(e){if(hn){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+vn(e,t))}}function vn(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function yn(e,t){return Vn(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function bn(e,t){var n=Vn(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(dn(e,(function(){return e.shaderSource(n,t)})),dn(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function wn(e,t){var n=Vn(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(dn(e,(function(){return e.shaderSource(n,t)})),dn(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){var n=xn.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return _((t+1).toString(),i)+e})),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var l=o.slice(0,r-1),c=o.slice(r-1,r),f=o.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+_(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var xn=/ERROR: [0-9]+:([0-9]+):/g;function _n(e){return Vn(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function Nn(e,t){if(dn(e,(function(){return e.linkProgram(t)})),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function kn(e,t){if(dn(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function En(e,t){var n=Vn(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return dn(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),dn(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}function Sn(e,t){var n=Vn(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return dn(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),dn(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}function Cn(e){return null!=cn?cn:cn=dn(e,(function(){return e.getParameter(e.MAX_TEXTURE_SIZE)}))}function In(){return 2===me.get("WEBGL_VERSION")?1:4}function On(e){return Vn(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function Pn(e,t,n){var r=Cn(e);if(t<=0||n<=0){var a="["+t+"x"+n+"]";throw new Error("Requested texture size "+a+" is invalid.")}if(t>r||n>r)throw a="["+t+"x"+n+"]",new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU ["+r+"x"+r+"].")}function Tn(e){return Vn(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function An(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(dn(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),dn(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),dn(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function Rn(e,t,n){Un(e,n),dn(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),dn(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}function Dn(e,t,n){return Vn(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function Mn(e,t,n){return e.getUniformLocation(t,n)}function Ln(e,t,n,r,a){dn(e,(function(){return Rn(e,n,a)})),dn(e,(function(){return e.uniform1i(r,a)}))}function zn(e,t,n){dn(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),dn(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function jn(e,t){dn(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),dn(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Bn(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Fn(e,t))}function Fn(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function Vn(e,t,n){var r=dn(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function Un(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function Wn(e,t){2!==t.length&&(t=E(t).newShape);var n=Cn(e),r=v(t);return t.length<=1&&r<=n?[r,1]:2===t.length&&t[0]<=n&&t[1]<=n?t:3===t.length&&t[0]<=n&&t[1]*t[2]<=n?[t[0],t[1]*t[2]]:4===t.length&&t[0]<=n&&t[1]*t[2]*t[3]<=n?[t[0],t[1]*t[2]*t[3]]:x(r)}var qn=Object.freeze({createWebGLRenderingContext:fn,createWebGLRenderingContextFromCanvas:pn,callAndCheck:dn,enableDebugWebGLErrorChecking:mn,checkWebGLError:gn,getWebGLErrorMessage:vn,getExtensionOrThrow:yn,createVertexShader:bn,createFragmentShader:wn,createProgram:_n,linkProgram:Nn,validateProgram:kn,createStaticVertexBuffer:En,createStaticIndexBuffer:Sn,queryMaxTextureSize:Cn,getNumChannels:In,createTexture:On,validateTextureSize:Pn,createFramebuffer:Tn,bindVertexBufferToProgramAttribute:An,bindTextureUnit:Rn,unbindTextureUnit:function(e,t){Un(e,t),dn(e,(function(){return e.activeTexture(e.TEXTURE0+t)})),dn(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))},getProgramUniformLocationOrThrow:Dn,getProgramUniformLocation:Mn,bindTextureToProgramUniformSampler:Ln,bindCanvasToFramebuffer:function(e){dn(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),dn(e,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),dn(e,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))},bindColorTextureToFramebuffer:zn,unbindColorTextureFromFramebuffer:jn,validateFramebuffer:Bn,getFramebufferErrorMessage:Fn,getTextureShapeFromLogicalShape:Wn});function $n(){return{alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0}}function Hn(e){var t,n={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};return dn(t=null!=e?pn(e,n):fn(n),(function(){return t.disable(t.DEPTH_TEST)})),dn(t,(function(){return t.disable(t.STENCIL_TEST)})),dn(t,(function(){return t.disable(t.BLEND)})),dn(t,(function(){return t.disable(t.DITHER)})),dn(t,(function(){return t.disable(t.POLYGON_OFFSET_FILL)})),dn(t,(function(){return t.disable(t.SAMPLE_COVERAGE)})),dn(t,(function(){return t.enable(t.SCISSOR_TEST)})),dn(t,(function(){return t.enable(t.CULL_FACE)})),dn(t,(function(){return t.cullFace(t.BACK)})),t}function Kn(e){return bn(e,"\n    precision highp float;\n    attribute vec3 clipSpacePos;\n    attribute vec2 uv;\n    varying vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function Gn(e){return En(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Yn(e){return Sn(e,new Uint16Array([0,1,2,2,1,3]))}function Xn(e,t){var n,r,a,i,o,s,u,l=e;return 2===me.get("WEBGL_VERSION")?(n=l.R32F,r=l.R16F,a=l.RGBA32F,i=l.RED,o=4,s=1,u=l.HALF_FLOAT):(n=e.RGBA,r=e.RGBA,a=l.RGBA,i=e.RGBA,o=4,s=4,u=null!=t?t.HALF_FLOAT_OES:null),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedFloat:a,textureFormatFloat:i,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:o,defaultNumChannels:s,textureTypeHalfFloat:u}}function Jn(e,t,n,r,a,i){Pn(e,t,n);var o=On(e),s=e.TEXTURE_2D;return dn(e,(function(){return e.bindTexture(s,o)})),dn(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),dn(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),dn(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),dn(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),dn(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})),dn(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),o}function Qn(e,t,n,r){var a=an(t,n);return Jn(e,a[0],a[1],r.internalFormatFloat,r.textureFormatFloat,e.FLOAT)}function Zn(e,t,n,r){var a=an(t,n);return Jn(e,a[0],a[1],r.internalFormatFloat,r.textureFormatFloat,r.textureTypeHalfFloat)}function er(e,t,n,r){var a=an(t,n);return Jn(e,a[0],a[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function tr(e,t,n,r){var a=un(t,n);return Jn(e,a[0],a[1],r.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function nr(e,t,n){return dn(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),An(e,t,"clipSpacePos",n,3,20,0)&&An(e,t,"uv",n,2,20,12)}function rr(e,t,n){dn(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),dn(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),dn(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function ar(e,t,n,r,a,i){Pn(e,n,r),dn(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),dn(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,i,e.FLOAT,a)})),dn(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function ir(e,t,n,r,a,i,o){var s,u=an(n,r),l=u[0],c=u[1];1===o.defaultNumChannels?s=a:function(e,t,n){var r=on(e.length,n);if(t.length<r)throw new Error("unpackedArray length ("+t.length+") must be >= "+r);for(var a=0,i=0;i<e.length;++i)t[a]=e[i],a+=n}(a,s=new Float32Array(on(a.length,i)),i),ar(e,t,l,c,s,o.textureFormatFloat)}function or(e,t,n,r,a,i){var o=un(n,r),s=o[0],u=o[1],l=new Float32Array(ln(n,r));(function(e,t,n,r){var a=ln(t,n);if(r.length<a)throw new Error("packedRGBA length ("+r.length+") must be >= "+a);for(var i=un(t,n),o=i[0],s=i[1],u=n%2==1,l=t%2==1,c=Math.floor(n/2),f=Math.floor(t/2),p=u?4:0,d=n,h=0,m=0;m<f;++m){for(var g=2*m*n,v=0;v<c;++v){var y=g+2*v;r[h]=e[y],r[h+1]=e[y+1],r[h+2]=e[y+d],r[h+3]=e[y+d+1],h+=4}h+=p}if(u){y=n-1,h=4*(o-1);var b=2*n;for(p=4*o,m=0;m<f;++m)r[h]=e[y],r[h+2]=e[y+n],y+=b,h+=p}if(l)for(y=(t-1)*n,h=(s-1)*o*4,v=0;v<c;++v)r[h++]=e[y++],r[h++]=e[y++],h+=2;u&&l&&(r[r.length-4]=e[e.length-1])})(a,n,r,l),ar(e,t,s,u,l,e.RGBA)}function sr(e,t,n,r,a){var i=t;if(2===me.get("WEBGL_VERSION")){var o=e,s=o.createBuffer();dn(e,(function(){return e.bindBuffer(o.PIXEL_PACK_BUFFER,s)}));var u=4*on(n*r,a.downloadUnpackNumChannels);dn(e,(function(){return e.bufferData(o.PIXEL_PACK_BUFFER,u,e.STATIC_DRAW)})),dn(e,(function(){return o.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)})),dn(e,(function(){return e.bindBuffer(o.PIXEL_PACK_BUFFER,null)})),i=s}return i}function ur(e,t,n,r,a){var i=e,o=new Float32Array(on(n*r,a.downloadUnpackNumChannels));i.bindBuffer(e.ARRAY_BUFFER,t),i.getBufferSubData(e.ARRAY_BUFFER,0,o),i.bindBuffer(e.ARRAY_BUFFER,null);var s=new Float32Array(n*r);return sn(o,s,a.downloadUnpackNumChannels),s}function lr(e,t,n,r){var a=an(t,n),i=a[0],o=a[1],s=new Float32Array(on(t*n,r.downloadUnpackNumChannels));dn(e,(function(){return e.readPixels(0,0,i,o,r.downloadTextureFormat,e.FLOAT,s)}));var u=new Float32Array(t*n);return sn(s,u,r.downloadUnpackNumChannels),u}function cr(e,t,n,r){var a=an(t,n),i=a[0],o=a[1],s=new Uint8Array(on(t*n,4));return dn(e,(function(){return e.readPixels(0,0,i,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)})),new Float32Array(s.buffer)}function fr(e,t,n,r){var a=un(t,n),i=a[0],o=a[1],s=new Float32Array(ln(t,n));dn(e,(function(){return e.readPixels(0,0,i,o,e.RGBA,e.FLOAT,s)}));var u=new Float32Array(t*n);return function(e,t,n,r){var a=t*n;if(a<r.length)throw new Error("matrix length ("+r.length+") must be >= "+a);for(var i=n%2==1,o=t%2==1,s=Math.floor(n/2),u=Math.floor(t/2),l=un(t,n),c=l[0],f=l[1],p=i?4:0,d=n+(i?1:0),h=0,m=0,g=n,v=0;v<u;++v){for(var y=0;y<s;++y)r[m++]=e[h++],r[m++]=e[h++],r[g++]=e[h++],r[g++]=e[h++];h+=p,m+=d,g+=d}if(i){h=4*(c-1);var b=n-1;for(p=4*c,d=2*n,v=0;v<u;++v)r[b]=e[h],r[b+n]=e[h+2],h+=p,b+=d}if(o)for(h=(f-1)*c*4,b=(t-1)*n,y=0;y<s;++y)r[b++]=e[h++],r[b++]=e[h++],h+=2;return i&&o&&(r[r.length-1]=e[e.length-4]),r}(s,t,n,u)}var pr=Object.freeze({getWebGLContextAttributes:$n,createWebGLContext:Hn,createVertexShader:Kn,createVertexBuffer:Gn,createIndexBuffer:Yn,getTextureConfig:Xn,createFloat32MatrixTexture:Qn,createFloat16MatrixTexture:Zn,createUnsignedBytesMatrixTexture:er,createPackedMatrixTexture:tr,bindVertexProgramAttributeStreams:nr,uploadPixelDataToTexture:rr,uploadMatrixToTexture:ir,uploadMatrixToPackedTexture:or,maybeCreateBufferFromOutputTexture:sr,downloadFloat32MatrixFromBuffer:ur,downloadFloat32MatrixFromOutputTexture:lr,downloadByteEncodedFloatMatrixFromOutputTexture:cr,downloadMatrixFromPackedOutputTexture:fr}),dr=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.autoDebugValidate=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[],this.gl=null!=e?e:Hn(),1===me.get("WEBGL_VERSION")?(this.textureFloatExtension=yn(this.gl,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),me.get("WEBGL_RENDER_FLOAT32_ENABLED")||(this.textureHalfFloatExtension=yn(this.gl,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float"))):this.colorBufferFloatExtension=yn(this.gl,"EXT_color_buffer_float"),this.loseContextExtension=yn(this.gl,"WEBGL_lose_context"),this.vertexBuffer=Gn(this.gl),this.indexBuffer=Yn(this.gl),this.framebuffer=Tn(this.gl),this.textureConfig=Xn(this.gl,this.textureHalfFloatExtension)}return e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;dn(t,(function(){return t.finish()})),dn(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),dn(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),dn(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),dn(t,(function(){return t.deleteBuffer(e.vertexBuffer)})),dn(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),dn(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.loseContextExtension.loseContext(),this.disposed=!0}},e.prototype.enableAutomaticDebugValidation=function(e){this.autoDebugValidate=e,mn(e)},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),Qn(this.gl,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),Zn(this.gl,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),er(this.gl,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),rr(this.gl,e,t)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),tr(this.gl,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(jn(this.gl,this.framebuffer),this.outputTexture=null),dn(this.gl,(function(){return t.gl.deleteTexture(e)}))},e.prototype.uploadMatrixToTexture=function(e,t,n,r){this.throwIfDisposed();var a=In();return ir(this.gl,e,t,n,r,a,this.textureConfig)},e.prototype.uploadMatrixToPackedTexture=function(e,t,n,r){return this.throwIfDisposed(),or(this.gl,e,t,n,r,this.textureConfig)},e.prototype.downloadFloat32MatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return lr(r.gl,t,n,r.textureConfig)}))},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return cr(r.gl,t,n,r.textureConfig)}))},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t,n){return ur(this.gl,e,t,n,this.textureConfig)},e.prototype.maybeCreateBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=sr(this.gl,e,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(me.get("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else me.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,me.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return fr(r.gl,t,n,r.textureConfig)}))},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=wn(t,e),r=Kn(t),a=_n(t);return dn(t,(function(){return t.attachShader(a,r)})),dn(t,(function(){return t.attachShader(a,n)})),Nn(t,a),this.autoDebugValidate&&kn(t,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=nr(t,this.program,this.vertexBuffer)),a},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&dn(this.gl,(function(){return t.gl.deleteProgram(e)}))},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.autoDebugValidate&&kn(this.gl,this.program),dn(this.gl,(function(){return t.gl.useProgram(e)}))},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?Dn(this.gl,e,t):Mn(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),dn(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Ln(this.gl,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=un(t,n),a=r[0],i=r[1];this.setOutputMatrixTextureDriver(e,a,i)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&kn(this.gl,this.program),Bn(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.autoDebugValidate&&this.debugValidate(),dn(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),dn(this.gl,(function(){return e.gl.finish()}))},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=yn(this.gl,2===me.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===me.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a},e.prototype.endQuery=function(){if(2!==me.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return o(this,void 0,void 0,(function(){var t=this;return s(this,(function(n){switch(n.label){case 0:return[4,N((function(){return t.isQueryAvailable(e,me.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return n.sent(),[2,this.getQueryTime(e,me.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}return a=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0,n=e.length-1,r=-1;t<=n;){var a=t+n>>1;e[a]()?(r=a,t=a+1):n=a-1}return r}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||N((function(){return n.pollItems(),0===n.itemsToPoll.length}))},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),zn(this.gl,e,this.framebuffer),this.autoDebugValidate&&Bn(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(zn(this.gl,this.outputTexture,this.framebuffer),this.autoDebugValidate&&Bn(this.gl)):jn(this.gl,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;zn(r,e,this.framebuffer),this.autoDebugValidate&&Bn(r),this.outputTexture=e,dn(r,(function(){return r.viewport(0,0,t,n)})),dn(r,(function(){return r.scissor(0,0,t,n)}))},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var a=this;this.throwIfDisposed(),dn(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function hr(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!y(r,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+i+" must match");if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!y(o,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+o+" and "+s+" must match")}}))}var mr=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];var i,o=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";i=.5===a?"inversesqrt("+u+")":1===a?"1.0/("+u+")":"exp(log("+u+") * float(-"+a+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+o+"; j <= "+o+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+i+";\n        setOutput(val);\n      }\n    "},gr=function(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+a+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+a+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},vr=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=t-1-e.padInfo.top,o=n-1-e.padInfo.left,s=t*n-1;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+s+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+n+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},yr=function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1),this.variableNames=["matrixA","matrixB"];var a=e[0],i=n?e[2]:e[1],o=r?t[1]:t[2],s=n?e[1]:e[2];this.outputShape=[a,i,o];var u=function(e,t){return n?"batch, "+t+" + "+e+", aRow":"batch, aRow, "+t+" + "+e},l=function(e,t){return r?"batch, bCol, "+t+" + "+e:"batch, "+t+" + "+e+", bCol"},c=4*Math.floor(s/4),f=s%4;this.userCode=" float dotARowBCol(int batch, int aRow, int bCol) {\n      float result = 0.0;\n      for (int i = 0; i < "+c+"; i += 4) {\n        vec4 a = vec4(\n          getMatrixA("+u(0,"i")+"),\n          getMatrixA("+u(1,"i")+"),\n          getMatrixA("+u(2,"i")+"),\n          getMatrixA("+u(3,"i")+")\n        );\n        vec4 b = vec4(\n          getMatrixB("+l(0,"i")+"),\n          getMatrixB("+l(1,"i")+"),\n          getMatrixB("+l(2,"i")+"),\n          getMatrixB("+l(3,"i")+")\n        );\n\n        result += dot(a, b);\n      }\n\n      if ("+(1===f)+") {\n        result += getMatrixA("+u(0,c)+") *\n          getMatrixB("+l(0,c)+");\n      } else if ("+(2===f)+") {\n        vec2 a = vec2(\n          getMatrixA("+u(0,c)+"),\n          getMatrixA("+u(1,c)+")\n        );\n        vec2 b = vec2(\n          getMatrixB("+l(0,c)+"),\n          getMatrixB("+l(1,c)+")\n        );\n        result += dot(a, b);\n      } else if ("+(3===f)+") {\n        vec3 a = vec3(\n          getMatrixA("+u(0,c)+"),\n          getMatrixA("+u(1,c)+"),\n          getMatrixA("+u(2,c)+")\n        );\n        vec3 b = vec3(\n          getMatrixB("+l(0,c)+"),\n          getMatrixB("+l(1,c)+"),\n          getMatrixB("+l(2,c)+")\n        );\n        result += dot(a, b);\n      }\n\n      return result;\n    }\n\n    void main() {\n      ivec3 resBRC = getOutputCoords();\n      setOutput(dotARowBCol(resBRC.x, resBRC.y, resBRC.z));\n    }\n    "},br=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),wr=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},xr=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));var r=e.length,a=Kt(r),i=t.map((function(e){return e[0]})).join(","),o=t.map((function(t,n){return t[0]+e[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+a+" start = "+a+"("+i+");\n      "+a+" end = "+a+"("+o+");\n\n      void main() {\n        "+a+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+a+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+i+";\n        int end = "+o+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},_r=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterHeight,a=e.filterWidth,i=e.strideHeight,o=e.strideWidth,s=e.padInfo.top,u=e.padInfo.left;this.outputShape=e.outShape;var l="avg"===t,c="0.0";if(l||(c="-1.0 / 0.0"),n)this.userCode="\n        const ivec2 strides = ivec2("+i+", "+o+");\n        const ivec2 pads = ivec2("+s+", "+u+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+r+"; wR++) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+a+"; wC++) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+a+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var f=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(f="avgValue / count");var p=4*Math.floor(a/4),d=a%4,h="\n      if ("+l+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+i+", "+o+");\n      const ivec2 pads = ivec2("+s+", "+u+");\n      const float initializationValue = "+c+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+c+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+r+"; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+p+"; wC += 4) {\n            int xC = xCCorner + wC;\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              getValue(batch, xR, xC + 3, d)\n            );\n\n            "+h+"\n          }\n\n          int xC = xCCorner + "+p+";\n          if ("+(1===d)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+h+"\n          } else if ("+(2===d)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+h+"\n          } else if ("+(3===d)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              initializationValue\n            );\n\n            "+h+"\n          }\n        }\n        setOutput("+f+");\n      }\n    "}},Nr=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,a=e.inSize,i=Math.ceil(a/n);this.outputShape=[r,i];var o="0.0",s="";"min"===t?(o="1.0 / 0.0",s="min"):"max"===t&&(o="-1.0 / 0.0",s="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?u="sumValue":"all"===t?u="allValue":"any"===t&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,f="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",p="vec4";"all"===t?(o="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===t&&(o="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var d="";a%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+o+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+d+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+o+");\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+f+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(1===c)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(2===c)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(3===c)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+f+"\n        }\n        setOutput("+u+");\n      }\n    "},kr=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],i=r[2],o=e.shape,s=o[1],u=o[2],l=[n&&s>1?a-1:a,n&&u>1?i-1:i],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],p=l[1]/c[1],d=1/f,h=1/p,m=2*Math.ceil(d)+2,g=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+p+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+h+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(a-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(i-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Er=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var u=[r&&t>1?i-1:i,r&&n>1?o-1:o],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+i+".0, "+o+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},Sr=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],i=r[2],o=e.shape,s=o[1],u=o[2],l=[n&&s>1?a-1:a,n&&u>1?i-1:i],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],p=l[1]/c[1],d=1/f,h=1/p,m=2*Math.ceil(d)+2,g=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+p+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+h+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+l[0]+") *\n                (float(dyR) / float("+c[0]+"));\n\n            float sourceFracCol =\n                float("+l[1]+") *\n                  (float(dyC) / float("+c[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Cr=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var u=[r&&t>1?i-1:i,r&&n>1?o-1:o],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+i+".0, "+o+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+c+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},Ir=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map((function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)})).join(","),a=Kt(n);this.userCode="\n      void main() {\n        "+a+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},Or=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,a=e.inSize,i=e.numSegments,o=i*Math.ceil(a/n);this.outputShape=[r,o];var s=4*Math.floor(n/4),u=n%4,l="\n        sumValue += dot(values, filter);\n    ",c="";a%n>0&&(c="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return initializationValue;\n        }\n      ");var f="";a%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+c+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+f+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+i+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+i+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+l+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+l+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+l+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+l+"\n        }\n        setOutput(sumValue);\n      }\n    "},Pr=function(e,t,n){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)a="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[],u=0;u<t.length;u++)s.push(""+i[u]),u<e&&o.push(""+i[u]);r=o.join(),a=s.join()}var l=Kt(n);this.userCode="\n      void main() {\n        "+l+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+a+"));\n        } else {\n          setOutput(getB("+a+"));\n        }\n      }\n    "},Tr=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t=Kt(this.rank),n=function(e){if(1===e)return"sourceLoc";if(2===e)return"sourceLoc.x, sourceLoc.y";if(3===e)return"sourceLoc.x, sourceLoc.y, sourceLoc.z";if(4===e)return"sourceLoc.x, sourceLoc.y, sourceLoc.z, sourceLoc.w";throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);this.userCode="\n      uniform "+t+" start;\n\n      void main() {\n        "+t+" sourceLoc = start + getOutputCoords();\n        setOutput(getSource("+n+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){if(null!=t.startLoc||(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null!=t.startLoc))if(1===t.rank)n.gl.uniform1i(t.startLoc,e[0]);else if(2===t.rank)n.gl.uniform2i(t.startLoc,e[0],e[1]);else if(3===t.rank)n.gl.uniform3i(t.startLoc,e[0],e[1],e[2]);else{if(4!==t.rank)throw Error("Slicing for rank "+t.rank+" is not yet supported");n.gl.uniform4i(t.startLoc,e[0],e[1],e[2],e[3])}}},e}();var Ar=function(e,t,n,r){this.variableNames=["x"];var a=n.filter((function(e,t){return-1===r.indexOf(t)}));this.outputShape=a;var i=n.length,o=Kt(n.length),s=Kt(a.length),u="";if(1===i)u="coords * strides + begin";else{var l=0;u=n.map((function(e,t){return-1===r.indexOf(t)?(l++,1===a.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(l-1)+"] * strides["+t+"] + begin["+t+"]"):"begin["+t+"]"})).join(",")}this.userCode="\n      "+o+" begin = "+o+"("+e+");\n      "+o+" strides = "+o+"("+t+");\n\n      void main() {\n        "+s+" coords = getOutputCoords();\n        setOutput(getX("+u+"));\n      }\n    "},Rr=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t){var n,r=Dr(t),a=Mr(e,r);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var i=this.freeTextures[a].shift();return this.usedTextures[a].push(i),i}return this.numUsedTextures++,this.log(),r===Zt.FLOAT32?n=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===Zt.FLOAT16?n=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===Zt.UNSIGNED_BYTE&&(n=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(n),n},e.prototype.releaseTexture=function(e,t,n){var r=Mr(t,Dr(n));r in this.freeTextures||(this.freeTextures[r]=[]),this.freeTextures[r].push(e),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[r],i=a.indexOf(e);if(i<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(i,1),this.log()},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var t in this.usedTextures)this.usedTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function Dr(e){if(e===Qt.DOWNLOAD||e===Qt.PIXELS)return Zt.UNSIGNED_BYTE;if(e===Qt.UPLOAD)return Zt.FLOAT32;if(e===Qt.RENDER)return me.get("WEBGL_RENDER_FLOAT32_ENABLED")?Zt.FLOAT32:Zt.FLOAT16;throw new Error("Unknown logical texture type "+e)}function Mr(e,t){return e[0]+"_"+e[1]+"_"+t}var Lr=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var a=Kt(this.rank),i=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod("+n[a]+", "+e[a]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "};var zr=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var a=Kt(this.rank),i=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(t);this.userCode="\n    void main() {\n      "+a+" resRC = getOutputCoords();\n      setOutput(getA("+i+"));\n    }\n    "};var jr=1.7580993408473768,Br=1.0507009873554805,Fr=function(){function e(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float NAN;\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(){var e=this;return function(t,n){null==e.startLoc&&(e.startLoc=t.getUniformLocationNoThrow(n,"NAN"),null==e.startLoc)||t.gl.uniform1f(e.startLoc,NaN)}},e}(),Vr="if (isNaN(x)) return x;";var Ur=Ve({concat_:function(e,t){void 0===t&&(t=0),f(e.length>=1,"Pass at least one tensor to concat");var n=Fe(e,"tensors","concat"),r=De(n.map((function(e){return e.shape})),t);if(0===v(r))return He([],r);if(1===(n=n.filter((function(e){return e.size>0}))).length)return n[0];var a=Oe(t,n[0].shape)[0],i=n.map((function(e){return e.shape}));!function(e,t){var n=e[0].length;e.forEach((function(e,t){f(e.length===n,"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")")})),f(t>=0&&t<n,"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+".");var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)f(i===t||e[i]===r[i],"Error in concat"+n+"D: Shape of tensors["+a+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+a+".")}))}(i,a);var o=n;return me.engine.runKernel((function(e){return e.concat(n,a)}),o,(function(e){var n=i.map((function(e){return e[t]}));return Kr(e,n,t).map((function(e){return function(){return e}}))}))}}),Wr=Ve({concat1d_:function(e){return Ur(e,0)}}),qr=Ve({concat2d_:function(e,t){return Ur(e,t)}}),$r=Ve({concat3d_:function(e,t){return Ur(e,t)}}),Hr=Ve({concat4d_:function(e,t){return Ur(e,t)}}),Kr=Ve({split_:function(e,t,n){void 0===n&&(n=0);var r,a=Be(e,"x","split");return n=Oe(n,a.shape)[0],"number"==typeof t?(f(a.shape[n]%t==0,"Number of splits must evenly divide the axis."),r=Array(t).fill(a.shape[n]/t)):(f(a.shape[n]===t.reduce((function(e,t){return e+t})),"The sum of sizes must match the size of the axis dimension."),r=t),me.engine.runKernel((function(e){return e.split(a,r,n)}),{$x:a},(function(e){return{$x:function(){return Ur(e,n)}}}))}});"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self&&self;function Gr(e,t){return e(t={exports:{}},t.exports),t.exports}var Yr=Gr((function(e){!function(e,t,n){function r(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function a(e,t){var n=new function(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}(e),a=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,a&&("object"==typeof a&&r(a,n),i.state=function(){return r(n,{})}),i}t&&t.exports?t.exports=a:this.alea=a}(0,e)})),Xr=Gr((function(e){!function(e,t,n){function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function a(e,t){var n=new function(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}(e),a=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,a&&("object"==typeof a&&r(a,n),i.state=function(){return r(n,{})}),i}t&&t.exports?t.exports=a:this.xor128=a}(0,e)})),Jr=Gr((function(e){!function(e,t,n){function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function a(e,t){var n=new function(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}(e),a=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,a&&("object"==typeof a&&r(a,n),i.state=function(){return r(n,{})}),i}t&&t.exports?t.exports=a:this.xorwow=a}(0,e)})),Qr=Gr((function(e){!function(e,t,n){function r(e,t){return t.x=e.x.slice(),t.i=e.i,t}function a(e,t){null==e&&(e=+new Date);var n=new function(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}(e),a=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,a&&(a.x&&r(a,n),i.state=function(){return r(n,{})}),i}t&&t.exports?t.exports=a:this.xorshift7=a}(0,e)})),Zr=Gr((function(e){!function(e,t,n){function r(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function a(e,t){null==e&&(e=+new Date);var n=new function(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}(e),a=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,a&&(a.X&&r(a,n),i.state=function(){return r(n,{})}),i}t&&t.exports?t.exports=a:this.xor4096=a}(0,e)})),ea=Gr((function(e){!function(e,t,n){function r(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function a(e,t){var n=new function(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}(e),a=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,a&&("object"==typeof a&&r(a,n),i.state=function(){return r(n,{})}),i}t&&t.exports?t.exports=a:this.tychei=a}(0,e)})),ta=Gr((function(e){!function(t,r){var a,i=this,o=256,s="random",u=r.pow(o,6),l=r.pow(2,52),c=2*l,f=255;function p(e,n,p){var g=[],v=h(function e(t,n){var r,a=[],i=typeof t;if(n&&"object"==i)for(r in t)try{a.push(e(t[r],n-1))}catch(e){}return a.length?a:"string"==i?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,m(t)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(o):(e=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(e)),m(e)}catch(e){var n=i.navigator,r=n&&n.plugins;return[+new Date,i,r,i.screen,m(t)]}}():e,3),g),y=new function(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);a<o;)s[a]=a++;for(a=0;a<o;a++)s[a]=s[i=f&i+e[a%n]+(t=s[a])],s[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,s=r.S;e--;)t=s[a=f&a+1],n=n*o+s[f&(s[a]=s[i=f&i+t])+(s[i]=t)];return r.i=a,r.j=i,n})(o)}(g),b=function(){for(var e=y.g(6),t=u,n=0;e<l;)e=(e+n)*o,t*=o,n=y.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,h(m(y.S),t),(n.pass||p||function(e,t,n,a){return a&&(a.S&&d(a,y),e.state=function(){return d(y,{})}),n?(r[s]=e,t):e})(b,v,"global"in n?n.global:this==r,n.state)}function d(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function h(e,t){for(var n,r=e+"",a=0;a<r.length;)t[f&a]=f&(n^=19*t[f&a])+r.charCodeAt(a++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(r["seed"+s]=p,h(r.random(),t),e.exports){e.exports=p;try{a=n(Object(function(){var e=new Error("Cannot find module 'crypto'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(e){}}}([],Math)}));ta.alea=Yr,ta.xor128=Xr,ta.xorwow=Jr,ta.xorshift7=Qr,ta.xor4096=Zr,ta.tychei=ea;var na=ta.alea,ra=function(){function e(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=a||Math.random();this.random=na(i.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}();function aa(e,t,n){return void 0===t&&(t="float32"),new H(e,t,n)}var ia=Ve({batchToSpaceND_:function(e,t,n){var r=Be(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));return f(r.rank>=1+t.length,"input rank should be > than [blockShape] but got "+r.rank),f(n.length===t.length,"crops.shape[0] must be equal to [blockShape] but got "+n.length),f(r.shape[0]%a==0,"input tensor batch must be divisible by prod( blockShape )"),me.engine.runKernel((function(e){return e.batchToSpaceND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}}))}}),oa=Ve({cast_:function(e,t){var n=Be(e,"x","cast");return me.engine.runKernel((function(e){return e.cast(n,t)}),{$x:n},(function(e){return{$x:function(){return e.clone()}}}))}}),sa=Ve({clone_:function(e){var t=Be(e,"x","clone");return me.engine.runKernel((function(e){return X.make(t.shape,{dataId:t.dataId},t.dtype)}),{$x:t},(function(e){return{$x:function(){return e.toFloat()}}}))}}),ua=Ve({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var a=Be(e,"x","cumsum"),i=Te([t|=0],a.rank),o=a;null!=i&&(o=a.transpose(i));var s=Re(1,a.rank)[0],u=me.engine.runKernel((function(e){return e.cumsum(o,s,n,r)}),{permutedX:o},(function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}}));return null!=i&&(u=u.transpose(i)),u}}),la=Ve({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=Be(e,"x","depthToSpace"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];return f(a*t>=0,"Negative dimension size caused by overflow when multiplying\n      "+a+" and "+t+"  for depthToSpace with input shape\n      "+r.shape),f(i*t>=0,"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+t+" for depthToSpace with input shape\n          "+r.shape),f(o%(t*t)==0,"Dimension size must be evenly divisible by "+t*t+" but is "+o+" for depthToSpace with input shape "+r.shape),me.engine.runKernel((function(e){return e.depthToSpace(r,t,n)}),{$x:r})}}),ca=Ve({expandDims_:function(e,t){void 0===t&&(t=0);var n=Be(e,"x","expandDims");f(t<=n.rank,"Axis must be <= rank of the tensor");var r=n.shape.slice();return t<0&&(f(-(n.rank+1)<=t,"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"),t=n.rank+t+1),r.splice(t,0,1),Na(n,r)}}),fa=Ve({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var a=aa([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=a.toTensor().as2D(e,t);if(null==n)return s;if(1===n.length)return Ca(ca(s,0),[n[0],1,1]);if(2===n.length)return Ca(ca(ca(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return Ca(ca(ca(ca(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),pa=Ve({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");return me.engine.fromPixels(e,t)}}),da=Ve({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var a=Be(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();var s=1===o?a.as2D(1,-1):a,u=me.engine.runKernel((function(e){return e.multinomial(s,r,t,n)}),{logits2D:s});return 1===o?u.as1D():u}}),ha=Ve({oneHot_:function(e,t,n,r){void 0===n&&(n=1),void 0===r&&(r=0);var a=Be(e,"indices","oneHot","int32");if(f("int32"===a.dtype,"Indices must be of dtype `int32`"),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);return me.engine.runKernel((function(e){return e.oneHot(a,t,n,r)}),{$indices:a},(function(e){return{$indices:function(){return ct(a)}}}))}}),ma=Ve({pad_:function(e,t,n){void 0===n&&(n=0);var r=Be(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a=t.map((function(e){return e[0]}));return me.engine.runKernel((function(e){return e.pad(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.slice(a,r.shape)}}}))}}),ga=Ve({pad1d_:function(e,t,n){return void 0===n&&(n=0),f(2===t.length,"Invalid number of paddings. Must be length of 2."),ma(e,[t],n)}}),va=Ve({pad2d_:function(e,t,n){return void 0===n&&(n=0),f(2===t.length&&2===t[0].length&&2===t[1].length,"Invalid number of paddings. Must be length of 2 each."),ma(e,t,n)}}),ya=Ve({pad3d_:function(e,t,n){return void 0===n&&(n=0),f(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,"Invalid number of paddings. Must be length of 2 each."),ma(e,t,n)}}),ba=Ve({pad4d_:function(e,t,n){return void 0===n&&(n=0),f(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,"Invalid number of paddings. Must be length of 2 each."),ma(e,t,n)}}),wa=Ve({rand_:function(e,t,n){var r=v(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return X.make(e,{values:a},n)}}),xa=Ve({randomNormal_:function(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var i=new ra(t,n,r,!1,a),o=aa(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),_a=Ve({randomUniform_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var a=aa(e,r),i=0;i<a.values.length;i++)a.values[i]=c(t,n);return a.toTensor()}}),Na=Ve({reshape_:function(e,t){var n=Be(e,"x","reshape");return t=k(t,n.size),f(n.size===v(t),"new shape and old shape must have the same number of elements."),me.engine.runKernel((function(e){return e.reshape(n,t)}),{$x:n},(function(e){return{$x:function(){return e.reshape(n.shape)}}}))}}),ka=Ve({spaceToBatchND_:function(e,t,n){var r=Be(e,"x","spaceToBatchND");return f(r.rank>=1+t.length,"input rank "+r.rank+" should be > than [blockShape] "+t.length),f(n.length===t.length,"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length),f(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0:e}),!0),"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()),me.engine.runKernel((function(e){return e.spaceToBatchND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}}))}}),Ea=Ve({squeeze_:function(e,t){var n=Be(e,"x","squeeze");return Na(n,E(n.shape,t).newShape)}}),Sa=Ve({stack_:function(e,t){void 0===t&&(t=0);var n=Fe(e,"tensors","stack");if(f(n.length>=1,"Pass at least one tensor to tf.stack"),1===n.length)return n[0].expandDims(t);var r=n[0].rank,a=n[0].shape,i=n[0].dtype;f(t<=r,"Axis must be <= rank of the tensor"),n.forEach((function(e){p(a,e.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(e){f(i===e.dtype,"All tensors passed to stack must have matching dtypes")}));var o=n.map((function(e){return e.expandDims(t)}));return Ur(o,t)}}),Ca=Ve({tile_:function(e,t){var n=Be(e,"x","tile");return f(n.rank===t.length,"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."),me.engine.runKernel((function(e){return e.tile(n,t)}),{$x:n},(function(e){return{$x:function(){var r=ct(n);if(1===n.rank)for(var a=0;a<t[0];++a)r=r.add(e.slice([a*n.shape[0]],[n.shape[0]]));else if(2===n.rank)for(a=0;a<t[0];++a)for(var i=0;i<t[1];++i)r=r.add(e.slice([a*n.shape[0],i*n.shape[1]],[n.shape[0],n.shape[1]]));else if(3===n.rank)for(a=0;a<t[0];++a)for(i=0;i<t[1];++i)for(var o=0;o<t[2];++o)r=r.add(e.slice([a*n.shape[0],i*n.shape[1],o*n.shape[2]],[n.shape[0],n.shape[1],n.shape[2]]));else{if(4!==n.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+n.rank+" tensors yet.");for(a=0;a<t[0];++a)for(i=0;i<t[1];++i)for(o=0;o<t[2];++o)for(var s=0;s<t[3];++s)r=r.add(e.slice([a*n.shape[0],i*n.shape[1],o*n.shape[2],s*n.shape[3]],[n.shape[0],n.shape[1],n.shape[2],n.shape[3]]))}return r}}}))}}),Ia=Ve({truncatedNormal_:function(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var i=new ra(t,n,r,!0,a),o=aa(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),Oa=Ve({unstack_:function(e,t){void 0===t&&(t=0);for(var n,r=Be(e,"x","unstack"),a=r.shape[t],i=Array(r.rank-1).fill(0),o=0,s=0;s<r.rank;s++)s!==t&&(i[o]=r.shape[s],o++);n=Array(a).fill(1);var u=Array(r.rank).fill(0),l=r.shape.slice();return n.map((function(e){l[t]=e;var n=r.slice(u,l);return u[t]+=e,n.reshape(i)}))}});function Pa(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var a=aa(e,"int32"),i=aa([n.length,e.length],"int32");for(r=0;r<n.length;r++){var o=a.indexToLoc(n[r]),s=r*e.length;i.values.set(o,s)}return i.toTensor()}var Ta=function(){function e(e,t){if(void 0===t&&(t=!0),this.gpgpu=e,this.delayedStorage=t,this.texData=new WeakMap,this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.lruDataGPU=[],this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.binaryCache={},this.disposed=!1,me.get("WEBGL_VERSION")<1)throw new Error("WebGL is not supported on this device");me.get("IS_BROWSER")&&(this.canvas=document.createElement("canvas")),null==e?(this.gpgpu=new dr(Hn(this.canvas)),this.gpgpuCreatedLocally=!0):this.gpgpuCreatedLocally=!1,this.NUM_BYTES_BEFORE_PAGING=window.screen.height*window.screen.width*window.devicePixelRatio*300,this.textureManager=new Rr(this.gpgpu)}return e.prototype.register=function(e,t,n){if(this.texData.has(e))throw new Error("Data buffer is already registered");this.texData.set(e,{shape:t,dtype:n,values:null,texture:null,complexTensors:null,texShape:null,usage:Qt.RENDER})},e.prototype.fromPixels=function(e,t){if(null==e)throw new Error("pixels passed to tf.fromPixels() can not be null");var n=[e.height,e.width],r=[e.height,e.width,t];if(!(e instanceof HTMLVideoElement||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageData))throw new Error("pixels passed to tf.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+e.constructor.name);if(e instanceof HTMLVideoElement){if(null==this.fromPixelsCanvas){if(!me.get("IS_BROWSER"))throw new Error("Can't read pixels from HTMLImageElement outside the browser.");if("complete"!==document.readyState)throw new Error("The DOM is not ready yet. Please call tf.fromPixels() once the DOM is ready. One way to do that is to add an event listener for `DOMContentLoaded` on the document object");this.fromPixelsCanvas=document.createElement("canvas")}this.fromPixelsCanvas.width=e.width,this.fromPixelsCanvas.height=e.height,this.fromPixelsCanvas.getContext("2d").drawImage(e,0,0,e.width,e.height),e=this.fromPixelsCanvas}var a=X.make(n,{},"int32");this.texData.get(a.dataId).usage=Qt.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(a.dataId),e);var i=new nn(r),o=this.compileAndRun(i,[a]);return a.dispose(),o},e.prototype.write=function(e,t){if(null==t)throw new Error("MathBackendWebGL.write(): values can not be null");this.throwIfNoData(e);var n=this.texData.get(e),r=n.texture,a=n.texShape,i=n.usage;if("complex64"===n.dtype)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");null!=r&&(this.releaseTexture(e,r,a,i),n.texture=null,n.texShape=null),n.usage=Qt.UPLOAD,n.values=t,this.delayedStorage||this.uploadToGPU(e)},e.prototype.readSync=function(e){this.throwIfNoData(e);var t=this.texData.get(e),n=t.shape,r=t.texture,a=t.values,i=t.texShape,o=t.dtype,s=t.complexTensors;if(null!=a)return this.cacheOnCPU(e),a;var u,l,c=null!=this.activeTimers;return c&&(u=performance.now()),l="complex64"===o?gt(s.real.dataSync(),s.imag.dataSync()):this.getValuesFromTexture(r,e,o,i,n),c&&(this.downloadWaitMs+=performance.now()-u),this.cacheOnCPU(e,l),t.values},e.prototype.read=function(e){return o(this,void 0,void 0,(function(){var t,n,r,a,i,o,u,l,c,f;return s(this,(function(s){switch(s.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise((function(e){return t.push(e)}))];if(this.throwIfNoData(e),n=this.texData.get(e),r=n.shape,a=n.texture,i=n.values,o=n.texShape,u=n.dtype,null!=i)return this.cacheOnCPU(e),[2,i];if(this.pendingRead.set(e,[]),!me.get("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===me.get("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return l=this.gpgpu.maybeCreateBufferFromTexture(a,o[0],o[1]),[4,this.gpgpu.createAndWaitForFence()];case 1:return s.sent(),c=l instanceof WebGLTexture?this.getValuesFromTexture(a,e,u,o,r):this.gpgpu.downloadFloat32MatrixFromBuffer(l,o[0],o[1]),this.cacheOnCPU(e,c),f=this.pendingRead.get(e),this.pendingRead.delete(e),f.forEach((function(e){return e(c)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)),[2,c]}}))}))},e.prototype.getValuesFromTexture=function(e,t,n,r,a){if(me.get("WEBGL_DOWNLOAD_FLOAT_ENABLED"))return this.gpgpu.downloadFloat32MatrixFromOutputTexture(e,r[0],r[1]);var i=X.make(a,{});this.texData.get(i.dataId).usage=Qt.DOWNLOAD;var o=X.make(a,{dataId:t},n),s=new tn(a);this.compileAndRun(s,[o],i,null,!1);var u=this.texData.get(i.dataId),l=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture,u.texShape[0],u.texShape[1]);return o.dispose(),i.dispose(),l},e.prototype.time=function(e){return o(this,void 0,void 0,(function(){var t,n,r,a,i,o;return s(this,(function(s){switch(s.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),a=h(this.activeTimers),this.activeTimers=t,r&&(this.programTimersStack=null),[4,Promise.all(a).then((function(e){var t=0;return e.forEach((function(e){return t+=e})),t}))];case 1:return i=s.sent(),o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:i,wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,o]}}))}))},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return me.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:performance.now(),endMs:null}},e.prototype.endTimer=function(e){return me.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),e):(e.endMs=performance.now(),e)},e.prototype.getQueryTime=function(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(n){return me.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]}))}))},e.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e))if(this.pendingRead.has(e))this.pendingDisposal.add(e);else if(this.texData.has(e)){var t=this.texData.get(e),n=t.texture,r=t.texShape,a=t.usage,i=t.complexTensors;null!=n&&this.releaseTexture(e,n,r,a),null!=i&&(i.real.dispose(),i.imag.dispose()),this.texData.delete(e)}},e.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.getCanvas=function(){return this.canvas},e.prototype.complex=function(e,t){var n=X.make(e.shape,{},"complex64");return this.texData.get(n.dataId).complexTensors={real:me.engine.keep(e.clone()),imag:me.engine.keep(t.clone())},n},e.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},e.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},e.prototype.slice=function(e,t,n){var r=new Tr(n),a=r.getCustomSetupFunc(t);return this.compileAndRun(r,[e],null,a)},e.prototype.stridedSlice=function(e,t,n,r,a,i,o,s,u){var l=Le(e.shape,t,n,r,a,i,o,s,u),c=l[0],f=l[1],p=l[2],d=f.filter((function(e,t){return-1===p.indexOf(t)}));if(d.some((function(e){return 0===e})))return He([],d);var h=new Ar(c,r,f,p);return this.compileAndRun(h,[e])},e.prototype.reverse=function(e,t){var n=new Ir(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.concat2Tensors=function(e,t,n){var r=De([e.shape,t.shape],n),a=e.as2D(-1,v(e.shape.slice(n))),i=t.as2D(-1,v(t.shape.slice(n))),o=new Dt(a.shape,i.shape);return this.compileAndRun(o,[a,i]).reshape(r)},e.prototype.concat=function(e,t){if(1===e.length)return e[0];for(var n=e[0],r=1;r<e.length;++r)n=this.concat2Tensors(n,e[r],t);return n},e.prototype.neg=function(e){var t=new Fr(e.shape,"return -x;");return this.compileAndRun(t,[e])},e.prototype.batchMatMul=function(e,t,n,r){var a=new yr(e.shape,t.shape,n,r);return this.compileAndRun(a,[e,t])},e.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),a=new Ot(Ct,e.shape,t.shape),i=new Ot(It,e.shape,t.shape),o=[this.makeComplexComponentTensorHandle(e,n.complexTensors.real),this.makeComplexComponentTensorHandle(e,n.complexTensors.imag),this.makeComplexComponentTensorHandle(t,r.complexTensors.real),this.makeComplexComponentTensorHandle(t,r.complexTensors.imag)],s=this.compileAndRun(a,o),u=this.compileAndRun(i,o),l=this.complex(s,u);return s.dispose(),u.dispose(),l}var c=new At("return a * b;",e.shape,t.shape),f=this.makeOutputArray(c.outputShape,e.dtype);return this.compileAndRun(c,[e,t],f)},e.prototype.batchNormalization=function(e,t,n,r,a,i){var o=[e,t,n],s=null;null!=i&&(s=i.shape,o.push(i));var u=null;null!=a&&(u=a.shape,o.push(a));var l=new St(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(l,o)},e.prototype.localResponseNormalization4D=function(e,t,n,r,a){var i=new mr(e.shape,t,n,r,a);return this.compileAndRun(i,[e])},e.prototype.LRNGrad=function(e,t,n,r,a,i,o){var s=new gr(t.shape,r,a,i,o);return this.compileAndRun(s,[t,n,e])},e.prototype.tile=function(e,t){var n=new Lr(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.pad=function(e,t,n){var r=new xr(e.shape,t,n);return this.compileAndRun(r,[e])},e.prototype.transpose=function(e,t){var n=new zr(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.gather=function(e,t,n){var r=new rn(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},e.prototype.batchToSpaceND=function(e,t,n){f(e.rank<=4,"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");var r=t.reduce((function(e,t){return e*t})),a=xe(e.shape,t,r),i=_e(a.length,t.length),o=Ne(e.shape,t,r),s=ke(n,t.length),u=Ee(o,n,t.length);return e.reshape(a).transpose(i).reshape(o).slice(s,u)},e.prototype.spaceToBatchND=function(e,t,n){f(e.rank<=4,"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");var r=t.reduce((function(e,t){return e*t})),a=[[0,0]];a.push.apply(a,n);for(var i=1+t.length;i<e.shape.length;++i)a.push([0,0]);var o=e.pad(a),s=xe(o.shape,t,r,!1),u=_e(s.length,t.length,!1),l=Ne(o.shape,t,r,!1);return o.reshape(s).transpose(u).reshape(l)},e.prototype.reduce=function(e,t,n){var r=e.shape[0],a=e.shape[1],i=Me(a),o=new Nr({windowSize:i,inSize:a,batchSize:r},t),s=o.outputShape,u=s[0],l=s[1],c=this.makeOutputArray([u,l],n);return this.compileAndRun(o,[e],c),1===c.shape[1]?c:this.reduce(c,t,n)},e.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],a=e.shape[1];null!=n&&(r=n.shape[0],a=n.shape[1]);var i=Me(a),o=new xt({windowSize:i,inSize:a,batchSize:r},t,null==n),s=o.outputShape,u=s[0],l=s[1],c=this.makeOutputArray([u,l],"int32"),f=[e];return null!=n&&f.push(n),this.compileAndRun(o,f,c),1===c.shape[1]?c:this.argReduce(e,t,c)},e.prototype.sum=function(e,t){Pe("sum",t,e.rank);var n=Ce(e.shape,t),r=n[0],a=v(n[1]),i=e.as2D(-1,a),o=dt(e.dtype);return this.reduce(i,"sum",o).reshape(r)},e.prototype.unsortedSegmentSum=function(e,t,n){var r=0,a=Te([r],e.rank),i=e;null!=a&&(i=e.transpose(a),r=Re(1,e.rank)[0]);var o=function(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}(i.shape,r,n),s=v([i.shape[r]]),u=i.as2D(-1,s),l=dt(e.dtype),c=this.segOpCompute(u,"unsortedSegmentSum",t,l,n).reshape(o);return null!=a&&(c=c.transpose(Ae(a))),c},e.prototype.segOpCompute=function(e,t,n,r,a){var i=e.shape[0],o=e.shape[1],s=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=R(e,Math.floor(Math.sqrt(e)));!r;){if(n>t||n===e){r=!0;break}n=R(e,n+1)}return n}(o,a),u=new Or({windowSize:s,inSize:o,batchSize:i,numSegments:a},t),l=u.outputShape,c=l[0],f=l[1],p=this.makeOutputArray([c,f],r);return this.compileAndRun(u,[e,n],p),p.shape[1]===a?p:(n=nt(0,a).tile([o/s]),this.segOpCompute(p,t,n,r,a))},e.prototype.argMin=function(e,t){var n=[t];Pe("argMin",n,e.rank);var r=Ce(e.shape,n),a=r[0],i=v(r[1]),o=e.as2D(-1,i);return this.argReduce(o,"min").reshape(a)},e.prototype.argMax=function(e,t){var n=[t];Pe("argMax",n,e.rank);var r=Ce(e.shape,n),a=r[0],i=v(r[1]),o=e.as2D(-1,i);return this.argReduce(o,"max").reshape(a)},e.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var a=new Xt(e.shape,n,r);return this.compileAndRun(a,[e])},e.prototype.equal=function(e,t){var n=new At("return float(a == b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.notEqual=function(e,t){var n=new At("return float(a != b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.less=function(e,t){var n=new At("return float(a < b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.lessEqual=function(e,t){var n=new At("return float(a <= b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.greater=function(e,t){var n=new At("return float(a > b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.greaterEqual=function(e,t){var n=new At("return float(a >= b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.logicalNot=function(e){var t=new Fr(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},e.prototype.logicalAnd=function(e,t){var n=new At("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.logicalOr=function(e,t){var n=new At("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.select=function(e,t,n){var r=new Pr(e.rank,t.shape,t.rank),a=this.makeOutputArray(r.outputShape,pt(t.dtype,n.dtype));return this.compileAndRun(r,[e,t,n],a)},e.prototype.where=function(e){we("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Pa(e.shape,t)},e.prototype.topk=function(e,t,n){return wt(e.dataSync(),e.shape,e.dtype,t)},e.prototype.min=function(e,t){Pe("min",t,e.rank);var n=Ce(e.shape,t),r=n[0],a=v(n[1]),i=e.as2D(-1,a);return this.reduce(i,"min",i.dtype).reshape(r)},e.prototype.minimum=function(e,t){var n=new At("\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.mod=function(e,t){var n=new At("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape),r=n.getCustomSetupFunc();return this.compileAndRun(n,[e,t],null,r)},e.prototype.max=function(e,t){Pe("max",t,e.rank);var n=Ce(e.shape,t),r=n[0],a=v(n[1]),i=e.as2D(-1,a);return this.reduce(i,"max",i.dtype).reshape(r)},e.prototype.maximum=function(e,t){var n=new At("\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.all=function(e,t){Pe("all",t,e.rank);var n=Ce(e.shape,t),r=n[0],a=v(n[1]),i=e.as2D(-1,a);return this.reduce(i,"all",i.dtype).reshape(r)},e.prototype.any=function(e,t){Pe("any",t,e.rank);var n=Ce(e.shape,t),r=n[0],a=v(n[1]),i=e.as2D(-1,a);return this.reduce(i,"any",i.dtype).reshape(r)},e.prototype.squaredDifference=function(e,t){var n=new At("return (a - b) * (a - b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.realDivide=function(e,t){var n=new At("if (a == b) return 1.0;\n  return a / b;",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[e,t],r)},e.prototype.floorDiv=function(e,t){var n=new At("\n  float resultSign = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  int result = ia / ib;\n  int amodb = ia - ib * result;\n\n  if (resultSign < 0.0 && amodb != 0) {\n    result -= 1;\n  }\n  return float(result);\n",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"int32");return this.compileAndRun(n,[e,t],r)},e.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,Pt);var n=new At(Pt,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,pt(e.dtype,t.dtype));return this.compileAndRun(n,[e,t],r)},e.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,a=this.texData.get(e.dataId),i=this.texData.get(t.dataId),o=[[a.complexTensors.real,i.complexTensors.real],[a.complexTensors.imag,i.complexTensors.imag]].map((function(a){var i=a[0],o=a[1],s=new At(n,e.shape,t.shape),u=r.makeOutputArray(s.outputShape,pt(i.dtype,o.dtype)),l=r.makeComplexComponentTensorHandle(e,i),c=r.makeComplexComponentTensorHandle(t,o);return r.compileAndRun(s,[l,c],u)})),s=o[0],u=o[1],l=this.complex(s,u);return s.dispose(),u.dispose(),l},e.prototype.makeComplexComponentTensorHandle=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},e.prototype.addN=function(e){for(var t=e[0],n=1;n<e.length;n++)t=this.add(t,e[n]);return t},e.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,Tt);var n=new At(Tt,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,pt(e.dtype,t.dtype));return this.compileAndRun(n,[e,t],r)},e.prototype.pow=function(e,t){var n=new At("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nreturn (round(mod(b, 2.0)) == 0 || round(mod(b, 2.0)) == 2) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),r=n.getCustomSetupFunc(),a=this.makeOutputArray(n.outputShape,pt(e.dtype,t.dtype));return this.compileAndRun(n,[e,t],a,r)},e.prototype.ceil=function(e){var t=new Fr(e.shape,"return ceil(x);");return this.compileAndRun(t,[e])},e.prototype.floor=function(e){var t=new Fr(e.shape,"return floor(x);");return this.compileAndRun(t,[e])},e.prototype.sign=function(e){var t=new Fr(e.shape,"\n  if (isNaN(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},e.prototype.round=function(e){var t=new Fr(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},e.prototype.exp=function(e){var t=new Fr(e.shape,"return exp(x);");return this.compileAndRun(t,[e])},e.prototype.expm1=function(e){var t=new Fr(e.shape,"return exp(x) - 1.0;");return this.compileAndRun(t,[e])},e.prototype.log=function(e){var t=new Fr(e.shape,"if (x < 0.0) return NAN;\n  return log(x);"),n=t.getCustomSetupFunc();return this.compileAndRun(t,[e],null,n)},e.prototype.log1p=function(e){var t=new Fr(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},e.prototype.sqrt=function(e){var t=new Fr(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},e.prototype.rsqrt=function(e){var t=new Fr(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},e.prototype.square=function(e){var t=new Fr(e.shape,"return x * x;");return this.compileAndRun(t,[e])},e.prototype.reciprocal=function(e){var t=new Fr(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},e.prototype.relu=function(e){var t=new Fr(e.shape,"if (isNaN(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n");return this.compileAndRun(t,[e])},e.prototype.elu=function(e){var t=new Fr(e.shape,"return (x >= 0.0) ? x : (exp(x) - 1.0);");return this.compileAndRun(t,[e])},e.prototype.eluDer=function(e,t){var n=new At("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.selu=function(e){var t=new Fr(e.shape,"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n");return this.compileAndRun(t,[e])},e.prototype.int=function(e){var t=new Fr(e.shape,"return float(int(x));"),n=this.makeOutputArray(t.outputShape,"int32");return this.compileAndRun(t,[e],n)},e.prototype.clip=function(e,t,n){var r=new Rt(e.shape,t,n);return this.compileAndRun(r,[e])},e.prototype.abs=function(e){var t=new Fr(e.shape,"return abs(x);");return this.compileAndRun(t,[e])},e.prototype.sigmoid=function(e){var t=new Fr(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},e.prototype.softplus=function(e){var t=new Fr(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},e.prototype.sin=function(e){var t=new Fr(e.shape,"if (isNaN(x)) return x;\n  return sin(x);\n");return this.compileAndRun(t,[e])},e.prototype.cos=function(e){var t=new Fr(e.shape,"if (isNaN(x)) return x;\n  return cos(x);\n");return this.compileAndRun(t,[e])},e.prototype.tan=function(e){var t=new Fr(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},e.prototype.asin=function(e){var t=new Fr(e.shape,"return asin(x);");return this.compileAndRun(t,[e])},e.prototype.acos=function(e){var t=new Fr(e.shape,"return acos(x);");return this.compileAndRun(t,[e])},e.prototype.atan=function(e){var t=new Fr(e.shape,"if (isNaN(x)) return x;\n  return atan(x);\n");return this.compileAndRun(t,[e])},e.prototype.atan2=function(e,t){var n=new At("\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.sinh=function(e){var t=new Fr(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},e.prototype.cosh=function(e){var t=new Fr(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},e.prototype.tanh=function(e){var t=new Fr(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},e.prototype.asinh=function(e){var t=new Fr(e.shape,"return log(x + sqrt(x * x + 1.0));");return this.compileAndRun(t,[e])},e.prototype.acosh=function(e){var t=new Fr(e.shape,"if (isNaN(x)) return x;\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));"),n=t.getCustomSetupFunc();return this.compileAndRun(t,[e],null,n)},e.prototype.atanh=function(e){var t=new Fr(e.shape,"if (isNaN(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;"),n=t.getCustomSetupFunc();return this.compileAndRun(t,[e],null,n)},e.prototype.erf=function(e){var t=new Fr(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float t = 1.0 / (1.0 + p * x);\n  return 1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x);\n');return this.compileAndRun(t,[e])},e.prototype.step=function(e,t){var n=new Fr(e.shape,function(e){return void 0===e&&(e=0),Vr+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},e.prototype.conv2d=function(e,t,n){var r=new Bt(n);return this.compileAndRun(r,[e,t])},e.prototype.conv2dDerInput=function(e,t,n){var r=new Lt(n);return this.compileAndRun(r,[e,t])},e.prototype.conv2dDerFilter=function(e,t,n){var r=new Mt(n);return this.compileAndRun(r,[e,t])},e.prototype.depthwiseConv2D=function(e,t,n){var r=new Vt(n);return this.compileAndRun(r,[e,t])},e.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new jt(n);return this.compileAndRun(r,[e,t])},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new zt(n);return this.compileAndRun(r,[e,t])},e.prototype.maxPool=function(e,t){var n=new _r(t,"max",!1),r=this.makeOutputArray(n.outputShape,e.dtype);return this.compileAndRun(n,[e],r)},e.prototype.avgPool=function(e,t){var n=new _r(t,"avg",!1),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[e],r)},e.prototype.maxPoolBackprop=function(e,t,n,r){var a=new _r(r,"max",!0),i=this.compileAndRun(a,[t]),o=new vr(r),s=this.makeOutputArray(o.outputShape,t.dtype),u=this.compileAndRun(o,[e,i],s);return i.dispose(),u},e.prototype.avgPoolBackprop=function(e,t,n){var r=new _t(n),a=this.makeOutputArray(r.outputShape,t.dtype);return this.compileAndRun(r,[e],a)},e.prototype.cast=function(e,t){return ht(e,t,this)},e.prototype.reshape=function(e,t){return mt(e,t)},e.prototype.resizeBilinear=function(e,t,n,r){var a=new Er(e.shape,t,n,r);return this.compileAndRun(a,[e])},e.prototype.resizeBilinearBackprop=function(e,t,n){var r=new kr(e,t,n);return this.compileAndRun(r,[e])},e.prototype.resizeNearestNeighbor=function(e,t,n,r){var a=new Cr(e.shape,t,n,r);return this.compileAndRun(a,[e])},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new Sr(e,t,n);return this.compileAndRun(r,[e])},e.prototype.multinomial=function(e,t,n,r){var a=t?e:Ue(e),i=a.shape[0],o=a.shape[1],s=new br(i,o,n),u=this.makeOutputArray(s.outputShape,"int32"),l=s.getCustomSetupFunc(r);return this.compileAndRun(s,[a],u,l)},e.prototype.oneHot=function(e,t,n,r){var a=new wr(e.size,t,n,r);return this.compileAndRun(a,[e])},e.prototype.nonMaxSuppression=function(e,t,n,r,a){return we("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),vt(e.dataSync(),t.dataSync(),n,r,a)},e.prototype.cropAndResize=function(e,t,n,r,a,i){var o=new Ft(e.shape,t.shape,r,a,i);return this.compileAndRun(o,[e,t,n])},e.prototype.depthToSpace=function(e,t,n){f(t>1,"blockSize should be > 1 for depthToSpace, but was: "+t);var r=e.shape[0],a=("NHWC"===n?e.shape[1]:e.shape[2])*t,i=("NHWC"===n?e.shape[2]:e.shape[3])*t,o=("NHWC"===n?e.shape[3]:e.shape[1])/(t*t),s=new en("NHWC"===n?[r,a,i,o]:[r,o,a,i],t,n);return this.compileAndRun(s,[e])},e.prototype.split=function(e,t,n){return bt(e,t,n)},e.prototype.makeOutputArray=function(e,t){return X.make(e,{},t)},e.prototype.compileAndRun=function(e,t,n,r,a){var i=this;if(void 0===a&&(a=!0),null==n&&(n=this.makeOutputArray(e.outputShape,t[0].dtype)),0===n.size)return this.texData.get(n.dataId).values=S(n.dtype,0),n;var o=t.map((function(e){if("complex64"===e.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var t=i.texData.get(e.dataId);return null==t.texture&&v(e.shape)<=32?{shape:e.shape,texData:null,isUniform:!0,uniformValues:i.readSync(e.dataId)}:(i.uploadToGPU(e.dataId),{shape:e.shape,texData:t,isUniform:!1})}));this.uploadToGPU(n.dataId);var s,u={shape:n.shape,texData:this.texData.get(n.dataId),isUniform:!1},l=function(e,t,n){var r="";t.concat(n).forEach((function(e){r+=e.shape+"_"+(e.isUniform?"uniform":e.texData.texShape)}));var a=e.userCode,i=(!0===e.supportsBroadcasting).toString();return e.constructor.name+"_"+i+"_"+r+"_"+a}(e,o,u),c=this.getAndSaveBinary(l,(function(){return function(e,t,n,r){for(var a=t.userCode,i=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform};return{name:t.variableNames[n],shapeInfo:r}})),o=i.map((function(e){return e.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1},u=Ut(i,s,a,!0===t.supportsBroadcasting),l=e.createProgram(u),c={},f=0;f<t.variableNames.length;f++){var p=t.variableNames[f];c[p]=e.getUniformLocation(l,p,!1)}return{program:t,source:u,webGLProgram:l,uniformLocations:c,gpgpu:e,inShapeInfos:o,outShapeInfo:s}}(i.gpgpu,e,o,u)})),f=null!=this.activeTimers;if(f&&(s=this.startTimer()),function(e,t,n,r){hr(e.inShapeInfos,t),hr([e.outShapeInfo],[n]);var a=n.texData.texture,i=n.texData.texShape,o=e.gpgpu;o.setOutputMatrixTexture(a,i[0],i[1]),o.setProgram(e.webGLProgram),t.forEach((function(t,n){var r=e.program.variableNames[n],a=e.uniformLocations[r];if(null!=a){if(t.isUniform){if(1===v(t.shape))o.gl.uniform1f(a,t.uniformValues[0]);else{var i=t.uniformValues;i instanceof Float32Array||(i=new Float32Array(i)),o.gl.uniform1fv(a,i)}return}var s=t.texData.texture;o.setInputMatrixTexture(s,a,n)}})),null!=r&&r(o,e.webGLProgram),o.executeProgram()}(c,o,u,r),a&&this.numBytesInGPU>this.NUM_BYTES_BEFORE_PAGING)for(var p=this.numBytesInGPU-this.NUM_BYTES_BEFORE_PAGING;p>0&&this.lruDataGPU.length>0;){var d=this.lruDataGPU.shift(),h=this.texData.get(d),m=h.shape,g=h.dtype;p-=this.computeBytes(m,g),this.read(d)}return f&&(s=this.endTimer(s),this.activeTimers.push(this.getQueryTime(s))),n},e.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){if(!this.disposed){for(var e in this.binaryCache)this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram);this.textureManager.dispose(),this.canvas.remove(),null!=this.fromPixelsCanvas&&this.fromPixelsCanvas.remove(),this.gpgpuCreatedLocally&&this.gpgpu.dispose(),this.disposed=!0}},e.prototype.floatPrecision=function(){var e=this;return ve((function(){return e.abs(Ke(1e-8)).get()>0?32:16}))},e.prototype.throwIfNoData=function(e){if(!this.texData.has(e))throw new Error("WebGL backend: No data found for this tensor. Did you change your backend in the middle of the program? New backends can't use Tensors created with previous backends")},e.prototype.uploadToGPU=function(e){this.throwIfNoData(e);var t=this.texData.get(e),n=t.shape,r=t.values,a=t.texture,i=(t.dtype,t.usage);if(null==a){var o,s=null!=this.activeTimers;s&&(o=performance.now());var u=Wn(this.gpgpu.gl,n);t.texShape=u;var l=this.acquireTexture(e,u,i);t.texture=l,null!=r&&(this.gpgpu.uploadMatrixToTexture(l,u[0],u[1],function(e,t){return e instanceof Float32Array?e:new Float32Array(e)}(r)),t.values=null,s&&(this.uploadWaitMs+=performance.now()-o))}else this.lruDataGPU.indexOf(e)>=0&&(this.lruDataGPU.splice(this.lruDataGPU.indexOf(e),1),this.lruDataGPU.push(e))},e.prototype.cacheOnCPU=function(e,t){var n=this.delayedStorage,r=this.texData.get(e),a=r.texture,i=r.texShape,o=r.dtype,s=r.usage;n&&null!=a&&(this.releaseTexture(e,a,i,s),r.texture=null,r.texShape=null),r.usage=Qt.UPLOAD,null!=t&&(r.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,o))},e.prototype.releaseTexture=function(e,t,n,r){var a=this.texData.get(e),i=a.shape,o=a.dtype,s=this.lruDataGPU.indexOf(e);s>=0&&this.lruDataGPU.splice(s,1),this.numBytesInGPU-=this.computeBytes(i,o),this.textureManager.releaseTexture(t,n,r)},e.prototype.acquireTexture=function(e,t,n){var r=this.texData.get(e),a=r.shape,i=r.dtype;return this.lruDataGPU.push(e),this.numBytesInGPU+=this.computeBytes(a,i),this.textureManager.acquireTexture(t,n)},e.prototype.computeBytes=function(e,t){return v(e)*T(t)},e}();me.get("IS_BROWSER")&&me.registerBackend("webgl",(function(){return new Ta}),2,Y);var Aa=Ve({abs_:function(e){var t=Be(e,"x","abs");return me.engine.runKernel((function(e){return e.abs(t)}),{$x:t},(function(e){return{$x:function(){return e.mulStrict(t.toFloat().step(-1))}}}))}}),Ra=Ve({acos_:function(e){var t=Be(e,"x","acos");return me.engine.runKernel((function(e){return e.acos(t)}),{$x:t},(function(e){return{$x:function(){return e.divStrict(Ke(1).sub(t.toFloat().square()).sqrt()).neg()}}}))}}),Da=Ve({acosh_:function(e){var t=Be(e,"x","acosh");return me.engine.runKernel((function(e){return e.acosh(t)}),{$x:t},(function(e){return{$x:function(){return e.divStrict(t.toFloat().square().sub(Ke(1)).sqrt())}}}))}}),Ma=Ve({asin_:function(e){var t=Be(e,"x","asin");return me.engine.runKernel((function(e){return e.asin(t)}),{$x:t},(function(e){return{$x:function(){return e.divStrict(Ke(1).sub(t.toFloat().square()).sqrt())}}}))}}),La=Ve({asinh_:function(e){var t=Be(e,"x","asinh");return me.engine.runKernel((function(e){return e.asinh(t)}),{$x:t},(function(e){return{$x:function(){return e.divStrict(Ke(1).add(t.toFloat().square()).sqrt())}}}))}}),za=Ve({atan_:function(e){var t=Be(e,"x","atan");return me.engine.runKernel((function(e){return e.atan(t)}),{$x:t},(function(e){return{$x:function(){return e.divStrict(Ke(1).add(t.toFloat().square()))}}}))}}),ja=Ve({atanh_:function(e){var t=Be(e,"x","atanh");return me.engine.runKernel((function(e){return e.atanh(t)}),{$x:t},(function(e){return{$x:function(){return e.divStrict(Ke(1).sub(t.toFloat().square()))}}}))}}),Ba=Ve({ceil_:function(e){var t=Be(e,"x","ceil");return me.engine.runKernel((function(e){return e.ceil(t)}),{$x:t},(function(e){return{$x:function(){return ct(e)}}}))}}),Fa=Ve({clipByValue_:function(e,t,n){var r=Be(e,"x","clipByValue");return f(t<=n,"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."),me.engine.runKernel((function(e){return e.clip(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.where(r.greaterEqual(Ke(t)).logicalAnd(r.lessEqual(Ke(n))),ct(e))}}}))}}),Va=Ve({cos_:function(e){var t=Be(e,"x","cos");return me.engine.runKernel((function(e){return e.cos(t)}),{$x:t},(function(e){return{$x:function(){return t.toFloat().sin().neg().mulStrict(e)}}}))}}),Ua=Ve({cosh_:function(e){var t=Be(e,"x","cosh");return me.engine.runKernel((function(e){return e.cosh(t)}),{$x:t},(function(e){return{$x:function(){return t.toFloat().sinh().mulStrict(e)}}}))}}),Wa=Ve({erf_:function(e){var t=Be(e,"x","erf");return f("int32"===t.dtype||"float32"===t.dtype,"Input dtype must be `int32` or `float32`."),"int32"===t.dtype&&(t=t.toFloat()),me.engine.runKernel((function(e){return e.erf(t)}),{$x:t},(function(e){return{$x:function(){return e.mulStrict(Ke(2/Math.sqrt(Math.PI)).mul(t.square().neg().exp()))}}}))}}),qa=Ve({exp_:function(e){var t=Be(e,"x","exp");return me.engine.runKernel((function(e,n){return n(e.exp(t))}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mulStrict(n)}}}))}}),$a=Ve({expm1_:function(e){var t=Be(e,"x","expm1");return me.engine.runKernel((function(e){return e.expm1(t)}),{$x:t},(function(e){return{$x:function(){return e.mulStrict(t.exp())}}}))}}),Ha=Ve({floor_:function(e){var t=Be(e,"x","floor");return me.engine.runKernel((function(e){return e.floor(t)}),{$x:t},(function(e){return{$x:function(){return ct(e)}}}))}}),Ka=Ve({log_:function(e){var t=Be(e,"x","log");return me.engine.runKernel((function(e){return e.log(t)}),{$x:t},(function(e){return{$x:function(){return e.divStrict(t.toFloat())}}}))}}),Ga=Ve({log1p_:function(e){var t=Be(e,"x","log1p");return me.engine.runKernel((function(e){return e.log1p(t)}),{$x:t},(function(e){return{$x:function(){return e.divStrict(t.add(Ke(1)))}}}))}}),Ya=Ve({logSigmoid_:function(e){var t=Be(e,"x","logSigmoid");return me.engine.runKernel((function(e){return e.softplus(t.neg()).neg()}),{$x:t},(function(e){return{$x:function(){return e.mulStrict(t.neg().sigmoid())}}}))}}),Xa=Ve({neg_:function(e){var t=Be(e,"x","neg");return me.engine.runKernel((function(e){return e.neg(t)}),{$x:t},(function(e){return{$x:function(){return e.neg()}}}))}}),Ja=Ve({reciprocal_:function(e){var t=Be(e,"x","reciprocal");return me.engine.runKernel((function(e){return e.reciprocal(t)}),{$x:t},(function(e){return{$x:function(){return e.divStrict(t.square().neg())}}}))}}),Qa=Ve({round_:function(e){var t=Be(e,"x","round");return me.engine.runKernel((function(e){return e.round(t)}),{$x:t},(function(e){return{$x:function(){return ct(e)}}}))}}),Za=Ve({rsqrt_:function(e){var t=Be(e,"x","rsqrt");return me.engine.runKernel((function(e){return e.rsqrt(t)}),{$x:t},(function(e){return{$x:function(){return e.divStrict(t.pow(Ke(1.5)).mul(Ke(2))).neg()}}}))}}),ei=Ve({sigmoid_:function(e){var t=Be(e,"x","sigmoid");return me.engine.runKernel((function(e,n){return n(e.sigmoid(t))}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mulStrict(n.mul(Ke(1).sub(n)))}}}))}}),ti=Ve({sign_:function(e){var t=Be(e,"x","sign");return me.engine.runKernel((function(e){return e.sign(t)}),{$x:t},(function(e){return{$x:function(){return ct(e)}}}))}}),ni=Ve({sin_:function(e){var t=Be(e,"x","sin");return me.engine.runKernel((function(e){return e.sin(t)}),{$x:t},(function(e){return{$x:function(){return t.toFloat().cos().mulStrict(e)}}}))}}),ri=Ve({sinh_:function(e){var t=Be(e,"x","sinh");return me.engine.runKernel((function(e){return e.sinh(t)}),{$x:t},(function(e){return{$x:function(){return t.toFloat().cosh().mulStrict(e)}}}))}}),ai=Ve({softplus_:function(e){var t=Be(e,"x","softplus");return me.engine.runKernel((function(e){return e.softplus(t)}),{$x:t},(function(e){return{$x:function(){return e.mulStrict(t.sigmoid())}}}))}}),ii=Ve({sqrt_:function(e){var t=Be(e,"x","sqrt");return me.engine.runKernel((function(e){return e.sqrt(t)}),{$x:t},(function(e){return{$x:function(){return e.divStrict(t.toFloat().sqrt().mul(Ke(2)))}}}))}}),oi=Ve({square_:function(e){var t=Be(e,"x","square");return me.engine.runKernel((function(e){return e.square(t)}),{$x:t},(function(e){return{$x:function(){return e.mulStrict(t.toFloat().mul(Ke(2)))}}}))}}),si=Ve({step_:function(e,t){void 0===t&&(t=0);var n=Be(e,"x","step");return me.engine.runKernel((function(e){return e.step(n,t)}),{$x:n},(function(e){return{$x:function(){return ct(e)}}}))}}),ui=Ve({tan_:function(e){var t=Be(e,"x","tan");return me.engine.runKernel((function(e){return e.tan(t)}),{$x:t},(function(e){return{$x:function(){return e.divStrict(t.cos().square())}}}))}}),li=Ve({tanh_:function(e){var t=Be(e,"x","tanh");return me.engine.runKernel((function(e,n){return n(e.tanh(t))}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return Ke(1).sub(n.square()).mulStrict(e)}}}))}});function ci(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}var fi=Ve({batchNormalization2d_:function(e,t,n,r,a,i){void 0===r&&(r=.001);var o,s,u=Be(e,"x","batchNormalization"),l=Be(t,"mean","batchNormalization"),c=Be(n,"variance","batchNormalization");return null!=a&&(o=Be(a,"scale","batchNormalization")),null!=i&&(s=Be(i,"offset","batchNormalization")),f(2===u.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+u.rank+"."),f(2===l.rank||1===l.rank,"Error in batchNormalization2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."),f(2===c.rank||1===c.rank,"Error in batchNormalization2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."),null!=o&&f(2===o.rank||1===o.rank,"Error in batchNormalization2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."),null!=s&&f(2===s.rank||1===s.rank,"Error in batchNormalization2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."),hi(u,l,c,r,o,s)}}),pi=Ve({batchNormalization3d_:function(e,t,n,r,a,i){void 0===r&&(r=.001);var o,s,u=Be(e,"x","batchNormalization"),l=Be(t,"mean","batchNormalization"),c=Be(n,"variance","batchNormalization");return null!=a&&(o=Be(a,"scale","batchNormalization")),null!=i&&(s=Be(i,"offset","batchNormalization")),f(3===u.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+u.rank+"."),f(3===l.rank||1===l.rank,"Error in batchNormalization3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."),f(3===c.rank||1===c.rank,"Error in batchNormalization3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."),null!=o&&f(3===o.rank||1===o.rank,"Error in batchNormalization3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."),null!=s&&f(3===s.rank||1===s.rank,"Error in batchNormalization3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."),hi(u,l,c,r,o,s)}}),di=Ve({batchNormalization4d_:function(e,t,n,r,a,i){void 0===r&&(r=.001);var o,s,u=Be(e,"x","batchNormalization"),l=Be(t,"mean","batchNormalization"),c=Be(n,"variance","batchNormalization");return null!=a&&(o=Be(a,"scale","batchNormalization")),null!=i&&(s=Be(i,"offset","batchNormalization")),f(4===u.rank,"Error in batchNormalization4D: x must be rank 4 but got rank "+u.rank+"."),f(4===l.rank||1===l.rank,"Error in batchNormalization4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."),f(4===c.rank||1===c.rank,"Error in batchNormalization4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."),null!=o&&f(4===o.rank||1===o.rank,"Error in batchNormalization4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."),null!=s&&f(4===s.rank||1===s.rank,"Error in batchNormalization4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."),hi(u,l,c,r,o,s)}}),hi=Ve({batchNormalization_:function(e,t,n,r,a,i){void 0===r&&(r=.001);var o,s,u,l=Be(e,"x","batchNormalization"),c=Be(t,"mean","batchNormalization"),p=Be(n,"variance","batchNormalization");return null!=a&&(o=Be(a,"scale","batchNormalization")),null!=i&&(s=Be(i,"offset","batchNormalization")),f(c.rank===p.rank,"Batch normalization gradient requires mean and variance to have equal ranks."),f(null==s||c.rank===s.rank,"Batch normalization gradient requires mean and offset to have equal ranks."),f(null==o||c.rank===o.rank,"Batch normalization gradient requires mean and scale to have equal ranks."),u=0===l.rank||1===l.rank?l.as4D(1,1,1,l.size):2===l.rank?l.as4D(1,1,l.shape[0],l.shape[1]):3===l.rank?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l,me.engine.runKernel((function(e){return e.batchNormalization(u,ci(c),ci(p),r,ci(o),ci(s))}),{$x:l,$mean:c,$variance:p,$scale:o,$offset:s},(function(e){var t=null==o?Ke(1):o,n=kt(c.shape,u.shape),a=[];if(1===c.rank){for(var i=0;i<u.shape.length-1;++i)a.push(u.shape[i]);a.push(1)}var s=l.sub(c),f=e.mul(t),d=Za(p.add(Ke(r))),h=d.mul(d).mul(d).mul(Ke(-.5));return{$x:function(){return 1===c.rank?e.mul(Ca(d.as4D(1,1,1,c.shape[0]),a)).mul(t).reshape(l.shape):e.mul(d).mul(t).reshape(l.shape)},$mean:function(){var e=d.mul(Ke(-1)).mul(f);return 1===c.rank&&(e=e.sum(n)),e.reshape(c.shape)},$variance:function(){var e=h.mul(s).mul(f);return 1===c.rank&&(e=e.sum(n)),e.reshape(c.shape)},$scale:function(){var t=s.mul(d),r=e.mul(t);return 1===c.rank&&(r=r.sum(n)),r.reshape(c.shape)},$offset:function(){var t=e;return 1===c.rank&&(t=t.sum(n)),t.reshape(c.shape)}}})).reshape(l.shape)}});function mi(e,t,n,r,a,i){void 0===i&&(i="channelsLast");var o,s=vi(t),u=s[0],l=s[1];if("channelsLast"===i)o=[u,l,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);o=[u,l,e[1],e[1]]}return gi(e,o,n,1,r,a,!1,i)}function gi(e,t,n,r,a,i,o,s){void 0===o&&(o=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],p=u[2],d=u[3];if("channelsLast"===s)l=e[0],c=e[1],p=e[2],d=e[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);l=e[0],d=e[1],c=e[2],p=e[3]}var h,m=t[0],g=t[1],v=t[3],y=vi(n),w=y[0],x=y[1],_=vi(r),N=_[0],k=_[1],E=function(e,t,n,r,a,i,o,s){var u,l,c;if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var p=function(e,t,n,r,a,i){null==a&&(a=function(e,t,n,r){void 0===r&&(r=1);var a=yi(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}(e,t,r));var o=e[0],s=e[1],u=bi((o-t+2*a)/r+1,i);f(b(u),"The output # of rows ("+u+") must be an integer. Change the stride and/or zero pad parameters");var l=bi((s-t+2*a)/r+1,i);return f(b(l),"The output # of columns ("+l+") must be an integer. Change the stride and/or zero pad parameters"),[u,l,n]}([t,n,1],i,1,r,e,s);l=p[0],c=p[1]}else if("same"===e){var d=((l=Math.ceil(t/r))-1)*r+i-t,h=((c=Math.ceil(n/a))-1)*a+o-n,m=Math.floor(d/2),g=d-m,v=Math.floor(h/2);u={top:m,bottom:g,left:v,right:h-v,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);u={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-i+1)/r),c=Math.ceil((n-o+1)/a)}return{padInfo:u,outHeight:l,outWidth:c}}(a,c,p,w,x,yi(m,N),yi(g,k),i),S=E.padInfo,C=E.outHeight,I=E.outWidth,O=o?v*d:v;return"channelsFirst"===s?h=[l,O,C,I]:"channelsLast"===s&&(h=[l,C,I,O]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:p,inChannels:d,outHeight:C,outWidth:I,outChannels:O,padInfo:S,strideHeight:w,strideWidth:x,filterHeight:m,filterWidth:g,dilationHeight:N,dilationWidth:k,inShape:e,outShape:h,filterShape:t}}function vi(e){return"number"==typeof e?[e,e]:e}function yi(e,t){return t<=1?e:e+(e-1)*(t-1)}function bi(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function wi(e,t,n,r,a,i){f(e.length===t.rank,"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match");var o=e,s=t,u=!1;3===t.rank&&(u=!0,s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),o=[1,e[0],e[1],e[2]]);var l=o[3],c=s.shape[3];f(4===o.length,"Error in conv2dDerInput: inShape must be length 4, but got length "+o.length+"."),f(4===s.rank,"Error in conv2dDerInput: dy must be rank 4, but got rank "+s.rank),f(4===n.rank,"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank),f(l===n.shape[2],"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."),f(c===n.shape[3],"Error in conv2dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[3]+"."),null!=i&&f(b(a),"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+".");var p=gi(o,n.shape,r,1,a,i),d=me.engine.runKernel((function(e){return e.conv2dDerInput(s,n,p)}),{dy4D:s});return u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function xi(e){var t=function(e){return"number"==typeof e?[e,e]:e}(e),n=t[0],r=t[1];return 1===n&&1===r}function _i(e,t){return xi(e)||xi(t)}var Ni=Ve({conv1d_:function(e,t,n,r,a,i,o){void 0===a&&(a="NWC"),void 0===i&&(i=1);var s=Be(e,"x","conv1d"),u=Be(t,"filter","conv1d"),l=s,c=!1;2===s.rank&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),f(3===l.rank,"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."),f(3===u.rank,"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."),null!=o&&f(b(r),"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."),f(l.shape[2]===u.shape[1],"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."),f(_i(n,i),"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+i+"'"),f("NWC"===a,"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported.");var p=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),d=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),h=ki(d,p,[1,n],r,"NHWC",[1,i],o);return c?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])}}),ki=Ve({conv2d_:function(e,t,n,r,a,i,o){void 0===a&&(a="NHWC"),void 0===i&&(i=[1,1]);var s=Be(e,"x","conv2d"),u=Be(t,"filter","conv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),f(4===l.rank,"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."),f(4===u.rank,"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."),null!=o&&f(b(r),"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."),f(l.shape[3]===u.shape[2],"Error in conv2d: depth of input ("+l.shape[3]+") must match input depth for filter "+u.shape[2]+"."),f(_i(n,i),"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"),f("NHWC"===a,"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported.");var p=gi(l.shape,u.shape,n,i,r,o),d=me.engine.runKernel((function(e){return e.conv2d(l,u,p)}),{x:l,$filter:u},(function(e){return f(xi(i),"Error in gradient of conv2D: dilation rates greater than 1 are notyet supported in gradients. Got dilations '"+i+"'"),{x:function(){return wi(l.shape,e,u,n,r)},$filter:function(){return function(e,t,n,r,a,i){var o=e;3===e.rank&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var s=t;3===s.rank&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),f(4===o.rank,"Error in conv2dDerFilter: input must be rank 4, but got shape "+o.shape+"."),f(4===s.rank,"Error in conv2dDerFilter: dy must be rank 4, but got shape "+s.shape+"."),f(4===n.length,"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."),f(o.shape[3]===n[2],"Error in conv2dDerFilter: depth of input "+o.shape[3]+") must match input depth in filter ("+n[2]+"."),f(s.shape[3]===n[3],"Error in conv2dDerFilter: depth of dy ("+s.shape[3]+") must match output depth for filter ("+n[3]+")."),null!=i&&f(b(a),"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+".");var u=gi(o.shape,n,r,1,a,i);return me.engine.runKernel((function(e){return e.conv2dDerFilter(o,s,u)}),{x4D:o,dy4D:s})}(l,e,u.shape,n,r)}}}));return c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}}),Ei=Ve({depthwiseConv2d_:function(e,t,n,r,a,i,o){void 0===a&&(a="NHWC"),void 0===i&&(i=[1,1]);var s=Be(e,"x","depthwiseConv2d"),u=Be(t,"filter","depthwiseConv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),f(4===l.rank,"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."),f(4===u.rank,"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."),f(l.shape[3]===u.shape[2],"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."),null==i&&(i=[1,1]),f(_i(n,i),"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"),null!=o&&f(b(r),"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+".");var p=gi(l.shape,u.shape,n,i,r,o,!0),d=me.engine.runKernel((function(e){return e.depthwiseConv2D(l,u,p)}),{x:l,$filter:u},(function(e){return f(xi(i),"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"),{x:function(){return function(e,t,n,r){var a=t,i=!1;3===t.rank&&(i=!0,a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=me.engine.runKernel((function(e){return e.depthwiseConv2DDerInput(a,n,r)}),{dy4D:a});return i?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}(l.shape,e,u,p)},$filter:function(){return function(e,t,n,r){var a=e;3===e.rank&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=t;return 3===i.rank&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),me.engine.runKernel((function(e){return e.depthwiseConv2DDerFilter(a,i,r)}),{x4D:a,dy4D:i})}(l,e,u.shape,p)}}}));return c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}}),Si=Ve({separableConv2d_:function(e,t,n,r,a,i,o){void 0===i&&(i=[1,1]),void 0===o&&(o="NHWC");var s=Be(e,"x","separableConv2d"),u=Be(t,"depthwiseFilter","separableConv2d"),l=Be(n,"pointwiseFilter","separableConv2d"),c=s,p=!1;if(3===s.rank&&(p=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");f(4===c.rank,"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."),f(4===u.rank,"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."),f(4===l.rank,"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."),f(1===l.shape[0],"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."),f(1===l.shape[1],"Error in separableConv2d: the second dimension of pointwise filter  must be 1, but got "+l.shape[1]+".");var d=u.shape[2],h=u.shape[3];f(l.shape[2]===d*h,"Error in separableConv2d: the third dimension of pointwise filter must be "+d*h+", but got "+l.shape[2]+".");var m=Ei(c,u,r,a,o,i),g=ki(m,l,1,"valid",o);return p?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),Ci=Ve({conv2dTranspose_:function(e,t,n,r,a,i){return wi(n,Be(e,"x","conv2dTranspose"),Be(t,"filter","conv2dTranspose"),r,a,i)}});var Ii=Ve({matMul_:function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1);var a=Be(e,"a","matMul"),i=Be(t,"b","matMul"),o=n?a.shape[a.rank-2]:a.shape[a.rank-1],s=r?i.shape[i.rank-1]:i.shape[i.rank-2],u=n?a.shape[a.rank-1]:a.shape[a.rank-2],l=r?i.shape[i.rank-2]:i.shape[i.rank-1],c=a.shape.slice(0,-2),p=i.shape.slice(0,-2),d=v(c),h=v(p);f(a.rank>=2&&i.rank>=2&&a.rank===i.rank,"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+i.rank+"."),f(y(c,p),"Error in matMul: outer dimensions ("+c+") and ("+p+") of Tensors with shapes "+a.shape+" and "+i.shape+" must match."),f(o===s,"Error in matMul: inner shapes ("+o+") and ("+s+") of Tensors with shapes "+a.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match.");var m=a.shape.slice(0,-2).concat([u,l]),g=n?a.as3D(d,o,u):a.as3D(d,u,o),b=r?i.as3D(h,l,s):i.as3D(h,s,l);return me.engine.runKernel((function(e){return e.batchMatMul(g,b,n,r)}),{$a:g,$b:b},(function(e){return n||r?!n&&r?{$a:function(){return e.matMul(b.toFloat(),!1,!1)},$b:function(){return e.matMul(g.toFloat(),!0,!1)}}:n&&!r?{$a:function(){return b.toFloat().matMul(e,!1,!0)},$b:function(){return g.toFloat().matMul(e,!1,!1)}}:{$a:function(){return b.toFloat().matMul(e,!0,!0)},$b:function(){return e.matMul(g.toFloat(),!0,!0)}}:{$a:function(){return e.matMul(b.toFloat(),!1,!0)},$b:function(){return g.toFloat().matMul(e,!0,!1)}}})).reshape(m)}}),Oi=Ve({dot_:function(e,t){var n=Be(e,"t1","dot"),r=Be(t,"t2","dot");f(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+".");var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];return f(a===i,"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+i+"."),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Pi=Ve({outerProduct_:function(e,t){var n=Be(e,"v1","outerProduct"),r=Be(t,"v2","outerProduct");return f(1===n.rank&&1===r.rank,"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."),n.as2D(-1,1).matMul(r.as2D(1,-1))}});var Ti=Ve({reverse_:function(e,t){var n=Be(e,"x","reverse");if(0===n.rank)return n.clone();var r=Oe(t,n.shape);return me.engine.runKernel((function(e){return e.reverse(n,r)}),{$x:n},(function(e){return{$x:function(){return e.reverse(r)}}})).reshapeAs(n)}}),Ai=Ve({reverse1d_:function(e){var t=Be(e,"x","reverse");return f(1===t.rank,"Error in reverse1D: x must be rank 1 but got\n             rank "+t.rank+"."),Ti(t,0)}}),Ri=Ve({reverse2d_:function(e,t){var n=Be(e,"x","reverse");return f(2===n.rank,"Error in reverse2D: x must be rank 2 but got\n             rank "+n.rank+"."),Ti(n,t)}}),Di=Ve({reverse3d_:function(e,t){var n=Be(e,"x","reverse");return f(3===n.rank,"Error in reverse3D: x must be rank 3 but got\n             rank "+n.rank+"."),Ti(n,t)}}),Mi=Ve({reverse4d_:function(e,t){var n=Be(e,"x","reverse");return f(4===n.rank,"Error in reverse4D: x must be rank 4 but got\n             rank "+n.rank+"."),Ti(n,t)}});var Li=Ve({maxPool_:function(e,t,n,r,a){var i=Be(e,"x","maxPool"),o=i,s=!1;3===i.rank&&(s=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),f(4===o.rank,"Error in maxPool: input must be rank 4 but got rank "+o.rank+"."),null!=a&&f(b(r),"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+".");var u=mi(o.shape,t,n,r,a),l=me.engine.runKernel((function(e,t){return t(e.maxPool(o,u))}),{x:o},(function(e,a){var i=a[0];return{x:function(){return function(e,t,n,r,a,i,o){var s=Be(e,"dy","maxPoolBackprop"),u=Be(t,"input","maxPoolBackprop"),l=Be(n,"output","maxPoolBackprop");f(u.rank===s.rank,"Rank of input ("+u.rank+") does not match rank of dy ("+s.rank+")"),f(4===s.rank,"Error in maxPoolBackprop: dy must be rank 4 but got rank "+s.rank+"."),f(4===u.rank,"Error in maxPoolBackprop: input must be rank 4 but got rank "+u.rank+"."),null!=o&&f(b(i),"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+".");var c=mi(u.shape,r,a,i,o);return me.engine.runKernel((function(e){return e.maxPoolBackprop(s,u,l,c)}),{$dy:s,$input:u})}(e,o,i,t,n,r)}}}));return s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),zi=Ve({avgPool_:function(e,t,n,r,a){var i=Be(e,"x","avgPool");f("float32"===i.dtype,"The input dtype to avgPool must be float32");var o=i,s=!1;3===i.rank&&(s=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),f(4===o.rank,"Error in avgPool: x must be rank 4 but got rank "+o.rank+"."),null!=a&&f(b(r),"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+".");var u=mi(o.shape,t,n,r),l=me.engine.runKernel((function(e){return e.avgPool(o,u)}),{x:o},(function(e){return{x:function(){return function(e,t,n,r,a){var i=Be(e,"dy","avgPoolBackprop"),o=Be(t,"input","avgPoolBackprop");f(o.rank===i.rank,"Rank of input ("+o.rank+") does not match rank of dy ("+i.rank+")");var s=o,u=i,l=!1;3===o.rank&&(l=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]),u=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),f(4===u.rank,"Error in avgPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."),f(4===s.rank,"Error in avgPoolBackprop: input must be rank 4 but got rank "+s.rank+".");var c=mi(s.shape,n,r,a),p=me.engine.runKernel((function(e){return e.avgPoolBackprop(u,s,c)}),{dy4D:u,input4D:s});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}(e,o,t,n,r)}}}));return l=l.cast(i.dtype),s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}});var ji=Ve({slice_:function(e,t,n){var r,a,i=Be(e,"x","slice");if(0===i.rank)throw new Error("Slicing scalar is not possible");r="number"==typeof t?[t].concat(new Array(i.rank-1).fill(0)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t.slice(),a=(a=null==n?new Array(i.rank).fill(-1):"number"==typeof n?[n].concat(new Array(i.rank-1).fill(-1)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map((function(e,t){return e>=0?e:(f(-1===e,"Bad value in size"),i.shape[t]-r[t])})),function(e,t,n){f(e.rank===t.length,"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."),f(e.rank===n.length,"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+").");for(var r=0;r<e.rank;++r)f(t[r]+n[r]<=e.shape[r],"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")")}(i,r,a);var o=i.shape;return me.engine.runKernel((function(e){return e.slice(i,r,a)}),{$x:i},(function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],o[n]-r[n]-a[n]]);return{$x:function(){return e.pad(t)}}}))}}),Bi=Ve({slice1d_:function(e,t,n){var r=Be(e,"x","slice1d");return f(1===r.rank,"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"),ji(r,[t],[n])}}),Fi=Ve({slice2d_:function(e,t,n){var r=Be(e,"x","slice2d");return f(2===r.rank,"slice1d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"),ji(r,t,n)}}),Vi=Ve({slice3d_:function(e,t,n){var r=Be(e,"x","slice3d");return f(3===r.rank,"slice1d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"),ji(r,t,n)}}),Ui=Ve({slice4d_:function(e,t,n){var r=Be(e,"x","slice4d");return f(4===r.rank,"slice1d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"),ji(r,t,n)}});var Wi=Ve({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Be(e,"x","all","bool");f("bool"===r.dtype,"Error Tensor must be of type bool. Got: "+r.dtype);var a=Oe(t,r.shape),i=a,o=Te(i,r.rank);null!=o&&(r=r.transpose(o),i=Re(i.length,r.rank));var s=me.engine.runKernel((function(e){return e.all(r,i)}),{$x:r});if(n){var u=Ie(s.shape,a);return s.reshape(u)}return s}}),qi=Ve({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Be(e,"x","any","bool");f("bool"===r.dtype,"Error Tensor must be of type bool. Got: "+r.dtype);var a=Oe(t,r.shape),i=a,o=Te(i,r.rank);null!=o&&(r=r.transpose(o),i=Re(i.length,r.rank));var s=me.engine.runKernel((function(e){return e.any(r,i)}),{$x:r});if(n){var u=Ie(s.shape,a);return s.reshape(u)}return s}}),$i=Ve({argMax_:function(e,t){void 0===t&&(t=0);var n=Be(e,"x","argMax");null==t&&(t=0);var r=Oe(t,n.shape),a=Te(r,n.rank);return null!=a&&(n=n.transpose(a),r=Re(r.length,n.rank)),me.engine.runKernel((function(e){return e.argMax(n,r[0])}),{$x:n},(function(e){return{$x:function(){return ct(n)}}}))}}),Hi=Ve({argMin_:function(e,t){void 0===t&&(t=0);var n=Be(e,"x","argMin");null==t&&(t=0);var r=Oe(t,n.shape),a=Te(r,n.rank);return null!=a&&(n=n.transpose(a),r=Re(r.length,n.rank)),me.engine.runKernel((function(e){return e.argMin(n,r[0])}),{$x:n},(function(e){return{$x:function(){return ct(n)}}}))}}),Ki=Ve({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Be(e,"x","logSumExp"),a=Oe(t,r.shape),i=r.max(a,!0),o=r.sub(i).exp().sum(a).log(),s=i.reshape(o.shape).add(o);if(n){var u=Ie(s.shape,a);return s.reshape(u)}return s}}),Gi=Ve({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Be(e,"x","max"),a=Oe(t,r.shape),i=a,o=Te(i,r.rank);null!=o&&(r=r.transpose(o),i=Re(i.length,r.rank));var s=me.engine.runKernel((function(e){return e.max(r,i)}),{$x:r});if(n){var u=Ie(s.shape,a);return s.reshape(u)}return s}}),Yi=Ve({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Be(e,"x","mean"),a=Oe(t,r.shape),i=v(Ce(r.shape,a)[1]);return ge((function(e){var r=Ke(i);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return a.forEach((function(e){n[e]=1})),t.reshape(n).mul(Qe(e.shape,"float32")).div(r)}}}))(r)}}),Xi=Ve({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Be(e,"x","min"),a=Oe(t,r.shape),i=a,o=Te(i,r.rank);null!=o&&(r=r.transpose(o),i=Re(i.length,r.rank));var s=me.engine.runKernel((function(e){return e.min(r,i)}),{$x:r});if(n){var u=Ie(s.shape,a);return s.reshape(u)}return s}}),Ji=Ve({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Oe(t,(e=Be(e,"x","moments")).shape),a=e.mean(r,n),i=a.shape;return n||(i=Ie(a.shape,r)),{mean:a,variance:e.toFloat().sub(a.reshape(i)).square().mean(r,n)}}}),Qi=Ve({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Be(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var a=Oe(t,r.shape);return ge((function(e){var t=Te(a,e.rank),r=a,i=e;null!=t&&(i=e.transpose(t),r=Re(r.length,e.rank));var o=me.engine.runKernel((function(e){return e.sum(i,r)}),{permutedX:i});if(n){var s=Ie(o.shape,a);o=o.reshape(s)}return{value:o,gradFunc:function(t){var n=e.shape.slice();return a.forEach((function(e){n[e]=1})),t.reshape(n).mul(Qe(e.shape,"float32"))}}}))(r)}});var Zi=Ve({equal_:function(e,t){var n=Be(e,"a","equal"),r=Be(t,"b","equal");return Z(n,r),Et(n.shape,r.shape),me.engine.runKernel((function(e){return e.equal(n,r)}),{$a:n,$b:r})}}),eo=Ve({equalStrict_:function(e,t){var n=Be(e,"a","equalStrict"),r=Be(t,"b","equalStrict");return p(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),to=Ve({greater_:function(e,t){var n=Be(e,"a","greater"),r=Be(t,"b","greater");return Z(n,r),Et(n.shape,r.shape),me.engine.runKernel((function(e){return e.greater(n,r)}),{$a:n,$b:r})}}),no=Ve({greaterEqual_:function(e,t){var n=Be(e,"a","greaterEqual"),r=Be(t,"b","greaterEqual");return Z(n,r),Et(n.shape,r.shape),me.engine.runKernel((function(e){return e.greaterEqual(n,r)}),{$a:n,$b:r},(function(e){return{$a:function(){return ct(n)},$b:function(){return ct(r)}}}))}}),ro=Ve({greaterEqualStrict_:function(e,t){var n=Be(e,"a","greaterEqualStrict"),r=Be(t,"b","greaterEqualStrict");return p(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),ao=Ve({greaterStrict_:function(e,t){var n=Be(e,"a","greaterStrict"),r=Be(t,"b","greaterStrict");return p(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),io=Ve({less_:function(e,t){var n=Be(e,"a","less"),r=Be(t,"b","less");return Z(n,r),Et(n.shape,r.shape),me.engine.runKernel((function(e){return e.less(n,r)}),{$a:n,$b:r})}}),oo=Ve({lessEqual_:function(e,t){var n=Be(e,"a","lessEqual"),r=Be(t,"b","lessEqual");return Z(n,r),Et(n.shape,r.shape),me.engine.runKernel((function(e){return e.lessEqual(n,r)}),{$a:n,$b:r})}}),so=Ve({lessEqualStrict_:function(e,t){var n=Be(e,"a","lessEqualStrict"),r=Be(t,"b","lessEqualStrict");return p(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),uo=Ve({lessStrict_:function(e,t){var n=Be(e,"a","lessStrict"),r=Be(t,"b","lessStrict");return p(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),lo=Ve({notEqual_:function(e,t){var n=Be(e,"a","notEqual"),r=Be(t,"b","notEqual");return Z(n,r),Et(n.shape,r.shape),me.engine.runKernel((function(e){return e.notEqual(n,r)}),{$a:n,$b:r})}}),co=Ve({notEqualStrict_:function(e,t){var n=Be(e,"a","notEqualStrict"),r=Be(t,"b","notEqualStrict");return p(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});var fo=Ve({add_:function(e,t){var n=Be(e,"a","add"),r=Be(t,"b","add");Z(n,r);var a=Et(n.shape,r.shape);return me.engine.runKernel((function(e){return e.add(n,r)}),{$a:n,$b:r},(function(e){return{$a:function(){var t=e,r=kt(n.shape,a);return r.length>0&&(t=t.sum(r)),t.reshape(n.shape)},$b:function(){var t=e,n=kt(r.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)}}}))}}),po=Ve({addN_:function(e){f(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),f(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length}));var t=e.map((function(e,t){return Be(e,"tensors"+t,"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!y(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return me.engine.runKernel((function(e){return e.addN(t)}),r,(function(e){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}))}}),ho=Ve({addStrict_:function(e,t){return p(e.shape,t.shape,"Error in addStrict: "),e.add(t)}}),mo=Ve({atan2_:function(e,t){var n=Be(e,"a","atan2"),r=Be(t,"b","atan2");Z(n,r);var a=Et(n.shape,r.shape);return me.engine.runKernel((function(e){return e.atan2(n,r)}),{$a:n,$b:r},(function(e){return{$a:function(){var t=fo(n.square(),r.square()),i=e.mul(r.div(t)),o=kt(n.shape,a);return o.length>0&&(i=i.sum(o)),i.reshape(n.shape)},$b:function(){var t=fo(n.square(),r.square()),i=Xa(e.mul(n.div(t))),o=kt(r.shape,a);return o.length>0&&(i=i.sum(o)),i.reshape(r.shape)}}}))}}),go=Ve({div_:function(e,t){var n,r=Be(e,"a","div"),a=Be(t,"b","div");if(Z(r,a),"int32"===r.dtype&&"int32"===a.dtype)return yo(r,a);n=function(e){return e.realDivide(r,a)};var i=Et(r.shape,a.shape);return me.engine.runKernel(n,{$a:r,$b:a},(function(e){return{$a:function(){var t=e.div(a.toFloat()),n=kt(r.shape,i);return n.length>0?t.sum(n).reshape(r.shape):t},$b:function(){var t=e.mul(r.toFloat()),n=kt(a.shape,i);n.length>0&&(t=t.sum(n).reshape(a.shape));var o=a.square();return t.div(o.toFloat()).neg()}}}))}}),vo=Ve({divStrict_:function(e,t){return p(e.shape,t.shape,"Error in divideStrict: "),e.div(t)}}),yo=Ve({floorDiv_:function(e,t){var n=Be(e,"a","floorDiv"),r=Be(t,"b","floorDiv");Z(n,r);var a=Et(n.shape,r.shape);return me.engine.runKernel((function(e){return e.floorDiv(n,r)}),{$a:n,$b:r},(function(e){return{$a:function(){var t=e.div(r.toFloat()),i=kt(n.shape,a);return i.length>0?t.sum(i).reshape(n.shape):t},$b:function(){var t=e.mul(n.toFloat()),i=kt(r.shape,a);i.length>0&&(t=t.sum(i).reshape(r.shape));var o=r.square();return t.div(o.toFloat()).neg()}}}))}}),bo=Ve({maximum_:function(e,t){var n=Be(e,"a","maximum"),r=Be(t,"b","maximum");return Z(n,r),"bool"===n.dtype&&(n=n.toInt()),"bool"===r.dtype&&(r=r.toInt()),Et(n.shape,r.shape),me.engine.runKernel((function(e){return e.maximum(n,r)}),{$a:n,$b:r},(function(e){return{$a:function(){return e.mul(n.greaterEqual(r).toFloat())},$b:function(){return e.mul(n.less(r).toFloat())}}}))}}),wo=Ve({maximumStrict_:function(e,t){return p(e.shape,t.shape,"Error in maximumStrict: "),e.maximum(t)}}),xo=Ve({minimum_:function(e,t){var n=Be(e,"a","minimum"),r=Be(t,"b","minimum");return Z(n,r),"bool"===n.dtype&&(n=n.toInt()),"bool"===r.dtype&&(r=r.toInt()),Et(n.shape,r.shape),me.engine.runKernel((function(e){return e.minimum(n,r)}),{$a:n,$b:r},(function(e){return{$a:function(){return e.mul(n.lessEqual(r).toFloat())},$b:function(){return e.mul(n.greater(r).toFloat())}}}))}}),_o=Ve({minimumStrict_:function(e,t){return p(e.shape,t.shape,"Error in minimumStrict: "),e.minimum(t)}}),No=Ve({mod_:function(e,t){var n=Be(e,"a","mod"),r=Be(t,"b","mod");Z(n,r);var a=Et(n.shape,r.shape);return me.engine.runKernel((function(e){return e.mod(n,r)}),{$a:n,$b:r},(function(e){return{$a:function(){var t=kt(n.shape,a);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),i=kt(r.shape,a);return i.length>0?t.sum(i).reshape(r.shape):t}}}))}}),ko=Ve({modStrict_:function(e,t){return p(e.shape,t.shape,"Error in modStrict: "),e.mod(t)}}),Eo=Ve({mul_:function(e,t){var n=Be(e,"a","mul"),r=Be(t,"b","mul");Z(n,r);var a=Et(n.shape,r.shape);return me.engine.runKernel((function(e){return e.multiply(n,r)}),{$a:n,$b:r},(function(e){return{$a:function(){var t=e.mul(r.toFloat()),i=kt(n.shape,a);return i.length>0?t.sum(i).reshape(n.shape):t},$b:function(){var t=e.mul(n.toFloat()),i=kt(r.shape,a);return i.length>0?t.sum(i).reshape(r.shape):t}}}))}}),So=Ve({mulStrict_:function(e,t){return p(e.shape,t.shape,"Error in multiplyStrict: "),e.mul(t)}}),Co=Ve({pow_:function(e,t){var n=Be(e,"base","pow"),r=Be(t,"exp","pow"),a=Et(n.shape,r.shape);return e=n.cast(pt(n.dtype,r.dtype)),t=r.cast(pt(n.dtype,r.dtype)),me.engine.runKernel((function(e,t){return t(e.pow(n,r))}),{$base:n,$exp:r},(function(e,t){var i=t[0];return{$base:function(){var t=e.mul(r.toFloat().mul(i.div(n))),o=kt(n.shape,a);return o.length>0&&(t=t.sum(o)),t.reshape(n.shape)},$exp:function(){var t=e.mul(i.mul(n.log()).toFloat()),o=kt(r.shape,a);return o.length>0&&(t=t.sum(o)),t.reshape(r.shape)}}}))}}),Io=Ve({powStrict_:function(e,t){return p(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),Oo=Ve({squaredDifference_:function(e,t){var n=Be(e,"a","squaredDifference"),r=Be(t,"b","squaredDifference");return Z(n,r),Et(n.shape,r.shape),me.engine.runKernel((function(e){return e.squaredDifference(n,r)}),{$a:n,$b:r},(function(e){var t=Ke(2);return{$a:function(){return e.mul(n.sub(r).mul(t))},$b:function(){return e.mul(r.sub(n).mul(t))}}}))}}),Po=Ve({squaredDifferenceStrict_:function(e,t){return p(e.shape,t.shape,"Error in squaredDifferenceStrict: "),e.squaredDifference(t)}}),To=Ve({sub_:function(e,t){var n=Be(e,"a","sub"),r=Be(t,"b","sub");Z(n,r);var a=Et(n.shape,r.shape);return me.engine.runKernel((function(e){return e.subtract(n,r)}),{$a:n,$b:r},(function(e){return{$a:function(){var t=e,r=kt(n.shape,a);return r.length>0&&(t=t.sum(r)),t.reshape(n.shape)},$b:function(){var t=e,n=kt(r.shape,a);return n.length>0&&(t=t.sum(n)),t.neg().reshape(r.shape)}}}))}}),Ao=Ve({subStrict_:function(e,t){return p(e.shape,t.shape,"Error in subStrict: "),e.sub(t)}});var Ro=Ve({logicalAnd_:function(e,t){var n=Be(e,"a","logicalAnd","bool"),r=Be(t,"b","logicalAnd","bool");return f("bool"===n.dtype&&"bool"===r.dtype,"Error Array must be of type bool."),Et(n.shape,r.shape),me.engine.runKernel((function(e){return e.logicalAnd(n,r)}),{$a:n,$b:r})}}),Do=Ve({logicalNot_:function(e){var t=Be(e,"x","logicalNot","bool");return f("bool"===t.dtype,"Error Array must be of type bool."),me.engine.runKernel((function(e){return e.logicalNot(t)}),{$x:t})}}),Mo=Ve({logicalOr_:function(e,t){var n=Be(e,"a","logicalOr","bool"),r=Be(t,"b","logicalOr","bool");return f("bool"===n.dtype&&"bool"===r.dtype,"Error Array must be of type bool."),Et(n.shape,r.shape),me.engine.runKernel((function(e){return e.logicalOr(n,r)}),{$a:n,$b:r})}}),Lo=Ve({logicalXor_:function(e,t){var n=Be(e,"a","logicalXor","bool"),r=Be(t,"b","logicalXor","bool");return f("bool"===n.dtype&&"bool"===r.dtype,"Error Array must be of type bool."),Et(n.shape,r.shape),Mo(e,t).logicalAnd(Ro(e,t).logicalNot())}}),zo=Ve({where_:function(e,t,n){var r=Be(t,"a","where"),a=Be(n,"b","where"),i=Be(e,"condition","where","bool");return f("bool"===i.dtype,"Error Condition must be of type bool."),p(r.shape,a.shape,"Error in where: "),1===i.rank?f(i.shape[0]===r.shape[0],"The first dimension of `a` must match the size of `condition`."):p(i.shape,a.shape,"Error in where: "),me.engine.runKernel((function(e){return e.select(i,r,a)}),{$condition:i,$a:r,$b:a},(function(e){return{$condition:function(){return ct(i)},$a:function(){return e.mul(i.cast(r.dtype))},$b:function(){return e.mul(i.logicalNot().cast(a.dtype))}}}))}}),jo=function(e){return o(this,void 0,void 0,(function(){var t,n,r;return s(this,(function(a){switch(a.label){case 0:return f("bool"===(t=Be(e,"condition","where","bool")).dtype,"Condition must be of type bool."),[4,t.data()];case 1:return n=a.sent(),r=Pa(t.shape,n),e!==t&&t.dispose(),[2,r]}}))}))};var Bo=Ve({elu_:function(e){var t=Be(e,"x","elu");return me.engine.runKernel((function(e,n){return n(e.elu(t))}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return me.engine.runKernel((function(t){return t.eluDer(e,n)}),{dy:e,y:n})}}}))}}),Fo=Ve({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=Be(e,"x","leakyRelu");return bo(Ke(t).mul(n),n)}}),Vo=Ve({prelu_:function(e,t){var n=Be(e,"x","prelu"),r=Be(t,"alpha","prelu"),a=Ke(0);return bo(a,n).add(r.mul(xo(a,n)))}}),Uo=Ve({relu_:function(e){var t=Be(e,"x","relu");return"bool"===t.dtype?t.toInt():me.engine.runKernel((function(e){return e.relu(t)}),{$x:t},(function(e){var n=t.step();return{$x:function(){return e.mulStrict(n.toFloat())}}}))}}),Wo=Ve({selu_:function(e){var t=Be(e,"x","selu");return me.engine.runKernel((function(e){return e.selu(t)}),{$x:t},(function(e){return{$x:function(){var n=t.greater(Ke(0)),r=Ke(jr),a=Ke(Br),i=e.mul(a),o=e.mul(r).mul(t.toFloat().exp());return zo(n,i,o)}}}))}});var qo=Ve({transpose_:function(e,t){var n=Be(e,"x","transpose");return null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),f(n.rank===t.length,"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."),t.forEach((function(e){f(e>=0&&e<n.rank,"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t)})),n.rank<=1?n.clone():me.engine.runKernel((function(e){return e.transpose(n,t)}),{$x:n},(function(e){var n=Ae(t);return{$x:function(){return e.transpose(n)}}}))}});var $o=Ve({localResponseNormalization_:function(e,t,n,r,a){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===a&&(a=.5);var i=Be(e,"x","localResponseNormalization");f(4===i.rank||3===i.rank,"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+i.rank+"."),f(b(t),"Error in localResponseNormalization: depthRadius must be an integer\n                     but got depthRadius "+t+".");var o=i,s=!1;3===i.rank&&(s=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var u=me.engine.runKernel((function(e,i){return i(e.localResponseNormalization4D(o,t,n,r,a))}),{x4D:o},(function(e,i){var s=i[0];return{x4D:function(){return me.engine.runKernel((function(i){return i.LRNGrad(e,o,s,t,n,r,a)}),{})}}}));return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}});function Ho(e,t,n){if(void 0===n&&(n=null),0===e.rank)return e.abs();if(1!==e.rank&&null===n)return Ho(e.reshape([-1]),t,n);if(1===e.rank||"number"==typeof n||n instanceof Array&&1===n.length){if(1===t)return e.abs().sum(n);if(t===1/0)return e.abs().max(n);if(t===-1/0)return e.abs().min(n);if("euclidean"===t||2===t)return e.abs().pow(Ke(2,"int32")).sum(n).sqrt();throw new Error("Error in norm: invalid ord value: "+t)}if(n instanceof Array&&2===n.length){if(1===t)return e.abs().sum(n[0]).max(n[1]-1);if(t===1/0)return e.abs().sum(n[1]).max(n[0]);if(t===-1/0)return e.abs().sum(n[1]).min(n[0]);if("fro"===t||"euclidean"===t)return e.square().sum(n).sqrt();throw new Error("Error in norm: invalid ord value: "+t)}throw new Error("Error in norm: invalid axis: "+n)}var Ko=Ve({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var a=Ho(e=Be(e,"x","norm"),t,n),i=a.shape;if(r){var o=Oe(n,e.shape);i=Ie(a.shape,o)}return a.reshape(i)}});function Go(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function Yo(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Xo=Ve({gather_:function(e,t,n){void 0===n&&(n=0);var r=Be(e,"x","gather"),a=Be(t,"indices","gather","int32");return f("int32"===a.dtype,"Indices must be of dtype `int32`"),n=Oe(n,r.shape)[0],me.engine.runKernel((function(e){return e.gather(r,a,n)}),{$x:r},(function(e){return{$x:function(){if(0===n)return Jo(e,a,r.shape[n]);var t=r.shape,i=a.size,o=t.slice(0,n),s=o.length,u=t.slice(n,t.length).slice(1),l=u.length,c=Go(0,s),f=Go(s+1,s+1+l),p=Yo([o,[i],u]),d=e.reshape(p),h=a.reshape([i]),m=Yo([[s],c,f]),g=d.transpose(m),v=Jo(g,h,r.shape[n]),y=Ae(m);return v.transpose(y)}}}))}}),Jo=Ve({unsortedSegmentSum_:function(e,t,n){var r=Be(e,"x","unsortedSegmentSum"),a=Be(t,"segmentIds","unsortedSegmentSum","int32");return f("int32"===a.dtype,"segmentIds must be of dtype `int32`"),f(b(n),"numSegments must be of dtype int"),me.engine.runKernel((function(e){return e.unsortedSegmentSum(r,a,n)}),{$x:r},(function(e){return{$x:function(){return function(e,t){for(var n=bo(t,ct(t)),r=Xo(e,n),a=no(t,Ke(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=ca(a,o+1);a=Ro(a,Qe(r.shape,"bool"));var s=ct(r);return zo(a,r,s)}(e,a)}}}))}});var Qo=Ve({basicLSTMCell_:function(e,t,n,r,a,i){var o=Be(e,"forgetBias","basicLSTMCell"),s=Be(t,"lstmKernel","basicLSTMCell"),u=Be(n,"lstmBias","basicLSTMCell"),l=Be(r,"data","basicLSTMCell"),c=Be(a,"c","basicLSTMCell"),f=Be(i,"h","basicLSTMCell"),p=l.concat(f,1).matMul(s).add(u),d=p.shape[0],h=p.shape[1]/4,m=[d,h],g=p.slice([0,0],m),v=p.slice([0,h],m),y=p.slice([0,2*h],m),b=p.slice([0,3*h],m),w=g.sigmoid().mulStrict(v.tanh()).addStrict(c.mulStrict(o.add(y).sigmoid()));return[w,w.tanh().mulStrict(b.sigmoid())]}}),Zo=Ve({multiRNNCell_:function(e,t,n,r){for(var a=Be(t,"data","multiRNNCell"),i=Fe(n,"c","multiRNNCell"),o=Fe(r,"h","multiRNNCell"),s=a,u=[],l=0;l<e.length;l++){var c=e[l](s,i[l],o[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var f=[],p=[];for(l=0;l<u.length;l+=2)f.push(u[l]),p.push(u[l+1]);return[f,p]}});var es=Ve({movingAverage_:function(e,t,n,r,a){void 0===a&&(a=!0);var i=Be(e,"v","movingAverage"),o=Be(t,"x","movingAverage"),s=Be(n,"decay","movingAverage");Z(i,o),f(y(i.shape,o.shape),"Shape mismatch in v and x");var u=Ke(1),l=u.sub(s),c=o.sub(i).mul(l);if(a){f(null!=r,"When using zeroDebias: true, step is required.");var p=Be(r,"step","movingAverage");c=c.div(u.sub(Co(s,p)))}return i.add(c)}});var ts=Ve({stridedSlice_:function(e,t,n,r,a,i,o,s,u){if(void 0===a&&(a=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===u&&(u=0),0!==o)throw new Error("ellipsis mask is not yet supported");if(0!==s)throw new Error("new axis mask is not yet supported");var l=Be(e,"x","stridedSlice");return me.engine.runKernel((function(e){return e.stridedSlice(l,t,n,r,a,i,o,s,u)}),{$x:l})}});var ns,rs=Ve({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=Be(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+t);var i=me.engine.runKernel((function(e){return e.topk(r,t,n)}),{$x:r});return{values:i[0],indices:i[1]}}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(ns||(ns={}));var as=Ve({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=ns.SUM_BY_NONZERO_WEIGHTS);var a=Be(e,"labels","absoluteDifference"),i=Be(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=Be(n,"weights","absoluteDifference")),p(a.shape,i.shape,"Error in absoluteDifference: ");var s=a.sub(i).abs();return is(s,o,r)}}),is=Ve({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=ns.SUM_BY_NONZERO_WEIGHTS);var r=Be(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=Be(t,"weights","computeWeightedLoss"));var i=null==a?r:r.mul(a);if(n===ns.NONE)return i;if(n===ns.SUM)return i.sum();if(n===ns.MEAN){if(null==a)return i.mean();var o=v(r.shape)/v(a.shape),s=i.sum().div(a.sum());return o>1?s.div(Ke(o)):s}if(n===ns.SUM_BY_NONZERO_WEIGHTS){if(null==a)return i.sum().div(Ke(r.size));var u=a.mul(Qe(r.shape)).notEqual(Ke(0)).sum().toFloat();return i.sum().div(u)}throw Error("Unknown reduction: "+n)}}),os=Ve({cosineDistance_:function(e,t,n,r,a){void 0===a&&(a=ns.SUM_BY_NONZERO_WEIGHTS);var i=Be(e,"labels","cosineDistance"),o=Be(t,"predictions","cosineDistance"),s=null;null!=r&&(s=Be(r,"weights","cosineDistance")),p(i.shape,o.shape,"Error in cosineDistance: ");var u=Ke(1).sub(i.mul(o).sum(n,!0));return is(u,s,a)}}),ss=Ve({hingeLoss_:function(e,t,n,r){void 0===r&&(r=ns.SUM_BY_NONZERO_WEIGHTS);var a=Be(e,"labels","hingeLoss"),i=Be(t,"predictions","hingeLoss"),o=null;null!=n&&(o=Be(n,"weights","hingeLoss")),p(a.shape,i.shape,"Error in hingeLoss: ");var s=Ke(1);a=Ke(2).mul(a).sub(s);var u=s.sub(a.mul(i)).relu();return is(u,o,r)}}),us=Ve({huberLoss_:function(e,t,n,r,a){void 0===r&&(r=1),void 0===a&&(a=ns.SUM_BY_NONZERO_WEIGHTS);var i=Be(e,"labels","huberLoss"),o=Be(t,"predictions","huberLoss"),s=null;null!=n&&(s=Be(n,"weights","huberLoss")),p(i.shape,o.shape,"Error in huberLoss: ");var u=Ke(r),l=o.sub(i).abs(),c=xo(l,u),f=l.sub(c),d=Ke(.5).mul(c.square()).add(u.mul(f));return is(d,s,a)}}),ls=Ve({logLoss_:function(e,t,n,r,a){void 0===r&&(r=1e-7),void 0===a&&(a=ns.SUM_BY_NONZERO_WEIGHTS);var i=Be(e,"labels","logLoss"),o=Be(t,"predictions","logLoss"),s=null;null!=n&&(s=Be(n,"weights","logLoss")),p(i.shape,o.shape,"Error in logLoss: ");var u=Ke(1),l=Ke(r),c=i.mul(o.add(l).log()).neg().sub(u.sub(i).mul(u.sub(o).add(l).log()));return is(c,s,a)}}),cs=Ve({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=ns.SUM_BY_NONZERO_WEIGHTS);var a=Be(e,"labels","meanSquaredError"),i=Be(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=Be(n,"weights","meanSquaredError")),p(a.shape,i.shape,"Error in meanSquaredError: ");var s=a.squaredDifference(i);return is(s,o,r)}}),fs=Ve({sigmoidCrossEntropy_:function(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=ns.SUM_BY_NONZERO_WEIGHTS);var i=Be(e,"multiClassLabels","sigmoidCrossEntropy"),o=Be(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=Be(n,"weights","sigmoidCrossEntropy")),p(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Ke(r),l=Ke(1),c=Ke(.5);i=i.mul(l.sub(u)).add(c.mul(u))}var f=function(e,t){var n=Be(e,"labels","sigmoidCrossEntropyWithLogits"),r=Be(t,"logits","sigmoidCrossEntropyWithLogits");p(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=r.relu(),i=r.mul(n),o=r.abs().neg().exp().log1p();return a.sub(i).add(o)}(i,o);return is(f,s,a)}}),ps=Ve({softmaxCrossEntropy_:function(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=ns.SUM_BY_NONZERO_WEIGHTS);var i=Be(e,"onehotLabels","softmaxCrossEntropy"),o=Be(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=Be(n,"weights","softmaxCrossEntropy")),p(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Ke(r),l=Ke(1),c=Ke(i.shape[1]);i=i.mul(l.sub(u)).add(u.div(c))}var f=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return ge((function(e,t){var r=t.logSumExp([n],!0),a=t.toFloat().sub(r);return{value:a.mul(e).neg().sum([n]),gradFunc:function(t){var r=Ie(t.shape,[n]);return[t.reshape(r).mul(e.toFloat().sub(a.exp())),t.reshape(r).mul(a.exp().sub(e.toFloat()))]}}}))(e,t)}(i,o);return is(f,s,a)}}),ds=Object.freeze({get Reduction(){return ns},absoluteDifference:as,computeWeightedLoss:is,cosineDistance:os,hingeLoss:ss,huberLoss:us,logLoss:ls,meanSquaredError:cs,sigmoidCrossEntropy:fs,softmaxCrossEntropy:ps});function hs(e,t){return void 0===t&&(t=!1),me.engine.tidy((function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],a=fa(n),i=e.clone(),o=Ye([[1]],[1,1]),s=o.clone(),u=n>=r?r:n,l=function(e){var t,u=i,l=s,c=a;t=me.engine.tidy((function(){var t=i.slice([e,e],[n-e,1]),u=t.norm(),l=i.slice([e,e],[1,1]),c=l.sign().neg(),f=l.sub(c.mul(u)),p=t.div(f);s=1===p.shape[0]?o.clone():o.concat(p.slice([1,0],[p.shape[0]-1,p.shape[1]]),0);var d=c.matMul(f).div(u).neg(),h=i.slice([e,0],[n-e,r]),m=d.mul(s);i=0===e?h.sub(m.matMul(s.transpose().matMul(h))):i.slice([0,0],[e,r]).concat(h.sub(m.matMul(s.transpose().matMul(h))),0);var g=a.slice([0,e],[n,a.shape[1]-e]);return a=0===e?g.sub(g.matMul(s).matMul(m.transpose())):a.slice([0,0],[n,e]).concat(g.sub(g.matMul(s).matMul(m.transpose())),1),[s,i,a]})),s=t[0],i=t[1],a=t[2],be([u,l,c])},c=0;c<u;++c)l(c);return!t&&n>r&&(a=a.slice([0,0],[n,r]),i=i.slice([0,0],[r,r])),[a,i]}))}var ms=Ve({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,f(null!=e&&e.length>0,"Gram-Schmidt process: input must not be null, undefined, or empty");for(var n=e[0].shape[0],r=1;r<e.length;++r)f(e[r].shape[0]===n,"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[r].shape[0]+" vs. "+n+")")}else t=!0,e=Kr(e,e.shape[0],0).map((function(e){return Ea(e,[0])}));f(e.length<=e[0].shape[0],"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+").");var a=[],i=e,o=function(e){a.push(me.engine.tidy((function(){var t=i[e];if(e>0)for(var n=0;n<e;++n){var r=Qi(a[n].mulStrict(t)).mul(a[n]);t=t.sub(r)}return t.div(Ko(t,"euclidean"))})))};for(r=0;r<e.length;++r)o(r);return t?Sa(a,0):a}}),gs=Ve({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return hs(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=[],a=[];return Oa(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0).forEach((function(e){var n=hs(e,t),i=n[0],o=n[1];r.push(i),a.push(o)})),[Sa(r,0).reshape(e.shape),Sa(a,0).reshape(e.shape)]}}),vs=Object.freeze({gramSchmidt:ms,qr:gs});function ys(e,t,n,r,a){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY);var i=e.shape[0];return n=Math.min(n,i),f(0<=r&&r<=1,"iouThreshold must be in [0, 1], but was '"+r+"'"),f(2===e.rank,"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"),f(4===e.shape[1],"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]),f(1===t.rank,"scores must be a 1D tensor"),f(t.shape[0]===i,"scores has incompatible shape with boxes. Expected "+i+", but was "+t.shape[0]),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a}}var bs=Ve({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=Be(e,"images","resizeBilinear");f(3===r.rank||4===r.rank,"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."),f(2===t.length,"Error in resizeBilinear: new shape must 2D, but got shape "+t+".");var a=r,i=!1;3===r.rank&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],s=t[1],u=me.engine.runKernel((function(e,t){return e.resizeBilinear(a,o,s,n)}),{batchImages:a},(function(e,t){return{batchImages:function(){return me.engine.runKernel((function(t){return t.resizeBilinearBackprop(e,a,n)}),{})}}}));return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),ws=Ve({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=Be(e,"images","resizeNearestNeighbor");f(3===r.rank||4===r.rank,"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."),f(2===t.length,"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."),f("float32"===r.dtype||"int32"===r.dtype,"`images` must have `int32` or `float32` as dtype");var a=r,i=!1;3===r.rank&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],s=t[1],u=me.engine.runKernel((function(e,t){return e.resizeNearestNeighbor(a,o,s,n)}),{batchImages:a},(function(e,t){return{batchImages:function(){return me.engine.runKernel((function(t){return t.resizeNearestNeighborBackprop(e,a,n)}),{})}}}));return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),xs=Ve({nonMaxSuppression_:function(e,t,n,r,a){void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY);var i=Be(e,"boxes","nonMaxSuppression"),o=Be(t,"scores","nonMaxSuppression"),s=ys(i,o,n,r,a);return n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold,me.engine.runKernel((function(e){return e.nonMaxSuppression(i,o,n,r,a)}),{$boxes:i})}}),_s=function(e,t,n,r,a){return void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),o(this,void 0,void 0,(function(){var i,o,u,l,c,f;return s(this,(function(s){switch(s.label){case 0:return i=Be(e,"boxes","nonMaxSuppressionAsync"),o=Be(t,"scores","nonMaxSuppressionAsync"),u=ys(i,o,n,r,a),n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,[4,i.data()];case 1:return l=s.sent(),[4,o.data()];case 2:return c=s.sent(),f=vt(l,c,n,r,a),i!==e&&i.dispose(),o!==t&&o.dispose(),[2,f]}}))}))},Ns=function(e,t,n,r,a,i){var o=Be(e,"image","cropAndResize","float32"),s=Be(t,"boxes","cropAndResize","float32"),u=Be(n,"boxInd","cropAndResize","int32");a=a||"bilinear",i=i||0;var l=s.shape[0];return f(4===o.rank,"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."),f(2===s.rank&&4===s.shape[1],"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."),f(1===u.rank&&u.shape[0]===l,"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."),f("int32"===u.dtype,"Error in cropAndResize: boxInd must be of dtype int32, but got dtype "+u.dtype+"."),f(2===r.length,"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."),f(r[0]>=1&&r[1]>=1,"cropSize must be atleast [1,1], but was "+r),f("bilinear"===a||"nearest"===a,"method must be bilinear or nearest, but was "+a),me.engine.runKernel((function(e,t){return e.cropAndResize(o,s,u,r,a,i)}),{$image:o,$boxes:s})},ks=Object.freeze({resizeBilinear:bs,resizeNearestNeighbor:ws,nonMaxSuppression:xs,nonMaxSuppressionAsync:_s,cropAndResize:Ns}),Es=Object.freeze({image:ks,linalg:vs,losses:ds,op:Ve,batchNormalization2d:fi,batchNormalization3d:pi,batchNormalization4d:di,batchNormalization:hi,complex:We,real:qe,imag:$e,concat:Ur,concat1d:Wr,concat2d:qr,concat3d:$r,concat4d:Hr,split:Kr,conv1d:Ni,conv2d:ki,depthwiseConv2d:Ei,separableConv2d:Si,conv2dTranspose:Ci,matMul:Ii,dot:Oi,outerProduct:Pi,reverse:Ti,reverse1d:Ai,reverse2d:Ri,reverse3d:Di,reverse4d:Mi,maxPool:Li,avgPool:zi,slice:ji,slice1d:Bi,slice2d:Fi,slice3d:Vi,slice4d:Ui,abs:Aa,acos:Ra,acosh:Da,asin:Ma,asinh:La,atan:za,atanh:ja,ceil:Ba,clipByValue:Fa,cos:Va,cosh:Ua,erf:Wa,exp:qa,expm1:$a,floor:Ha,log:Ka,log1p:Ga,logSigmoid:Ya,neg:Xa,reciprocal:Ja,round:Qa,rsqrt:Za,sigmoid:ei,sign:ti,sin:ni,sinh:ri,softplus:ai,sqrt:ii,square:oi,step:si,tan:ui,tanh:li,all:Wi,any:qi,argMax:$i,argMin:Hi,logSumExp:Ki,max:Gi,mean:Yi,min:Xi,moments:Ji,sum:Qi,equal:Zi,equalStrict:eo,greater:to,greaterEqual:no,greaterEqualStrict:ro,greaterStrict:ao,less:io,lessEqual:oo,lessEqualStrict:so,lessStrict:uo,notEqual:lo,notEqualStrict:co,add:fo,addN:po,addStrict:ho,atan2:mo,div:go,divStrict:vo,floorDiv:yo,maximum:bo,maximumStrict:wo,minimum:xo,minimumStrict:_o,mod:No,modStrict:ko,mul:Eo,mulStrict:So,pow:Co,powStrict:Io,squaredDifference:Oo,squaredDifferenceStrict:Po,sub:To,subStrict:Ao,elu:Bo,leakyRelu:Fo,prelu:Vo,relu:Uo,selu:Wo,logicalAnd:Ro,logicalNot:Do,logicalOr:Mo,logicalXor:Lo,where:zo,whereAsync:jo,buffer:aa,toPixels:function(e,t){return o(this,void 0,void 0,(function(){var n,r,a,i,o,u,l,c,f,p,d,h,m,g,v,y,b,w,x,_;return s(this,(function(s){switch(s.label){case 0:if(2!==(n=Be(e,"img","toPixels","int32")).rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),a=r[0],i=r[1],(o=2===n.rank?1:n.shape[2])>4||2===o)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return u=n.min(),l=n.max(),[4,u.data()];case 1:return c=s.sent()[0],[4,l.data()];case 2:if(f=s.sent()[0],u.dispose(),l.dispose(),"float32"===n.dtype){if(c<0||f>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+c+" - "+f+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(c<0||f>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+c+" - "+f+"].")}return[4,n.data()];case 3:for(p=s.sent(),d="float32"===n.dtype?255:1,h=new Uint8ClampedArray(i*a*4),m=0;m<a*i;++m)g=void 0,v=void 0,y=void 0,b=void 0,1===o?(g=p[m]*d,v=p[m]*d,y=p[m]*d,b=255):3===o?(g=p[3*m]*d,v=p[3*m+1]*d,y=p[3*m+2]*d,b=255):4===o&&(g=p[4*m]*d,v=p[4*m+1]*d,y=p[4*m+2]*d,b=p[4*m+3]*d),h[0+(w=4*m)]=Math.round(g),h[w+1]=Math.round(v),h[w+2]=Math.round(y),h[w+3]=Math.round(b);return null!=t&&(t.width=i,t.height=a,x=t.getContext("2d"),_=new ImageData(h,i,a),x.putImageData(_,0,0)),n!==e&&n.dispose(),[2,h]}}))}))},print:function(e,t){void 0===t&&(t=!1),console.log(e.toString(t))},batchToSpaceND:ia,cast:oa,clone:sa,cumsum:ua,depthToSpace:la,expandDims:ca,eye:fa,fromPixels:pa,multinomial:da,oneHot:ha,pad:ma,pad1d:ga,pad2d:va,pad3d:ya,pad4d:ba,rand:wa,randomNormal:xa,randomUniform:_a,reshape:Na,spaceToBatchND:ka,squeeze:Ea,stack:Sa,tile:Ca,truncatedNormal:Ia,unstack:Oa,fill:et,linspace:tt,ones:Qe,range:nt,scalar:Ke,tensor:He,tensor1d:Ge,tensor2d:Ye,tensor3d:Xe,tensor4d:Je,tensor5d:function(e,t,n){if(void 0===n&&(n="float32"),d(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=m(e);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return He(e,t=t||r,n)},tensor6d:function(e,t,n){if(void 0===n&&(n="float32"),d(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=m(e);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return He(e,t=t||r,n)},zeros:Ze,onesLike:lt,zerosLike:ct,transpose:qo,softmax:Ue,localResponseNormalization:$o,norm:Ko,gather:Xo,unsortedSegmentSum:Jo,basicLSTMCell:Qo,multiRNNCell:Zo,movingAverage:es,stridedSlice:ts,topk:rs}),Ss=function(){function e(){this.blockSize=48,this.data=new WeakMap,this.firstUse=!0,me.get("IS_BROWSER")&&(this.canvas=document.createElement("canvas"))}return e.prototype.register=function(e,t,n){if(this.firstUse&&(this.firstUse=!1,me.get("IS_NODE")&&we("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================\n")),this.data.has(e))throw new Error("Data buffer is already registered");this.data.set(e,{dtype:n})},e.prototype.write=function(e,t){if(null==t)throw new Error("MathBackendCPU.write(): values can not be null");this.throwIfNoData(e),this.data.get(e).values=t},e.prototype.fromPixels=function(e,t){if(null==e)throw new Error("pixels passed to tf.fromPixels() can not be null");var n,r;if(me.get("IS_NODE")&&null==e.getContext)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package");if(null!=e.getContext)n=e.getContext("2d").getImageData(0,0,e.width,e.height).data;else if(e instanceof ImageData)n=e.data;else{if(!(e instanceof HTMLImageElement||e instanceof HTMLVideoElement))throw new Error("pixels passed to tf.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+e.constructor.name);if(null==this.canvas)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.canvas.width=e.width,this.canvas.height=e.height,this.canvas.getContext("2d").drawImage(e,0,0,e.width,e.height),n=this.canvas.getContext("2d").getImageData(0,0,e.width,e.height).data}if(4===t)r=new Int32Array(n);else{var a=e.width*e.height;r=new Int32Array(a*t);for(var i=0;i<a;i++)for(var o=0;o<t;++o)r[i*t+o]=n[4*i+o]}return Xe(r,[e.height,e.width,t],"int32")},e.prototype.read=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.readSync(e)]}))}))},e.prototype.readSync=function(e){this.throwIfNoData(e);var t=this.data.get(e),n=t.dtype,r=t.complexTensors;return"complex64"===n?gt(r.real.dataSync(),r.imag.dataSync()):this.data.get(e).values},e.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},e.prototype.time=function(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(n){return t=j(),e(),[2,{kernelMs:j()-t}]}))}))},e.prototype.memory=function(){return{unreliable:!0}},e.prototype.throwIfNoData=function(e){if(!this.data.has(e))throw new Error("CPU backend: No data found for this tensor. Did you change your backend in the middle of the program? New backends can't use Tensors created with previous backends")},e.prototype.complex=function(e,t){var n=X.make(e.shape,{},"complex64");return this.data.get(n.dataId).complexTensors={real:me.engine.keep(e.clone()),imag:me.engine.keep(t.clone())},n},e.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},e.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},e.prototype.assertNotComplex=function(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&f("complex64"!==e.dtype,t+" does not support complex64 tensors.")}))},e.prototype.slice=function(e,t,n){this.assertNotComplex(e,"slice");for(var r=aa(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a),o=i.map((function(e,n){return e+t[n]}));r.set.apply(r,[e.get.apply(e,o)].concat(i))}return r.toTensor()},e.prototype.stridedSlice=function(e,t,n,r,a,i,o,s,u){this.assertNotComplex(e,"stridedSlice");var l=Le(e.shape,t,n,r,a,i,o,s,u),c=l[0],f=l[1],p=l[2],d=f.filter((function(e,t){return-1===p.indexOf(t)}));if(d.some((function(e){return 0===e})))return He([],d);for(var h=aa(f,e.dtype),m=0;m<h.size;m++){for(var g=h.indexToLoc(m),v=new Array(g.length),y=0;y<v.length;y++)v[y]=g[y]*r[y]+c[y];h.set.apply(h,[e.get.apply(e,v)].concat(g))}return h.toTensor().reshape(d)},e.prototype.reverse=function(e,t){this.assertNotComplex(e,"reverse");for(var n=aa(e.shape,e.dtype),r=e.buffer(),a=function(a){var i=n.indexToLoc(a),o=i.slice();t.forEach((function(t){return o[t]=e.shape[t]-1-o[t]})),n.set.apply(n,[r.get.apply(r,o)].concat(i))},i=0;i<n.size;i++)a(i);return n.toTensor()},e.prototype.concat=function(e,t){this.assertNotComplex(e,"concat");var n=e.map((function(e){var n=v(e.shape.slice(t));return e.as2D(-1,n)})),r=De(n.map((function(e){return e.shape})),1),a=aa(r,e[0].dtype).values;if(1===n[0].shape[0]){var i=0;n.forEach((function(e){a.set(e.dataSync(),i),i+=e.size}))}else{var o=0;n.forEach((function(e){for(var t=e.dataSync(),n=0,i=0;i<e.shape[0];++i)for(var s=i*r[1]+o,u=0;u<e.shape[1];++u)a[s+u]=t[n++];o+=e.shape[1]}))}var s=De(e.map((function(e){return e.shape})),t);return He(a,s,e[0].dtype)},e.prototype.neg=function(e){return this.assertNotComplex(e,"neg"),this.multiply(Ke(-1),e)},e.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e+n,imag:t+r}})):this.broadcastedBinaryOp(e,t,pt(e.dtype,t.dtype),(function(e,t){return e+t}))},e.prototype.addN=function(e){this.assertNotComplex(e,"addN");for(var t=e.map((function(e){return e.dataSync()})),n=aa(e[0].shape,e[0].dtype),r=n.values,a=0;a<e.length;a++)for(var i=t[a],o=0;o<r.length;o++)r[o]+=i[o];return n.toTensor()},e.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e-n,imag:t-r}})):this.broadcastedBinaryOp(e,t,pt(e.dtype,t.dtype),(function(e,t){return e-t}))},e.prototype.pow=function(e,t){return this.assertNotComplex([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.pow(e,t)}))},e.prototype.batchMatMul=function(e,t,n,r){this.assertNotComplex([e,t],"matMul");for(var a=n?e.shape[1]:e.shape[2],i=n?e.shape[2]:e.shape[1],o=r?t.shape[1]:t.shape[2],s=e.shape[0],u=e.dataSync(),l=t.dataSync(),c=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],f=c[0],p=c[1],d=c[2],h=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],m=h[0],g=h[1],v=h[2],y=i*o,b=new Float32Array(s*y),w=this.blockSize,x=0;x<s;x++)for(var _=0;_<i;_+=w)for(var N=0;N<o;N+=w)for(var k=0;k<a;k+=w)for(var E=Math.min(_+w,i),S=Math.min(N+w,o),C=Math.min(k+w,a),I=_;I<E;I++)for(var O=N;O<S;O++){for(var P=0,T=k;T<C;T++)P+=u[x*f+I*p+T*d]*l[T*m+O*g+x*v];b[x*y+(I*o+O)]+=P}return Xe(b,[s,i,o])},e.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})):this.broadcastedBinaryOp(e,t,pt(e.dtype,t.dtype),(function(e,t){return e*t}))},e.prototype.realDivide=function(e,t){return this.assertNotComplex([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",(function(e,t){return e/t}))},e.prototype.floorDiv=function(e,t){return this.assertNotComplex([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",(function(e,t){return Math.floor(e/t)}))},e.prototype.sum=function(e,t){this.assertNotComplex(e,"sum"),Pe("sum",t,e.rank);for(var n=Ce(e.shape,t),r=n[0],a=n[1],i=Ze(r,pt(e.dtype,"int32")),o=v(a),s=i.dataSync(),u=e.dataSync(),l=0;l<s.length;++l){for(var c=l*o,f=0,p=0;p<o;++p)f+=u[c+p];s[l]=f}return i},e.prototype.unsortedSegmentSum=function(e,t,n){this.assertNotComplex(e,"unsortedSegmentSum");for(var r=[],a=e.rank-t.rank,i=0;i<a;++i)t=t.expandDims(i+1);for(i=0;i<n;++i){var o=Ke(i,"int32"),s=Zi(o,t).asType("float32").mul(e).sum(0);r.push(s)}return Sa(r)},e.prototype.argMin=function(e,t){this.assertNotComplex(e,"argMin");var n=[t];Pe("argMin",n,e.rank);for(var r=Ce(e.shape,n),a=r[0],i=r[1],o=Ze(a,"int32"),s=v(i),u=o.dataSync(),l=e.dataSync(),c=0;c<u.length;++c){for(var f=c*s,p=l[f],d=0,h=0;h<s;++h){var m=l[f+h];m<p&&(p=m,d=h)}u[c]=d}return o},e.prototype.argMax=function(e,t){this.assertNotComplex(e,"argMax");var n=[t];Pe("argMax",n,e.rank);for(var r=Ce(e.shape,n),a=r[0],i=r[1],o=Ze(a,"int32"),s=v(i),u=o.dataSync(),l=e.dataSync(),c=0;c<u.length;++c){for(var f=c*s,p=l[f],d=0,h=0;h<s;++h){var m=l[f+h];m>p&&(p=m,d=h)}u[c]=d}return o},e.prototype.cumsum=function(e,t,n,r){if(this.assertNotComplex(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var a=pt(e.dtype,"int32"),i=Ze(e.shape,a),o=i.dataSync(),s=e.dataSync(),u=e.shape[e.rank-1],l=r?function(e,t){return e+u-t-1}:function(e,t){return e+t},c=0;c<s.length;c+=u)for(var f=0;f<u;f++){var p=l(c,f);if(0===f)o[p]=n?0:s[p];else{var d=l(c,f-1);o[p]=n?s[d]+o[d]:s[p]+o[d]}}return i},e.prototype.equal=function(e,t){return this.assertNotComplex([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e===t?1:0}))},e.prototype.notEqual=function(e,t){return this.assertNotComplex([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e!==t?1:0}))},e.prototype.less=function(e,t){return this.assertNotComplex([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<t?1:0}))},e.prototype.lessEqual=function(e,t){return this.assertNotComplex([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<=t?1:0}))},e.prototype.greater=function(e,t){return this.assertNotComplex([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>t?1:0}))},e.prototype.greaterEqual=function(e,t){return this.assertNotComplex([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>=t?1:0}))},e.prototype.logicalNot=function(e){this.assertNotComplex(e,"logicalNot");for(var t=e.dataSync(),n=new Int32Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return X.make(e.shape,{values:n},"bool")},e.prototype.logicalAnd=function(e,t){return this.assertNotComplex([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e&&t}))},e.prototype.logicalOr=function(e,t){return this.assertNotComplex([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e||t}))},e.prototype.select=function(e,t,n){this.assertNotComplex([e,t,n],"select");for(var r=e.dataSync(),a=t.dataSync(),i=n.dataSync(),o=Ze(t.shape,pt(t.dtype,n.dtype)),s=o.dataSync(),u=0,l=0===e.rank||e.rank>1||1===t.rank?1:t.shape[1],c=0;c<r.length;c++)for(var f=0;f<l;f++)1===r[c]?s[u++]=a[c]:s[u++]=i[c];return o},e.prototype.where=function(e){this.assertNotComplex([e],"where");var t=e.dataSync();return Pa(e.shape,t)},e.prototype.topk=function(e,t,n){return this.assertNotComplex(e,"topk"),wt(e.dataSync(),e.shape,e.dtype,t)},e.prototype.min=function(e,t){this.assertNotComplex(e,"min"),Pe("min",t,e.rank);for(var n=Ce(e.shape,t),r=n[0],a=n[1],i=Ze(r,e.dtype),o=v(a),s=i.dataSync(),u=e.dataSync(),l=0;l<s.length;++l){for(var c=l*o,f=u[c],p=0;p<o;++p){var d=u[c+p];d<f&&(f=d)}s[l]=f}return i},e.prototype.minimum=function(e,t){return this.assertNotComplex([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.min(e,t)}))},e.prototype.mod=function(e,t){return this.assertNotComplex([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}))},e.prototype.max=function(e,t){this.assertNotComplex(e,"max"),Pe("max",t,e.rank);for(var n=Ce(e.shape,t),r=n[0],a=n[1],i=Ze(r,e.dtype),o=v(a),s=i.dataSync(),u=e.dataSync(),l=0;l<s.length;++l){for(var c=l*o,f=u[c],p=0;p<o;++p){var d=u[c+p];d>f&&(f=d)}s[l]=f}return i},e.prototype.maximum=function(e,t){return this.assertNotComplex([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.max(e,t)}))},e.prototype.all=function(e,t){this.assertNotComplex(e,"all"),Pe("all",t,e.rank);for(var n=Ce(e.shape,t),r=n[0],a=n[1],i=Ze(r,e.dtype),o=v(a),s=i.dataSync(),u=e.dataSync(),l=0;l<s.length;++l){for(var c=l*o,f=u[c],p=0;p<o;++p){var d=u[c+p];f=f&&d}s[l]=f}return i},e.prototype.any=function(e,t){this.assertNotComplex(e,"any"),Pe("any",t,e.rank);for(var n=Ce(e.shape,t),r=n[0],a=n[1],i=Ze(r,e.dtype),o=v(a),s=i.dataSync(),u=e.dataSync(),l=0;l<s.length;++l){for(var c=l*o,f=u[c],p=0;p<o;++p){var d=u[c+p];f=f||d}s[l]=f}return i},e.prototype.squaredDifference=function(e,t){return this.assertNotComplex([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e-t;return n*n}))},e.prototype.ceil=function(e){this.assertNotComplex(e,"ceil");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return X.make(e.shape,{values:n})},e.prototype.floor=function(e){this.assertNotComplex(e,"floor");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return X.make(e.shape,{values:n})},e.prototype.sign=function(e){this.assertNotComplex(e,"x");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return X.make(e.shape,{values:n})},e.prototype.round=function(e){this.assertNotComplex(e,"round");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=Math.floor(t[r]);t[r]-a<.5?n[r]=Math.floor(t[r]):t[r]-a>.5?n[r]=Math.ceil(t[r]):n[r]=a%2==0?a:a+1}return X.make(e.shape,{values:n})},e.prototype.exp=function(e){this.assertNotComplex(e,"exp");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return X.make(e.shape,{values:n})},e.prototype.expm1=function(e){this.assertNotComplex(e,"expm1");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return X.make(e.shape,{values:n})},e.prototype.log=function(e){this.assertNotComplex(e,"log");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.log(a)}return X.make(e.shape,{values:n})},e.prototype.log1p=function(e){this.assertNotComplex(e,"log1p");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.log1p(a)}return X.make(e.shape,{values:n})},e.prototype.sqrt=function(e){this.assertNotComplex(e,"sqrt");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.sqrt(a)}return X.make(e.shape,{values:n})},e.prototype.rsqrt=function(e){this.assertNotComplex(e,"rsqrt");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=1/Math.sqrt(a)}return X.make(e.shape,{values:n})},e.prototype.square=function(e){this.assertNotComplex(e,"square");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=a*a}return X.make(e.shape,{values:n})},e.prototype.reciprocal=function(e){this.assertNotComplex(e,"reciprocal");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return X.make(e.shape,{values:n})},e.prototype.relu=function(e){this.assertNotComplex(e,"relu");for(var t=Ze(e.shape,e.dtype),n=t.dataSync(),r=e.dataSync(),a=0;a<r.length;++a)n[a]=Math.max(0,r[a]);return t},e.prototype.elu=function(e){this.assertNotComplex(e,"elu");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r){var a=n[r];t[r]=a>=0?a:Math.exp(a)-1}return X.make(e.shape,{values:t})},e.prototype.eluDer=function(e,t){this.assertNotComplex([e,t],"eluDer");for(var n=new Float32Array(t.size),r=t.dataSync(),a=e.dataSync(),i=0;i<r.length;++i){var o=r[i];n[i]=o>=1?a[i]:a[i]*(o+1)}return X.make(t.shape,{values:n})},e.prototype.selu=function(e){this.assertNotComplex(e,"selu");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r){var a=n[r];t[r]=a>=0?1.0507009873554805*a:1.7580993408473768*(Math.exp(a)-1)}return X.make(e.shape,{values:t})},e.prototype.clip=function(e,t,n){this.assertNotComplex(e,"clip");for(var r=new Float32Array(e.size),a=e.dataSync(),i=0;i<a.length;++i){var o=a[i];r[i]=o>n?n:o<t?t:o}return X.make(e.shape,{values:r})},e.prototype.abs=function(e){this.assertNotComplex(e,"abs");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return X.make(e.shape,{values:t})},e.prototype.int=function(e){this.assertNotComplex(e,"int");for(var t=new Int32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=n[r];return X.make(e.shape,{values:t},"int32")},e.prototype.sigmoid=function(e){this.assertNotComplex(e,"sigmoid");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return X.make(e.shape,{values:t})},e.prototype.softplus=function(e){this.assertNotComplex(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=e.dataSync(),a=0;a<r.length;++a){var i,o=r[a]>-t,s=r[a]<t,u=Math.exp(r[a]);i=s?u:o?r[a]:Math.log(1+u),n[a]=i}return X.make(e.shape,{values:n})},e.prototype.sin=function(e){this.assertNotComplex(e,"sin");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return X.make(e.shape,{values:t})},e.prototype.cos=function(e){this.assertNotComplex(e,"cos");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return X.make(e.shape,{values:t})},e.prototype.tan=function(e){this.assertNotComplex(e,"tan");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return X.make(e.shape,{values:t})},e.prototype.asin=function(e){this.assertNotComplex(e,"asin");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return X.make(e.shape,{values:t})},e.prototype.acos=function(e){this.assertNotComplex(e,"acos");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return X.make(e.shape,{values:t})},e.prototype.atan=function(e){this.assertNotComplex(e,"atan");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return X.make(e.shape,{values:t})},e.prototype.atan2=function(e,t){return this.assertNotComplex([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.atan2(e,t)}))},e.prototype.sinh=function(e){this.assertNotComplex(e,"sinh");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return X.make(e.shape,{values:t})},e.prototype.cosh=function(e){this.assertNotComplex(e,"cosh");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return X.make(e.shape,{values:t})},e.prototype.tanh=function(e){this.assertNotComplex(e,"tanh");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=w(n[r]);return X.make(e.shape,{values:t})},e.prototype.asinh=function(e){this.assertNotComplex(e,"asinh");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return X.make(e.shape,{values:t})},e.prototype.acosh=function(e){this.assertNotComplex(e,"acosh");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return X.make(e.shape,{values:t})},e.prototype.atanh=function(e){this.assertNotComplex(e,"atanh");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return X.make(e.shape,{values:t})},e.prototype.erf=function(e){this.assertNotComplex(e,"erf");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r){var a=n[r],i=1/(1+.3275911*a);t[r]=1-((((1.061405429*i-1.453152027)*i+1.421413741)*i-.284496736)*i+.254829592)*i*Math.exp(-a*a)}return X.make(e.shape,{values:t})},e.prototype.step=function(e,t){void 0===t&&(t=0),this.assertNotComplex(e,"step");for(var n=new Float32Array(e.size),r=e.dataSync(),a=0;a<r.length;++a){var i=r[a];isNaN(i)?n[a]=NaN:n[a]=i>0?1:t}return X.make(e.shape,{values:n})},e.prototype.conv2d=function(e,t,n){this.assertNotComplex([e,t],"conv2d");for(var r=n.filterHeight,a=n.filterWidth,i=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=aa(n.outShape,e.dtype),c=e.dataSync(),f=t.dataSync(),p=l.values,d=0;d<n.batchSize;++d)for(var h=d*e.strides[0],m=d*l.strides[0],g=0;g<n.outHeight;++g)for(var v=m+g*l.strides[1],y=g*n.strideHeight-s,b=0;b<r;b++){var w=y+b*i;if(!(w<0||w>=n.inHeight))for(var x=b*t.strides[0],_=h+w*e.strides[1],N=0;N<n.outWidth;++N)for(var k=v+N*n.outChannels,E=N*n.strideWidth-u,S=0;S<a;S++){var C=E+S*o;if(!(C<0||C>=n.inWidth))for(var I=x+S*t.strides[1],O=_+C*n.inChannels,P=I,T=0;T<n.inChannels;++T){for(var A=c[O+T],R=0;R<n.outChannels;++R)p[k+R]+=A*f[P+R];P+=n.outChannels}}}return l.toTensor()},e.prototype.conv2dDerInput=function(e,t,n){this.assertNotComplex([e,t],"conv2dDerInput");for(var r=aa(n.inShape,"float32"),a=r.values,i=r.strides,o=i[0],s=i[1],u=i[2],l=e.dataSync(),c=e.strides,f=c[0],p=c[1],d=c[2],h=t.dataSync(),m=t.strides,g=m[0],v=m[1],y=m[2],b=n.batchSize,w=n.filterHeight,x=n.filterWidth,_=n.inChannels,N=n.inHeight,k=n.inWidth,E=n.outChannels,S=n.outHeight,C=n.outWidth,I=n.strideHeight,O=n.strideWidth,P=w-1-n.padInfo.top,T=x-1-n.padInfo.left,A=0;A<b;++A)for(var R=0;R<_;++R)for(var D=0;D<N;++D)for(var M=D-P,L=Math.max(0,Math.ceil(M/I)),z=Math.min(S,(w+M)/I),j=0;j<k;++j){for(var B=j-T,F=Math.max(0,Math.ceil(B/O)),V=Math.min(C,(x+B)/O),U=0,W=L;W<z;++W)for(var q=W*I-M,$=F;$<V;++$)for(var H=f*A+p*W+d*$,K=g*(w-1-q)+v*(x-1-($*O-B))+y*R,G=0;G<E;++G)U+=l[H+G]*h[K+G];a[o*A+s*D+u*j+R]=U}return r.toTensor()},e.prototype.conv2dDerFilter=function(e,t,n){this.assertNotComplex([e,t],"conv2dDerFilter");for(var r=n.strideHeight,a=n.strideWidth,i=n.filterHeight,o=n.filterWidth,s=aa(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=0;c<i;++c)for(var f=Math.max(0,Math.ceil((l-c)/r)),p=Math.min(n.outHeight,(n.inHeight+l-c)/r),d=0;d<o;++d)for(var h=Math.max(0,Math.ceil((u-d)/a)),m=Math.min(n.outWidth,(n.inWidth+u-d)/a),g=0;g<n.inChannels;++g)for(var v=0;v<n.outChannels;++v){for(var y=0,b=0;b<n.batchSize;++b)for(var w=f;w<p;++w)for(var x=c+w*r-l,_=h;_<m;++_){var N=d+_*a-u;y+=e.get(b,x,N,g)*t.get(b,w,_,v)}s.set(y,c,d,g,v)}return s.toTensor()},e.prototype.depthwiseConv2D=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2D");for(var r=n.filterHeight,a=n.filterWidth,i=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=n.outChannels/n.inChannels,c=aa(n.outShape,e.dtype),f=e.dataSync(),p=t.dataSync(),d=c.values,h=0;h<n.batchSize;++h)for(var m=h*e.strides[0],g=h*c.strides[0],v=0;v<n.outHeight;++v)for(var y=g+v*c.strides[1],b=v*n.strideHeight-s,w=0;w<r;++w){var x=b+w*i;if(!(x<0||x>=n.inHeight))for(var _=w*t.strides[0],N=m+x*e.strides[1],k=0;k<n.outWidth;++k)for(var E=y+k*c.strides[2],S=k*n.strideWidth-u,C=0;C<a;++C){var I=S+C*o;if(!(I<0||I>=n.inWidth))for(var O=_+C*t.strides[1],P=N+I*n.inChannels,T=E,A=O,R=0;R<n.inChannels;++R){for(var D=f[P+R],M=0;M<l;++M)d[T+M]+=D*p[A+M];T+=l,A+=l}}}return c.toTensor()},e.prototype.depthwiseConv2DDerInput=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2DDerInput");for(var r=aa(n.inShape,"float32"),a=r.values,i=r.strides,o=i[0],s=i[1],u=i[2],l=e.dataSync(),c=e.strides,f=c[0],p=c[1],d=c[2],h=t.dataSync(),m=t.strides,g=m[0],v=m[1],y=m[2],b=n.batchSize,w=n.filterHeight,x=n.filterWidth,_=n.inChannels,N=n.inHeight,k=n.inWidth,E=n.outChannels,S=n.outHeight,C=n.outWidth,I=n.strideHeight,O=n.strideWidth,P=w-1-n.padInfo.top,T=x-1-n.padInfo.left,A=E/_,R=0;R<b;++R)for(var D=0;D<_;++D)for(var M=0;M<N;++M)for(var L=M-P,z=Math.max(0,Math.ceil(L/I)),j=Math.min(S,(w+L)/I),B=0;B<k;++B){for(var F=B-T,V=Math.max(0,Math.ceil(F/O)),U=Math.min(C,(x+F)/O),W=0,q=z;q<j;++q)for(var $=q*I-L,H=V;H<U;++H)for(var K=f*R+p*q+d*H,G=g*(w-1-$)+v*(x-1-(H*O-F))+y*D,Y=0;Y<A;++Y)W+=l[K+(D*A+Y)]*h[G+Y];a[o*R+s*M+u*B+D]=W}return r.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,a=n.strideWidth,i=n.filterHeight,o=n.filterWidth,s=aa(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=n.outChannels/n.inChannels,f=0;f<i;++f)for(var p=Math.max(0,Math.ceil((l-f)/r)),d=Math.min(n.outHeight,(n.inHeight+l-f)/r),h=0;h<o;++h)for(var m=Math.max(0,Math.ceil((u-h)/a)),g=Math.min(n.outWidth,(n.inWidth+u-h)/a),v=0;v<n.outChannels;++v){for(var y=Math.trunc(v/c),b=v%c,w=0,x=0;x<n.batchSize;++x)for(var _=p;_<d;++_)for(var N=f+_*r-l,k=m;k<g;++k){var E=h+k*a-u;w+=e.get(x,N,E,y)*t.get(x,_,k,v)}s.set(w,f,h,y,b)}return s.toTensor()},e.prototype.tile=function(e,t){this.assertNotComplex(e,"tile");for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var a=aa(n,e.dtype),i=e.buffer();for(r=0;r<a.values.length;++r){for(var o=a.indexToLoc(r),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=o[u]%e.shape[u];var l=i.locToIndex(s);a.values[r]=i.values[l]}return a.toTensor()},e.prototype.pad=function(e,t,n){this.assertNotComplex(e,"pad");var r=t.map((function(t,n){return t[0]+e.shape[n]+t[1]})),a=t.map((function(e){return e[0]})),i=e.buffer(),o=aa(r,e.dtype);0!==n&&o.values.fill(n);for(var s=0;s<e.size;s++){var u=i.indexToLoc(s),l=u.map((function(e,t){return e+a[t]}));o.set.apply(o,[e.get.apply(e,u)].concat(l))}return o.toTensor()},e.prototype.transpose=function(e,t){this.assertNotComplex(e,"transpose");for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]];var a=e.dataSync(),i=aa(n,e.dtype),o=e.buffer();for(r=0;r<e.size;++r){for(var s=o.indexToLoc(r),u=new Array(s.length),l=0;l<u.length;l++)u[l]=s[t[l]];var c=i.locToIndex(u);i.values[c]=a[r]}return i.toTensor()},e.prototype.gather=function(e,t,n){this.assertNotComplex([e,t],"gather");var r=e.shape.slice(),a=t.dataSync();r[n]=a.length;for(var i=aa(r,e.dtype),o=e.buffer(),s=0;s<i.size;++s){var u=i.indexToLoc(s),l=u.slice();l[n]=a[u[n]];var c=o.locToIndex(l);i.values[s]=o.values[c]}return i.toTensor()},e.prototype.batchToSpaceND=function(e,t,n){this.assertNotComplex([e],"batchToSpaceND");var r=t.reduce((function(e,t){return e*t})),a=xe(e.shape,t,r),i=_e(a.length,t.length),o=Ne(e.shape,t,r),s=ke(n,t.length),u=Ee(o,n,t.length);return e.reshape(a).transpose(i).reshape(o).slice(s,u)},e.prototype.spaceToBatchND=function(e,t,n){this.assertNotComplex([e],"spaceToBatchND");var r=t.reduce((function(e,t){return e*t})),a=[[0,0]];a.push.apply(a,n);for(var i=1+t.length;i<e.shape.length;++i)a.push([0,0]);var o=e.pad(a),s=xe(o.shape,t,r,!1),u=_e(s.length,t.length,!1),l=Ne(o.shape,t,r,!1);return o.reshape(s).transpose(u).reshape(l)},e.prototype.pool=function(e,t,n){this.assertNotComplex(e,"pool");for(var r=t.strideHeight,a=t.strideWidth,i=t.filterHeight,o=t.filterWidth,s=aa(t.outShape,"float32"),u=t.padInfo.top,l=t.padInfo.left,c="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,f=0;f<t.batchSize;++f)for(var p=0;p<t.inChannels;++p)for(var d=0;d<t.outHeight;++d)for(var h=d*r-u,m=Math.max(0,h),g=Math.min(t.inHeight,i+h),v=0;v<t.outWidth;++v){for(var y=v*a-l,b=Math.max(0,y),w=Math.min(t.inWidth,o+y),x=c,_=0,N=0,k=m;k<g;++k){for(var E=b;E<w;++E){var S=e.get(f,k,E,p);"max"===n&&S>x?x=S:"avg"===n&&(_+=S,N++)}if(isNaN(x))break}s.set("avg"===n?_/N:x,f,d,v,p)}return s.toTensor()},e.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},e.prototype.maxPoolPositions=function(e,t){for(var n=aa(t.outShape,"int32"),r=t.strideHeight,a=t.strideWidth,i=t.filterHeight,o=t.filterWidth,s=t.padInfo.top,u=t.padInfo.left,l=0;l<t.batchSize;++l)for(var c=0;c<t.inChannels;++c)for(var f=0;f<t.outHeight;++f)for(var p=f*r-s,d=Math.max(0,p),h=Math.min(t.inHeight,i+p),m=0;m<t.outWidth;++m){for(var g=m*a-u,v=Math.max(0,g),y=Math.min(t.inWidth,o+g),b=Number.NEGATIVE_INFINITY,w=-1,x=d;x<h;++x)for(var _=x-p,N=v;N<y;++N){var k=N-g,E=e.get(l,x,N,c);E>b&&(b=E,w=_*o+k)}n.set(w,l,f,m,c)}return n.toTensor()},e.prototype.maxPoolBackprop=function(e,t,n,r){this.assertNotComplex([t,n],"maxPoolBackprop");for(var a=this.maxPoolPositions(t,r),i=r.strideHeight,o=r.strideWidth,s=r.filterHeight,u=r.filterWidth,l=u-1-r.padInfo.left,c=s-1-r.padInfo.top,f=aa(t.shape,"float32"),p=0;p<r.batchSize;++p)for(var d=0;d<r.inChannels;++d)for(var h=0;h<r.inHeight;++h)for(var m=0;m<r.inWidth;++m){for(var g=h-c,v=m-l,y=0,b=0;b<s;++b){var w=(g+b)/i;if(!(w<0||w>=r.outHeight||Math.floor(w)!==w))for(var x=0;x<u;++x){var _=(v+x)/o;if(!(_<0||_>=r.outWidth||Math.floor(_)!==_)){var N=s*u-1-a.get(p,w,_,d)===b*u+x?1:0;0!==N&&(y+=e.get(p,w,_,d)*N)}}}f.set(y,p,h,m,d)}return f.toTensor()},e.prototype.avgPoolBackprop=function(e,t,n){this.assertNotComplex([e,t],"avgPoolBackprop");for(var r=n.strideHeight,a=n.strideWidth,i=n.filterHeight,o=n.filterWidth,s=o-1-n.padInfo.left,u=i-1-n.padInfo.top,l=aa(t.shape,"float32"),c=1/(i*o),f=0;f<n.batchSize;++f)for(var p=0;p<n.inChannels;++p)for(var d=0;d<n.inHeight;++d)for(var h=0;h<n.inWidth;++h){for(var m=d-u,g=h-s,v=0,y=0;y<i;++y){var b=(m+y)/r;if(!(b<0||b>=n.outHeight||Math.floor(b)!==b))for(var w=0;w<o;++w){var x=(g+w)/a;x<0||x>=n.outWidth||Math.floor(x)!==x||(v+=e.get(f,b,x,p))}}l.set(v*c,f,d,h,p)}return l.toTensor()},e.prototype.cast=function(e,t){return ht(e,t,this)},e.prototype.reshape=function(e,t){return mt(e,t)},e.prototype.avgPool=function(e,t){return this.assertNotComplex(e,"avgPool"),this.pool(e,t,"avg").toFloat()},e.prototype.resizeBilinear=function(e,t,n,r){this.assertNotComplex(e,"resizeBilinear");for(var a=e.shape,i=a[0],o=a[1],s=a[2],u=a[3],l=aa([i,t,n,u],e.dtype),c=[r&&t>1?o-1:o,r&&n>1?s-1:s],f=[r&&t>1?t-1:t,r&&n>1?n-1:n],p=0;p<i;p++)for(var d=0;d<t;d++)for(var h=0;h<n;h++)for(var m=0;m<u;m++){var g=c[0]*d/f[0],v=c[1]*h/f[1],y=Math.floor(g),b=Math.min(o-1,Math.ceil(g)),w=Math.floor(v),x=Math.min(s-1,Math.ceil(v)),_=e.get(p,y,w,m),N=e.get(p,b,w,m),k=v-w,E=_+(e.get(p,y,x,m)-_)*k,S=E+(N+(e.get(p,b,x,m)-N)*k-E)*(g-y);l.set(S,p,d,h,m)}return l.toTensor()},e.prototype.resizeBilinearBackprop=function(e,t,n){this.assertNotComplex([e,t],"resizeBilinearBackprop");for(var r=t.shape,a=r[0],i=r[1],o=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],f=aa([a,i,o,s],t.dtype),p=[n&&l>1?i-1:i,n&&c>1?o-1:o],d=[n&&l>1?l-1:l,n&&c>1?c-1:c],h=p[0]/d[0],m=p[1]/d[1],g=0;g<a;g++)for(var v=0;v<l;v++)for(var y=v*h,b=Math.floor(y),w=Math.min(Math.ceil(y),i-1),x=y-b,_=1-x,N=0;N<c;N++)for(var k=N*m,E=Math.floor(k),S=Math.min(Math.ceil(k),o-1),C=k-E,I=1-C,O=0;O<s;O++){var P=e.get(g,v,N,O),T=f.get(g,b,E,O);T+=P*_*I,f.set(T,g,b,E,O);var A=f.get(g,b,S,O);A+=P*_*C,f.set(A,g,b,S,O);var R=f.get(g,w,E,O);R+=P*x*I,f.set(R,g,w,E,O);var D=f.get(g,w,S,O);D+=P*x*C,f.set(D,g,w,S,O)}return f.toTensor()},e.prototype.resizeNearestNeighbor=function(e,t,n,r){this.assertNotComplex(e,"resizeNearestNeighbor");for(var a=e.shape,i=a[0],o=a[1],s=a[2],u=a[3],l=aa([i,t,n,u],e.dtype),c=[r&&t>1?o-1:o,r&&n>1?s-1:s],f=[r&&t>1?t-1:t,r&&n>1?n-1:n],p=0;p<i;p++)for(var d=0;d<t;d++)for(var h=0;h<n;h++)for(var m=0;m<u;m++){var g=c[0]*d/f[0],v=c[1]*h/f[1],y=Math.min(o-1,r?Math.round(g):Math.floor(g)),b=Math.min(s-1,r?Math.round(v):Math.floor(v)),w=e.get(p,y,b,m);l.set(w,p,d,h,m)}return l.toTensor()},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){this.assertNotComplex([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,a=r[0],i=r[1],o=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],f=aa([a,i,o,s],t.dtype),p=[n&&l>1?i-1:i,n&&c>1?o-1:o],d=[n&&l>1?l-1:l,n&&c>1?c-1:c],h=1/(p[0]/d[0]),m=1/(p[1]/d[1]),g=2*Math.ceil(h)+2,v=2*Math.ceil(m)+2,y=0;y<a;y++)for(var b=0;b<i;b++)for(var w=0;w<o;w++)for(var x=Math.floor(b*h),_=Math.floor(x-g/2),N=Math.floor(w*m),k=Math.floor(N-v/2),E=0;E<s;E++){for(var S=0,C=0;C<g;C++){var I=C+_;if(!(I<0||I>=l))for(var O=0;O<v;O++){var P=O+k;if(!(P<0||P>=c)){var T=p[0]*(I/d[0]),A=p[1]*(P/d[1]),R=Math.min(i-1,n?Math.round(T):Math.floor(T)),D=Math.min(o-1,n?Math.round(A):Math.floor(A));b===R&&w===D&&(S+=e.get(y,I,P,E))}}}f.set(S,y,b,w,E)}return f.toTensor()},e.prototype.batchNormalization=function(e,t,n,r,a,i){this.assertNotComplex([e,t,n,a,i],"batchNormalization");for(var o=e.dataSync(),s=t.dataSync(),u=n.dataSync(),l=a?a.dataSync():new Float32Array([1]),c=i?i.dataSync():new Float32Array([0]),f=new Float32Array(o.length),p=c.length,d=l.length,h=u.length,m=s.length,g=0,v=0,y=0,b=0,w=0;w<o.length;++w)f[w]=c[g++]+(o[w]-s[v++])*l[y++]/Math.sqrt(u[b++]+r),g>=p&&(g=0),v>=m&&(v=0),y>=d&&(y=0),b>=h&&(b=0);return Je(f,e.shape)},e.prototype.localResponseNormalization4D=function(e,t,n,r,a){this.assertNotComplex(e,"localResponseNormalization4D");var i=e.shape[3],o=i-1,s=e.dataSync(),u=v(e.shape),l=new Float32Array(u);function c(e){for(var n=e%i,r=e-n+Math.max(0,n-t),a=e-n+Math.min(n+t,o),u=0;r<=a;r++){var l=s[r];u+=l*l}return u}for(var f=0;f<u;f++){var p=c(f),d=s[f]*Math.pow(n+r*p,-a);l[f]=d}return Je(l,e.shape)},e.prototype.LRNGrad=function(e,t,n,r,a,i,o){this.assertNotComplex(e,"LRNGrad");for(var s=e.shape[3],u=e.dataSync(),l=t.dataSync(),c=n.dataSync(),f=new Float32Array(v(e.shape)),p=v(e.shape),d=0;d<p;d++){for(var h=d%s,m=d-h+Math.max(0,h-r),g=d-h+Math.min(s,h+r+1),y=0,b=m;b<g;b++)y+=Math.pow(l[b],2);for(y=i*y+a,b=m;b<g;b++){var w=-2*i*o*l[b]*c[d]/y;d===b&&(w+=Math.pow(y,-o)),w*=u[d],f[b]+=w}}return Je(f,e.shape)},e.prototype.multinomial=function(e,t,n,r){this.assertNotComplex(e,"multinomial");for(var a=t?e:Ue(e),i=a.shape[0],o=a.shape[1],s=Ze([i,n],"int32"),u=s.dataSync(),l=a.dataSync(),c=0;c<i;++c){var f=c*o,p=new Float32Array(o-1);p[0]=l[f];for(var d=1;d<p.length;++d)p[d]=p[d-1]+l[f+d];for(var h=na(r.toString()),m=c*n,g=0;g<n;++g){var v=h();u[m+g]=p.length;for(var y=0;y<p.length;y++)if(v<p[y]){u[m+g]=y;break}}}return s},e.prototype.oneHot=function(e,t,n,r){this.assertNotComplex(e,"oneHot");var a=new Float32Array(e.size*t);a.fill(r);for(var i=0;i<e.size;++i)e.get(i)>=0&&e.get(i)<t&&(a[i*t+e.get(i)]=n);return Ye(a,[e.size,t],"int32")},e.prototype.nonMaxSuppression=function(e,t,n,r,a){return this.assertNotComplex(e,"nonMaxSuppression"),vt(e.dataSync(),t.dataSync(),n,r,a)},e.prototype.depthToSpace=function(e,t,n){f("NHWC"===n,"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n),f(t>1,"blockSize should be > 1 for depthToSpace, but was: "+t);for(var r=e.shape[0],a=e.shape[1],i=e.shape[2],o=e.shape[3],s=a*t,u=i*t,l=o/(t*t),c=e.dataSync(),p=new Float32Array(r*s*u*l),d=0,h=0;h<r;++h)for(var m=0;m<s;++m)for(var g=Math.floor(m/t),v=m%t,y=0;y<u;++y)for(var b=Math.floor(y/t),w=(v*t+y%t)*l,x=0;x<l;++x){var _=x+w+o*(b+i*(g+a*h));p[d++]=c[_]}return Je(p,[r,s,u,l])},e.prototype.broadcastedBinaryOp=function(e,t,n,r){var a=Et(e.shape,t.shape),i=aa(a,n),o=e.dataSync(),s=t.dataSync(),u=Nt(e.shape,a),l=Nt(t.shape,a),c=i.values;if(u.length+l.length===0)for(var f=0;f<c.length;++f)c[f]=r(o[f%o.length],s[f%s.length]);else{var p=e.buffer(),d=t.buffer(),h=function(n){var a=i.indexToLoc(n),f=a.slice(-e.rank);u.forEach((function(e){return f[e]=0}));var h=p.locToIndex(f),m=a.slice(-t.rank);l.forEach((function(e){return m[e]=0}));var g=d.locToIndex(m);c[n]=r(o[h],s[g])};for(f=0;f<c.length;++f)h(f)}return i.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=Et(e.shape,t.shape),a=aa(r,"float32"),i=aa(r,"float32"),o=e.dataSync(),s=t.dataSync(),u=Nt(e.shape,r),l=Nt(t.shape,r),c=a.values,f=i.values;if(u.length+l.length===0)for(var p=0;p<c.length;p++){var d=p%o.length,h=p%s.length,m=n(o[2*d],o[2*d+1],s[2*h],s[2*h+1]);c[p]=m.real,f[p]=m.imag}else{var g=this.data.get(e.dataId).complexTensors.real.buffer(),v=this.data.get(t.dataId).complexTensors.real.buffer(),y=function(r){var i=a.indexToLoc(r),p=i.slice(-e.rank);u.forEach((function(e){return p[e]=0}));var d=g.locToIndex(p),h=i.slice(-t.rank);l.forEach((function(e){return h[e]=0}));var m=v.locToIndex(h),y=n(o[2*d],o[2*d+1],s[2*m],s[2*m+1]);c[r]=y.real,f[r]=y.imag};for(p=0;p<c.length;p++)y(p)}return this.complex(a.toTensor(),i.toTensor())},e.prototype.split=function(e,t,n){return bt(e,t,n)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.cropAndResize=function(e,t,n,r,a,i){for(var o=e.shape,s=o[0],u=o[1],l=o[2],c=o[3],f=t.shape[0],p=r[0],d=r[1],h=aa([f,p,d,c]),m=t.dataSync(),g=n.dataSync(),v=e.dataSync(),y=e.strides,b=h.strides,w=0;w<f;w++){var x=4*w,_=m[x],N=m[x+1],k=m[x+2],E=m[x+3],S=g[w];if(!(S>=s))for(var C=p>1?(k-_)*(u-1)/(p-1):0,I=d>1?(E-N)*(l-1)/(d-1):0,O=0;O<p;O++){var P=p>1?_*(u-1)+O*C:.5*(_+k)*(u-1);if(P<0||P>u-1)for(var T=0;T<d;T++)for(var A=0;A<c;A++){var R=A+T*b[2]+O*b[1]+w*b[0];h.values[R]=i}else if("bilinear"===a){var D=Math.floor(P),M=Math.ceil(P),L=P-D;for(T=0;T<d;T++)if(($=d>1?N*(l-1)+T*I:.5*(N+E)*(l-1))<0||$>l-1)for(A=0;A<c;A++)R=A+T*b[2]+O*b[1]+w*b[0],h.values[R]=i;else{var z=Math.floor($),j=Math.ceil($),B=$-z;for(A=0;A<c;A++){var F=v[R=A+z*y[2]+D*y[1]+S*y[0]],V=v[R=A+j*y[2]+D*y[1]+S*y[0]],U=v[R=A+z*y[2]+M*y[1]+S*y[0]],W=F+(V-F)*B,q=U+(v[R=A+j*y[2]+M*y[1]+S*y[0]]-U)*B;R=A+T*b[2]+O*b[1]+w*b[0],h.values[R]=W+(q-W)*L}}}else for(T=0;T<d;++T){var $;if(($=d>1?N*(l-1)+T*I:.5*(N+E)*(l-1))<0||$>l-1)for(A=0;A<c;A++)R=A+T*b[2]+O*b[1]+w*b[0],h.values[R]=i;else{var H=Math.round($),K=Math.round(P);for(A=0;A<c;A++){var G=A+H*y[2]+K*y[1]+S*y[0],Y=A+T*b[2]+O*b[1]+w*b[0];h.values[Y]=v[G]}}}}}return h.toTensor()},e}();me.registerBackend("cpu",(function(){return new Ss}),1,Y);var Cs="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setImmediate;function Is(){return new Promise((function(e){return Cs((function(){return e()}))}))}var Os={float32:4,int32:4,uint16:2,uint8:1,bool:1};function Ps(e,t){for(var n={},r=0,a=function(t){var a=t.name,i=t.dtype,o=t.shape,s=v(o),u=void 0;if("quantization"in t){var l=t.quantization;if("uint8"!==l.dtype&&"uint16"!==l.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+l.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var c=Os[l.dtype],f=e.slice(r,r+s*c),p="uint8"===l.dtype?new Uint8Array(f):new Uint16Array(f);if("float32"===i)u=Float32Array.from(p,(function(e){return e*l.scale+l.min}));else{if("int32"!==i)throw new Error("Unsupported dtype in weight '"+a+"': "+i);u=Int32Array.from(p,(function(e){return Math.round(e*l.scale+l.min)}))}r+=s*c}else{var d=Os[i];if(f=e.slice(r,r+s*d),"float32"===i)u=new Float32Array(f);else if("int32"===i)u=new Int32Array(f);else{if("bool"!==i)throw new Error("Unsupported dtype in weight '"+a+"': "+i);u=new Uint8Array(f)}r+=s*d}var h=void 0;if("float32"===i)h=He(u,o,"float32");else if("int32"===i)h=He(u,o,"int32");else{if("bool"!==i)throw new Error("Unsupported dtype in weight '"+a+"': "+i);h=He(u,o,"bool")}n[a]=h},i=0,o=t;i<o.length;i++)a(o[i]);return n}function Ts(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var As="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function Rs(e){return As?Buffer.byteLength(e):new Blob([e]).size}function Ds(e){var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function Ms(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Ls(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Rs(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Rs(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var zs=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t){return e.getHandlers(t,"load")},e.getHandlers=function(e,t){var n=[];return("load"===t?this.getInstance().loadRouters:this.getInstance().saveRouters).forEach((function(t){var r=t(e);null!==r&&n.push(r)})),n},e}(),js="://",Bs=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){f(null!=t,"scheme must not be undefined or null."),t.endsWith(js)&&(t=t.slice(0,t.indexOf(js))),f(t.length>0,"scheme must not be an empty string.");var r=e.getInstance();f(null==r.managers[t],"A model store manager is already registered for scheme '"+t+"'."),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function Fs(e){if(-1===e.indexOf(js))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Bs.getSchemes().join(","));return{scheme:e.split(js)[0],path:e.split(js)[1]}}function Vs(e,t,n){return void 0===n&&(n=!1),o(this,void 0,void 0,(function(){var r,a,i,o,u,l,c,p,d;return s(this,(function(s){switch(s.label){case 0:return f(e!==t,"Old path and new path are the same: '"+e+"'"),f((r=zs.getLoadHandlers(e)).length>0,"Copying failed because no load handler is found for source URL "+e+"."),f(r.length<2,"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."),a=r[0],f((i=zs.getSaveHandlers(t)).length>0,"Copying failed because no save handler is found for destination URL "+t+"."),f(i.length<2,"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."),o=i[0],u=Fs(e).scheme,l=Fs(e).path,c=u===Fs(e).scheme,[4,a.load()];case 1:return p=s.sent(),n&&c?[4,Bs.getManager(u).removeModel(l)]:[3,3];case 2:s.sent(),s.label=3;case 3:return[4,o.save(p)];case 4:return d=s.sent(),!n||c?[3,6]:[4,Bs.getManager(u).removeModel(l)];case 5:s.sent(),s.label=6;case 6:return[2,d.modelArtifactsInfo]}}))}))}var Us="tensorflowjs",Ws="models_store",qs="model_info_store";function $s(){if(!me.get("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Hs(e){var t=e.result;t.createObjectStore(Ws,{keyPath:"modelPath"}),t.createObjectStore(qs,{keyPath:"modelPath"})}var Ks=function(){function e(e){if(this.indexedDB=$s(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]}))}))},e.prototype.load=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,this.databaseAction(this.modelPath)]}))}))},e.prototype.databaseAction=function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(Us,1);a.onupgradeneeded=function(){return Hs(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(Ws,"readonly"),s=o.objectStore(Ws).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,l=Ls(t),c=i.transaction(qs,"readwrite"),f=c.objectStore(qs),p=f.put({modelPath:n.modelPath,modelArtifactsInfo:l});p.onsuccess=function(){var a=(u=i.transaction(Ws,"readwrite")).objectStore(Ws).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l});a.onsuccess=function(){return e({modelArtifactsInfo:l})},a.onerror=function(e){var t=(f=c.objectStore(qs)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},p.onerror=function(e){return i.close(),r(p.error)},c.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))},e.URL_SCHEME="indexeddb://",e}(),Gs=function(e){return me.get("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ks.URL_SCHEME)?function(e){return new Ks(e)}(e.slice(Ks.URL_SCHEME.length)):null};zs.registerSaveRouter(Gs),zs.registerLoadRouter(Gs);var Ys=function(){function e(){this.indexedDB=$s()}return e.prototype.listModels=function(){return o(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){return[2,new Promise((function(t,n){var r=e.indexedDB.open(Us,1);r.onupgradeneeded=function(){return Hs(r)},r.onsuccess=function(){var e=r.result,a=e.transaction(qs,"readonly"),i=a.objectStore(qs).getAll();i.onsuccess=function(){for(var e={},n=0,r=i.result;n<r.length;n++){var a=r[n];e[a.modelPath]=a.modelArtifactsInfo}t(e)},i.onerror=function(t){return e.close(),n(i.error)},a.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}}))]}))}))},e.prototype.removeModel=function(e){return o(this,void 0,void 0,(function(){var t=this;return s(this,(function(n){return e=function(e){return e.startsWith(Ks.URL_SCHEME)?e.slice(Ks.URL_SCHEME.length):e}(e),[2,new Promise((function(n,r){var a=t.indexedDB.open(Us,1);a.onupgradeneeded=function(){return Hs(a)},a.onsuccess=function(){var t,i=a.result,o=i.transaction(qs,"readwrite"),s=o.objectStore(qs),u=s.get(e);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var a=s.delete(e),o=function(){var a=(t=i.transaction(Ws,"readwrite")).objectStore(Ws).delete(e);a.onsuccess=function(){return n(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==t?i.close():t.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}}))]}))}))},e}();if(me.get("IS_BROWSER"))try{Bs.registerManager(Ks.URL_SCHEME,new Ys)}catch(re){}var Xs="/",Js="tensorflowjs_models",Qs="info",Zs="model_topology",eu="weight_specs",tu="weight_data";function nu(e){return{info:[Js,e,Qs].join(Xs),topology:[Js,e,Zs].join(Xs),weightSpecs:[Js,e,eu].join(Xs),weightData:[Js,e,tu].join(Xs)}}function ru(e){var t=e.split(Xs);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(Xs)}var au=function(){function e(e){if(!me.get("IS_BROWSER")||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=nu(this.modelPath)}return e.prototype.save=function(e){return o(this,void 0,void 0,(function(){var t,n,r,a;return s(this,(function(i){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=Ls(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){return As?Buffer.from(e).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(e)))}(e.weightData)),[2,{modelArtifactsInfo:r}]}catch(e){for(a in this.keys)this.LS.removeItem(this.keys[a]);throw new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}return[2]}))}))},e.prototype.load=function(){return o(this,void 0,void 0,(function(){var e,t,n,r,a;return s(this,(function(i){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null==(a=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(As){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}(a),[2,t]}))}))},e.URL_SCHEME="localstorage://",e}(),iu=function(e){return me.get("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(au.URL_SCHEME)?function(e){return new au(e)}(e.slice(au.URL_SCHEME.length)):null};zs.registerSaveRouter(iu),zs.registerLoadRouter(iu);var ou=function(){function e(){f(me.get("IS_BROWSER"),"Current environment is not a web browser"),f(void 0!==window.localStorage,"Current browser does not appear to support localStorage"),this.LS=window.localStorage}return e.prototype.listModels=function(){return o(this,void 0,void 0,(function(){var e,t,n,r,a,i;return s(this,(function(o){for(e={},t=Js+Xs,n=Xs+Qs,r=0;r<this.LS.length;++r)(a=this.LS.key(r)).startsWith(t)&&a.endsWith(n)&&(i=ru(a),e[i]=JSON.parse(this.LS.getItem(a)));return[2,e]}))}))},e.prototype.removeModel=function(e){return o(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){if(e=function(e){return e.startsWith(au.URL_SCHEME)?e.slice(au.URL_SCHEME.length):e}(e),t=nu(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]}))}))},e}();if(me.get("IS_BROWSER"))try{Bs.registerManager(au.URL_SCHEME,new ou)}catch(re){}var su=function(){function e(t){if(!me.get("IS_BROWSER"))throw new Error("triggerDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return e.prototype.save=function(e){return o(this,void 0,void 0,(function(){var t,n,r,a,i,o;return s(this,(function(s){if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),e.modelTopology instanceof ArrayBuffer)throw new Error("DownloadTrigger.save() does not support saving model topology in binary formats yet.");return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,weightsManifest:n},a=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(i=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,i.href=a,i.click(),null!=e.weightData&&((o=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,o.href=t,o.click()),[2,{modelArtifactsInfo:Ls(e)}]}))}))},e.URL_SCHEME="downloads://",e}(),uu=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return o(this,void 0,void 0,(function(){var e,t,n=this;return s(this,(function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise((function(r,a){var i=new FileReader;i.onload=function(i){var o=JSON.parse(i.target.result),s=o.modelTopology;if(null!=s){0===t.length&&r({modelTopology:s});var u=o.weightsManifest;if(null!=u){var l;try{l=n.checkManifestAndWeightFiles(u,t)}catch(e){return void a(e)}var c=[],f=[],p=[];u.forEach((function(e){e.paths.forEach((function(e){f.push(e),p.push(null)})),c.push.apply(c,e.weights)})),u.forEach((function(e){e.paths.forEach((function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,a=f.indexOf(e);p[a]=n,-1===p.indexOf(null)&&r({modelTopology:s,weightSpecs:c,weightData:Ds(p)})},t.onerror=function(t){a("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(l[e])}))}))}else a(new Error("weightManifest field is missing from file "+e.name))}else a(new Error("modelTopology field is missing from file "+e.name))},i.onerror=function(t){a("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},i.readAsText(e)}))]}))}))},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map((function(e){return Ms(e.name)})),a={},i=0,o=e;i<o.length;i++)o[i].paths.forEach((function(e){var i=Ms(e);if(-1!==n.indexOf(i))throw new Error("Duplicate file basename found in weights manifest: '"+i+"'");if(n.push(i),-1===r.indexOf(i))throw new Error("Weight file with basename '"+i+"' is not provided.");a[e]=t[r.indexOf(i)]}));if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return a},e}();function lu(e,t){return o(this,void 0,void 0,(function(){var n,r;return s(this,(function(a){switch(a.label){case 0:return n=e.map((function(e){return fetch(e,t)})),[4,Promise.all(n)];case 1:return r=a.sent(),[4,Promise.all(r.map((function(e){return e.arrayBuffer()})))];case 2:return[2,a.sent()]}}))}))}zs.registerSaveRouter((function(e){return me.get("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(su.URL_SCHEME)?function(e){return void 0===e&&(e="model"),new su(e)}(e.slice(su.URL_SCHEME.length)):null}));var cu=function(){function e(e,t){if(this.DEFAULT_METHOD="POST","undefined"==typeof fetch)throw new Error("browserHTTPRequest is not supported outside the web browser without a fetch polyfill.");if(f(null!=e&&e.length>0,"URL path for browserHTTPRequest must not be null, undefined or empty."),Array.isArray(e)&&f(2===e.length,"URL paths for browserHTTPRequest must have a length of 2, (actual length is "+e.length+")."),this.path=e,null!=t&&null!=t.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t||{}}return e.prototype.save=function(e){return o(this,void 0,void 0,(function(){var t,n,r,a;return s(this,(function(i){switch(i.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,fetch(this.path,t)];case 1:if(200===(a=i.sent()).status)return[2,{modelArtifactsInfo:Ls(e),responses:[a]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+a.status+".")}}))}))},e.prototype.load=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,Array.isArray(this.path)?this.loadBinaryModel():this.loadJSONModel()]}))}))},e.prototype.loadBinaryTopology=function(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,fetch(this.path[0],this.requestInit)];case 1:return[4,t.sent().arrayBuffer()];case 2:return[2,t.sent()];case 3:throw e=t.sent(),new Error(this.path[0]+" not found. "+e);case 4:return[2]}}))}))},e.prototype.loadBinaryModel=function(){return o(this,void 0,void 0,(function(){var e,t,n,r,a,i,o,u;return s(this,(function(s){switch(s.label){case 0:return e=this.loadBinaryTopology(),[4,fetch(this.path[1],this.requestInit)];case 1:return t=s.sent(),[4,Promise.all([e,t])];case 2:return n=s.sent(),r=n[0],[4,n[1].json()];case 3:return null==(a=s.sent())?[3,5]:[4,this.loadWeights(a)];case 4:u=s.sent(),i=u[0],o=u[1],s.label=5;case 5:return[2,{modelTopology:r,weightSpecs:i,weightData:o}]}}))}))},e.prototype.loadJSONModel=function(){return o(this,void 0,void 0,(function(){var e,t,n,r,a,i,o;return s(this,(function(s){switch(s.label){case 0:return[4,fetch(this.path,this.requestInit)];case 1:return[4,s.sent().json()];case 2:if(e=s.sent(),t=e.modelTopology,n=e.weightsManifest,null==t&&null==n)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==n?[3,4]:(i=e.weightsManifest,[4,this.loadWeights(i)]);case 3:o=s.sent(),r=o[0],a=o[1],s.label=4;case 4:return[2,{modelTopology:t,weightSpecs:r,weightData:a}]}}))}))},e.prototype.loadWeights=function(e){return o(this,void 0,void 0,(function(){var t,n,r,a,i,o,u,l,c;return s(this,(function(s){switch(s.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=[],r=0,a=e;r<a.length;r++)i=a[r],n.push.apply(n,i.weights);return(o=t.substring(0,t.lastIndexOf("/"))).endsWith("/")||(o+="/"),u=[],e.forEach((function(e){e.paths.forEach((function(e){u.push(o+e)}))})),l=[n],c=Ds,[4,lu(u,this.requestInit)];case 1:return[2,l.concat([c.apply(void 0,[s.sent()])])]}}))}))},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function fu(e){return null!=e.match(cu.URL_SCHEME_REGEX)}var pu=function(e){return"undefined"==typeof fetch?null:(Array.isArray(e)?e.every((function(e){return fu(e)})):fu(e))?du(e):null};function du(e,t){return new cu(e,t)}zs.registerSaveRouter(pu),zs.registerLoadRouter(pu);var hu=function(){function e(e,t,n){this.modelTopology=e,this.weightSpecs=t,this.weightData=n}return e.prototype.load=function(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){return e={},null!=this.modelTopology&&(e=i({modelTopology:this.modelTopology},e)),null!=this.weightSpecs&&this.weightSpecs.length>0&&(e=i({weightSpecs:this.weightSpecs},e)),null!=this.weightData&&this.weightData.byteLength>0&&(e=i({weightData:this.weightData},e)),[2,e]}))}))},e}(),mu=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.saveHandler(e)]}))}))},e}();var gu=zs.registerSaveRouter,vu=zs.registerLoadRouter,yu=zs.getSaveHandlers,bu=zs.getLoadHandlers,wu=Object.freeze({browserFiles:function(e){return new uu(e)},browserHTTPRequest:du,concatenateArrayBuffers:Ds,decodeWeights:Ps,encodeWeights:function(e){return o(this,void 0,void 0,(function(){var t,n,r,a;return s(this,(function(i){switch(i.label){case 0:for(r in t=[],n=[],e){if("float32"!==(a=e[r]).dtype&&"int32"!==a.dtype&&"bool"!==a.dtype)throw new Error("Unsupported dtype in weight '"+r+"': "+a.dtype);t.push({name:r,shape:a.shape,dtype:a.dtype}),n.push(a.data())}return[4,Promise.all(n)];case 1:return[2,{data:Ts(i.sent()),specs:t}]}}))}))},fromMemory:function(e,t,n){return new hu(e,t,n)},getLoadHandlers:bu,getModelArtifactsInfoForJSON:Ls,getSaveHandlers:yu,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),o(this,void 0,void 0,(function(){var a,i,o,u,l,c,f,p,d,h;return s(this,(function(s){switch(s.label){case 0:if(a=e.map((function(){return!1})),i={},o=null!=n?n.map((function(){return!1})):[],u=[],e.forEach((function(e,t){var r=0;e.weights.forEach((function(e){var s="quantization"in e?e.quantization.dtype:e.dtype,l=Os[s]*v(e.shape),c=function(){a[t]=!0,null==i[t]&&(i[t]=[]),i[t].push({manifestEntry:e,groupOffset:r,sizeBytes:l})};null!=n?n.forEach((function(t,n){t===e.name&&(c(),o[n]=!0)})):c(),u.push(e.name),r+=l}))})),!o.every((function(e){return e})))throw l=n.filter((function(e,t){return!o[t]})),new Error("Could not find weights in manifest with names: "+l.join(", ")+". \nManifest JSON has weights with names: "+u.join(", ")+".");return c=a.reduce((function(e,t,n){return t&&e.push(n),e}),[]),f=[],c.forEach((function(n){e[n].paths.forEach((function(e){var n=t+(t.endsWith("/")?"":"/")+e;f.push(n)}))})),[4,lu(f,r)];case 1:return p=s.sent(),d={},h=0,c.forEach((function(t){for(var n=e[t].paths.length,r=0,a=0;a<n;a++)r+=p[h+a].byteLength;for(var o=new ArrayBuffer(r),s=new Uint8Array(o),u=0,l=0;l<n;l++){var c=new Uint8Array(p[h+l]);s.set(c,u),u+=c.byteLength}i[t].forEach((function(e){var t=Ps(o.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)d[n]=t[n]})),h+=n})),[2,d]}}))}))},registerLoadRouter:vu,registerSaveRouter:gu,withSaveHandler:function(e){return new mu(e)},copyModel:function(e,t){return o(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,Vs(e,t,!1)];case 1:return[2,n.sent()]}}))}))},listModels:function(){return o(this,void 0,void 0,(function(){var e,t,n,r,a,i,o;return s(this,(function(s){switch(s.label){case 0:e=Bs.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(a=r[n],[4,Bs.getManager(a).listModels()]):[3,4];case 2:for(o in i=s.sent())t[a+js+o]=i[o];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}}))}))},moveModel:function(e,t){return o(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,Vs(e,t,!0)];case 1:return[2,n.sent()]}}))}))},removeModel:function(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=Fs(e),[4,Bs.getManager(t.scheme).removeModel(t.path)];case 1:return[2,n.sent()]}}))}))}}),xu=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),_u=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function Nu(e){f(null!=e.className,"Class being registered does not have the static className property defined."),f("string"==typeof e.className,"className is required to be a string, but got type "+typeof e.className),f(e.className.length>0,"Class being registered has an empty-string as its className, which is disallowed."),_u.register(e)}var ku=Object.freeze({Serializable:xu,SerializationMap:_u,registerClass:Nu});function Eu(e,t,n){if(null==n&&(n=me.get("TEST_EPSILON")),e instanceof X||t instanceof X){if(e instanceof X&&t instanceof X){if(e.dtype!==t.dtype)throw new Error("Arrays are of different type actual: "+e.dtype+" vs expected: "+t.dtype+".");if(!y(e.shape,t.shape))throw new Error("Arrays are of different shape actual: "+e.shape+" vs expected: "+t.shape+".")}}else{var r=e.constructor.name,a=t.constructor.name;if(r!==a)throw new Error("Arrays are of different type actual: "+r+" vs expected: "+a)}var i,o;if(i=e instanceof X?e.dataSync():e,o=t instanceof X?t.dataSync():t,i.length!==o.length)throw new Error("Arrays have different lengths actual: "+i.length+" vs expected: "+o.length+".\nActual:   "+i+".\nExpected: "+o+".");for(var s=0;s<o.length;++s){var u=i[s],l=o[s];if(!Su(u,Number(l),n))throw new Error("Arrays differ: actual["+s+"] = "+u+", expected["+s+"] = "+l+".\nActual:   "+i+".\nExpected: "+o+".")}}function Su(e,t,n){return!(!isNaN(e)||!isNaN(t))||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}Object.freeze({WEBGL_ENVS:{HAS_WEBGL:!0},NODE_ENVS:{IS_NODE:!0},CHROME_ENVS:{IS_CHROME:!0},BROWSER_ENVS:{IS_BROWSER:!0},CPU_ENVS:{HAS_WEBGL:!1},ALL_ENVS:{},expectArraysClose:Eu,expectPromiseToFail:function(e,t){e().then((function(){return t.fail()}),(function(){return t()}))},expectArraysEqual:function(e,t){return Eu(e,t,0)},expectNumbersClose:function(e,t,n){if(null==n&&(n=me.get("TEST_EPSILON")),!Su(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){var r;r=e instanceof X?e.dataSync():e;for(var a=0;a<r.length;a++)if(r[a]<t||r[a]>n)throw new Error("Value out of range:"+r[a]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}});var Cu="0.12.17",Iu=(Object.freeze({gpgpu_util:pr,webgl_util:qn,MathBackendWebGL:Ta,GPGPUContext:dr}),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),a=r.value,i=r.grads;return this.applyGradients(i),Object.keys(i).forEach((function(e){return i[e].dispose()})),t?a:(a.dispose(),null)},t.prototype.computeGradients=function(e,t){return function(e,t){if(f(A(e),"The f passed in variableGrads(f) must be a function"),f(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof J})),"The varList passed in variableGrads(f, varList) must be an array of variables"),null==t)for(var n in t=[],me.engine.registeredVariables)t.push(me.engine.registeredVariables[n]);var r=t.length;f((t=t.filter((function(e){return e.trainable}))).length>0,"variableGrads() expects at least one of the input variables to be trainable, but none of the "+r+" variables is trainable.");var a=me.engine.gradients(e,t,null,!0),i=a.value,o=a.grads;f(o.some((function(e){return null!=e})),"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),f(0===i.rank,"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+i.rank+" tensor");var s={};return t.forEach((function(e,t){null!=o[t]&&(s[e.name]=o[t])})),{value:i,grads:s}}(e,t)},t}(xu)),Ou=function(e){function t(t,n,r){void 0===r&&(r=null);var a=e.call(this)||this;return a.learningRate=t,a.rho=n,a.epsilon=r,a.accumulatedGrads={},a.accumulatedUpdates={},a.c=ye(Ke(-t)),a.rhoScalar=ye(Ke(n)),a.oneMinusRho=ye(Ke(1-n)),null===r&&(r=me.get("EPSILON")),a.epsilonScalar=ye(Ke(r)),a}return a(t,e),t.prototype.applyGradients=function(e){var t=this,n=function(n){var a=me.engine.registeredVariables[n];null==r.accumulatedGrads[n]&&ve((function(){t.accumulatedGrads[n]=ct(a).variable(!1)})),null==r.accumulatedUpdates[n]&&ve((function(){t.accumulatedUpdates[n]=ct(a).variable(!1)}));var i=e[n],o=r.accumulatedGrads[n],s=r.accumulatedUpdates[n];ve((function(){var e=t.rhoScalar.mul(o).add(t.oneMinusRho.mul(i.square())),r=s.add(t.epsilonScalar).sqrt().div(o.add(t.epsilonScalar).sqrt()).mul(i),u=t.rhoScalar.mul(s).add(t.oneMinusRho.mul(r.square()));t.accumulatedGrads[n].assign(e),t.accumulatedUpdates[n].assign(u);var l=t.c.mul(r).add(a);a.assign(l)}))},r=this;for(var a in e)n(a)},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsilonScalar.dispose(),this.rhoScalar.dispose(),this.oneMinusRho.dispose(),null!=this.accumulatedUpdates&&(Object.keys(this.accumulatedUpdates).forEach((function(t){return e.accumulatedUpdates[t].dispose()})),Object.keys(this.accumulatedGrads).forEach((function(t){return e.accumulatedGrads[t].dispose()})))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="AdadeltaOptimizer",t}(Iu);Nu(Ou);var Pu=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads={},r.c=ye(Ke(-t)),r.epsilon=ye(Ke(me.get("EPSILON"))),r}return a(t,e),t.prototype.applyGradients=function(e){var t=this,n=function(n){var a=me.engine.registeredVariables[n];null==r.accumulatedGrads[n]&&ve((function(){t.accumulatedGrads[n]=et(a.shape,t.initialAccumulatorValue).variable(!1)}));var i=e[n],o=r.accumulatedGrads[n];ve((function(){var e=o.add(i.square());t.accumulatedGrads[n].assign(e);var r=t.c.mul(i.div(e.add(t.epsilon).sqrt())).add(a);a.assign(r)}))},r=this;for(var a in e)n(a)},t.prototype.dispose=function(){var e=this;this.epsilon.dispose(),this.c.dispose(),null!=this.accumulatedGrads&&Object.keys(this.accumulatedGrads).forEach((function(t){return e.accumulatedGrads[t].dispose()}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="AdagradOptimizer",t}(Iu);Nu(Pu);var Tu=function(e){function t(t,n,r,a){void 0===a&&(a=null);var i=e.call(this)||this;return i.learningRate=t,i.beta1=n,i.beta2=r,i.epsilon=a,i.accumulatedFirstMoment={},i.accumulatedSecondMoment={},i.c=ye(Ke(-t)),i.beta1Scalar=ye(Ke(n)),i.beta2Scalar=ye(Ke(r)),ve((function(){i.accBeta1=Ke(n).variable(),i.accBeta2=Ke(r).variable()})),i.oneMinusBeta1=ye(Ke(1-n)),i.oneMinusBeta2=ye(Ke(1-r)),i.one=ye(Ke(1)),null===a&&(a=me.get("EPSILON")),i.epsScalar=ye(Ke(a)),i}return a(t,e),t.prototype.applyGradients=function(e){var t=this;ve((function(){var n=t.one.sub(t.accBeta1),r=t.one.sub(t.accBeta2);for(var a in e){var i=me.engine.registeredVariables[a];if(null==t.accumulatedFirstMoment[a]){var o=!1;t.accumulatedFirstMoment[a]=ct(i).variable(o)}null==t.accumulatedSecondMoment[a]&&(o=!1,t.accumulatedSecondMoment[a]=ct(i).variable(o));var s=e[a],u=t.accumulatedFirstMoment[a],l=t.accumulatedSecondMoment[a],c=t.beta1Scalar.mul(u).add(t.oneMinusBeta1.mul(s)),f=t.beta2Scalar.mul(l).add(t.oneMinusBeta2.mul(s.square())),p=c.div(n),d=f.div(r);t.accumulatedFirstMoment[a].assign(c),t.accumulatedSecondMoment[a].assign(f);var h=t.c.mul(p.div(t.epsScalar.add(d.sqrt()))).add(i);i.assign(h)}t.accBeta1.assign(t.accBeta1.mul(t.beta1Scalar)),t.accBeta2.assign(t.accBeta2.mul(t.beta2Scalar))}))},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsScalar.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.accBeta1.dispose(),this.accBeta2.dispose(),this.oneMinusBeta1.dispose(),this.oneMinusBeta2.dispose(),this.one.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach((function(t){return e.accumulatedFirstMoment[t].dispose()})),null!=this.accumulatedSecondMoment&&Object.keys(this.accumulatedSecondMoment).forEach((function(t){return e.accumulatedSecondMoment[t].dispose()}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="AdamOptimizer",t}(Iu);Nu(Tu);var Au=function(e){function t(t,n,r,a,i){void 0===a&&(a=null),void 0===i&&(i=0);var o=e.call(this)||this;return o.learningRate=t,o.beta1=n,o.beta2=r,o.epsilon=a,o.decay=i,o.accumulatedFirstMoment={},o.accumulatedWeightedInfNorm={},o.c=ye(Ke(-t)),o.beta1Scalar=ye(Ke(n)),o.beta2Scalar=ye(Ke(r)),o.decayScalar=ye(Ke(i)),ve((function(){o.iteration=Ke(0).variable(),o.accBeta1=Ke(n).variable()})),o.oneMinusBeta1=ye(Ke(1-n)),o.one=ye(Ke(1)),null===a&&(a=me.get("EPSILON")),o.epsScalar=ye(Ke(a)),o}return a(t,e),t.prototype.applyGradients=function(e){var t=this;ve((function(){var n=t.one.sub(t.accBeta1),r=t.c.div(t.one.add(t.decayScalar.mul(t.iteration)));for(var a in e){var i=me.engine.registeredVariables[a];if(null==t.accumulatedFirstMoment[a]){var o=!1;t.accumulatedFirstMoment[a]=ct(i).variable(o)}null==t.accumulatedWeightedInfNorm[a]&&(o=!1,t.accumulatedWeightedInfNorm[a]=ct(i).variable(o));var s=e[a],u=t.accumulatedFirstMoment[a],l=t.accumulatedWeightedInfNorm[a],c=t.beta1Scalar.mul(u).add(t.oneMinusBeta1.mul(s)),f=t.beta2Scalar.mul(l),p=s.abs(),d=f.maximum(p);t.accumulatedFirstMoment[a].assign(c),t.accumulatedWeightedInfNorm[a].assign(d);var h=r.div(n).mul(c.div(t.epsScalar.add(d))).add(i);i.assign(h)}t.iteration.assign(t.iteration.add(t.one)),t.accBeta1.assign(t.accBeta1.mul(t.beta1Scalar))}))},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsScalar.dispose(),this.accBeta1.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.oneMinusBeta1.dispose(),this.decayScalar.dispose(),this.iteration.dispose(),this.one.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach((function(t){return e.accumulatedFirstMoment[t].dispose()})),null!=this.accumulatedWeightedInfNorm&&Object.keys(this.accumulatedWeightedInfNorm).forEach((function(t){return e.accumulatedWeightedInfNorm[t].dispose()}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="AdamaxOptimizer",t}(Iu);Nu(Au);var Ru=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return a(t,e),t.prototype.applyGradients=function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=me.engine.registeredVariables[n];ve((function(){var e=t.c.mul(r).add(a);a.assign(e)}))}))},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=ye(Ke(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGDOptimizer",t}(Iu);Nu(Ru);var Du=function(e){function t(t,n,r){void 0===r&&(r=!1);var a=e.call(this,t)||this;return a.learningRate=t,a.momentum=n,a.useNesterov=r,a.m=Ke(a.momentum),a.accumulations={},a}return a(t,e),t.prototype.applyGradients=function(e){var t=this,n=function(n){var a=me.engine.registeredVariables[n];null==r.accumulations[n]&&ve((function(){t.accumulations[n]=ct(a).variable(!1)}));var i=r.accumulations[n],o=e[n];ve((function(){var e,r=t.m.mul(i).add(o);e=t.useNesterov?t.c.mul(o.add(r.mul(t.m))).add(a):t.c.mul(r).add(a),t.accumulations[n].assign(r),a.assign(e)}))},r=this;for(var a in e)n(a)},t.prototype.dispose=function(){if(e.prototype.dispose.call(this),this.m.dispose(),null!=this.accumulations)for(var t in this.accumulations)this.accumulations[t].dispose()},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="MomentumOptimizer",t}(Ru);Nu(Du);var Mu=function(e){function t(t,n,r,a,i){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===a&&(a=null),void 0===i&&(i=!1);var o=e.call(this)||this;return o.learningRate=t,o.decay=n,o.momentum=r,o.epsilon=a,o.accumulatedMeanSquares={},o.accumulatedMeanGrads={},o.accumulatedMoments={},o.c=ye(Ke(t)),o.decayScalar=ye(Ke(n)),o.momentumScalar=ye(Ke(r)),o.oneMinusDecay=ye(Ke(1-n)),o.centered=i,null===a&&(a=me.get("EPSILON")),o.epsilonScalar=ye(Ke(a)),o}return a(t,e),t.prototype.applyGradients=function(e){var t=this,n=function(n){var a=me.engine.registeredVariables[n];null==r.accumulatedMeanSquares[n]&&ve((function(){t.accumulatedMeanSquares[n]=ct(a).variable(!1)})),null==r.accumulatedMeanGrads[n]&&r.centered&&ve((function(){t.accumulatedMeanGrads[n]=ct(a).variable(!1)})),null==r.accumulatedMoments[n]&&ve((function(){t.accumulatedMoments[n]=ct(a).variable(!1)}));var i=r.accumulatedMeanSquares[n],o=r.accumulatedMeanGrads[n],s=r.accumulatedMoments[n],u=e[n];ve((function(){var e=t.decayScalar.mul(i).add(t.oneMinusDecay.mul(u.square()));if(t.centered){var r=t.decayScalar.mul(o).add(t.oneMinusDecay.mul(u)),l=t.momentumScalar.mul(s).add(t.c.mul(u).div(e.sub(r.square().add(t.epsilonScalar)).sqrt()));t.accumulatedMeanSquares[n].assign(e),t.accumulatedMeanGrads[n].assign(r),t.accumulatedMoments[n].assign(l);var c=a.sub(l);a.assign(c)}else{var f=t.decayScalar.mul(i).add(t.oneMinusDecay.mul(u.square()));l=t.momentumScalar.mul(s).add(t.c.mul(u).div(f.add(t.epsilonScalar).sqrt())),t.accumulatedMeanSquares[n].assign(f),t.accumulatedMoments[n].assign(l),c=a.sub(l),a.assign(c)}}))},r=this;for(var a in e)n(a)},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsilonScalar.dispose(),this.decayScalar.dispose(),this.momentumScalar.dispose(),this.oneMinusDecay.dispose(),null!=this.accumulatedMeanSquares&&Object.keys(this.accumulatedMeanSquares).forEach((function(t){return e.accumulatedMeanSquares[t].dispose()})),null!=this.accumulatedMeanGrads&&this.centered&&Object.keys(this.accumulatedMeanGrads).forEach((function(t){return e.accumulatedMeanGrads[t].dispose()})),null!=this.accumulatedMoments&&Object.keys(this.accumulatedMoments).forEach((function(t){return e.accumulatedMoments[t].dispose()}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSPropOptimizer",t}(Iu);Nu(Mu);var Lu=function(){function e(){}return e.sgd=function(e){return new Ru(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new Du(e,t,n)},e.rmsprop=function(e,t,n,r,a){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===a&&(a=!1),new Mu(e,t,n,r,a)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new Tu(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new Ou(e,t,n)},e.adamax=function(e,t,n,r,a){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===a&&(a=0),new Au(e,t,n,r,a)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new Pu(e,t)},e}(),zu={sgd:Lu.sgd,momentum:Lu.momentum,adadelta:Lu.adadelta,adagrad:Lu.adagrad,rmsprop:Lu.rmsprop,adamax:Lu.adamax,adam:Lu.adam};he.setBackend,he.getBackend,he.disposeVariables,he.memory;!function(e){G=e}(Es)},694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var o=a.apply(null,n);o&&e.push(o)}}else if("object"===i)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},176:function(e){"use strict";e.exports=function(e,t,n,r,a,i,o,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,a,i,o,s],c=0;(u=new Error(t.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,i){for(var o,s,u=a(e),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))n.call(o,c)&&(u[c]=o[c]);if(t){s=t(o);for(var f=0;f<s.length;f++)r.call(o,s[f])&&(u[s[f]]=o[s[f]])}}return u}},573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];function r(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=null;return t.forEach((function(e){if(null==a){var t=e.apply(void 0,n);null!=t&&(a=t)}})),a}return(0,i.default)(r)};var r,a=n(54),i=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},54:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,a,i,o){var s=a||"<<anonymous>>",u=o||r;if(null==n[r])return t?new Error("Required "+i+" `"+u+"` was not specified in `"+s+"`."):null;for(var l=arguments.length,c=Array(l>6?l-6:0),f=6;f<l;f++)c[f-6]=arguments[f];return e.apply(void 0,[n,r,s,i,u].concat(c))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},888:function(e,t,n){"use strict";var r=n(47);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),a=n(725),i=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,h={},m={};function g(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function w(e,t,n,r){var a=v.hasOwnProperty(t)?v[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(m,e)||!d.call(h,e)&&(p.test(e)?m[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=60103,N=60106,k=60107,E=60108,S=60114,C=60109,I=60110,O=60112,P=60113,T=60120,A=60115,R=60116,D=60121,M=60128,L=60129,z=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var B=Symbol.for;_=B("react.element"),N=B("react.portal"),k=B("react.fragment"),E=B("react.strict_mode"),S=B("react.profiler"),C=B("react.provider"),I=B("react.context"),O=B("react.forward_ref"),P=B("react.suspense"),T=B("react.suspense_list"),A=B("react.memo"),R=B("react.lazy"),D=B("react.block"),B("react.scope"),M=B("react.opaque.id"),L=B("react.debug_trace_mode"),z=B("react.offscreen"),j=B("react.legacy_hidden")}var F,V="function"===typeof Symbol&&Symbol.iterator;function U(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=V&&e[V]||e["@@iterator"])?e:null}function W(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var q=!1;function $(e,t){if(!e||q)return"";q=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var a=u.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s])return"\n"+a[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{q=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?W(e):""}function H(e){switch(e.tag){case 5:return W(e.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return e=$(e.type,!1);case 11:return e=$(e.type.render,!1);case 22:return e=$(e.type._render,!1);case 1:return e=$(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case N:return"Portal";case S:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case O:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case A:return K(e.type);case D:return K(e._render);case R:t=e._payload,e=e._init;try{return K(e(t))}catch(n){}}return null}function G(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ae(e,t.type,n):t.hasOwnProperty("defaultValue")&&ae(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ae(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ie(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function le(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",pe="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function he(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ge,ve=(ge=function(e,t){if(e.namespaceURI!==pe||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ge(e,t)}))}:ge);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function xe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=xe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(be).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var Ne=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ke(e,t){if(t){if(Ne[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Ie=null,Oe=null;function Pe(e){if(e=ra(e)){if("function"!==typeof Ce)throw Error(o(280));var t=e.stateNode;t&&(t=ia(t),Ce(e.stateNode,e.type,t))}}function Te(e){Ie?Oe?Oe.push(e):Oe=[e]:Ie=e}function Ae(){if(Ie){var e=Ie,t=Oe;if(Oe=Ie=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function Re(e,t){return e(t)}function De(e,t,n,r,a){return e(t,n,r,a)}function Me(){}var Le=Re,ze=!1,je=!1;function Be(){null===Ie&&null===Oe||(Me(),Ae())}function Fe(e,t){var n=e.stateNode;if(null===n)return null;var r=ia(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ve=!1;if(f)try{var Ue={};Object.defineProperty(Ue,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",Ue,Ue),window.removeEventListener("test",Ue,Ue)}catch(ge){Ve=!1}function We(e,t,n,r,a,i,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var qe=!1,$e=null,He=!1,Ke=null,Ge={onError:function(e){qe=!0,$e=e}};function Ye(e,t,n,r,a,i,o,s,u){qe=!1,$e=null,We.apply(Ge,arguments)}function Xe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Qe(e){if(Xe(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Xe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Qe(a),e;if(i===r)return Qe(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,at,it=!1,ot=[],st=null,ut=null,lt=null,ct=new Map,ft=new Map,pt=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ht(e,t,n,r,a){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:a,targetContainers:[r]}}function mt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function gt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e=ht(t,n,r,a,i),null!==t&&(null!==(t=ra(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function vt(e){var t=na(e.target);if(null!==t){var n=Xe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void at(e.lanePriority,(function(){i.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ra(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function bt(e,t,n){yt(e)&&n.delete(t)}function wt(){for(it=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ra(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&yt(st)&&(st=null),null!==ut&&yt(ut)&&(ut=null),null!==lt&&yt(lt)&&(lt=null),ct.forEach(bt),ft.forEach(bt)}function xt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,wt)))}function _t(e){function t(t){return xt(t,e)}if(0<ot.length){xt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&xt(st,e),null!==ut&&xt(ut,e),null!==lt&&xt(lt,e),ct.forEach(t),ft.forEach(t),n=0;n<pt.length;n++)(r=pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<pt.length&&null===(n=pt[0]).blockedOn;)vt(n),null===n.blockedOn&&pt.shift()}function Nt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kt={animationend:Nt("Animation","AnimationEnd"),animationiteration:Nt("Animation","AnimationIteration"),animationstart:Nt("Animation","AnimationStart"),transitionend:Nt("Transition","TransitionEnd")},Et={},St={};function Ct(e){if(Et[e])return Et[e];if(!kt[e])return e;var t,n=kt[e];for(t in n)if(n.hasOwnProperty(t)&&t in St)return Et[e]=n[t];return e}f&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete kt.animationend.animation,delete kt.animationiteration.animation,delete kt.animationstart.animation),"TransitionEvent"in window||delete kt.transitionend.transition);var It=Ct("animationend"),Ot=Ct("animationiteration"),Pt=Ct("animationstart"),Tt=Ct("transitionend"),At=new Map,Rt=new Map,Dt=["abort","abort",It,"animationEnd",Ot,"animationIteration",Pt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Tt,"transitionEnd","waiting","waiting"];function Mt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Rt.set(r,t),At.set(r,a),l(a,[r])}}(0,i.unstable_now)();var Lt=8;function zt(e){if(0!==(1&e))return Lt=15,1;if(0!==(2&e))return Lt=14,2;if(0!==(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!==(32&e)?(Lt=11,32):0!==(t=192&e)?(Lt=10,t):0!==(256&e)?(Lt=9,256):0!==(t=3584&e)?(Lt=8,t):0!==(4096&e)?(Lt=7,4096):0!==(t=4186112&e)?(Lt=6,t):0!==(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!==(134217728&e)?(Lt=3,134217728):0!==(t=805306368&e)?(Lt=2,t):0!==(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function jt(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,a=0,i=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==i)r=i,a=Lt=15;else if(0!==(i=134217727&n)){var u=i&~o;0!==u?(r=zt(u),a=Lt):0!==(s&=i)&&(r=zt(s),a=Lt)}else 0!==(i=n&~o)?(r=zt(i),a=Lt):0!==s&&(r=zt(s),a=Lt);if(0===r)return 0;if(r=n&((0>(r=31-qt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(zt(t),a<=Lt)return t;Lt=a}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-qt(t)),r|=e[n],t&=~a;return r}function Bt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ft(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?Ft(10,t):e;case 10:return 0===(e=Vt(192&~t))?Ft(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&(0===(e=Vt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Vt(e){return e&-e}function Ut(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Wt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-qt(t)]=n}var qt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-($t(e)/Ht|0)|0},$t=Math.log,Ht=Math.LN2;var Kt=i.unstable_UserBlockingPriority,Gt=i.unstable_runWithPriority,Yt=!0;function Xt(e,t,n,r){ze||Me();var a=Qt,i=ze;ze=!0;try{De(a,e,t,n,r)}finally{(ze=i)||Be()}}function Jt(e,t,n,r){Gt(Kt,Qt.bind(null,e,t,n,r))}function Qt(e,t,n,r){var a;if(Yt)if((a=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=ht(null,e,t,n,r),ot.push(e);else{var i=Zt(e,t,n,r);if(null===i)a&&mt(e,r);else{if(a){if(-1<dt.indexOf(e))return e=ht(i,e,t,n,r),void ot.push(e);if(function(e,t,n,r,a){switch(t){case"focusin":return st=gt(st,e,t,n,r,a),!0;case"dragenter":return ut=gt(ut,e,t,n,r,a),!0;case"mouseover":return lt=gt(lt,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return ct.set(i,gt(ct.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,ft.set(i,gt(ft.get(i)||null,e,t,n,r,a)),!0}return!1}(i,e,t,n,r))return;mt(e,r)}Mr(e,t,r,null,n)}}}function Zt(e,t,n,r){var a=Se(r);if(null!==(a=na(a))){var i=Xe(a);if(null===i)a=null;else{var o=i.tag;if(13===o){if(null!==(a=Je(i)))return a;a=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return Mr(e,t,r,a,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,a="value"in en?en.value:en.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return nn=a.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?on:sn,this.isPropagationStopped=sn,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var ln,cn,fn,pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(pn),hn=a({},pn,{view:0,detail:0}),mn=un(hn),gn=a({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(ln=e.screenX-fn.screenX,cn=e.screenY-fn.screenY):cn=ln=0,fn=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),vn=un(gn),yn=un(a({},gn,{dataTransfer:0})),bn=un(a({},hn,{relatedTarget:0})),wn=un(a({},pn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=a({},pn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=un(xn),Nn=un(a({},pn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function In(){return Cn}var On=a({},hn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pn=un(On),Tn=un(a({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=un(a({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Rn=un(a({},pn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=a({},gn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=un(Dn),Ln=[9,13,27,32],zn=f&&"CompositionEvent"in window,jn=null;f&&"documentMode"in document&&(jn=document.documentMode);var Bn=f&&"TextEvent"in window&&!jn,Fn=f&&(!zn||jn&&8<jn&&11>=jn),Vn=String.fromCharCode(32),Un=!1;function Wn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var $n=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=zr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Xn=null;function Jn(e){Or(e,0)}function Qn(e){if(J(aa(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ar(){Yn&&(Yn.detachEvent("onpropertychange",ir),Xn=Yn=null)}function ir(e){if("value"===e.propertyName&&Qn(Xn)){var t=[];if(Gn(t,Xn,e,Se(e)),e=Jn,ze)e(t);else{ze=!0;try{Re(e,t)}finally{ze=!1,Be()}}}}function or(e,t,n){"focusin"===e?(ar(),Xn=n,(Yn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&ar()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Xn)}function ur(e,t){if("click"===e)return Qn(t)}function lr(e,t){if("input"===e||"change"===e)return Qn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function pr(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!cr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function mr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?mr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function gr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=f&&"documentMode"in document&&11>=document.documentMode,br=null,wr=null,xr=null,_r=!1;function Nr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==br||br!==Q(r)||("selectionStart"in(r=br)&&vr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&pr(xr,r)||(xr=r,0<(r=zr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}Mt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Mt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Mt(Dt,2);for(var kr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<kr.length;Er++)Rt.set(kr[Er],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function Ir(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,s,u,l){if(Ye.apply(this,arguments),qe){if(!qe)throw Error(o(198));var c=$e;qe=!1,$e=null,He||(He=!0,Ke=c)}}(r,t,void 0,e),e.currentTarget=null}function Or(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==i&&a.isPropagationStopped())break e;Ir(a,s,l),i=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==i&&a.isPropagationStopped())break e;Ir(a,s,l),i=u}}}if(He)throw e=Ke,He=!1,Ke=null,e}function Pr(e,t){var n=oa(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Tr="_reactListening"+Math.random().toString(36).slice(2);function Ar(e){e[Tr]||(e[Tr]=!0,s.forEach((function(t){Cr.has(t)||Rr(t,!1,e,null),Rr(t,!0,e,null)})))}function Rr(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=n;if("selectionchange"===e&&9!==n.nodeType&&(i=n.ownerDocument),null!==r&&!t&&Cr.has(e)){if("scroll"!==e)return;a|=2,i=r}var o=oa(i),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(a|=4),Dr(i,e,a,t),o.add(s))}function Dr(e,t,n,r){var a=Rt.get(t);switch(void 0===a?2:a){case 0:a=Xt;break;case 1:a=Jt;break;default:a=Qt}n=a.bind(null,t,n,e),a=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Mr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=na(s)))return;if(5===(u=o.tag)||6===u){r=i=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(je)return e(t,n);je=!0;try{Le(e,t,n)}finally{je=!1,Be()}}((function(){var r=i,a=Se(n),o=[];e:{var s=At.get(e);if(void 0!==s){var u=dn,l=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=Pn;break;case"focusin":l="focus",u=bn;break;case"focusout":l="blur",u=bn;break;case"beforeblur":case"afterblur":u=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=An;break;case It:case Ot:case Pt:u=wn;break;case Tt:u=Rn;break;case"scroll":u=mn;break;case"wheel":u=Mn;break;case"copy":case"cut":case"paste":u=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Tn}var c=0!==(4&t),f=!c&&"scroll"===e,p=c?null!==s?s+"Capture":null:s;c=[];for(var d,h=r;null!==h;){var m=(d=h).stateNode;if(5===d.tag&&null!==m&&(d=m,null!==p&&(null!=(m=Fe(h,p))&&c.push(Lr(h,m,d)))),f)break;h=h.return}0<c.length&&(s=new u(s,l,null,n,a),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(l=n.relatedTarget||n.fromElement)||!na(l)&&!l[ea])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?na(l):null)&&(l!==(f=Xe(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=vn,m="onMouseLeave",p="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(c=Tn,m="onPointerLeave",p="onPointerEnter",h="pointer"),f=null==u?s:aa(u),d=null==l?s:aa(l),(s=new c(m,h+"leave",u,n,a)).target=f,s.relatedTarget=d,m=null,na(a)===r&&((c=new c(p,h+"enter",l,n,a)).target=d,c.relatedTarget=f,m=c),f=m,u&&l)e:{for(p=l,h=0,d=c=u;d;d=jr(d))h++;for(d=0,m=p;m;m=jr(m))d++;for(;0<h-d;)c=jr(c),h--;for(;0<d-h;)p=jr(p),d--;for(;h--;){if(c===p||null!==p&&c===p.alternate)break e;c=jr(c),p=jr(p)}c=null}else c=null;null!==u&&Br(o,s,u,c,!1),null!==l&&null!==f&&Br(o,f,l,c,!0)}if("select"===(u=(s=r?aa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Zn;else if(Kn(s))if(er)g=lr;else{g=sr;var v=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ur);switch(g&&(g=g(e,r))?Gn(o,g,n,a):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ae(s,"number",s.value)),v=r?aa(r):window,e){case"focusin":(Kn(v)||"true"===v.contentEditable)&&(br=v,wr=r,xr=null);break;case"focusout":xr=wr=br=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Nr(o,n,a);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Nr(o,n,a)}var y;if(zn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else $n?Wn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&($n||"onCompositionStart"!==b?"onCompositionEnd"===b&&$n&&(y=rn()):(tn="value"in(en=a)?en.value:en.textContent,$n=!0)),0<(v=zr(r,b)).length&&(b=new Nn(b,e,null,n,a),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=qn(n))&&(b.data=y))),(y=Bn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Un=!0,Vn);case"textInput":return(e=t.data)===Vn&&Un?null:e;default:return null}}(e,n):function(e,t){if($n)return"compositionend"===e||!zn&&Wn(e,t)?(e=rn(),nn=tn=en=null,$n=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=zr(r,"onBeforeInput")).length&&(a=new Nn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}Or(o,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Fe(e,n))&&r.unshift(Lr(e,i,a)),null!=(i=Fe(e,t))&&r.push(Lr(e,i,a))),e=e.return}return r}function jr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Br(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,a?null!=(u=Fe(n,i))&&o.unshift(Lr(n,u,s)):a||null!=(u=Fe(n,i))&&o.push(Lr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Fr(){}var Vr=null,Ur=null;function Wr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function qr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var $r="function"===typeof setTimeout?setTimeout:void 0,Hr="function"===typeof clearTimeout?clearTimeout:void 0;function Kr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Gr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Xr=0;var Jr=Math.random().toString(36).slice(2),Qr="__reactFiber$"+Jr,Zr="__reactProps$"+Jr,ea="__reactContainer$"+Jr,ta="__reactEvents$"+Jr;function na(e){var t=e[Qr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ea]||n[Qr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Qr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ra(e){return!(e=e[Qr]||e[ea])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function aa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ia(e){return e[Zr]||null}function oa(e){var t=e[ta];return void 0===t&&(t=e[ta]=new Set),t}var sa=[],ua=-1;function la(e){return{current:e}}function ca(e){0>ua||(e.current=sa[ua],sa[ua]=null,ua--)}function fa(e,t){ua++,sa[ua]=e.current,e.current=t}var pa={},da=la(pa),ha=la(!1),ma=pa;function ga(e,t){var n=e.type.contextTypes;if(!n)return pa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function va(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ya(){ca(ha),ca(da)}function ba(e,t,n){if(da.current!==pa)throw Error(o(168));fa(da,t),fa(ha,n)}function wa(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,K(t)||"Unknown",i));return a({},n,r)}function xa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pa,ma=da.current,fa(da,e),fa(ha,ha.current),!0}function _a(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wa(e,t,ma),r.__reactInternalMemoizedMergedChildContext=e,ca(ha),ca(da),fa(da,e)):ca(ha),fa(ha,n)}var Na=null,ka=null,Ea=i.unstable_runWithPriority,Sa=i.unstable_scheduleCallback,Ca=i.unstable_cancelCallback,Ia=i.unstable_shouldYield,Oa=i.unstable_requestPaint,Pa=i.unstable_now,Ta=i.unstable_getCurrentPriorityLevel,Aa=i.unstable_ImmediatePriority,Ra=i.unstable_UserBlockingPriority,Da=i.unstable_NormalPriority,Ma=i.unstable_LowPriority,La=i.unstable_IdlePriority,za={},ja=void 0!==Oa?Oa:function(){},Ba=null,Fa=null,Va=!1,Ua=Pa(),Wa=1e4>Ua?Pa:function(){return Pa()-Ua};function qa(){switch(Ta()){case Aa:return 99;case Ra:return 98;case Da:return 97;case Ma:return 96;case La:return 95;default:throw Error(o(332))}}function $a(e){switch(e){case 99:return Aa;case 98:return Ra;case 97:return Da;case 96:return Ma;case 95:return La;default:throw Error(o(332))}}function Ha(e,t){return e=$a(e),Ea(e,t)}function Ka(e,t,n){return e=$a(e),Sa(e,t,n)}function Ga(){if(null!==Fa){var e=Fa;Fa=null,Ca(e)}Ya()}function Ya(){if(!Va&&null!==Ba){Va=!0;var e=0;try{var t=Ba;Ha(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ba=null}catch(n){throw null!==Ba&&(Ba=Ba.slice(e+1)),Sa(Aa,Ga),n}finally{Va=!1}}}var Xa=x.ReactCurrentBatchConfig;function Ja(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Qa=la(null),Za=null,ei=null,ti=null;function ni(){ti=ei=Za=null}function ri(e){var t=Qa.current;ca(Qa),e.type._context._currentValue=t}function ai(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ii(e,t){Za=e,ti=ei=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(zo=!0),e.firstContext=null)}function oi(e,t){if(ti!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ti=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ei){if(null===Za)throw Error(o(308));ei=t,Za.dependencies={lanes:0,firstContext:t,responders:null}}else ei=ei.next=t;return e._currentValue}var si=!1;function ui(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function li(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ci(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fi(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function pi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function di(e,t,n,r){var i=e.updateQueue;si=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var l=u,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var f=e.alternate;if(null!==f){var p=(f=f.updateQueue).lastBaseUpdate;p!==s&&(null===p?f.firstBaseUpdate=c:p.next=c,f.lastBaseUpdate=l)}}if(null!==o){for(p=i.baseState,s=0,f=c=l=null;;){u=o.lane;var d=o.eventTime;if((r&u)===u){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var h=e,m=o;switch(u=t,d=n,m.tag){case 1:if("function"===typeof(h=m.payload)){p=h.call(d,p,u);break e}p=h;break e;case 3:h.flags=-4097&h.flags|64;case 0:if(null===(u="function"===typeof(h=m.payload)?h.call(d,p,u):h)||void 0===u)break e;p=a({},p,u);break e;case 2:si=!0}}null!==o.callback&&(e.flags|=32,null===(u=i.effects)?i.effects=[o]:u.push(o))}else d={eventTime:d,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(c=f=d,l=p):f=f.next=d,s|=u;if(null===(o=o.next)){if(null===(u=i.shared.pending))break;o=u.next,u.next=null,i.lastBaseUpdate=u,i.shared.pending=null}}null===f&&(l=p),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=f,Vs|=s,e.lanes=s,e.memoizedState=p}}function hi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(o(191,a));a.call(r)}}}var mi=(new r.Component).refs;function gi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var vi={isMounted:function(e){return!!(e=e._reactInternals)&&Xe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=pu(),a=du(e),i=ci(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),fi(e,i),hu(e,a,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=pu(),a=du(e),i=ci(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),fi(e,i),hu(e,a,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=pu(),r=du(e),a=ci(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),fi(e,a),hu(e,r,n)}};function yi(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!pr(n,r)||!pr(a,i))}function bi(e,t,n){var r=!1,a=pa,i=t.contextType;return"object"===typeof i&&null!==i?i=oi(i):(a=va(t)?ma:da.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?ga(e,a):pa),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=vi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function wi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vi.enqueueReplaceState(t,t.state,null)}function xi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=mi,ui(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=oi(i):(i=va(t)?ma:da.current,a.context=ga(e,i)),di(e,n,a,r),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(gi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&vi.enqueueReplaceState(a,a.state,null),di(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4)}var _i=Array.isArray;function Ni(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;t===mi&&(t=r.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function ki(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ei(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Hu(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Xu(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=Ni(e,t,n),r.return=e,r):((r=Ku(n.type,n.key,n.props,null,e.mode,r)).ref=Ni(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ju(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=Gu(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Xu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ku(t.type,t.key,t.props,null,e.mode,n)).ref=Ni(e,null,t),n.return=e,n;case N:return(t=Ju(t,e.mode,n)).return=e,t}if(_i(t)||U(t))return(t=Gu(t,e.mode,n,null)).return=e,t;ki(e,t)}return null}function d(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===a?n.type===k?f(e,t,n.props.children,r,a):l(e,t,n,r):null;case N:return n.key===a?c(e,t,n,r):null}if(_i(n)||U(n))return null!==a?null:f(e,t,n,r,null);ki(e,n)}return null}function h(e,t,n,r,a){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return e=e.get(null===r.key?n:r.key)||null,r.type===k?f(t,e,r.props.children,a,r.key):l(t,e,r,a);case N:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(_i(r)||U(r))return f(t,e=e.get(n)||null,r,a,null);ki(t,r)}return null}function m(a,o,s,u){for(var l=null,c=null,f=o,m=o=0,g=null;null!==f&&m<s.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var v=d(a,f,s[m],u);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(a,f),o=i(v,o,m),null===c?l=v:c.sibling=v,c=v,f=g}if(m===s.length)return n(a,f),l;if(null===f){for(;m<s.length;m++)null!==(f=p(a,s[m],u))&&(o=i(f,o,m),null===c?l=f:c.sibling=f,c=f);return l}for(f=r(a,f);m<s.length;m++)null!==(g=h(f,a,m,s[m],u))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),o=i(g,o,m),null===c?l=g:c.sibling=g,c=g);return e&&f.forEach((function(e){return t(a,e)})),l}function g(a,s,u,l){var c=U(u);if("function"!==typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var f=c=null,m=s,g=s=0,v=null,y=u.next();null!==m&&!y.done;g++,y=u.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=d(a,m,y.value,l);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(a,m),s=i(b,s,g),null===f?c=b:f.sibling=b,f=b,m=v}if(y.done)return n(a,m),c;if(null===m){for(;!y.done;g++,y=u.next())null!==(y=p(a,y.value,l))&&(s=i(y,s,g),null===f?c=y:f.sibling=y,f=y);return c}for(m=r(a,m);!y.done;g++,y=u.next())null!==(y=h(m,a,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=i(y,s,g),null===f?c=y:f.sibling=y,f=y);return e&&m.forEach((function(e){return t(a,e)})),c}return function(e,r,i,u){var l="object"===typeof i&&null!==i&&i.type===k&&null===i.key;l&&(i=i.props.children);var c="object"===typeof i&&null!==i;if(c)switch(i.$$typeof){case _:e:{for(c=i.key,l=r;null!==l;){if(l.key===c){if(7===l.tag){if(i.type===k){n(e,l.sibling),(r=a(l,i.props.children)).return=e,e=r;break e}}else if(l.elementType===i.type){n(e,l.sibling),(r=a(l,i.props)).ref=Ni(e,l,i),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}i.type===k?((r=Gu(i.props.children,e.mode,u,i.key)).return=e,e=r):((u=Ku(i.type,i.key,i.props,null,e.mode,u)).ref=Ni(e,r,i),u.return=e,e=u)}return s(e);case N:e:{for(l=i.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=a(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ju(i,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof i||"number"===typeof i)return i=""+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,i)).return=e,e=r):(n(e,r),(r=Xu(i,e.mode,u)).return=e,e=r),s(e);if(_i(i))return m(e,r,i,u);if(U(i))return g(e,r,i,u);if(c&&ki(e,i),"undefined"===typeof i&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,K(e.type)||"Component"))}return n(e,r)}}var Si=Ei(!0),Ci=Ei(!1),Ii={},Oi=la(Ii),Pi=la(Ii),Ti=la(Ii);function Ai(e){if(e===Ii)throw Error(o(174));return e}function Ri(e,t){switch(fa(Ti,t),fa(Pi,e),fa(Oi,Ii),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:he(null,"");break;default:t=he(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ca(Oi),fa(Oi,t)}function Di(){ca(Oi),ca(Pi),ca(Ti)}function Mi(e){Ai(Ti.current);var t=Ai(Oi.current),n=he(t,e.type);t!==n&&(fa(Pi,e),fa(Oi,n))}function Li(e){Pi.current===e&&(ca(Oi),ca(Pi))}var zi=la(0);function ji(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bi=null,Fi=null,Vi=!1;function Ui(e,t){var n=qu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Wi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function qi(e){if(Vi){var t=Fi;if(t){var n=t;if(!Wi(e,t)){if(!(t=Gr(n.nextSibling))||!Wi(e,t))return e.flags=-1025&e.flags|2,Vi=!1,void(Bi=e);Ui(Bi,n)}Bi=e,Fi=Gr(t.firstChild)}else e.flags=-1025&e.flags|2,Vi=!1,Bi=e}}function $i(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Bi=e}function Hi(e){if(e!==Bi)return!1;if(!Vi)return $i(e),Vi=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!qr(t,e.memoizedProps))for(t=Fi;t;)Ui(e,t),t=Gr(t.nextSibling);if($i(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Fi=Gr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Fi=null}}else Fi=Bi?Gr(e.stateNode.nextSibling):null;return!0}function Ki(){Fi=Bi=null,Vi=!1}var Gi=[];function Yi(){for(var e=0;e<Gi.length;e++)Gi[e]._workInProgressVersionPrimary=null;Gi.length=0}var Xi=x.ReactCurrentDispatcher,Ji=x.ReactCurrentBatchConfig,Qi=0,Zi=null,eo=null,to=null,no=!1,ro=!1;function ao(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,a,i){if(Qi=i,Zi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xi.current=null===e||null===e.memoizedState?Ro:Do,e=n(r,a),ro){i=0;do{if(ro=!1,!(25>i))throw Error(o(301));i+=1,to=eo=null,t.updateQueue=null,Xi.current=Mo,e=n(r,a)}while(ro)}if(Xi.current=Ao,t=null!==eo&&null!==eo.next,Qi=0,to=eo=Zi=null,no=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Zi.memoizedState=to=e:to=to.next=e,to}function uo(){if(null===eo){var e=Zi.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Zi.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Zi.memoizedState=to=e:to=to.next=e}return to}function lo(e,t){return"function"===typeof t?t(e):t}function co(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var u=s=i=null,l=a;do{var c=l.lane;if((Qi&c)===c)null!==u&&(u=u.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===e?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=f,i=r):u=u.next=f,Zi.lanes|=c,Vs|=c}l=l.next}while(null!==l&&l!==a);null===u?i=r:u.next=s,cr(r,t.memoizedState)||(zo=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);cr(i,t.memoizedState)||(zo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function po(e,t,n){var r=t._getVersion;r=r(t._source);var a=t._workInProgressVersionPrimary;if(null!==a?e=a===r:(e=e.mutableReadLanes,(e=(Qi&e)===e)&&(t._workInProgressVersionPrimary=r,Gi.push(t))),e)return n(t._source);throw Gi.push(t),Error(o(350))}function ho(e,t,n,r){var a=Rs;if(null===a)throw Error(o(349));var i=t._getVersion,s=i(t._source),u=Xi.current,l=u.useState((function(){return po(a,t,n)})),c=l[1],f=l[0];l=to;var p=e.memoizedState,d=p.refs,h=d.getSnapshot,m=p.source;p=p.subscribe;var g=Zi;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=c;var e=i(t._source);if(!cr(s,e)){e=n(t._source),cr(f,e)||(c(e),e=du(g),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,o=e;0<o;){var u=31-qt(o),l=1<<u;r[u]|=e,o&=~l}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=du(g);a.mutableReadLanes|=r&a.pendingLanes}catch(i){n((function(){throw i}))}}))}),[t,r]),cr(h,n)&&cr(m,t)&&cr(p,r)||((e={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:f}).dispatch=c=To.bind(null,Zi,e),l.queue=e,l.baseQueue=null,f=po(a,t,n),l.memoizedState=l.baseState=f),f}function mo(e,t,n){return ho(uo(),e,t,n)}function go(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:e}).dispatch=To.bind(null,Zi,e),[t.memoizedState,e]}function vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Zi.updateQueue)?(t={lastEffect:null},Zi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yo(e){return e={current:e},so().memoizedState=e}function bo(){return uo().memoizedState}function wo(e,t,n,r){var a=so();Zi.flags|=e,a.memoizedState=vo(1|t,n,void 0,void 0===r?null:r)}function xo(e,t,n,r){var a=uo();r=void 0===r?null:r;var i=void 0;if(null!==eo){var o=eo.memoizedState;if(i=o.destroy,null!==r&&io(r,o.deps))return void vo(t,n,i,r)}Zi.flags|=e,a.memoizedState=vo(1|t,n,i,r)}function _o(e,t){return wo(516,4,e,t)}function No(e,t){return xo(516,4,e,t)}function ko(e,t){return xo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function So(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,xo(4,2,Eo.bind(null,t,e),n)}function Co(){}function Io(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Oo(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Po(e,t){var n=qa();Ha(98>n?98:n,(function(){e(!0)})),Ha(97<n?97:n,(function(){var n=Ji.transition;Ji.transition=1;try{e(!1),t()}finally{Ji.transition=n}}))}function To(e,t,n){var r=pu(),a=du(e),i={lane:a,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===Zi||null!==o&&o===Zi)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(i.eagerReducer=o,i.eagerState=u,cr(u,s))return}catch(l){}hu(e,a,r)}}var Ao={readContext:oi,useCallback:ao,useContext:ao,useEffect:ao,useImperativeHandle:ao,useLayoutEffect:ao,useMemo:ao,useReducer:ao,useRef:ao,useState:ao,useDebugValue:ao,useDeferredValue:ao,useTransition:ao,useMutableSource:ao,useOpaqueIdentifier:ao,unstable_isNewReconciler:!1},Ro={readContext:oi,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oi,useEffect:_o,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=To.bind(null,Zi,e),[r.memoizedState,e]},useRef:yo,useState:go,useDebugValue:Co,useDeferredValue:function(e){var t=go(e),n=t[0],r=t[1];return _o((function(){var t=Ji.transition;Ji.transition=1;try{r(e)}finally{Ji.transition=t}}),[e]),n},useTransition:function(){var e=go(!1),t=e[0];return yo(e=Po.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},ho(r,e,t,n)},useOpaqueIdentifier:function(){if(Vi){var e=!1,t=function(e){return{$$typeof:M,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Xr++).toString(36))),Error(o(355))})),n=go(t)[1];return 0===(2&Zi.mode)&&(Zi.flags|=516,vo(5,(function(){n("r:"+(Xr++).toString(36))}),void 0,null)),t}return go(t="r:"+(Xr++).toString(36)),t},unstable_isNewReconciler:!1},Do={readContext:oi,useCallback:Io,useContext:oi,useEffect:No,useImperativeHandle:So,useLayoutEffect:ko,useMemo:Oo,useReducer:co,useRef:bo,useState:function(){return co(lo)},useDebugValue:Co,useDeferredValue:function(e){var t=co(lo),n=t[0],r=t[1];return No((function(){var t=Ji.transition;Ji.transition=1;try{r(e)}finally{Ji.transition=t}}),[e]),n},useTransition:function(){var e=co(lo)[0];return[bo().current,e]},useMutableSource:mo,useOpaqueIdentifier:function(){return co(lo)[0]},unstable_isNewReconciler:!1},Mo={readContext:oi,useCallback:Io,useContext:oi,useEffect:No,useImperativeHandle:So,useLayoutEffect:ko,useMemo:Oo,useReducer:fo,useRef:bo,useState:function(){return fo(lo)},useDebugValue:Co,useDeferredValue:function(e){var t=fo(lo),n=t[0],r=t[1];return No((function(){var t=Ji.transition;Ji.transition=1;try{r(e)}finally{Ji.transition=t}}),[e]),n},useTransition:function(){var e=fo(lo)[0];return[bo().current,e]},useMutableSource:mo,useOpaqueIdentifier:function(){return fo(lo)[0]},unstable_isNewReconciler:!1},Lo=x.ReactCurrentOwner,zo=!1;function jo(e,t,n,r){t.child=null===e?Ci(t,null,n,r):Si(t,e.child,n,r)}function Bo(e,t,n,r,a){n=n.render;var i=t.ref;return ii(t,a),r=oo(e,t,n,r,i,a),null===e||zo?(t.flags|=1,jo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,is(e,t,a))}function Fo(e,t,n,r,a,i){if(null===e){var o=n.type;return"function"!==typeof o||$u(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ku(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Vo(e,t,o,r,a,i))}return o=e.child,0===(a&i)&&(a=o.memoizedProps,(n=null!==(n=n.compare)?n:pr)(a,r)&&e.ref===t.ref)?is(e,t,i):(t.flags|=1,(e=Hu(o,r)).ref=t.ref,e.return=t,t.child=e)}function Vo(e,t,n,r,a,i){if(null!==e&&pr(e.memoizedProps,r)&&e.ref===t.ref){if(zo=!1,0===(i&a))return t.lanes=e.lanes,is(e,t,i);0!==(16384&e.flags)&&(zo=!0)}return qo(e,t,n,r,i)}function Uo(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},_u(t,n);else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},_u(t,e),null;t.memoizedState={baseLanes:0},_u(t,null!==i?i.baseLanes:n)}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,_u(t,r);return jo(e,t,a,n),t.child}function Wo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function qo(e,t,n,r,a){var i=va(n)?ma:da.current;return i=ga(t,i),ii(t,a),n=oo(e,t,n,r,i,a),null===e||zo?(t.flags|=1,jo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,is(e,t,a))}function $o(e,t,n,r,a){if(va(n)){var i=!0;xa(t)}else i=!1;if(ii(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),bi(t,n,r),xi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=oi(l):l=ga(t,l=va(n)?ma:da.current);var c=n.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&wi(t,o,r,l),si=!1;var p=t.memoizedState;o.state=p,di(t,r,o,a),u=t.memoizedState,s!==r||p!==u||ha.current||si?("function"===typeof c&&(gi(t,n,c,r),u=t.memoizedState),(s=si||yi(t,n,s,r,p,u,l))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,li(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Ja(t.type,s),o.props=l,f=t.pendingProps,p=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=oi(u):u=ga(t,u=va(n)?ma:da.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||p!==u)&&wi(t,o,r,u),si=!1,p=t.memoizedState,o.state=p,di(t,r,o,a);var h=t.memoizedState;s!==f||p!==h||ha.current||si?("function"===typeof d&&(gi(t,n,d,r),h=t.memoizedState),(l=si||yi(t,n,l,r,p,h,u))?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=256),r=!1)}return Ho(e,t,n,r,i,a)}function Ho(e,t,n,r,a,i){Wo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return a&&_a(t,n,!1),is(e,t,i);r=t.stateNode,Lo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Si(t,e.child,null,i),t.child=Si(t,null,s,i)):jo(e,t,s,i),t.memoizedState=r.state,a&&_a(t,n,!0),t.child}function Ko(e){var t=e.stateNode;t.pendingContext?ba(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ba(0,t.context,!1),Ri(e,t.containerInfo)}var Go,Yo,Xo,Jo={dehydrated:null,retryLane:0};function Qo(e,t,n){var r,a=t.pendingProps,i=zi.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(i|=1),fa(zi,1&i),null===e?(void 0!==a.fallback&&qi(t),e=a.children,i=a.fallback,o?(e=Zo(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,e):"number"===typeof a.unstable_expectedLoadTime?(e=Zo(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,t.lanes=33554432,e):((n=Yu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(a=ts(e,t,a.children,a.fallback,n),o=t.child,i=e.child.memoizedState,o.memoizedState=null===i?{baseLanes:n}:{baseLanes:i.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Jo,a):(n=es(e,t,a.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var a=e.mode,i=e.child;return t={mode:"hidden",children:t},0===(2&a)&&null!==i?(i.childLanes=0,i.pendingProps=t):i=Yu(t,a,0,null),n=Gu(n,a,r,null),i.return=e,n.return=e,i.sibling=n,e.child=i,n}function es(e,t,n,r){var a=e.child;return e=a.sibling,n=Hu(a,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,a){var i=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&i)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Hu(o,s),null!==e?r=Hu(e,r):(r=Gu(r,i,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ai(e.return,t)}function rs(e,t,n,r,a,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,lastEffect:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a,o.lastEffect=i)}function as(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(jo(e,t,r.children,n),0!==(2&(r=zi.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fa(zi,r),0===(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ji(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),rs(t,!1,a,n,i,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ji(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}rs(t,!0,n,null,i,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function is(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Hu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!Vi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return va(t.type)&&ya(),null;case 3:return Di(),ca(ha),ca(da),Yi(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Hi(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Li(t);var i=Ai(Ti.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ai(Oi.current),Hi(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Qr]=t,r[Zr]=s,n){case"dialog":Pr("cancel",r),Pr("close",r);break;case"iframe":case"object":case"embed":Pr("load",r);break;case"video":case"audio":for(e=0;e<Sr.length;e++)Pr(Sr[e],r);break;case"source":Pr("error",r);break;case"img":case"image":case"link":Pr("error",r),Pr("load",r);break;case"details":Pr("toggle",r);break;case"input":ee(r,s),Pr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pr("invalid",r);break;case"textarea":ue(r,s),Pr("invalid",r)}for(var l in ke(n,s),e=null,s)s.hasOwnProperty(l)&&(i=s[l],"children"===l?"string"===typeof i?r.textContent!==i&&(e=["children",i]):"number"===typeof i&&r.textContent!==""+i&&(e=["children",""+i]):u.hasOwnProperty(l)&&null!=i&&"onScroll"===l&&Pr("scroll",r));switch(n){case"input":X(r),re(r,s,!0);break;case"textarea":X(r),ce(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Fr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(l=9===i.nodeType?i:i.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Qr]=t,e[Zr]=r,Go(e,t),t.stateNode=e,l=Ee(n,r),n){case"dialog":Pr("cancel",e),Pr("close",e),i=r;break;case"iframe":case"object":case"embed":Pr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Sr.length;i++)Pr(Sr[i],e);i=r;break;case"source":Pr("error",e),i=r;break;case"img":case"image":case"link":Pr("error",e),Pr("load",e),i=r;break;case"details":Pr("toggle",e),i=r;break;case"input":ee(e,r),i=Z(e,r),Pr("invalid",e);break;case"option":i=ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=a({},r,{value:void 0}),Pr("invalid",e);break;case"textarea":ue(e,r),i=se(e,r),Pr("invalid",e);break;default:i=r}ke(n,i);var c=i;for(s in c)if(c.hasOwnProperty(s)){var f=c[s];"style"===s?_e(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&ve(e,f):"children"===s?"string"===typeof f?("textarea"!==n||""!==f)&&ye(e,f):"number"===typeof f&&ye(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=f&&"onScroll"===s&&Pr("scroll",e):null!=f&&w(e,s,f,l))}switch(n){case"input":X(e),re(e,r,!1);break;case"textarea":X(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Fr)}Wr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Xo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ai(Ti.current),Ai(Oi.current),Hi(t)?(r=t.stateNode,n=t.memoizedProps,r[Qr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Qr]=t,t.stateNode=r)}return null;case 13:return ca(zi),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Hi(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&zi.current)?0===js&&(js=3):(0!==js&&3!==js||(js=4),null===Rs||0===(134217727&Vs)&&0===(134217727&Us)||yu(Rs,Ms))),(r||n)&&(t.flags|=4),null);case 4:return Di(),null===e&&Ar(t.stateNode.containerInfo),null;case 10:return ri(t),null;case 19:if(ca(zi),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(l=r.rendering))if(s)os(r,!1);else{if(0!==js||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(l=ji(e))){for(t.flags|=64,os(r,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fa(zi,1&zi.current|2),t.child}e=e.sibling}null!==r.tail&&Wa()>Hs&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=ji(l))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!Vi)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Wa()-r.renderingStartTime>Hs&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=r.last)?n.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Wa(),n.sibling=null,t=zi.current,fa(zi,s?1&t|2:1&t),n):null;case 23:case 24:return Nu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:va(e.type)&&ya();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Di(),ca(ha),ca(da),Yi(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Li(e),null;case 13:return ca(zi),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ca(zi),null;case 4:return Di(),null;case 10:return ri(e),null;case 23:case 24:return Nu(),null;default:return null}}function ls(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a}}function cs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Go=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ai(Oi.current);var o,s=null;switch(n){case"input":i=Z(e,i),r=Z(e,r),s=[];break;case"option":i=ie(e,i),r=ie(e,r),s=[];break;case"select":i=a({},i,{value:void 0}),r=a({},r,{value:void 0}),s=[];break;case"textarea":i=se(e,i),r=se(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Fr)}for(f in ke(n,r),n=null,i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&null!=i[f])if("style"===f){var l=i[f];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(u.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var c=r[f];if(l=null!=i?i[f]:void 0,r.hasOwnProperty(f)&&c!==l&&(null!=c||null!=l))if("style"===f)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(f,n)),n=c;else"dangerouslySetInnerHTML"===f?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(f,c)):"children"===f?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(f,""+c):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(u.hasOwnProperty(f)?(null!=c&&"onScroll"===f&&Pr("scroll",e),s||l===c||(s=[])):"object"===typeof c&&null!==c&&c.$$typeof===M?c.toString():(s=s||[]).push(f,c))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}},Xo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=ci(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xs||(Xs=!0,Js=r),cs(0,t)},n}function ds(e,t,n){(n=ci(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return cs(0,t),r(a)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Qs?Qs=new Set([this]):Qs.add(this),cs(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var hs="function"===typeof WeakSet?WeakSet:Set;function ms(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Fu(e,n)}else t.current=null}function gs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ja(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Kr(t.stateNode.containerInfo))}throw Error(o(163))}function vs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var a=e;r=a.next,0!==(4&(a=a.tag))&&0!==(1&a)&&(zu(n,e),Lu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ja(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&hi(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}hi(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Wr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))))}throw Error(o(163))}function ys(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var a=n.memoizedProps.style;a=void 0!==a&&null!==a&&a.hasOwnProperty("display")?a.display:null,r.style.display=xe("display",a)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function bs(e,t){if(ka&&"function"===typeof ka.onCommitFiberUnmount)try{ka.onCommitFiberUnmount(Na,t)}catch(i){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,a=r.destroy;if(r=r.tag,void 0!==a)if(0!==(4&r))zu(t,n);else{r=t;try{a()}catch(i){Fu(r,i)}}n=n.next}while(n!==e)}break;case 1:if(ms(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){Fu(t,i)}break;case 5:ms(t);break;case 4:Es(e,t)}}function ws(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function xs(e){return 5===e.tag||3===e.tag||4===e.tag}function _s(e){e:{for(var t=e.return;null!==t;){if(xs(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||xs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Ns(e,n,t):ks(e,n,t)}function Ns(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Fr));else if(4!==r&&null!==(e=e.child))for(Ns(e,t,n),e=e.sibling;null!==e;)Ns(e,t,n),e=e.sibling}function ks(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ks(e,t,n),e=e.sibling;null!==e;)ks(e,t,n),e=e.sibling}function Es(e,t){for(var n,r,a=t,i=!1;;){if(!i){i=a.return;e:for(;;){if(null===i)throw Error(o(160));switch(n=i.stateNode,i.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}i=i.return}i=!0}if(5===a.tag||6===a.tag){e:for(var s=e,u=a,l=u;;)if(bs(s,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break e;for(;null===l.sibling;){if(null===l.return||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}r?(s=n,u=a.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){n=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(bs(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(i=!1)}a.sibling.return=a.return,a=a.sibling}}function Ss(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var a=null!==e?e.memoizedProps:r;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,a),t=Ee(e,r),a=0;a<i.length;a+=2){var s=i[a],u=i[a+1];"style"===s?_e(n,u):"dangerouslySetInnerHTML"===s?ve(n,u):"children"===s?ye(n,u):w(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":le(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(i=r.value)?oe(n,!!r.multiple,i,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 13:return null!==t.memoizedState&&($s=Wa(),ys(t.child,!0)),void Cs(t);case 19:return void Cs(t);case 23:case 24:return void ys(t,null!==t.memoizedState)}throw Error(o(163))}function Cs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new hs),t.forEach((function(t){var r=Uu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Is(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Os=Math.ceil,Ps=x.ReactCurrentDispatcher,Ts=x.ReactCurrentOwner,As=0,Rs=null,Ds=null,Ms=0,Ls=0,zs=la(0),js=0,Bs=null,Fs=0,Vs=0,Us=0,Ws=0,qs=null,$s=0,Hs=1/0;function Ks(){Hs=Wa()+500}var Gs,Ys=null,Xs=!1,Js=null,Qs=null,Zs=!1,eu=null,tu=90,nu=[],ru=[],au=null,iu=0,ou=null,su=-1,uu=0,lu=0,cu=null,fu=!1;function pu(){return 0!==(48&As)?Wa():-1!==su?su:su=Wa()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===qa()?1:2;if(0===uu&&(uu=Fs),0!==Xa.transition){0!==lu&&(lu=null!==qs?qs.pendingLanes:0),e=uu;var t=4186112&~lu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=qa(),0!==(4&As)&&98===e?e=Ft(12,uu):e=Ft(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function hu(e,t,n){if(50<iu)throw iu=0,ou=null,Error(o(185));if(null===(e=mu(e,t)))return null;Wt(e,t,n),e===Rs&&(Us|=t,4===js&&yu(e,Ms));var r=qa();1===t?0!==(8&As)&&0===(48&As)?bu(e):(gu(e,n),0===As&&(Ks(),Ga())):(0===(4&As)||98!==r&&99!==r||(null===au?au=new Set([e]):au.add(e)),gu(e,n)),qs=e}function mu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function gu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-qt(s),l=1<<u,c=i[u];if(-1===c){if(0===(l&r)||0!==(l&a)){c=t,zt(l);var f=Lt;i[u]=10<=f?c+250:6<=f?c+5e3:-1}}else c<=t&&(e.expiredLanes|=l);s&=~l}if(r=jt(e,e===Rs?Ms:0),t=Lt,0===r)null!==n&&(n!==za&&Ca(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==za&&Ca(n)}15===t?(n=bu.bind(null,e),null===Ba?(Ba=[n],Fa=Sa(Aa,Ya)):Ba.push(n),n=za):14===t?n=Ka(99,bu.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Ka(n,vu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function vu(e){if(su=-1,lu=uu=0,0!==(48&As))throw Error(o(327));var t=e.callbackNode;if(Mu()&&e.callbackNode!==t)return null;var n=jt(e,e===Rs?Ms:0);if(0===n)return null;var r=n,a=As;As|=16;var i=Su();for(Rs===e&&Ms===r||(Ks(),ku(e,r));;)try{Ou();break}catch(u){Eu(e,u)}if(ni(),Ps.current=i,As=a,null!==Ds?r=0:(Rs=null,Ms=0,r=js),0!==(Fs&Us))ku(e,0);else if(0!==r){if(2===r&&(As|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(n=Bt(e))&&(r=Cu(e,n))),1===r)throw t=Bs,ku(e,0),yu(e,n),gu(e,Wa()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Au(e);break;case 3:if(yu(e,n),(62914560&n)===n&&10<(r=$s+500-Wa())){if(0!==jt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){pu(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=$r(Au.bind(null,e),r);break}Au(e);break;case 4:if(yu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,a=-1;0<n;){var s=31-qt(n);i=1<<s,(s=r[s])>a&&(a=s),n&=~i}if(n=a,10<(n=(120>(n=Wa()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Os(n/1960))-n)){e.timeoutHandle=$r(Au.bind(null,e),n);break}Au(e);break;default:throw Error(o(329))}}return gu(e,Wa()),e.callbackNode===t?vu.bind(null,e):null}function yu(e,t){for(t&=~Ws,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qt(t),r=1<<n;e[n]=-1,t&=~r}}function bu(e){if(0!==(48&As))throw Error(o(327));if(Mu(),e===Rs&&0!==(e.expiredLanes&Ms)){var t=Ms,n=Cu(e,t);0!==(Fs&Us)&&(n=Cu(e,t=jt(e,t)))}else n=Cu(e,t=jt(e,0));if(0!==e.tag&&2===n&&(As|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(t=Bt(e))&&(n=Cu(e,t))),1===n)throw n=Bs,ku(e,0),yu(e,t),gu(e,Wa()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Au(e),gu(e,Wa()),null}function wu(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(Ks(),Ga())}}function xu(e,t){var n=As;As&=-2,As|=8;try{return e(t)}finally{0===(As=n)&&(Ks(),Ga())}}function _u(e,t){fa(zs,Ls),Ls|=t,Fs|=t}function Nu(){Ls=zs.current,ca(zs)}function ku(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Hr(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ya();break;case 3:Di(),ca(ha),ca(da),Yi();break;case 5:Li(r);break;case 4:Di();break;case 13:case 19:ca(zi);break;case 10:ri(r);break;case 23:case 24:Nu()}n=n.return}Rs=e,Ds=Hu(e.current,null),Ms=Ls=Fs=t,js=0,Bs=null,Ws=Us=Vs=0}function Eu(e,t){for(;;){var n=Ds;try{if(ni(),Xi.current=Ao,no){for(var r=Zi.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}no=!1}if(Qi=0,to=eo=Zi=null,ro=!1,Ts.current=null,null===n||null===n.return){js=1,Bs=t,Ds=null;break}e:{var i=e,o=n.return,s=n,u=t;if(t=Ms,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!==(1&zi.current),p=o;do{var d;if(d=13===p.tag){var h=p.memoizedState;if(null!==h)d=null!==h.dehydrated;else{var m=p.memoizedProps;d=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!f)}}if(d){var g=p.updateQueue;if(null===g){var v=new Set;v.add(l),p.updateQueue=v}else g.add(l);if(0===(2&p.mode)){if(p.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=ci(-1,1);y.tag=2,fi(s,y)}s.lanes|=1;break e}u=void 0,s=t;var b=i.pingCache;if(null===b?(b=i.pingCache=new fs,u=new Set,b.set(l,u)):void 0===(u=b.get(l))&&(u=new Set,b.set(l,u)),!u.has(s)){u.add(s);var w=Vu.bind(null,i,l,s);l.then(w,w)}p.flags|=4096,p.lanes=t;break e}p=p.return}while(null!==p);u=Error((K(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==js&&(js=2),u=ls(u,s),p=o;do{switch(p.tag){case 3:i=u,p.flags|=4096,t&=-t,p.lanes|=t,pi(p,ps(0,i,t));break e;case 1:i=u;var x=p.type,_=p.stateNode;if(0===(64&p.flags)&&("function"===typeof x.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Qs||!Qs.has(_)))){p.flags|=4096,t&=-t,p.lanes|=t,pi(p,ds(p,i,t));break e}}p=p.return}while(null!==p)}Tu(n)}catch(N){t=N,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function Su(){var e=Ps.current;return Ps.current=Ao,null===e?Ao:e}function Cu(e,t){var n=As;As|=16;var r=Su();for(Rs===e&&Ms===t||ku(e,t);;)try{Iu();break}catch(a){Eu(e,a)}if(ni(),As=n,Ps.current=r,null!==Ds)throw Error(o(261));return Rs=null,Ms=0,js}function Iu(){for(;null!==Ds;)Pu(Ds)}function Ou(){for(;null!==Ds&&!Ia();)Pu(Ds)}function Pu(e){var t=Gs(e.alternate,e,Ls);e.memoizedProps=e.pendingProps,null===t?Tu(e):Ds=t,Ts.current=null}function Tu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ls)))return void(Ds=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ls)||0===(4&n.mode)){for(var r=0,a=n.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Ds=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===js&&(js=5)}function Au(e){var t=qa();return Ha(99,Ru.bind(null,e,t)),null}function Ru(e,t){do{Mu()}while(null!==eu);if(0!==(48&As))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,a=r,i=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<i;){var l=31-qt(i),c=1<<l;a[l]=0,s[l]=-1,u[l]=-1,i&=~c}if(null!==au&&0===(24&r)&&au.has(e)&&au.delete(e),e===Rs&&(Ds=Rs=null,Ms=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(a=As,As|=32,Ts.current=null,Vr=Yt,vr(s=gr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(c=u.getSelection&&u.getSelection())&&0!==c.rangeCount){u=c.anchorNode,i=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{u.nodeType,l.nodeType}catch(S){u=null;break e}var f=0,p=-1,d=-1,h=0,m=0,g=s,v=null;t:for(;;){for(var y;g!==u||0!==i&&3!==g.nodeType||(p=f+i),g!==l||0!==c&&3!==g.nodeType||(d=f+c),3===g.nodeType&&(f+=g.nodeValue.length),null!==(y=g.firstChild);)v=g,g=y;for(;;){if(g===s)break t;if(v===u&&++h===i&&(p=f),v===l&&++m===c&&(d=f),null!==(y=g.nextSibling))break;v=(g=v).parentNode}g=y}u=-1===p||-1===d?null:{start:p,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;Ur={focusedElem:s,selectionRange:u},Yt=!1,cu=null,fu=!1,Ys=r;do{try{Du()}catch(S){if(null===Ys)throw Error(o(330));Fu(Ys,S),Ys=Ys.nextEffect}}while(null!==Ys);cu=null,Ys=r;do{try{for(s=e;null!==Ys;){var b=Ys.flags;if(16&b&&ye(Ys.stateNode,""),128&b){var w=Ys.alternate;if(null!==w){var x=w.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&b){case 2:_s(Ys),Ys.flags&=-3;break;case 6:_s(Ys),Ys.flags&=-3,Ss(Ys.alternate,Ys);break;case 1024:Ys.flags&=-1025;break;case 1028:Ys.flags&=-1025,Ss(Ys.alternate,Ys);break;case 4:Ss(Ys.alternate,Ys);break;case 8:Es(s,u=Ys);var _=u.alternate;ws(u),null!==_&&ws(_)}Ys=Ys.nextEffect}}catch(S){if(null===Ys)throw Error(o(330));Fu(Ys,S),Ys=Ys.nextEffect}}while(null!==Ys);if(x=Ur,w=gr(),b=x.focusedElem,s=x.selectionRange,w!==b&&b&&b.ownerDocument&&mr(b.ownerDocument.documentElement,b)){null!==s&&vr(b)&&(w=s.start,void 0===(x=s.end)&&(x=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(x,b.value.length)):(x=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(x=x.getSelection(),u=b.textContent.length,_=Math.min(s.start,u),s=void 0===s.end?_:Math.min(s.end,u),!x.extend&&_>s&&(u=s,s=_,_=u),u=hr(b,_),i=hr(b,s),u&&i&&(1!==x.rangeCount||x.anchorNode!==u.node||x.anchorOffset!==u.offset||x.focusNode!==i.node||x.focusOffset!==i.offset)&&((w=w.createRange()).setStart(u.node,u.offset),x.removeAllRanges(),_>s?(x.addRange(w),x.extend(i.node,i.offset)):(w.setEnd(i.node,i.offset),x.addRange(w))))),w=[];for(x=b;x=x.parentNode;)1===x.nodeType&&w.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<w.length;b++)(x=w[b]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Yt=!!Vr,Ur=Vr=null,e.current=n,Ys=r;do{try{for(b=e;null!==Ys;){var N=Ys.flags;if(36&N&&vs(b,Ys.alternate,Ys),128&N){w=void 0;var k=Ys.ref;if(null!==k){var E=Ys.stateNode;Ys.tag,w=E,"function"===typeof k?k(w):k.current=w}}Ys=Ys.nextEffect}}catch(S){if(null===Ys)throw Error(o(330));Fu(Ys,S),Ys=Ys.nextEffect}}while(null!==Ys);Ys=null,ja(),As=a}else e.current=n;if(Zs)Zs=!1,eu=e,tu=t;else for(Ys=r;null!==Ys;)t=Ys.nextEffect,Ys.nextEffect=null,8&Ys.flags&&((N=Ys).sibling=null,N.stateNode=null),Ys=t;if(0===(r=e.pendingLanes)&&(Qs=null),1===r?e===ou?iu++:(iu=0,ou=e):iu=0,n=n.stateNode,ka&&"function"===typeof ka.onCommitFiberRoot)try{ka.onCommitFiberRoot(Na,n,void 0,64===(64&n.current.flags))}catch(S){}if(gu(e,Wa()),Xs)throw Xs=!1,e=Js,Js=null,e;return 0!==(8&As)||Ga(),null}function Du(){for(;null!==Ys;){var e=Ys.alternate;fu||null===cu||(0!==(8&Ys.flags)?et(Ys,cu)&&(fu=!0):13===Ys.tag&&Is(e,Ys)&&et(Ys,cu)&&(fu=!0));var t=Ys.flags;0!==(256&t)&&gs(e,Ys),0===(512&t)||Zs||(Zs=!0,Ka(97,(function(){return Mu(),null}))),Ys=Ys.nextEffect}}function Mu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Ha(e,ju)}return!1}function Lu(e,t){nu.push(t,e),Zs||(Zs=!0,Ka(97,(function(){return Mu(),null})))}function zu(e,t){ru.push(t,e),Zs||(Zs=!0,Ka(97,(function(){return Mu(),null})))}function ju(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&As))throw Error(o(331));var t=As;As|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var a=n[r],i=n[r+1],s=a.destroy;if(a.destroy=void 0,"function"===typeof s)try{s()}catch(l){if(null===i)throw Error(o(330));Fu(i,l)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){a=n[r],i=n[r+1];try{var u=a.create;a.destroy=u()}catch(l){if(null===i)throw Error(o(330));Fu(i,l)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return As=t,Ga(),!0}function Bu(e,t,n){fi(e,t=ps(0,t=ls(n,t),1)),t=pu(),null!==(e=mu(e,1))&&(Wt(e,1,t),gu(e,t))}function Fu(e,t){if(3===e.tag)Bu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Bu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Qs||!Qs.has(r))){var a=ds(n,e=ls(t,e),1);if(fi(n,a),a=pu(),null!==(n=mu(n,1)))Wt(n,1,a),gu(n,a);else if("function"===typeof r.componentDidCatch&&(null===Qs||!Qs.has(r)))try{r.componentDidCatch(t,e)}catch(i){}break}}n=n.return}}function Vu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=pu(),e.pingedLanes|=e.suspendedLanes&n,Rs===e&&(Ms&n)===n&&(4===js||3===js&&(62914560&Ms)===Ms&&500>Wa()-$s?ku(e,0):Ws|=n),gu(e,t)}function Uu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===qa()?1:2:(0===uu&&(uu=Fs),0===(t=Vt(62914560&~uu))&&(t=4194304))),n=pu(),null!==(e=mu(e,t))&&(Wt(e,t,n),gu(e,n))}function Wu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function qu(e,t,n,r){return new Wu(e,t,n,r)}function $u(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hu(e,t){var n=e.alternate;return null===n?((n=qu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ku(e,t,n,r,a,i){var s=2;if(r=e,"function"===typeof e)$u(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return Gu(n.children,a,i,t);case L:s=8,a|=16;break;case E:s=8,a|=1;break;case S:return(e=qu(12,n,t,8|a)).elementType=S,e.type=S,e.lanes=i,e;case P:return(e=qu(13,n,t,a)).type=P,e.elementType=P,e.lanes=i,e;case T:return(e=qu(19,n,t,a)).elementType=T,e.lanes=i,e;case z:return Yu(n,a,i,t);case j:return(e=qu(24,n,t,a)).elementType=j,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case I:s=9;break e;case O:s=11;break e;case A:s=14;break e;case R:s=16,r=null;break e;case D:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=qu(s,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Gu(e,t,n,r){return(e=qu(7,e,r,t)).lanes=n,e}function Yu(e,t,n,r){return(e=qu(23,e,r,t)).elementType=z,e.lanes=n,e}function Xu(e,t,n){return(e=qu(6,e,null,t)).lanes=n,e}function Ju(e,t,n){return(t=qu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ut(0),this.expirationTimes=Ut(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ut(0),this.mutableSourceEagerHydrationData=null}function Zu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function el(e,t,n,r){var a=t.current,i=pu(),s=du(a);e:if(n){t:{if(Xe(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(va(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var l=n.type;if(va(l)){n=wa(n,l,u);break e}}n=u}else n=pa;return null===t.context?t.context=n:t.pendingContext=n,(t=ci(i,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fi(a,t),hu(a,s,i),s}function tl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rl(e,t){nl(e,t),(e=e.alternate)&&nl(e,t)}function al(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Qu(e,t,null!=n&&!0===n.hydrate),t=qu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ui(t),e[ea]=n.current,Ar(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var a=(t=r[e])._getVersion;a=a(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a)}this._internalRoot=n}function il(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ol(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i._internalRoot;if("function"===typeof a){var s=a;a=function(){var e=tl(o);s.call(e)}}el(t,o,e,a)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new al(e,0,t?{hydrate:!0}:void 0)}(n,r),o=i._internalRoot,"function"===typeof a){var u=a;a=function(){var e=tl(o);u.call(e)}}xu((function(){el(t,o,e,a)}))}return tl(o)}function sl(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!il(t))throw Error(o(200));return Zu(e,t,null,n)}Gs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||ha.current)zo=!0;else{if(0===(n&r)){switch(zo=!1,t.tag){case 3:Ko(t),Ki();break;case 5:Mi(t);break;case 1:va(t.type)&&xa(t);break;case 4:Ri(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var a=t.type._context;fa(Qa,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Qo(e,t,n):(fa(zi,1&zi.current),null!==(t=is(e,t,n))?t.sibling:null);fa(zi,1&zi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return as(e,t,n);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),fa(zi,zi.current),r)break;return null;case 23:case 24:return t.lanes=0,Uo(e,t,n)}return is(e,t,n)}zo=0!==(16384&e.flags)}else zo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=ga(t,da.current),ii(t,n),a=oo(null,t,r,e,a,n),t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,va(r)){var i=!0;xa(t)}else i=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ui(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&gi(t,r,s,e),a.updater=vi,t.stateNode=a,a._reactInternals=t,xi(t,r,e,n),t=Ho(null,t,r,!0,i,n)}else t.tag=0,jo(null,t,a,n),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(i=a._init)(a._payload),t.type=a,i=t.tag=function(e){if("function"===typeof e)return $u(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===O)return 11;if(e===A)return 14}return 2}(a),e=Ja(a,e),i){case 0:t=qo(null,t,a,e,n);break e;case 1:t=$o(null,t,a,e,n);break e;case 11:t=Bo(null,t,a,e,n);break e;case 14:t=Fo(null,t,a,Ja(a.type,e),r,n);break e}throw Error(o(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,qo(e,t,r,a=t.elementType===r?a:Ja(r,a),n);case 1:return r=t.type,a=t.pendingProps,$o(e,t,r,a=t.elementType===r?a:Ja(r,a),n);case 3:if(Ko(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,li(e,t),di(t,r,null,n),(r=t.memoizedState.element)===a)Ki(),t=is(e,t,n);else{if((i=(a=t.stateNode).hydrate)&&(Fi=Gr(t.stateNode.containerInfo.firstChild),Bi=t,i=Vi=!0),i){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(i=e[a])._workInProgressVersionPrimary=e[a+1],Gi.push(i);for(n=Ci(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else jo(e,t,r,n),Ki();t=t.child}return t;case 5:return Mi(t),null===e&&qi(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,s=a.children,qr(r,a)?s=null:null!==i&&qr(r,i)&&(t.flags|=16),Wo(e,t),jo(e,t,s,n),t.child;case 6:return null===e&&qi(t),null;case 13:return Qo(e,t,n);case 4:return Ri(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Si(t,null,r,n):jo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Bo(e,t,r,a=t.elementType===r?a:Ja(r,a),n);case 7:return jo(e,t,t.pendingProps,n),t.child;case 8:case 12:return jo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,s=t.memoizedProps,i=a.value;var u=t.type._context;if(fa(Qa,u._currentValue),u._currentValue=i,null!==s)if(u=s.value,0===(i=cr(u,i)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,i):1073741823))){if(s.children===a.children&&!ha.current){t=is(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&i)){1===u.tag&&((c=ci(-1,n&-n)).tag=2,fi(u,c)),u.lanes|=n,null!==(c=u.alternate)&&(c.lanes|=n),ai(u.return,n),l.lanes|=n;break}c=c.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}jo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(i=t.pendingProps).children,ii(t,n),r=r(a=oi(a,i.unstable_observedBits)),t.flags|=1,jo(e,t,r,n),t.child;case 14:return i=Ja(a=t.type,t.pendingProps),Fo(e,t,a,i=Ja(a.type,i),r,n);case 15:return Vo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ja(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,va(r)?(e=!0,xa(t)):e=!1,ii(t,n),bi(t,r,a),xi(t,r,a,n),Ho(null,t,r,!0,e,n);case 19:return as(e,t,n);case 23:case 24:return Uo(e,t,n)}throw Error(o(156,t.tag))},al.prototype.render=function(e){el(e,this._internalRoot,null,null)},al.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;el(null,e,null,(function(){t[ea]=null}))},tt=function(e){13===e.tag&&(hu(e,4,pu()),rl(e,4))},nt=function(e){13===e.tag&&(hu(e,67108864,pu()),rl(e,67108864))},rt=function(e){if(13===e.tag){var t=pu(),n=du(e);hu(e,n,t),rl(e,n)}},at=function(e,t){return t()},Ce=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ia(r);if(!a)throw Error(o(90));J(r),ne(r,a)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Re=wu,De=function(e,t,n,r,a){var i=As;As|=4;try{return Ha(98,e.bind(null,t,n,r,a))}finally{0===(As=i)&&(Ks(),Ga())}},Me=function(){0===(49&As)&&(function(){if(null!==au){var e=au;au=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,gu(e,Wa())}))}Ga()}(),Mu())},Le=function(e,t){var n=As;As|=2;try{return e(t)}finally{0===(As=n)&&(Ks(),Ga())}};var ul={Events:[ra,aa,ia,Te,Ae,Mu,{current:!1}]},ll={findFiberByHostInstance:na,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cl={bundleType:ll.bundleType,version:ll.version,rendererPackageName:ll.rendererPackageName,rendererConfig:ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:ll.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fl.isDisabled&&fl.supportsFiber)try{Na=fl.inject(cl),ka=fl}catch(ge){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ul,t.createPortal=sl,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=As;if(0!==(48&n))return e(t);As|=1;try{if(e)return Ha(99,e.bind(null,t))}finally{As=n,Ga()}},t.hydrate=function(e,t,n){if(!il(t))throw Error(o(200));return ol(null,e,t,!0,n)},t.render=function(e,t,n){if(!il(t))throw Error(o(200));return ol(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!il(e))throw Error(o(40));return!!e._reactRootContainer&&(xu((function(){ol(null,null,e,!1,(function(){e._reactRootContainer=null,e[ea]=null}))})),!0)},t.unstable_batchedUpdates=wu,t.unstable_createPortal=function(e,t){return sl(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!il(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ol(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(725);var r=n(791),a=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var i=Symbol.for;a=i("react.element"),t.Fragment=i("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,i={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:l,ref:c,props:i,_owner:o.current}}t.jsx=l,t.jsxs=l},117:function(e,t,n){"use strict";var r=n(725),a=60103,i=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var l=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;a=f("react.element"),i=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),s=f("react.context"),u=f("react.forward_ref"),t.Suspense=f("react.suspense"),l=f("react.memo"),c=f("react.lazy")}var p="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var b=y.prototype=new v;b.constructor=y,r(b,g.prototype),b.isPureReactComponent=!0;var w={current:null},x=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,n){var r,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,r)&&!_.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:a,type:e,key:o,ref:s,props:i,_owner:w.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var E=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case a:case i:u=!0}}if(u)return o=o(u=e),e=""===r?"."+S(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),C(o,t,n,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=r+S(s=e[l],l);u+=C(s,t,n,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=C(s=s.value,t,n,c=r+S(s,l++),o);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function I(e,t,n){if(null==e)return e;var r=[],a=0;return C(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function O(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var P={current:null};function T(){var e=P.current;if(null===e)throw Error(d(321));return e}var A={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error(d(143));return e}},t.Component=g,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var i=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!_.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var f=0;f<c;f++)l[f]=arguments[f+2];i.children=l}return{$$typeof:a,type:e.type,key:o,ref:s,props:i,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return T().useCallback(e,t)},t.useContext=function(e,t){return T().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return T().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return T().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return T().useLayoutEffect(e,t)},t.useMemo=function(e,t){return T().useMemo(e,t)},t.useReducer=function(e,t,n){return T().useReducer(e,t,n)},t.useRef=function(e){return T().useRef(e)},t.useState=function(e){return T().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";var n,r,a,i;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,c=null,f=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==l?setTimeout(n,0,e):(l=e,setTimeout(f,0))},r=function(e,t){c=setTimeout(e,t)},a=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var h=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof h&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,v=-1,y=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},i=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,x=w.port2;w.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();b=e+y;try{g(!0,e)?x.postMessage(null):(m=!1,g=null)}catch(n){throw x.postMessage(null),n}}else m=!1},n=function(e){g=e,m||(m=!0,x.postMessage(null))},r=function(e,n){v=p((function(){e(t.unstable_now())}),n)},a=function(){d(v),v=-1}}function _(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<E(a,t)))break e;e[r]=t,e[n]=a,n=r}}function N(e){return void 0===(e=e[0])?null:e}function k(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var i=2*(r+1)-1,o=e[i],s=i+1,u=e[s];if(void 0!==o&&0>E(o,n))void 0!==u&&0>E(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[i]=n,r=i);else{if(!(void 0!==u&&0>E(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var S=[],C=[],I=1,O=null,P=3,T=!1,A=!1,R=!1;function D(e){for(var t=N(C);null!==t;){if(null===t.callback)k(C);else{if(!(t.startTime<=e))break;k(C),t.sortIndex=t.expirationTime,_(S,t)}t=N(C)}}function M(e){if(R=!1,D(e),!A)if(null!==N(S))A=!0,n(L);else{var t=N(C);null!==t&&r(M,t.startTime-e)}}function L(e,n){A=!1,R&&(R=!1,a()),T=!0;var i=P;try{for(D(n),O=N(S);null!==O&&(!(O.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=O.callback;if("function"===typeof o){O.callback=null,P=O.priorityLevel;var s=o(O.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?O.callback=s:O===N(S)&&k(S),D(n)}else k(S);O=N(S)}if(null!==O)var u=!0;else{var l=N(C);null!==l&&r(M,l.startTime-n),u=!1}return u}finally{O=null,P=i,T=!1}}var z=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){A||T||(A=!0,n(L))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return N(S)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=z,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:I++,callback:i,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,_(C,e),null===N(S)&&e===N(C)&&(R?a():R=!0,r(M,o-s))):(e.sortIndex=u,_(S,e),A||T||(A=!0,n(L))),e},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},561:function(e,t,n){"use strict";var r=n(791);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=r.useState,o=r.useEffect,s=r.useLayoutEffect,u=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!a(e,n)}catch(r){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),a=r[0].inst,c=r[1];return s((function(){a.value=n,a.getSnapshot=t,l(a)&&c({inst:a})}),[e,n,t]),o((function(){return l(a)&&c({inst:a}),e((function(){l(a)&&c({inst:a})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},595:function(e,t,n){"use strict";var r=n(791),a=n(248);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=a.useSyncExternalStore,s=r.useRef,u=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,a){var f=s(null);if(null===f.current){var p={hasValue:!1,value:null};f.current=p}else p=f.current;f=l((function(){function e(e){if(!u){if(u=!0,o=e,e=r(e),void 0!==a&&p.hasValue){var t=p.value;if(a(t,e))return s=t}return s=e}if(t=s,i(o,e))return t;var n=r(e);return void 0!==a&&a(t,n)?t:(o=e,s=n)}var o,s,u=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,a]);var d=o(e,f[0],f[1]);return u((function(){p.hasValue=!0,p.value=d}),[d]),c(d),d}},248:function(e,t,n){"use strict";e.exports=n(561)},327:function(e,t,n){"use strict";e.exports=n(595)},391:function(e){"use strict";var t=function(){};e.exports=t}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="./";var __webpack_exports__={};!function(){"use strict";var e=__webpack_require__(791),t=__webpack_require__(164);function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(){r=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(I){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),o=new E(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return C()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var p={};function d(){}function h(){}function m(){}var g={};l(g,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(S([])));y&&y!==t&&a.call(y,o)&&(g=y);var b=m.prototype=d.prototype=Object.create(g);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,o,s,u){var l=f(e[i],e,o);if("throw"!==l.type){var c=l.arg,p=c.value;return p&&"object"==n(p)&&a.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return r("throw",e,s,u)}))}u(l.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return i=i?i.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function S(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=m,l(b,"constructor",m),l(m,"constructor",h),h.displayName=l(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(x.prototype),l(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(c(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(b),l(b,u,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;k(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function a(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,u,"next",e)}function u(e){a(o,r,i,s,u,"throw",e)}s(void 0)}))}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function d(e,t){if(null==e)return{};var n,r,a=p(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var h=__webpack_require__(694),m=__webpack_require__.n(h),g=__webpack_require__(391),v=__webpack_require__.n(g);function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}__webpack_require__(176);function b(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function w(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function x(t,n,r){var a=(0,e.useRef)(void 0!==t),i=(0,e.useState)(n),o=i[0],s=i[1],u=void 0!==t,l=a.current;return a.current=u,!u&&l&&o!==n&&s(n),[u?t:o,(0,e.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];r&&r.apply(void 0,[e].concat(n)),s(e)}),[r])]}function _(e,t){return Object.keys(t).reduce((function(n,r){var a,i=n,o=i[b(r)],s=i[r],u=p(i,[b(r),r].map(w)),l=t[r],c=x(s,o,e[l]),f=c[0],d=c[1];return y({},u,((a={})[r]=f,a[l]=d,a))}),e)}function N(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function k(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function E(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}N.__suppressDeprecationWarning=!0,k.__suppressDeprecationWarning=!0,E.__suppressDeprecationWarning=!0;var S=Function.prototype.bind.call(Function.prototype.call,[].slice);function C(e,t){return S(e.querySelectorAll(t))}function I(){return(0,e.useReducer)((function(e){return!e}),!1)[1]}var O=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var P=function(t,n){return(0,e.useMemo)((function(){return function(e,t){var n=O(e),r=O(t);return function(e){n&&n(e),r&&r(e)}}(t,n)}),[t,n])},T=e.createContext(null);T.displayName="NavContext";var A=T,R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},D=e.createContext(null),M=e.createContext(null);function L(e){return"".concat("data-rr-ui-").concat(e)}var z=function(t){var n=(0,e.useRef)(t);return(0,e.useEffect)((function(){n.current=t}),[t]),n};function j(t){var n=z(t);return(0,e.useCallback)((function(){return n.current&&n.current.apply(n,arguments)}),[n])}var B=__webpack_require__(184),F=["as","disabled"];function V(e){var t=e.tagName,n=e.disabled,r=e.href,a=e.target,i=e.rel,o=e.onClick,s=e.tabIndex,u=void 0===s?0:s,l=e.type;t||(t=null!=r||null!=a||null!=i?"a":"button");var c={tagName:t};if("button"===t)return[{type:l||"button",disabled:n},c];var f=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==o||o(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:"button",disabled:void 0,tabIndex:n?void 0:u,href:r,target:"a"===t?a:void 0,"aria-disabled":n||void 0,rel:"a"===t?i:void 0,onClick:f,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),f(e))}},c]}var U=e.forwardRef((function(e,t){var n=e.as,r=e.disabled,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,F),i=u(V(Object.assign({tagName:n,disabled:r},a)),2),o=i[0],s=i[1].tagName;return(0,B.jsx)(s,Object.assign({},a,o,{ref:t}))}));U.displayName="Button";var W=U,q=["as","active","eventKey"];function $(t){var n=t.key,r=t.onClick,a=t.active,i=t.id,o=t.role,s=t.disabled,u=(0,e.useContext)(D),l=(0,e.useContext)(A),c=(0,e.useContext)(M),f=a,p={role:o};if(l){o||"tablist"!==l.role||(p.role="tab");var d=l.getControllerId(null!=n?n:null),h=l.getControlledId(null!=n?n:null);p[L("event-key")]=n,p.id=d||i,!(f=null==a&&null!=n?l.activeKey===n:a)&&(null!=c&&c.unmountOnExit||null!=c&&c.mountOnEnter)||(p["aria-controls"]=h)}return"tab"===p.role&&(p["aria-selected"]=f,f||(p.tabIndex=-1),s&&(p.tabIndex=-1,p["aria-disabled"]=!0)),p.onClick=j((function(e){s||(null==r||r(e),null!=n&&u&&!e.isPropagationStopped()&&u(n,e))})),[p,{isActive:f}]}var H=e.forwardRef((function(e,t){var n=e.as,r=void 0===n?W:n,a=e.active,i=e.eventKey,o=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,q),s=u($(Object.assign({key:R(i,o.href),active:a},o)),2),l=s[0],c=s[1];return l[L("active")]=c.isActive,(0,B.jsx)(r,Object.assign({},o,l,{ref:t}))}));H.displayName="NavItem";var K=H,G=["as","onSelect","activeKey","role","onKeyDown"];var Y=function(){},X=L("event-key"),J=e.forwardRef((function(t,n){var r,a,i=t.as,o=void 0===i?"div":i,s=t.onSelect,u=t.activeKey,l=t.role,c=t.onKeyDown,f=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,G),p=I(),d=(0,e.useRef)(!1),h=(0,e.useContext)(D),m=(0,e.useContext)(M);m&&(l=l||"tablist",u=m.activeKey,r=m.getControlledId,a=m.getControllerId);var g=(0,e.useRef)(null),v=function(e){var t=g.current;if(!t)return null;var n=C(t,"[".concat(X,"]:not([aria-disabled=true])")),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;var a=n.indexOf(r);if(-1===a)return null;var i=a+e;return i>=n.length&&(i=0),i<0&&(i=n.length-1),n[i]},y=function(e,t){null!=e&&(null==s||s(e,t),null==h||h(e,t))};(0,e.useEffect)((function(){if(g.current&&d.current){var e=g.current.querySelector("[".concat(X,"][aria-selected=true]"));null==e||e.focus()}d.current=!1}));var b=P(n,g);return(0,B.jsx)(D.Provider,{value:y,children:(0,B.jsx)(A.Provider,{value:{role:l,activeKey:R(u),getControlledId:r||Y,getControllerId:a||Y},children:(0,B.jsx)(o,Object.assign({},f,{onKeyDown:function(e){if(null==c||c(e),m){var t,n;switch(e.key){case"ArrowLeft":case"ArrowUp":t=v(-1);break;case"ArrowRight":case"ArrowDown":t=v(1);break;default:return}if(t)e.preventDefault(),y(t.dataset[(n="EventKey","".concat("rrUi").concat(n))]||null,e),d.current=!0,p()}},ref:b,role:l}))})})}));J.displayName="Nav";var Q=Object.assign(J,{Item:K}),Z=["xxl","xl","lg","md","sm","xs"],ee=e.createContext({prefixes:{},breakpoints:Z});ee.Consumer,ee.Provider;function te(t,n){var r=(0,e.useContext)(ee).prefixes;return t||r[n]||n}function ne(){return(0,e.useContext)(ee).breakpoints}function re(){return"rtl"===(0,e.useContext)(ee).dir}var ae=["bsPrefix","active","disabled","eventKey","className","variant","action","as"],ie=e.forwardRef((function(e,t){var n=e.bsPrefix,r=e.active,a=e.disabled,i=e.eventKey,o=e.className,s=e.variant,l=e.action,c=e.as,p=d(e,ae);n=te(n,"list-group-item");var h=u($(f({key:R(i,p.href),active:r},p)),2),g=h[0],v=h[1],y=j((function(e){if(a)return e.preventDefault(),void e.stopPropagation();g.onClick(e)}));a&&void 0===p.tabIndex&&(p.tabIndex=-1,p["aria-disabled"]=!0);var b=c||(l?p.href?"a":"button":"div");return(0,B.jsx)(b,f(f(f({ref:t},p),g),{},{onClick:y,className:m()(o,n,v.isActive&&"active",a&&"disabled",s&&"".concat(n,"-").concat(s),l&&"".concat(n,"-action"))}))}));ie.displayName="ListGroupItem";var oe=ie,se=["className","bsPrefix","variant","horizontal","numbered","as"],ue=e.forwardRef((function(e,t){var n,r=_(e,{activeKey:"onSelect"}),a=r.className,i=r.bsPrefix,o=r.variant,s=r.horizontal,u=r.numbered,l=r.as,c=void 0===l?"div":l,p=d(r,se),h=te(i,"list-group");return s&&(n=!0===s?"horizontal":"horizontal-".concat(s)),(0,B.jsx)(Q,f(f({ref:t},p),{},{as:c,className:m()(a,h,o&&"".concat(h,"-").concat(o),n&&"".concat(h,"-").concat(n),u&&"".concat(h,"-numbered"))}))}));ue.displayName="ListGroup";var le=Object.assign(ue,{Item:oe}),ce=["bsPrefix","bg","pill","text","className","as"],fe=e.forwardRef((function(e,t){var n=e.bsPrefix,r=e.bg,a=e.pill,i=e.text,o=e.className,s=e.as,u=void 0===s?"span":s,l=d(e,ce),c=te(n,"badge");return(0,B.jsx)(u,f(f({ref:t},l),{},{className:m()(o,c,a&&"rounded-pill",i&&"text-".concat(i),r&&"bg-".concat(r))}))}));fe.displayName="Badge",fe.defaultProps={bg:"primary",pill:!1};var pe=fe,de=function(e){var t=e.dim,n=e.bright,r=e.square;return(0,B.jsxs)(le,{as:"ol",children:[(0,B.jsxs)(le.Item,{as:"li",className:"d-flex justify-content-between align-items-start",children:[(0,B.jsx)("div",{className:"ms-2 me-auto",children:(0,B.jsx)("div",{className:"fw-bold",children:"Dimmer Lighting"})}),(0,B.jsx)(pe,{bg:"primary",pill:!0,style:{alignSelf:"center"},children:t})]}),(0,B.jsxs)(le.Item,{as:"li",className:"d-flex justify-content-between align-items-start",children:[(0,B.jsx)("div",{className:"ms-2 me-auto",children:(0,B.jsx)("div",{className:"fw-bold",children:"Brighter Lighting"})}),(0,B.jsx)(pe,{bg:"primary",pill:!0,style:{alignSelf:"center"},children:n})]}),(0,B.jsxs)(le.Item,{as:"li",className:"d-flex justify-content-between align-items-start",children:[(0,B.jsx)("div",{className:"ms-2 me-auto",children:(0,B.jsx)("div",{className:"fw-bold",children:"W/ Square Surfaces"})}),(0,B.jsx)(pe,{bg:"primary",pill:!0,style:{alignSelf:"center"},children:r})]})]})},he=/-(.)/g;var me=["className","bsPrefix","as"],ge=function(e){return e[0].toUpperCase()+(t=e,t.replace(he,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function ve(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.displayName,a=void 0===r?ge(t):r,i=n.Component,o=n.defaultProps,s=e.forwardRef((function(e,n){var r=e.className,a=e.bsPrefix,o=e.as,s=void 0===o?i||"div":o,u=d(e,me),l=te(a,t);return(0,B.jsx)(s,f({ref:n,className:m()(r,l)},u))}));return s.defaultProps=o,s.displayName=a,s}var ye=function(t){return e.forwardRef((function(e,n){return(0,B.jsx)("div",f(f({},e),{},{ref:n,className:m()(e.className,t)}))}))},be=["bsPrefix","className","variant","as"],we=e.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.variant,i=e.as,o=void 0===i?"img":i,s=d(e,be),u=te(n,"card-img");return(0,B.jsx)(o,f({ref:t,className:m()(a?"".concat(u,"-").concat(a):u,r)},s))}));we.displayName="CardImg";var xe=we,_e=e.createContext(null);_e.displayName="CardHeaderContext";var Ne=_e,ke=["bsPrefix","className","as"],Ee=e.forwardRef((function(t,n){var r=t.bsPrefix,a=t.className,i=t.as,o=void 0===i?"div":i,s=d(t,ke),u=te(r,"card-header"),l=(0,e.useMemo)((function(){return{cardHeaderBsPrefix:u}}),[u]);return(0,B.jsx)(Ne.Provider,{value:l,children:(0,B.jsx)(o,f(f({ref:n},s),{},{className:m()(a,u)}))})}));Ee.displayName="CardHeader";var Se=Ee,Ce=["bsPrefix","className","bg","text","border","body","children","as"],Ie=ye("h5"),Oe=ye("h6"),Pe=ve("card-body"),Te=ve("card-title",{Component:Ie}),Ae=ve("card-subtitle",{Component:Oe}),Re=ve("card-link",{Component:"a"}),De=ve("card-text",{Component:"p"}),Me=ve("card-footer"),Le=ve("card-img-overlay"),ze=e.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.bg,i=e.text,o=e.border,s=e.body,u=e.children,l=e.as,c=void 0===l?"div":l,p=d(e,Ce),h=te(n,"card");return(0,B.jsx)(c,f(f({ref:t},p),{},{className:m()(r,h,a&&"bg-".concat(a),i&&"text-".concat(i),o&&"border-".concat(o)),children:s?(0,B.jsx)(Pe,{children:u}):u}))}));ze.displayName="Card",ze.defaultProps={body:!1};var je=Object.assign(ze,{Img:xe,Title:Te,Subtitle:Ae,Body:Pe,Link:Re,Text:De,Header:Se,Footer:Me,ImgOverlay:Le}),Be=["bsPrefix","className","as"],Fe=e.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.as,i=void 0===a?"div":a,o=d(e,Be),s=te(n,"row"),u=ne(),l="".concat(s,"-cols"),c=[];return u.forEach((function(e){var t,n=o[e];delete o[e],t=null!=n&&"object"===typeof n?n.cols:n;var r="xs"!==e?"-".concat(e):"";null!=t&&c.push("".concat(l).concat(r,"-").concat(t))})),(0,B.jsx)(i,f(f({ref:t},o),{},{className:m().apply(void 0,[r,s].concat(c))}))}));Fe.displayName="Row";var Ve=Fe,Ue=["as","bsPrefix","className"],We=["className"];var qe=e.forwardRef((function(e,t){var n=function(e){var t=e.as,n=e.bsPrefix,r=e.className,a=d(e,Ue);n=te(n,"col");var i=ne(),o=[],s=[];return i.forEach((function(e){var t,r,i,u=a[e];delete a[e],"object"===typeof u&&null!=u?(t=u.span,r=u.offset,i=u.order):t=u;var l="xs"!==e?"-".concat(e):"";t&&o.push(!0===t?"".concat(n).concat(l):"".concat(n).concat(l,"-").concat(t)),null!=i&&s.push("order".concat(l,"-").concat(i)),null!=r&&s.push("offset".concat(l,"-").concat(r))})),[f(f({},a),{},{className:m().apply(void 0,[r].concat(o,s))}),{as:t,bsPrefix:n,spans:o}]}(e),r=u(n,2),a=r[0],i=a.className,o=d(a,We),s=r[1],l=s.as,c=void 0===l?"div":l,p=s.bsPrefix,h=s.spans;return(0,B.jsx)(c,f(f({},o),{},{ref:t,className:m()(i,!h.length&&p)}))}));qe.displayName="Col";var $e=qe,He=__webpack_require__(7),Ke=__webpack_require__.n(He),Ge=["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"],Ye=(Ke().string,Ke().bool,Ke().bool,Ke().bool,Ke().bool,e.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.fluid,i=e.rounded,o=e.roundedCircle,s=e.thumbnail,u=d(e,Ge);return n=te(n,"img"),(0,B.jsx)("img",f(f({ref:t},u),{},{className:m()(r,a&&"".concat(n,"-fluid"),i&&"rounded",o&&"rounded-circle",s&&"".concat(n,"-thumbnail"))}))})));Ye.displayName="Image",Ye.defaultProps={fluid:!1,rounded:!1,roundedCircle:!1,thumbnail:!1};var Xe=Ye,Je=["as","bsPrefix","variant","size","active","className"],Qe=e.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,a=e.variant,i=e.size,o=e.active,s=e.className,l=d(e,Je),c=te(r,"btn"),p=u(V(f({tagName:n},l)),2),h=p[0],g=p[1].tagName;return(0,B.jsx)(g,f(f(f({},h),l),{},{ref:t,className:m()(s,c,o&&"active",a&&"".concat(c,"-").concat(a),i&&"".concat(c,"-").concat(i),l.href&&l.disabled&&"disabled")}))}));Qe.displayName="Button",Qe.defaultProps={variant:"primary",active:!1,disabled:!1};var Ze=Qe;function et(e){return e&&e.ownerDocument||document}function tt(e,t){return function(e){var t=et(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var nt=/([A-Z])/g;var rt=/^ms-/;function at(e){return function(e){return e.replace(nt,"-$1").toLowerCase()}(e).replace(rt,"-ms-")}var it=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var ot=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(at(t))||tt(e).getPropertyValue(at(t));Object.keys(t).forEach((function(a){var i=t[a];i||0===i?!function(e){return!(!e||!it.test(e))}(a)?n+=at(a)+": "+i+";":r+=a+"("+i+") ":e.style.removeProperty(at(a))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};function st(e,t){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},st(e,t)}var ut=!1,lt=e.createContext(null),ct="unmounted",ft="exited",pt="entering",dt="entered",ht="exiting",mt=function(n){var r,a;function i(e,t){var r;r=n.call(this,e,t)||this;var a,i=t&&!t.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?i?(a=ft,r.appearStatus=pt):a=dt:a=e.unmountOnExit||e.mountOnEnter?ct:ft,r.state={status:a},r.nextCallback=null,r}a=n,(r=i).prototype=Object.create(a.prototype),r.prototype.constructor=r,st(r,a),i.getDerivedStateFromProps=function(e,t){return e.in&&t.status===ct?{status:ft}:null};var o=i.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==pt&&n!==dt&&(t=pt):n!==pt&&n!==dt||(t=ht)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},o.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===pt?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===ft&&this.setState({status:ct})},o.performEnter=function(e){var n=this,r=this.props.enter,a=this.context?this.context.isMounting:e,i=this.props.nodeRef?[a]:[t.findDOMNode(this),a],o=i[0],s=i[1],u=this.getTimeouts(),l=a?u.appear:u.enter;!e&&!r||ut?this.safeSetState({status:dt},(function(){n.props.onEntered(o)})):(this.props.onEnter(o,s),this.safeSetState({status:pt},(function(){n.props.onEntering(o,s),n.onTransitionEnd(l,(function(){n.safeSetState({status:dt},(function(){n.props.onEntered(o,s)}))}))})))},o.performExit=function(){var e=this,n=this.props.exit,r=this.getTimeouts(),a=this.props.nodeRef?void 0:t.findDOMNode(this);n&&!ut?(this.props.onExit(a),this.safeSetState({status:ht},(function(){e.props.onExiting(a),e.onTransitionEnd(r.exit,(function(){e.safeSetState({status:ft},(function(){e.props.onExited(a)}))}))}))):this.safeSetState({status:ft},(function(){e.props.onExited(a)}))},o.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},o.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},o.onTransitionEnd=function(e,n){this.setNextCallback(n);var r=this.props.nodeRef?this.props.nodeRef.current:t.findDOMNode(this),a=null==e&&!this.props.addEndListener;if(r&&!a){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],o=i[0],s=i[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},o.render=function(){var t=this.state.status;if(t===ct)return null;var n=this.props,r=n.children,a=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,p(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(lt.Provider,{value:null},"function"===typeof r?r(t,a):e.cloneElement(e.Children.only(r),a))},i}(e.Component);function gt(){}mt.contextType=lt,mt.propTypes={},mt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:gt,onEntering:gt,onEntered:gt,onExit:gt,onExiting:gt,onExited:gt},mt.UNMOUNTED=ct,mt.EXITED=ft,mt.ENTERING=pt,mt.ENTERED=dt,mt.EXITING=ht;var vt=mt,yt=!("undefined"===typeof window||!window.document||!window.document.createElement),bt=!1,wt=!1;try{var xt={get passive(){return bt=!0},get once(){return wt=bt=!0}};yt&&(window.addEventListener("test",xt,xt),window.removeEventListener("test",xt,!0))}catch(NN){}var _t=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!wt){var a=r.once,i=r.capture,o=n;!wt&&a&&(o=n.__once||function e(r){this.removeEventListener(t,e,i),n.call(this,r)},n.__once=o),e.addEventListener(t,o,bt?r:i)}e.addEventListener(t,n,r)};var Nt=function(e,t,n,r){var a=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,a),n.__once&&e.removeEventListener(t,n.__once,a)};var kt=function(e,t,n,r){return _t(e,t,n,r),function(){Nt(e,t,n,r)}};function Et(e,t,n){void 0===n&&(n=5);var r=!1,a=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var a=document.createEvent("HTMLEvents");a.initEvent(t,n,r),e.dispatchEvent(a)}}(e,"transitionend",!0)}),t+n),i=kt(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(a),i()}}function St(e,t,n,r){null==n&&(n=function(e){var t=ot(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var a=Et(e,n,r),i=kt(e,"transitionend",t);return function(){a(),i()}}function Ct(e,t){var n=ot(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function It(e,t){var n=Ct(e,"transitionDuration"),r=Ct(e,"transitionDelay"),a=St(e,(function(n){n.target===e&&(a(),t(n))}),n+r)}var Ot=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),null)};function Pt(e){e.offsetHeight}var Tt,At=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],Rt=e.forwardRef((function(n,r){var a=n.onEnter,i=n.onEntering,o=n.onEntered,s=n.onExit,u=n.onExiting,l=n.onExited,c=n.addEndListener,p=n.children,h=n.childRef,m=d(n,At),g=(0,e.useRef)(null),v=P(g,h),y=function(e){var n;v((n=e)&&"setState"in n?t.findDOMNode(n):null!=n?n:null)},b=function(e){return function(t){e&&g.current&&e(g.current,t)}},w=(0,e.useCallback)(b(a),[a]),x=(0,e.useCallback)(b(i),[i]),_=(0,e.useCallback)(b(o),[o]),N=(0,e.useCallback)(b(s),[s]),k=(0,e.useCallback)(b(u),[u]),E=(0,e.useCallback)(b(l),[l]),S=(0,e.useCallback)(b(c),[c]);return(0,B.jsx)(vt,f(f({ref:r},m),{},{onEnter:w,onEntered:_,onEntering:x,onExit:N,onExited:E,onExiting:k,addEndListener:S,nodeRef:g,children:"function"===typeof p?function(e,t){return p(e,f(f({},t),{},{ref:y}))}:e.cloneElement(p,{ref:y})}))})),Dt=Rt,Mt=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"],Lt={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function zt(e,t){var n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],r=Lt[e];return n+parseInt(ot(t,r[0]),10)+parseInt(ot(t,r[1]),10)}var jt=(l(Tt={},ft,"collapse"),l(Tt,ht,"collapsing"),l(Tt,pt,"collapsing"),l(Tt,dt,"collapse show"),Tt),Bt={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:zt},Ft=e.forwardRef((function(t,n){var r=t.onEnter,a=t.onEntering,i=t.onEntered,o=t.onExit,s=t.onExiting,u=t.className,l=t.children,c=t.dimension,p=void 0===c?"height":c,h=t.getDimensionValue,g=void 0===h?zt:h,v=d(t,Mt),y="function"===typeof p?p():p,b=(0,e.useMemo)((function(){return Ot((function(e){e.style[y]="0"}),r)}),[y,r]),w=(0,e.useMemo)((function(){return Ot((function(e){var t="scroll".concat(y[0].toUpperCase()).concat(y.slice(1));e.style[y]="".concat(e[t],"px")}),a)}),[y,a]),x=(0,e.useMemo)((function(){return Ot((function(e){e.style[y]=null}),i)}),[y,i]),_=(0,e.useMemo)((function(){return Ot((function(e){e.style[y]="".concat(g(y,e),"px"),Pt(e)}),o)}),[o,g,y]),N=(0,e.useMemo)((function(){return Ot((function(e){e.style[y]=null}),s)}),[y,s]);return(0,B.jsx)(Dt,f(f({ref:n,addEndListener:It},v),{},{"aria-expanded":v.role?v.in:null,onEnter:b,onEntering:w,onEntered:x,onExit:_,onExiting:N,childRef:l.ref,children:function(t,n){return e.cloneElement(l,f(f({},n),{},{className:m()(u,l.props.className,jt[t],"width"===y&&"collapse-horizontal")}))}}))}));Ft.defaultProps=Bt;var Vt=Ft;function Ut(e,t){return Array.isArray(e)?e.includes(t):e===t}var Wt=e.createContext({});Wt.displayName="AccordionContext";var qt=Wt,$t=["as","bsPrefix","className","children","eventKey"],Ht=e.forwardRef((function(t,n){var r=t.as,a=void 0===r?"div":r,i=t.bsPrefix,o=t.className,s=t.children,u=t.eventKey,l=d(t,$t),c=(0,e.useContext)(qt).activeEventKey;return i=te(i,"accordion-collapse"),(0,B.jsx)(Vt,f(f({ref:n,in:Ut(c,u)},l),{},{className:m()(o,i),children:(0,B.jsx)(a,{children:e.Children.only(s)})}))}));Ht.displayName="AccordionCollapse";var Kt=Ht,Gt=e.createContext({eventKey:""});Gt.displayName="AccordionItemContext";var Yt=Gt,Xt=["as","bsPrefix","className"],Jt=e.forwardRef((function(t,n){var r=t.as,a=void 0===r?"div":r,i=t.bsPrefix,o=t.className,s=d(t,Xt);i=te(i,"accordion-body");var u=(0,e.useContext)(Yt).eventKey;return(0,B.jsx)(Kt,{eventKey:u,children:(0,B.jsx)(a,f(f({ref:n},s),{},{className:m()(o,i)}))})}));Jt.displayName="AccordionBody";var Qt=Jt;function Zt(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var en=["as","bsPrefix","className","onClick"];var tn=e.forwardRef((function(t,n){var r=t.as,a=void 0===r?"button":r,i=t.bsPrefix,o=t.className,s=t.onClick,u=d(t,en);i=te(i,"accordion-button");var l=(0,e.useContext)(Yt).eventKey,c=function(t,n){var r=(0,e.useContext)(qt),a=r.activeEventKey,i=r.onSelect,o=r.alwaysOpen;return function(e){var r=t===a?null:t;o&&(r=Array.isArray(a)?a.includes(t)?a.filter((function(e){return e!==t})):[].concat(Zt(a),[t]):[t]),null==i||i(r,e),null==n||n(e)}}(l,s),p=(0,e.useContext)(qt).activeEventKey;return"button"===a&&(u.type="button"),(0,B.jsx)(a,f(f({ref:n,onClick:c},u),{},{"aria-expanded":l===p,className:m()(o,i,!Ut(p,l)&&"collapsed")}))}));tn.displayName="AccordionButton";var nn=tn,rn=["as","bsPrefix","className","children","onClick"],an=e.forwardRef((function(e,t){var n=e.as,r=void 0===n?"h2":n,a=e.bsPrefix,i=e.className,o=e.children,s=e.onClick,u=d(e,rn);return a=te(a,"accordion-header"),(0,B.jsx)(r,f(f({ref:t},u),{},{className:m()(i,a),children:(0,B.jsx)(nn,{onClick:s,children:o})}))}));an.displayName="AccordionHeader";var on=an,sn=["as","bsPrefix","className","eventKey"],un=e.forwardRef((function(t,n){var r=t.as,a=void 0===r?"div":r,i=t.bsPrefix,o=t.className,s=t.eventKey,u=d(t,sn);i=te(i,"accordion-item");var l=(0,e.useMemo)((function(){return{eventKey:s}}),[s]);return(0,B.jsx)(Yt.Provider,{value:l,children:(0,B.jsx)(a,f(f({ref:n},u),{},{className:m()(o,i)}))})}));un.displayName="AccordionItem";var ln=un,cn=["as","activeKey","bsPrefix","className","onSelect","flush","alwaysOpen"],fn=e.forwardRef((function(t,n){var r=_(t,{activeKey:"onSelect"}),a=r.as,i=void 0===a?"div":a,o=r.activeKey,s=r.bsPrefix,u=r.className,l=r.onSelect,c=r.flush,p=r.alwaysOpen,h=d(r,cn),g=te(s,"accordion"),v=(0,e.useMemo)((function(){return{activeEventKey:o,onSelect:l,alwaysOpen:p}}),[o,l,p]);return(0,B.jsx)(qt.Provider,{value:v,children:(0,B.jsx)(i,f(f({ref:n},h),{},{className:m()(u,g,c&&"".concat(g,"-flush"))}))})}));fn.displayName="Accordion";var pn,dn=Object.assign(fn,{Button:nn,Collapse:Kt,Item:ln,Header:on,Body:Qt});function hn(e){if((!pn&&0!==pn||e)&&yt){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),pn=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return pn}function mn(){return(0,e.useState)(null)}function gn(t){var n=function(t){var n=(0,e.useRef)(t);return n.current=t,n}(t);(0,e.useEffect)((function(){return function(){return n.current()}}),[])}function vn(e){void 0===e&&(e=et());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(NN){return e.body}}function yn(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function bn(){var t=(0,e.useRef)(!0),n=(0,e.useRef)((function(){return t.current}));return(0,e.useEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]),n.current}function wn(t){var n=(0,e.useRef)(null);return(0,e.useEffect)((function(){n.current=t})),n.current}function xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nn(e,t,n){return t&&_n(e.prototype,t),n&&_n(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var kn=L("modal-open"),En=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ownerDocument,r=t.handleContainerOverflow,a=void 0===r||r,i=t.isRTL,o=void 0!==i&&i;xn(this,e),this.handleContainerOverflow=a,this.isRTL=o,this.modals=[],this.ownerDocument=n}return Nn(e,[{key:"getScrollbarWidth",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}},{key:"getElement",value:function(){return(this.ownerDocument||document).body}},{key:"setModalAttributes",value:function(e){}},{key:"removeModalAttributes",value:function(e){}},{key:"setContainerStyle",value:function(e){var t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style=l({overflow:r.style.overflow},n,r.style[n]),e.scrollBarWidth&&(t[n]="".concat(parseInt(ot(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(kn,""),ot(r,t)}},{key:"reset",value:function(){var e=this;Zt(this.modals).forEach((function(t){return e.remove(t)}))}},{key:"removeContainerStyle",value:function(e){var t=this.getElement();t.removeAttribute(kn),Object.assign(t.style,e.style)}},{key:"add",value:function(e){var t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}(),Sn=En,Cn=(0,e.createContext)(yt?window:void 0);Cn.Provider;function In(){return(0,e.useContext)(Cn)}var On=function(e,t){var n;return yt?null==e?(t||et()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(n=e)&&n.nodeType&&e||null):null};var Pn,Tn=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function An(t){var n=In(),r=t||function(e){return Pn||(Pn=new Sn({ownerDocument:null==e?void 0:e.document})),Pn}(n),a=(0,e.useRef)({dialog:null,backdrop:null});return Object.assign(a.current,{add:function(){return r.add(a.current)},remove:function(){return r.remove(a.current)},isTopModal:function(){return r.isTopModal(a.current)},setDialogRef:(0,e.useCallback)((function(e){a.current.dialog=e}),[]),setBackdropRef:(0,e.useCallback)((function(e){a.current.backdrop=e}),[])})}var Rn=(0,e.forwardRef)((function(n,r){var a=n.show,i=void 0!==a&&a,o=n.role,s=void 0===o?"dialog":o,l=n.className,c=n.style,f=n.children,p=n.backdrop,d=void 0===p||p,h=n.keyboard,m=void 0===h||h,g=n.onBackdropClick,v=n.onEscapeKeyDown,y=n.transition,b=n.backdropTransition,w=n.autoFocus,x=void 0===w||w,_=n.enforceFocus,N=void 0===_||_,k=n.restoreFocus,E=void 0===k||k,S=n.restoreFocusOptions,C=n.renderDialog,I=n.renderBackdrop,O=void 0===I?function(e){return(0,B.jsx)("div",Object.assign({},e))}:I,P=n.manager,T=n.container,A=n.onShow,R=n.onHide,D=void 0===R?function(){}:R,M=n.onExit,L=n.onExited,z=n.onExiting,F=n.onEnter,V=n.onEntering,U=n.onEntered,W=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(n,Tn),q=function(t,n){var r=In(),a=u((0,e.useState)((function(){return On(t,null==r?void 0:r.document)})),2),i=a[0],o=a[1];if(!i){var s=On(t);s&&o(s)}return(0,e.useEffect)((function(){n&&i&&n(i)}),[n,i]),(0,e.useEffect)((function(){var e=On(t);e!==i&&o(e)}),[t,i]),i}(T),$=An(P),H=bn(),K=wn(i),G=u((0,e.useState)(!i),2),Y=G[0],X=G[1],J=(0,e.useRef)(null);(0,e.useImperativeHandle)(r,(function(){return $}),[$]),yt&&!K&&i&&(J.current=vn()),y||i||Y?i&&Y&&X(!1):X(!0);var Q=j((function(){if($.add(),ae.current=kt(document,"keydown",ne),re.current=kt(document,"focus",(function(){return setTimeout(ee)}),!0),A&&A(),x){var e=vn(document);$.dialog&&e&&!yn($.dialog,e)&&(J.current=e,$.dialog.focus())}})),Z=j((function(){var e;($.remove(),null==ae.current||ae.current(),null==re.current||re.current(),E)&&(null==(e=J.current)||null==e.focus||e.focus(S),J.current=null)}));(0,e.useEffect)((function(){i&&q&&Q()}),[i,q,Q]),(0,e.useEffect)((function(){Y&&Z()}),[Y,Z]),gn((function(){Z()}));var ee=j((function(){if(N&&H()&&$.isTopModal()){var e=vn();$.dialog&&e&&!yn($.dialog,e)&&$.dialog.focus()}})),te=j((function(e){e.target===e.currentTarget&&(null==g||g(e),!0===d&&D())})),ne=j((function(e){m&&27===e.keyCode&&$.isTopModal()&&(null==v||v(e),e.defaultPrevented||D())})),re=(0,e.useRef)(),ae=(0,e.useRef)(),ie=y;if(!q||!(i||ie&&!Y))return null;var oe=Object.assign({role:s,ref:$.setDialogRef,"aria-modal":"dialog"===s||void 0},W,{style:c,className:l,tabIndex:-1}),se=C?C(oe):(0,B.jsx)("div",Object.assign({},oe,{children:e.cloneElement(f,{role:"document"})}));ie&&(se=(0,B.jsx)(ie,{appear:!0,unmountOnExit:!0,in:!!i,onExit:M,onExiting:z,onExited:function(){X(!0),null==L||L.apply(void 0,arguments)},onEnter:F,onEntering:V,onEntered:U,children:se}));var ue=null;if(d){var le=b;ue=O({ref:$.setBackdropRef,onClick:te}),le&&(ue=(0,B.jsx)(le,{appear:!0,in:!!i,children:ue}))}return(0,B.jsx)(B.Fragment,{children:t.createPortal((0,B.jsxs)(B.Fragment,{children:[ue,se]}),q)})}));Rn.displayName="Modal";var Dn=Object.assign(Rn,{Manager:Sn});function Mn(e){return Mn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mn(e)}function Ln(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Mn(e)););return e}function zn(){return zn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Ln(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},zn.apply(this,arguments)}function jn(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Bn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(NN){return!1}}();return function(){var n,r=Mn(e);if(t){var a=Mn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return jn(this,n)}}function Fn(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var Vn,Un=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Wn=".sticky-top",qn=".navbar-toggler",$n=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&st(e,t)}(n,e);var t=Bn(n);function n(){return xn(this,n),t.apply(this,arguments)}return Nn(n,[{key:"adjustAndStore",value:function(e,t,n){var r=t.style[e];t.dataset[e]=r,ot(t,l({},e,"".concat(parseFloat(ot(t,e))+n,"px")))}},{key:"restore",value:function(e,t){var n=t.dataset[e];void 0!==n&&(delete t.dataset[e],ot(t,l({},e,n)))}},{key:"setContainerStyle",value:function(e){var t=this;zn(Mn(n.prototype),"setContainerStyle",this).call(this,e);var r,a,i=this.getElement();if(a="modal-open",(r=i).classList?r.classList.add(a):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,a)||("string"===typeof r.className?r.className=r.className+" "+a:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+a)),e.scrollBarWidth){var o=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";C(i,Un).forEach((function(n){return t.adjustAndStore(o,n,e.scrollBarWidth)})),C(i,Wn).forEach((function(n){return t.adjustAndStore(s,n,-e.scrollBarWidth)})),C(i,qn).forEach((function(n){return t.adjustAndStore(s,n,e.scrollBarWidth)}))}}},{key:"removeContainerStyle",value:function(e){var t=this;zn(Mn(n.prototype),"removeContainerStyle",this).call(this,e);var r,a,i=this.getElement();a="modal-open",(r=i).classList?r.classList.remove(a):"string"===typeof r.className?r.className=Fn(r.className,a):r.setAttribute("class",Fn(r.className&&r.className.baseVal||"",a));var o=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";C(i,Un).forEach((function(e){return t.restore(o,e)})),C(i,Wn).forEach((function(e){return t.restore(s,e)})),C(i,qn).forEach((function(e){return t.restore(s,e)}))}}]),n}(Sn);function Hn(e){return Vn||(Vn=new $n(e)),Vn}var Kn,Gn=$n,Yn=["className","children","transitionClasses"],Xn=(l(Kn={},pt,"show"),l(Kn,dt,"show"),Kn),Jn=e.forwardRef((function(t,n){var r=t.className,a=t.children,i=t.transitionClasses,o=void 0===i?{}:i,s=d(t,Yn),u=(0,e.useCallback)((function(e,t){Pt(e),null==s.onEnter||s.onEnter(e,t)}),[s]);return(0,B.jsx)(Dt,f(f({ref:n,addEndListener:It},s),{},{onEnter:u,childRef:a.ref,children:function(t,n){return e.cloneElement(a,f(f({},n),{},{className:m()("fade",r,a.props.className,Xn[t],o[t])}))}}))}));Jn.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},Jn.displayName="Fade";var Qn=Jn,Zn=ve("modal-body"),er=e.createContext({onHide:function(){}}),tr=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],nr=e.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.contentClassName,i=e.centered,o=e.size,s=e.fullscreen,u=e.children,l=e.scrollable,c=d(e,tr);n=te(n,"modal");var p="".concat(n,"-dialog"),h="string"===typeof s?"".concat(n,"-fullscreen-").concat(s):"".concat(n,"-fullscreen");return(0,B.jsx)("div",f(f({},c),{},{ref:t,className:m()(p,r,o&&"".concat(n,"-").concat(o),i&&"".concat(p,"-centered"),l&&"".concat(p,"-scrollable"),s&&h),children:(0,B.jsx)("div",{className:m()("".concat(n,"-content"),a),children:u})}))}));nr.displayName="ModalDialog";var rr=nr,ar=ve("modal-footer"),ir=["className","variant"],or={"aria-label":Ke().string,onClick:Ke().func,variant:Ke().oneOf(["white"])},sr=e.forwardRef((function(e,t){var n=e.className,r=e.variant,a=d(e,ir);return(0,B.jsx)("button",f({ref:t,type:"button",className:m()("btn-close",r&&"btn-close-".concat(r),n)},a))}));sr.displayName="CloseButton",sr.propTypes=or,sr.defaultProps={"aria-label":"Close"};var ur=sr,lr=["closeLabel","closeVariant","closeButton","onHide","children"],cr=e.forwardRef((function(t,n){var r=t.closeLabel,a=t.closeVariant,i=t.closeButton,o=t.onHide,s=t.children,u=d(t,lr),l=(0,e.useContext)(er),c=j((function(){null==l||l.onHide(),null==o||o()}));return(0,B.jsxs)("div",f(f({ref:n},u),{},{children:[s,i&&(0,B.jsx)(ur,{"aria-label":r,variant:a,onClick:c})]}))}));cr.defaultProps={closeLabel:"Close",closeButton:!1};var fr=cr,pr=["bsPrefix","className"],dr=e.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=d(e,pr);return n=te(n,"modal-header"),(0,B.jsx)(fr,f(f({ref:t},a),{},{className:m()(r,n)}))}));dr.displayName="ModalHeader",dr.defaultProps={closeLabel:"Close",closeButton:!1};var hr=dr,mr=ve("modal-title",{Component:ye("h4")}),gr=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"],vr={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,animation:!0,dialogAs:rr};function yr(e){return(0,B.jsx)(Qn,f(f({},e),{},{timeout:null}))}function br(e){return(0,B.jsx)(Qn,f(f({},e),{},{timeout:null}))}var wr=e.forwardRef((function(t,n){var r=t.bsPrefix,a=t.className,i=t.style,o=t.dialogClassName,s=t.contentClassName,l=t.children,c=t.dialogAs,p=t["aria-labelledby"],h=t["aria-describedby"],g=t["aria-label"],v=t.show,y=t.animation,b=t.backdrop,w=t.keyboard,x=t.onEscapeKeyDown,_=t.onShow,N=t.onHide,k=t.container,E=t.autoFocus,S=t.enforceFocus,C=t.restoreFocus,I=t.restoreFocusOptions,O=t.onEntered,T=t.onExit,A=t.onExiting,R=t.onEnter,D=t.onEntering,M=t.onExited,L=t.backdropClassName,z=t.manager,F=d(t,gr),V=u((0,e.useState)({}),2),U=V[0],W=V[1],q=u((0,e.useState)(!1),2),$=q[0],H=q[1],K=(0,e.useRef)(!1),G=(0,e.useRef)(!1),Y=(0,e.useRef)(null),X=u(mn(),2),J=X[0],Q=X[1],Z=P(n,Q),ee=j(N),ne=re();r=te(r,"modal");var ae=(0,e.useMemo)((function(){return{onHide:ee}}),[ee]);function ie(){return z||Hn({isRTL:ne})}function oe(e){if(yt){var t=ie().getScrollbarWidth()>0,n=e.scrollHeight>et(e).documentElement.clientHeight;W({paddingRight:t&&!n?hn():void 0,paddingLeft:!t&&n?hn():void 0})}}var se=j((function(){J&&oe(J.dialog)}));gn((function(){Nt(window,"resize",se),null==Y.current||Y.current()}));var ue=function(){K.current=!0},le=function(e){K.current&&J&&e.target===J.dialog&&(G.current=!0),K.current=!1},ce=function(){H(!0),Y.current=St(J.dialog,(function(){H(!1)}))},fe=function(e){"static"!==b?G.current||e.target!==e.currentTarget?G.current=!1:null==N||N():function(e){e.target===e.currentTarget&&ce()}(e)},pe=(0,e.useCallback)((function(e){return(0,B.jsx)("div",f(f({},e),{},{className:m()("".concat(r,"-backdrop"),L,!y&&"show")}))}),[y,L,r]),de=f(f({},i),U);de.display="block";return(0,B.jsx)(er.Provider,{value:ae,children:(0,B.jsx)(Dn,{show:v,ref:Z,backdrop:b,container:k,keyboard:!0,autoFocus:E,enforceFocus:S,restoreFocus:C,restoreFocusOptions:I,onEscapeKeyDown:function(e){w||"static"!==b?w&&x&&x(e):(e.preventDefault(),ce())},onShow:_,onHide:N,onEnter:function(e,t){e&&oe(e),null==R||R(e,t)},onEntering:function(e,t){null==D||D(e,t),_t(window,"resize",se)},onEntered:O,onExit:function(e){null==Y.current||Y.current(),null==T||T(e)},onExiting:A,onExited:function(e){e&&(e.style.display=""),null==M||M(e),Nt(window,"resize",se)},manager:ie(),transition:y?yr:void 0,backdropTransition:y?br:void 0,renderBackdrop:pe,renderDialog:function(e){return(0,B.jsx)("div",f(f({role:"dialog"},e),{},{style:de,className:m()(a,r,$&&"".concat(r,"-static")),onClick:b?fe:void 0,onMouseUp:le,"aria-label":g,"aria-labelledby":p,"aria-describedby":h,children:(0,B.jsx)(c,f(f({},F),{},{onMouseDown:ue,className:o,contentClassName:s,children:l}))}))}})})}));wr.displayName="Modal",wr.defaultProps=vr;var xr=Object.assign(wr,{Body:Zn,Header:hr,Title:mr,Footer:ar,Dialog:rr,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),_r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Nr=e.createContext&&e.createContext(_r),kr=function(){return kr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},kr.apply(this,arguments)},Er=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function Sr(t){return t&&t.map((function(t,n){return e.createElement(t.tag,kr({key:n},t.attr),Sr(t.child))}))}function Cr(t){return function(n){return e.createElement(Ir,kr({attr:kr({},t.attr)},n),Sr(t.child))}}function Ir(t){var n=function(n){var r,a=t.attr,i=t.size,o=t.title,s=Er(t,["attr","size","title"]),u=i||n.size||"1em";return n.className&&(r=n.className),t.className&&(r=(r?r+" ":"")+t.className),e.createElement("svg",kr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,s,{className:r,style:kr(kr({color:t.color||n.color},n.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&e.createElement("title",null,o),t.children)};return void 0!==Nr?e.createElement(Nr.Consumer,null,(function(e){return n(e)})):n(_r)}function Or(e){return Cr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function Pr(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Tr(e){return!!e&&!!e[ya]}function Ar(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===ba}(e)||Array.isArray(e)||!!e[va]||!!e.constructor[va]||Br(e)||Fr(e))}function Rr(e,t,n){void 0===n&&(n=!1),0===Dr(e)?(n?Object.keys:wa)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function Dr(e){var t=e[ya];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Br(e)?2:Fr(e)?3:0}function Mr(e,t){return 2===Dr(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Lr(e,t){return 2===Dr(e)?e.get(t):e[t]}function zr(e,t,n){var r=Dr(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function jr(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function Br(e){return da&&e instanceof Map}function Fr(e){return ha&&e instanceof Set}function Vr(e){return e.o||e.t}function Ur(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=xa(e);delete t[ya];for(var n=wa(t),r=0;r<n.length;r++){var a=n[r],i=t[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function Wr(e,t){return void 0===t&&(t=!1),$r(e)||Tr(e)||!Ar(e)||(Dr(e)>1&&(e.set=e.add=e.clear=e.delete=qr),Object.freeze(e),t&&Rr(e,(function(e,t){return Wr(t,!0)}),!0)),e}function qr(){Pr(2)}function $r(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Hr(e){var t=_a[e];return t||Pr(18,e),t}function Kr(){return fa}function Gr(e,t){t&&(Hr("Patches"),e.u=[],e.s=[],e.v=t)}function Yr(e){Xr(e),e.p.forEach(Qr),e.p=null}function Xr(e){e===fa&&(fa=e.l)}function Jr(e){return fa={p:[],l:fa,h:e,m:!0,_:0}}function Qr(e){var t=e[ya];0===t.i||1===t.i?t.j():t.O=!0}function Zr(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||Hr("ES5").S(t,e,r),r?(n[ya].P&&(Yr(t),Pr(4)),Ar(e)&&(e=ea(t,e),t.l||na(t,e)),t.u&&Hr("Patches").M(n[ya].t,e,t.u,t.s)):e=ea(t,n,[]),Yr(t),t.u&&t.v(t.u,t.s),e!==ga?e:void 0}function ea(e,t,n){if($r(t))return t;var r=t[ya];if(!r)return Rr(t,(function(a,i){return ta(e,r,t,a,i,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return na(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var a=4===r.i||5===r.i?r.o=Ur(r.k):r.o;Rr(3===r.i?new Set(a):a,(function(t,i){return ta(e,r,a,t,i,n)})),na(e,a,!1),n&&e.u&&Hr("Patches").R(r,n,e.u,e.s)}return r.o}function ta(e,t,n,r,a,i){if(Tr(a)){var o=ea(e,a,i&&t&&3!==t.i&&!Mr(t.D,r)?i.concat(r):void 0);if(zr(n,r,o),!Tr(o))return;e.m=!1}if(Ar(a)&&!$r(a)){if(!e.h.F&&e._<1)return;ea(e,a),t&&t.A.l||na(e,a)}}function na(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&Wr(t,n)}function ra(e,t){var n=e[ya];return(n?Vr(n):e)[t]}function aa(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function ia(e){e.P||(e.P=!0,e.l&&ia(e.l))}function oa(e){e.o||(e.o=Ur(e.t))}function sa(e,t,n){var r=Br(t)?Hr("MapSet").N(t,n):Fr(t)?Hr("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Kr(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},a=r,i=Na;n&&(a=[r],i=ka);var o=Proxy.revocable(a,i),s=o.revoke,u=o.proxy;return r.k=u,r.j=s,u}(t,n):Hr("ES5").J(t,n);return(n?n.A:Kr()).p.push(r),r}function ua(e){return Tr(e)||Pr(22,e),function e(t){if(!Ar(t))return t;var n,r=t[ya],a=Dr(t);if(r){if(!r.P&&(r.i<4||!Hr("ES5").K(r)))return r.t;r.I=!0,n=la(t,a),r.I=!1}else n=la(t,a);return Rr(n,(function(t,a){r&&Lr(r.t,t)===a||zr(n,t,e(a))})),3===a?new Set(n):n}(e)}function la(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Ur(e)}var ca,fa,pa="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),da="undefined"!=typeof Map,ha="undefined"!=typeof Set,ma="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,ga=pa?Symbol.for("immer-nothing"):((ca={})["immer-nothing"]=!0,ca),va=pa?Symbol.for("immer-draftable"):"__$immer_draftable",ya=pa?Symbol.for("immer-state"):"__$immer_state",ba=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),wa="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,xa=Object.getOwnPropertyDescriptors||function(e){var t={};return wa(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},_a={},Na={get:function(e,t){if(t===ya)return e;var n=Vr(e);if(!Mr(n,t))return function(e,t,n){var r,a=aa(t,n);return a?"value"in a?a.value:null===(r=a.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!Ar(r)?r:r===ra(e.t,t)?(oa(e),e.o[t]=sa(e.A.h,r,e)):r},has:function(e,t){return t in Vr(e)},ownKeys:function(e){return Reflect.ownKeys(Vr(e))},set:function(e,t,n){var r=aa(Vr(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var a=ra(Vr(e),t),i=null==a?void 0:a[ya];if(i&&i.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(jr(n,a)&&(void 0!==n||Mr(e.t,t)))return!0;oa(e),ia(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==ra(e.t,t)||t in e.t?(e.D[t]=!1,oa(e),ia(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Vr(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){Pr(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Pr(12)}},ka={};Rr(Na,(function(e,t){ka[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),ka.deleteProperty=function(e,t){return ka.set.call(this,e,t,void 0)},ka.set=function(e,t,n){return Na.set.call(this,e[0],t,n,e[0])};var Ea=function(){function e(e){var t=this;this.g=ma,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var a=n;n=e;var i=t;return function(e){var t=this;void 0===e&&(e=a);for(var r=arguments.length,o=Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return i.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&Pr(6),void 0!==r&&"function"!=typeof r&&Pr(7),Ar(e)){var s=Jr(t),u=sa(t,e,void 0),l=!0;try{o=n(u),l=!1}finally{l?Yr(s):Xr(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return Gr(s,r),Zr(e,s)}),(function(e){throw Yr(s),e})):(Gr(s,r),Zr(o,s))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===ga&&(o=void 0),t.F&&Wr(o,!0),r){var c=[],f=[];Hr("Patches").M(e,o,c,f),r(c,f)}return o}Pr(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,a=Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(a))}))};var r,a,i=t.produce(e,n,(function(e,t){r=e,a=t}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,r,a]})):[i,r,a]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){Ar(e)||Pr(8),Tr(e)&&(e=ua(e));var t=Jr(this),n=sa(this,e,void 0);return n[ya].C=!0,Xr(t),n},t.finishDraft=function(e,t){var n=(e&&e[ya]).A;return Gr(n,t),Zr(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!ma&&Pr(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var a=Hr("Patches").$;return Tr(e)?a(e,t):this.produce(e,(function(e){return a(e,t)}))},e}(),Sa=new Ea,Ca=Sa.produce,Ia=(Sa.produceWithPatches.bind(Sa),Sa.setAutoFreeze.bind(Sa),Sa.setUseProxies.bind(Sa),Sa.applyPatches.bind(Sa),Sa.createDraft.bind(Sa),Sa.finishDraft.bind(Sa),Ca),Oa=function(e){var t,n=new Set,r=function(e,r){var a="function"===typeof e?e(t):e;if(!Object.is(a,t)){var i=t;t=(null!=r?r:"object"!==typeof a)?a:Object.assign({},t,a),n.forEach((function(e){return e(t,i)}))}},a=function(){return t},i={setState:r,getState:a,subscribe:function(e){return n.add(e),function(){return n.delete(e)}},destroy:function(){console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(r,a,i),i},Pa=function(e){return e?Oa(e):Oa},Ta=__webpack_require__(327).useSyncExternalStoreWithSelector;var Aa=function(t){"function"!==typeof t&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");var n="function"===typeof t?Pa(t):t,r=function(t,r){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getState,r=arguments.length>2?arguments[2]:void 0,a=Ta(t.subscribe,t.getState,t.getServerState||t.getState,n,r);return(0,e.useDebugValue)(a),a}(n,t,r)};return Object.assign(r,n),r},Ra=function(e){return e?Aa(e):Aa},Da=["enabled","anonymousActionType","store"],Ma=["connection"],La=new Map,za=function(e){var t=La.get(e);return t?Object.fromEntries(Object.entries(t.stores).map((function(e){var t=u(e,2);return[t[0],t[1].getState()]}))):{}},ja=function(e,t,n){if(void 0===e)return{type:"untracked",connection:t.connect(n)};var r=La.get(n.name);if(r)return f({type:"tracked",store:e},r);var a={connection:t.connect(n),stores:{}};return La.set(n.name,a),f({type:"tracked",store:e},a)},Ba=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r,a){var i,o=t.enabled,s=t.anonymousActionType,c=t.store,p=d(t,Da);try{i=(null==o||o)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(NN){}if(!i)return o&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(n,r,a);var h=ja(c,i,p),m=h.connection,g=d(h,Ma),v=!0;a.setState=function(e,t,i){var o=n(e,t);if(!v)return o;var u=void 0===i?{type:s||"anonymous"}:"string"===typeof i?{type:i}:i;return void 0===c?(null==m||m.send(u,r()),o):(null==m||m.send(f(f({},u),{},{type:"".concat(c,"/").concat(u.type)}),f(f({},za(p.name)),{},l({},c,a.getState()))),o)};var y=function(){var e=v;v=!1,n.apply(void 0,arguments),v=e},b=e(a.setState,r,a);if("untracked"===g.type?null==m||m.init(b):(g.stores[g.store]=a,null==m||m.init(Object.fromEntries(Object.entries(g.stores).map((function(e){var t=u(e,2),n=t[0],r=t[1];return[n,n===g.store?b:r.getState()]}))))),a.dispatchFromDevtools&&"function"===typeof a.dispatch){var w=!1,x=a.dispatch;a.dispatch=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"__setState"!==t[0].type||w||(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),w=!0),x.apply(void 0,t)}}return m.subscribe((function(e){var t;switch(e.type){case"ACTION":return"string"!==typeof e.payload?void console.error("[zustand devtools middleware] Unsupported action format"):Fa(e.payload,(function(e){if("__setState"!==e.type)a.dispatchFromDevtools&&"function"===typeof a.dispatch&&a.dispatch(e);else{if(void 0===c)return void y(e.state);1!==Object.keys(e.state).length&&console.error('\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using \'store\' option in devtools(), the \'state\' should have only one key, which is a value of \'store\' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }\n                    ');var t=e.state[c];if(void 0===t||null===t)return;JSON.stringify(a.getState())!==JSON.stringify(t)&&y(t)}}));case"DISPATCH":switch(e.payload.type){case"RESET":return y(b),void 0===c?null==m?void 0:m.init(a.getState()):null==m?void 0:m.init(za(p.name));case"COMMIT":return void 0===c?void(null==m||m.init(a.getState())):null==m?void 0:m.init(za(p.name));case"ROLLBACK":return Fa(e.state,(function(e){if(void 0===c)return y(e),void(null==m||m.init(a.getState()));y(e[c]),null==m||m.init(za(p.name))}));case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Fa(e.state,(function(e){void 0!==c?JSON.stringify(a.getState())!==JSON.stringify(e[c])&&y(e[c]):y(e)}));case"IMPORT_STATE":var n=e.payload.nextLiftedState,r=null==(t=n.computedStates.slice(-1)[0])?void 0:t.state;if(!r)return;return y(void 0===c?r:r[c]),void(null==m||m.send(null,n));case"PAUSE_RECORDING":return v=!v}return}})),b}},Fa=function(e,t){var n;try{n=JSON.parse(e)}catch(NN){console.error("[zustand devtools middleware] Could not parse the received json",NN)}void 0!==n&&t(n)};function Va(e){var t;try{t=e()}catch(NN){return}var n={getItem:function(e){var n,r=function(e){return null===e?null:JSON.parse(e)},a=null!=(n=t.getItem(e))?n:null;return a instanceof Promise?a.then(r):r(a)},setItem:function(e,n){return t.setItem(e,JSON.stringify(n))},removeItem:function(e){return t.removeItem(e)}};return n}var Ua=function e(t){return function(n){try{var r=t(n);return r instanceof Promise?r:{then:function(t){return e(t)(r)},catch:function(e){return this}}}catch(NN){return{then:function(e){return this},catch:function(n){return e(n)(NN)}}}}},Wa=function(e,t){return"getStorage"in t||"serialize"in t||"deserialize"in t?(console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),function(e,t){return function(n,r,a){var i,o=f({getStorage:function(){return localStorage},serialize:JSON.stringify,deserialize:JSON.parse,partialize:function(e){return e},version:0,merge:function(e,t){return f(f({},t),e)}},t),s=!1,u=new Set,l=new Set;try{i=o.getStorage()}catch(NN){}if(!i)return e((function(){console.warn("[zustand persist middleware] Unable to update item '".concat(o.name,"', the given storage is currently unavailable.")),n.apply(void 0,arguments)}),r,a);var c=Ua(o.serialize),p=function(){var e,t=o.partialize(f({},r())),n=c({state:t,version:o.version}).then((function(e){return i.setItem(o.name,e)})).catch((function(t){e=t}));if(e)throw e;return n},d=a.setState;a.setState=function(e,t){d(e,t),p()};var h,m=e((function(){n.apply(void 0,arguments),p()}),r,a),g=function(){var e;if(i){s=!1,u.forEach((function(e){return e(r())}));var t=(null==(e=o.onRehydrateStorage)?void 0:e.call(o,r()))||void 0;return Ua(i.getItem.bind(i))(o.name).then((function(e){if(e)return o.deserialize(e)})).then((function(e){if(e){if("number"!==typeof e.version||e.version===o.version)return e.state;if(o.migrate)return o.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((function(e){var t;return h=o.merge(e,null!=(t=r())?t:m),n(h,!0),p()})).then((function(){null==t||t(h,void 0),s=!0,l.forEach((function(e){return e(h)}))})).catch((function(e){null==t||t(void 0,e)}))}};return a.persist={setOptions:function(e){o=f(f({},o),e),e.getStorage&&(i=e.getStorage())},clearStorage:function(){null==i||i.removeItem(o.name)},getOptions:function(){return o},rehydrate:function(){return g()},hasHydrated:function(){return s},onHydrate:function(e){return u.add(e),function(){u.delete(e)}},onFinishHydration:function(e){return l.add(e),function(){l.delete(e)}}},g(),h||m}}(e,t)):function(e,t){return function(n,r,a){var i=f({storage:Va((function(){return localStorage})),partialize:function(e){return e},version:0,merge:function(e,t){return f(f({},t),e)}},t),o=!1,s=new Set,u=new Set,l=i.storage;if(!l)return e((function(){console.warn("[zustand persist middleware] Unable to update item '".concat(i.name,"', the given storage is currently unavailable.")),n.apply(void 0,arguments)}),r,a);var c=function(){var e=i.partialize(f({},r()));return l.setItem(i.name,{state:e,version:i.version})},p=a.setState;a.setState=function(e,t){p(e,t),c()};var d,h=e((function(){n.apply(void 0,arguments),c()}),r,a),m=function(){var e,t;if(l){o=!1,s.forEach((function(e){var t;return e(null!=(t=r())?t:h)}));var a=(null==(t=i.onRehydrateStorage)?void 0:t.call(i,null!=(e=r())?e:h))||void 0;return Ua(l.getItem.bind(l))(i.name).then((function(e){if(e){if("number"!==typeof e.version||e.version===i.version)return e.state;if(i.migrate)return i.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((function(e){var t;return d=i.merge(e,null!=(t=r())?t:h),n(d,!0),c()})).then((function(){null==a||a(d,void 0),d=r(),o=!0,u.forEach((function(e){return e(d)}))})).catch((function(e){null==a||a(void 0,e)}))}};return a.persist={setOptions:function(e){i=f(f({},i),e),e.storage&&(l=e.storage)},clearStorage:function(){null==l||l.removeItem(i.name)},getOptions:function(){return i},rehydrate:function(){return m()},hasHydrated:function(){return o},onHydrate:function(e){return s.add(e),function(){s.delete(e)}},onFinishHydration:function(e){return u.add(e),function(){u.delete(e)}}},i.skipHydration||m(),d||h}}(e,t)},qa=(Ra()(Ba(Wa((function(e){return{bears:0,increase:function(t){return e((function(e){return{bears:e.bears+t}}))}}}),{name:"bear-storage"}))),Ra()((function(e,t){return{data:{group_a:{label:"",dataset:[],corporate_score:[],selected:[],validate_selected:[]},group_b:{label:"",dataset:[],corporate_score:[],selected:[],validate_selected:[]},header:"",prompt_header:"",prompt_body:"",validation_pool:[],homepage_prompt:""},setData:function(t){return e({data:t})},getData:function(e){return t().data[e]},updateGroupSelection:function(t,n){return e(Ia((function(e){e.data[t]=f(f({},e.data[t]),n)})))}}}))),$a=Ra()((function(e,t){return{predictions:[],updatePredictions:function(t){return e((function(e){return{predictions:[].concat(Zt(e.predictions),[t])}}))},setValue:function(t,n){e((function(e){return f(f({},e),{},l({},t,n))}))}}})),Ha=32,Ka=31,Ga={};function Ya(e){e&&(e.value=!0)}function Xa(){}function Ja(e){return void 0===e.size&&(e.size=e.__iterate(Za)),e.size}function Qa(e,t){if("number"!==typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?Ja(e)+t:t}function Za(){return!0}function ei(e,t,n){return(0===e&&!ai(e)||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function ti(e,t){return ri(e,t,0)}function ni(e,t){return ri(e,t,t)}function ri(e,t,n){return void 0===e?n:ai(e)?t===1/0?t:0|Math.max(0,t+e):void 0===t||t===e?e:0|Math.min(t,e)}function ai(e){return e<0||0===e&&1/e===-1/0}var ii="@@__IMMUTABLE_ITERABLE__@@";function oi(e){return Boolean(e&&e[ii])}var si="@@__IMMUTABLE_KEYED__@@";function ui(e){return Boolean(e&&e[si])}var li="@@__IMMUTABLE_INDEXED__@@";function ci(e){return Boolean(e&&e[li])}function fi(e){return ui(e)||ci(e)}var pi=function(e){return oi(e)?e:Mi(e)},di=function(e){function t(e){return ui(e)?e:Li(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(pi),hi=function(e){function t(e){return ci(e)?e:zi(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(pi),mi=function(e){function t(e){return oi(e)&&!fi(e)?e:ji(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(pi);pi.Keyed=di,pi.Indexed=hi,pi.Set=mi;var gi="@@__IMMUTABLE_SEQ__@@";function vi(e){return Boolean(e&&e[gi])}var yi="@@__IMMUTABLE_RECORD__@@";function bi(e){return Boolean(e&&e[yi])}function wi(e){return oi(e)||bi(e)}var xi="@@__IMMUTABLE_ORDERED__@@";function _i(e){return Boolean(e&&e[xi])}var Ni="function"===typeof Symbol&&Symbol.iterator,ki="@@iterator",Ei=Ni||ki,Si=function(e){this.next=e};function Ci(e,t,n,r){var a=0===e?t:1===e?n:[t,n];return r?r.value=a:r={value:a,done:!1},r}function Ii(){return{value:void 0,done:!0}}function Oi(e){return!!Array.isArray(e)||!!Ai(e)}function Pi(e){return e&&"function"===typeof e.next}function Ti(e){var t=Ai(e);return t&&t.call(e)}function Ai(e){var t=e&&(Ni&&e[Ni]||e["@@iterator"]);if("function"===typeof t)return t}Si.prototype.toString=function(){return"[Iterator]"},Si.KEYS=0,Si.VALUES=1,Si.ENTRIES=2,Si.prototype.inspect=Si.prototype.toSource=function(){return this.toString()},Si.prototype[Ei]=function(){return this};var Ri=Object.prototype.hasOwnProperty;function Di(e){return!(!Array.isArray(e)&&"string"!==typeof e)||e&&"object"===typeof e&&Number.isInteger(e.length)&&e.length>=0&&(0===e.length?1===Object.keys(e).length:e.hasOwnProperty(e.length-1))}var Mi=function(e){function t(e){return void 0===e||null===e?Wi():wi(e)?e.toSeq():function(e){var t=Hi(e);if(t)return function(e){var t=Ai(e);return t&&t===e.entries}(e)?t.fromEntrySeq():function(e){var t=Ai(e);return t&&t===e.keys}(e)?t.toSetSeq():t;if("object"===typeof e)return new Fi(e);throw new TypeError("Expected Array or collection object of values, or keyed object: "+e)}(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(e,t){var n=this._cache;if(n){for(var r=n.length,a=0;a!==r;){var i=n[t?r-++a:a++];if(!1===e(i[1],i[0],this))break}return a}return this.__iterateUncached(e,t)},t.prototype.__iterator=function(e,t){var n=this._cache;if(n){var r=n.length,a=0;return new Si((function(){if(a===r)return{value:void 0,done:!0};var i=n[t?r-++a:a++];return Ci(e,i[0],i[1])}))}return this.__iteratorUncached(e,t)},t}(pi),Li=function(e){function t(e){return void 0===e||null===e?Wi().toKeyedSeq():oi(e)?ui(e)?e.toSeq():e.fromEntrySeq():bi(e)?e.toSeq():qi(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t}(Mi),zi=function(e){function t(e){return void 0===e||null===e?Wi():oi(e)?ui(e)?e.entrySeq():e.toIndexedSeq():bi(e)?e.toSeq().entrySeq():$i(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t}(Mi),ji=function(e){function t(e){return(oi(e)&&!fi(e)?e:zi(e)).toSetSeq()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t}(Mi);Mi.isSeq=vi,Mi.Keyed=Li,Mi.Set=ji,Mi.Indexed=zi,Mi.prototype[gi]=!0;var Bi=function(e){function t(e){this._array=e,this.size=e.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this.has(e)?this._array[Qa(this,e)]:t},t.prototype.__iterate=function(e,t){for(var n=this._array,r=n.length,a=0;a!==r;){var i=t?r-++a:a++;if(!1===e(n[i],i,this))break}return a},t.prototype.__iterator=function(e,t){var n=this._array,r=n.length,a=0;return new Si((function(){if(a===r)return{value:void 0,done:!0};var i=t?r-++a:a++;return Ci(e,i,n[i])}))},t}(zi),Fi=function(e){function t(e){var t=Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]);this._object=e,this._keys=t,this.size=t.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},t.prototype.has=function(e){return Ri.call(this._object,e)},t.prototype.__iterate=function(e,t){for(var n=this._object,r=this._keys,a=r.length,i=0;i!==a;){var o=r[t?a-++i:i++];if(!1===e(n[o],o,this))break}return i},t.prototype.__iterator=function(e,t){var n=this._object,r=this._keys,a=r.length,i=0;return new Si((function(){if(i===a)return{value:void 0,done:!0};var o=r[t?a-++i:i++];return Ci(e,o,n[o])}))},t}(Li);Fi.prototype[xi]=!0;var Vi,Ui=function(e){function t(e){this._collection=e,this.size=e.length||e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=Ti(this._collection),r=0;if(Pi(n))for(var a;!(a=n.next()).done&&!1!==e(a.value,r++,this););return r},t.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=Ti(this._collection);if(!Pi(n))return new Si(Ii);var r=0;return new Si((function(){var t=n.next();return t.done?t:Ci(e,r++,t.value)}))},t}(zi);function Wi(){return Vi||(Vi=new Bi([]))}function qi(e){var t=Hi(e);if(t)return t.fromEntrySeq();if("object"===typeof e)return new Fi(e);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+e)}function $i(e){var t=Hi(e);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+e)}function Hi(e){return Di(e)?new Bi(e):Oi(e)?new Ui(e):void 0}var Ki="@@__IMMUTABLE_MAP__@@";function Gi(e){return Boolean(e&&e[Ki])}function Yi(e){return Gi(e)&&_i(e)}function Xi(e){return Boolean(e&&"function"===typeof e.equals&&"function"===typeof e.hashCode)}function Ji(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if("function"===typeof e.valueOf&&"function"===typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!==e&&t!==t)return!0;if(!e||!t)return!1}return!!(Xi(e)&&Xi(t)&&e.equals(t))}var Qi="function"===typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var n=65535&(e|=0),r=65535&(t|=0);return n*r+((e>>>16)*r+n*(t>>>16)<<16>>>0)|0};function Zi(e){return e>>>1&1073741824|3221225471&e}var eo=Object.prototype.valueOf;function to(e){if(null==e)return no(e);if("function"===typeof e.hashCode)return Zi(e.hashCode(e));var t,n=(t=e).valueOf!==eo&&"function"===typeof t.valueOf?t.valueOf(t):t;if(null==n)return no(n);switch(typeof n){case"boolean":return n?1108378657:1108378656;case"number":return function(e){if(e!==e||e===1/0)return 0;var t=0|e;t!==e&&(t^=4294967295*e);for(;e>4294967295;)t^=e/=4294967295;return Zi(t)}(n);case"string":return n.length>po?function(e){var t=go[e];void 0===t&&(t=ro(e),mo===ho&&(mo=0,go={}),mo++,go[e]=t);return t}(n):ro(n);case"object":case"function":return function(e){var t;if(uo&&void 0!==(t=so.get(e)))return t;if(void 0!==(t=e[fo]))return t;if(!io){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[fo]))return t;if(void 0!==(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e)))return t}if(t=oo(),uo)so.set(e,t);else{if(void 0!==ao&&!1===ao(e))throw new Error("Non-extensible objects are not allowed as keys.");if(io)Object.defineProperty(e,fo,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[fo]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[fo]=t}}return t}(n);case"symbol":return function(e){var t=lo[e];if(void 0!==t)return t;return t=oo(),lo[e]=t,t}(n);default:if("function"===typeof n.toString)return ro(n.toString());throw new Error("Value type "+typeof n+" cannot be hashed.")}}function no(e){return null===e?1108378658:1108378659}function ro(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return Zi(t)}var ao=Object.isExtensible,io=function(){try{return Object.defineProperty({},"@",{}),!0}catch(NN){return!1}}();function oo(){var e=++co;return 1073741824&co&&(co=0),e}var so,uo="function"===typeof WeakMap;uo&&(so=new WeakMap);var lo=Object.create(null),co=0,fo="__immutablehash__";"function"===typeof Symbol&&(fo=Symbol(fo));var po=16,ho=255,mo=0,go={},vo=function(e){function t(e,t){this._iter=e,this._useKeys=t,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this._iter.get(e,t)},t.prototype.has=function(e){return this._iter.has(e)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var e=this,t=No(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},t.prototype.map=function(e,t){var n=this,r=_o(this,e,t);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(e,t)}),r},t.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t,r){return e(t,r,n)}),t)},t.prototype.__iterator=function(e,t){return this._iter.__iterator(e,t)},t}(Li);vo.prototype[xi]=!0;var yo=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.includes=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var n=this,r=0;return t&&Ja(this),this._iter.__iterate((function(a){return e(a,t?n.size-++r:r++,n)}),t)},t.prototype.__iterator=function(e,t){var n=this,r=this._iter.__iterator(1,t),a=0;return t&&Ja(this),new Si((function(){var i=r.next();return i.done?i:Ci(e,t?n.size-++a:a++,i.value,i)}))},t}(zi),bo=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.has=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t){return e(t,t,n)}),t)},t.prototype.__iterator=function(e,t){var n=this._iter.__iterator(1,t);return new Si((function(){var t=n.next();return t.done?t:Ci(e,t.value,t.value,t)}))},t}(ji),wo=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t){if(t){Do(t);var r=oi(t);return e(r?t.get(1):t[1],r?t.get(0):t[0],n)}}),t)},t.prototype.__iterator=function(e,t){var n=this._iter.__iterator(1,t);return new Si((function(){for(;;){var t=n.next();if(t.done)return t;var r=t.value;if(r){Do(r);var a=oi(r);return Ci(e,a?r.get(0):r[0],a?r.get(1):r[1],t)}}}))},t}(Li);function xo(e){var t=Lo(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=zo,t.__iterateUncached=function(t,n){var r=this;return e.__iterate((function(e,n){return!1!==t(n,e,r)}),n)},t.__iteratorUncached=function(t,n){if(2===t){var r=e.__iterator(t,n);return new Si((function(){var e=r.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e}))}return e.__iterator(1===t?0:1,n)},t}function _o(e,t,n){var r=Lo(e);return r.size=e.size,r.has=function(t){return e.has(t)},r.get=function(r,a){var i=e.get(r,Ga);return i===Ga?a:t.call(n,i,r,e)},r.__iterateUncached=function(r,a){var i=this;return e.__iterate((function(e,a,o){return!1!==r(t.call(n,e,a,o),a,i)}),a)},r.__iteratorUncached=function(r,a){var i=e.__iterator(2,a);return new Si((function(){var a=i.next();if(a.done)return a;var o=a.value,s=o[0];return Ci(r,s,t.call(n,o[1],s,e),a)}))},r}function No(e,t){var n=this,r=Lo(e);return r._iter=e,r.size=e.size,r.reverse=function(){return e},e.flip&&(r.flip=function(){var t=xo(e);return t.reverse=function(){return e.flip()},t}),r.get=function(n,r){return e.get(t?n:-1-n,r)},r.has=function(n){return e.has(t?n:-1-n)},r.includes=function(t){return e.includes(t)},r.cacheResult=zo,r.__iterate=function(n,r){var a=this,i=0;return r&&Ja(e),e.__iterate((function(e,o){return n(e,t?o:r?a.size-++i:i++,a)}),!r)},r.__iterator=function(r,a){var i=0;a&&Ja(e);var o=e.__iterator(2,!a);return new Si((function(){var e=o.next();if(e.done)return e;var s=e.value;return Ci(r,t?s[0]:a?n.size-++i:i++,s[1],e)}))},r}function ko(e,t,n,r){var a=Lo(e);return r&&(a.has=function(r){var a=e.get(r,Ga);return a!==Ga&&!!t.call(n,a,r,e)},a.get=function(r,a){var i=e.get(r,Ga);return i!==Ga&&t.call(n,i,r,e)?i:a}),a.__iterateUncached=function(a,i){var o=this,s=0;return e.__iterate((function(e,i,u){if(t.call(n,e,i,u))return s++,a(e,r?i:s-1,o)}),i),s},a.__iteratorUncached=function(a,i){var o=e.__iterator(2,i),s=0;return new Si((function(){for(;;){var i=o.next();if(i.done)return i;var u=i.value,l=u[0],c=u[1];if(t.call(n,c,l,e))return Ci(a,r?l:s++,c,i)}}))},a}function Eo(e,t,n,r){var a=e.size;if(ei(t,n,a))return e;var i=ti(t,a),o=ni(n,a);if(i!==i||o!==o)return Eo(e.toSeq().cacheResult(),t,n,r);var s,u=o-i;u===u&&(s=u<0?0:u);var l=Lo(e);return l.size=0===s?s:e.size&&s||void 0,!r&&vi(e)&&s>=0&&(l.get=function(t,n){return(t=Qa(this,t))>=0&&t<s?e.get(t+i,n):n}),l.__iterateUncached=function(t,n){var a=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(t,n);var o=0,u=!0,l=0;return e.__iterate((function(e,n){if(!u||!(u=o++<i))return l++,!1!==t(e,r?n:l-1,a)&&l!==s})),l},l.__iteratorUncached=function(t,n){if(0!==s&&n)return this.cacheResult().__iterator(t,n);if(0===s)return new Si(Ii);var a=e.__iterator(t,n),o=0,u=0;return new Si((function(){for(;o++<i;)a.next();if(++u>s)return{value:void 0,done:!0};var e=a.next();return r||1===t||e.done?e:Ci(t,u-1,0===t?void 0:e.value[1],e)}))},l}function So(e,t,n,r){var a=Lo(e);return a.__iterateUncached=function(a,i){var o=this;if(i)return this.cacheResult().__iterate(a,i);var s=!0,u=0;return e.__iterate((function(e,i,l){if(!s||!(s=t.call(n,e,i,l)))return u++,a(e,r?i:u-1,o)})),u},a.__iteratorUncached=function(a,i){var o=this;if(i)return this.cacheResult().__iterator(a,i);var s=e.__iterator(2,i),u=!0,l=0;return new Si((function(){var e,i,c;do{if((e=s.next()).done)return r||1===a?e:Ci(a,l++,0===a?void 0:e.value[1],e);var f=e.value;i=f[0],c=f[1],u&&(u=t.call(n,c,i,o))}while(u);return 2===a?e:Ci(a,i,c,e)}))},a}function Co(e,t){var n=ui(e),r=[e].concat(t).map((function(e){return oi(e)?n&&(e=di(e)):e=n?qi(e):$i(Array.isArray(e)?e:[e]),e})).filter((function(e){return 0!==e.size}));if(0===r.length)return e;if(1===r.length){var a=r[0];if(a===e||n&&ui(a)||ci(e)&&ci(a))return a}var i=new Bi(r);return n?i=i.toKeyedSeq():ci(e)||(i=i.toSetSeq()),(i=i.flatten(!0)).size=r.reduce((function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}}),0),i}function Io(e,t,n){var r=Lo(e);return r.__iterateUncached=function(a,i){if(i)return this.cacheResult().__iterate(a,i);var o=0,s=!1;return function e(u,l){u.__iterate((function(i,u){return(!t||l<t)&&oi(i)?e(i,l+1):(o++,!1===a(i,n?u:o-1,r)&&(s=!0)),!s}),i)}(e,0),o},r.__iteratorUncached=function(r,a){if(a)return this.cacheResult().__iterator(r,a);var i=e.__iterator(r,a),o=[],s=0;return new Si((function(){for(;i;){var e=i.next();if(!1===e.done){var u=e.value;if(2===r&&(u=u[1]),t&&!(o.length<t)||!oi(u))return n?e:Ci(r,s++,u,e);o.push(i),i=u.__iterator(r,a)}else i=o.pop()}return{value:void 0,done:!0}}))},r}function Oo(e,t,n){t||(t=jo);var r=ui(e),a=0,i=e.toSeq().map((function(t,r){return[r,t,a++,n?n(t,r,e):t]})).valueSeq().toArray();return i.sort((function(e,n){return t(e[3],n[3])||e[2]-n[2]})).forEach(r?function(e,t){i[t].length=2}:function(e,t){i[t]=e[1]}),r?Li(i):ci(e)?zi(i):ji(i)}function Po(e,t,n){if(t||(t=jo),n){var r=e.toSeq().map((function(t,r){return[t,n(t,r,e)]})).reduce((function(e,n){return To(t,e[1],n[1])?n:e}));return r&&r[0]}return e.reduce((function(e,n){return To(t,e,n)?n:e}))}function To(e,t,n){var r=e(n,t);return 0===r&&n!==t&&(void 0===n||null===n||n!==n)||r>0}function Ao(e,t,n,r){var a=Lo(e),i=new Bi(n).map((function(e){return e.size}));return a.size=r?i.max():i.min(),a.__iterate=function(e,t){for(var n,r=this.__iterator(1,t),a=0;!(n=r.next()).done&&!1!==e(n.value,a++,this););return a},a.__iteratorUncached=function(e,a){var i=n.map((function(e){return e=pi(e),Ti(a?e.reverse():e)})),o=0,s=!1;return new Si((function(){var n;return s||(n=i.map((function(e){return e.next()})),s=r?n.every((function(e){return e.done})):n.some((function(e){return e.done}))),s?{value:void 0,done:!0}:Ci(e,o++,t.apply(null,n.map((function(e){return e.value}))))}))},a}function Ro(e,t){return e===t?e:vi(e)?t:e.constructor(t)}function Do(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Mo(e){return ui(e)?di:ci(e)?hi:mi}function Lo(e){return Object.create((ui(e)?Li:ci(e)?zi:ji).prototype)}function zo(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Mi.prototype.cacheResult.call(this)}function jo(e,t){return void 0===e&&void 0===t?0:void 0===e?1:void 0===t?-1:e>t?1:e<t?-1:0}function Bo(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),a=0;a<n;a++)r[a]=e[a+t];return r}function Fo(e,t){if(!e)throw new Error(t)}function Vo(e){Fo(e!==1/0,"Cannot perform this action with an infinite size.")}function Uo(e){if(Di(e)&&"string"!==typeof e)return e;if(_i(e))return e.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+e)}yo.prototype.cacheResult=vo.prototype.cacheResult=bo.prototype.cacheResult=wo.prototype.cacheResult=zo;var Wo=Object.prototype.toString;function qo(e){if(!e||"object"!==typeof e||"[object Object]"!==Wo.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t,r=Object.getPrototypeOf(t);null!==r;)n=r,r=Object.getPrototypeOf(n);return n===t}function $o(e){return"object"===typeof e&&(wi(e)||Array.isArray(e)||qo(e))}function Ho(e){try{return"string"===typeof e?JSON.stringify(e):String(e)}catch(t){return JSON.stringify(e)}}function Ko(e,t){return wi(e)?e.has(t):$o(e)&&Ri.call(e,t)}function Go(e,t,n){return wi(e)?e.get(t,n):Ko(e,t)?"function"===typeof e.get?e.get(t):e[t]:n}function Yo(e){if(Array.isArray(e))return Bo(e);var t={};for(var n in e)Ri.call(e,n)&&(t[n]=e[n]);return t}function Xo(e,t){if(!$o(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(wi(e)){if(!e.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+e);return e.remove(t)}if(!Ri.call(e,t))return e;var n=Yo(e);return Array.isArray(n)?n.splice(t,1):delete n[t],n}function Jo(e,t,n){if(!$o(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(wi(e)){if(!e.set)throw new TypeError("Cannot update immutable value without .set() method: "+e);return e.set(t,n)}if(Ri.call(e,t)&&n===e[t])return e;var r=Yo(e);return r[t]=n,r}function Qo(e,t,n,r){r||(r=n,n=void 0);var a=Zo(wi(e),e,Uo(t),0,n,r);return a===Ga?n:a}function Zo(e,t,n,r,a,i){var o=t===Ga;if(r===n.length){var s=o?a:t,u=i(s);return u===s?t:u}if(!o&&!$o(t))throw new TypeError("Cannot update within non-data-structure value in path ["+n.slice(0,r).map(Ho)+"]: "+t);var l=n[r],c=o?Ga:Go(t,l,Ga),f=Zo(c===Ga?e:wi(c),c,n,r+1,a,i);return f===c?t:f===Ga?Xo(t,l):Jo(o?e?As():{}:t,l,f)}function es(e,t,n){return Qo(e,t,Ga,(function(){return n}))}function ts(e,t){return es(this,e,t)}function ns(e,t){return Qo(e,t,(function(){return Ga}))}function rs(e){return ns(this,e)}function as(e,t,n,r){return Qo(e,[t],n,r)}function is(e,t,n){return 1===arguments.length?e(this):as(this,e,t,n)}function os(e,t,n){return Qo(this,e,t,n)}function ss(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return ls(this,e)}function us(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if("function"!==typeof e)throw new TypeError("Invalid merger function: "+e);return ls(this,t,e)}function ls(e,t,n){for(var r=[],a=0;a<t.length;a++){var i=di(t[a]);0!==i.size&&r.push(i)}return 0===r.length?e:0!==e.toSeq().size||e.__ownerID||1!==r.length?e.withMutations((function(e){for(var t=n?function(t,r){as(e,r,Ga,(function(e){return e===Ga?t:n(e,t,r)}))}:function(t,n){e.set(n,t)},a=0;a<r.length;a++)r[a].forEach(t)})):e.constructor(r[0])}function cs(e,t,n){return fs(e,t,function(e){function t(n,r,a){return $o(n)&&$o(r)&&function(e,t){var n=Mi(e),r=Mi(t);return ci(n)===ci(r)&&ui(n)===ui(r)}(n,r)?fs(n,[r],t):e?e(n,r,a):r}return t}(n))}function fs(e,t,n){if(!$o(e))throw new TypeError("Cannot merge into non-data-structure value: "+e);if(wi(e))return"function"===typeof n&&e.mergeWith?e.mergeWith.apply(e,[n].concat(t)):e.merge?e.merge.apply(e,t):e.concat.apply(e,t);for(var r=Array.isArray(e),a=e,i=r?hi:di,o=r?function(t){a===e&&(a=Yo(a)),a.push(t)}:function(t,r){var i=Ri.call(a,r),o=i&&n?n(a[r],t,r):t;i&&o===a[r]||(a===e&&(a=Yo(a)),a[r]=o)},s=0;s<t.length;s++)i(t[s]).forEach(o);return a}function ps(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return cs(this,e)}function ds(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return cs(this,t,e)}function hs(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Qo(this,e,As(),(function(e){return fs(e,t)}))}function ms(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Qo(this,e,As(),(function(e){return cs(e,t)}))}function gs(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}function vs(){return this.__ownerID?this:this.__ensureOwner(new Xa)}function ys(){return this.__ensureOwner()}function bs(){return this.__altered}var ws=function(e){function t(t){return void 0===t||null===t?As():Gi(t)&&!_i(t)?t:As().withMutations((function(n){var r=e(t);Vo(r.size),r.forEach((function(e,t){return n.set(t,e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return As().withMutations((function(t){for(var n=0;n<e.length;n+=2){if(n+1>=e.length)throw new Error("Missing value for key: "+e[n]);t.set(e[n],e[n+1])}}))},t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},t.prototype.set=function(e,t){return Rs(this,e,t)},t.prototype.remove=function(e){return Rs(this,e,Ga)},t.prototype.deleteAll=function(e){var t=pi(e);return 0===t.size?this:this.withMutations((function(e){t.forEach((function(t){return e.remove(t)}))}))},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):As()},t.prototype.sort=function(e){return au(Oo(this,e))},t.prototype.sortBy=function(e,t){return au(Oo(this,t,e))},t.prototype.map=function(e,t){var n=this;return this.withMutations((function(r){r.forEach((function(a,i){r.set(i,e.call(t,a,i,n))}))}))},t.prototype.__iterator=function(e,t){return new Is(this,e,t)},t.prototype.__iterate=function(e,t){var n=this,r=0;return this._root&&this._root.iterate((function(t){return r++,e(t[1],t[0],n)}),t),r},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ts(this.size,this._root,e,this.__hash):0===this.size?As():(this.__ownerID=e,this.__altered=!1,this)},t}(di);ws.isMap=Gi;var xs=ws.prototype;xs[Ki]=!0,xs.delete=xs.remove,xs.removeAll=xs.deleteAll,xs.setIn=ts,xs.removeIn=xs.deleteIn=rs,xs.update=is,xs.updateIn=os,xs.merge=xs.concat=ss,xs.mergeWith=us,xs.mergeDeep=ps,xs.mergeDeepWith=ds,xs.mergeIn=hs,xs.mergeDeepIn=ms,xs.withMutations=gs,xs.wasAltered=bs,xs.asImmutable=ys,xs["@@transducer/init"]=xs.asMutable=vs,xs["@@transducer/step"]=function(e,t){return e.set(t[0],t[1])},xs["@@transducer/result"]=function(e){return e.asImmutable()};var _s=function(e,t){this.ownerID=e,this.entries=t};_s.prototype.get=function(e,t,n,r){for(var a=this.entries,i=0,o=a.length;i<o;i++)if(Ji(n,a[i][0]))return a[i][1];return r},_s.prototype.update=function(e,t,n,r,a,i,o){for(var s=a===Ga,u=this.entries,l=0,c=u.length;l<c&&!Ji(r,u[l][0]);l++);var f=l<c;if(f?u[l][1]===a:s)return this;if(Ya(o),(s||!f)&&Ya(i),!s||1!==u.length){if(!f&&!s&&u.length>=Bs)return function(e,t,n,r){e||(e=new Xa);for(var a=new Ss(e,to(n),[n,r]),i=0;i<t.length;i++){var o=t[i];a=a.update(e,0,void 0,o[0],o[1])}return a}(e,u,r,a);var p=e&&e===this.ownerID,d=p?u:Bo(u);return f?s?l===c-1?d.pop():d[l]=d.pop():d[l]=[r,a]:d.push([r,a]),p?(this.entries=d,this):new _s(e,d)}};var Ns=function(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n};Ns.prototype.get=function(e,t,n,r){void 0===t&&(t=to(n));var a=1<<((0===e?t:t>>>e)&Ka),i=this.bitmap;return 0===(i&a)?r:this.nodes[zs(i&a-1)].get(e+5,t,n,r)},Ns.prototype.update=function(e,t,n,r,a,i,o){void 0===n&&(n=to(r));var s=(0===t?n:n>>>t)&Ka,u=1<<s,l=this.bitmap,c=0!==(l&u);if(!c&&a===Ga)return this;var f=zs(l&u-1),p=this.nodes,d=c?p[f]:void 0,h=Ds(d,e,t+5,n,r,a,i,o);if(h===d)return this;if(!c&&h&&p.length>=Fs)return function(e,t,n,r,a){for(var i=0,o=new Array(Ha),s=0;0!==n;s++,n>>>=1)o[s]=1&n?t[i++]:void 0;return o[r]=a,new ks(e,i+1,o)}(e,p,l,s,h);if(c&&!h&&2===p.length&&Ms(p[1^f]))return p[1^f];if(c&&h&&1===p.length&&Ms(h))return h;var m=e&&e===this.ownerID,g=c?h?l:l^u:l|u,v=c?h?js(p,f,h,m):function(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var a=new Array(r),i=0,o=0;o<r;o++)o===t&&(i=1),a[o]=e[o+i];return a}(p,f,m):function(e,t,n,r){var a=e.length+1;if(r&&t+1===a)return e[t]=n,e;for(var i=new Array(a),o=0,s=0;s<a;s++)s===t?(i[s]=n,o=-1):i[s]=e[s+o];return i}(p,f,h,m);return m?(this.bitmap=g,this.nodes=v,this):new Ns(e,g,v)};var ks=function(e,t,n){this.ownerID=e,this.count=t,this.nodes=n};ks.prototype.get=function(e,t,n,r){void 0===t&&(t=to(n));var a=(0===e?t:t>>>e)&Ka,i=this.nodes[a];return i?i.get(e+5,t,n,r):r},ks.prototype.update=function(e,t,n,r,a,i,o){void 0===n&&(n=to(r));var s=(0===t?n:n>>>t)&Ka,u=a===Ga,l=this.nodes,c=l[s];if(u&&!c)return this;var f=Ds(c,e,t+5,n,r,a,i,o);if(f===c)return this;var p=this.count;if(c){if(!f&&--p<Vs)return function(e,t,n,r){for(var a=0,i=0,o=new Array(n),s=0,u=1,l=t.length;s<l;s++,u<<=1){var c=t[s];void 0!==c&&s!==r&&(a|=u,o[i++]=c)}return new Ns(e,a,o)}(e,l,p,s)}else p++;var d=e&&e===this.ownerID,h=js(l,s,f,d);return d?(this.count=p,this.nodes=h,this):new ks(e,p,h)};var Es=function(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n};Es.prototype.get=function(e,t,n,r){for(var a=this.entries,i=0,o=a.length;i<o;i++)if(Ji(n,a[i][0]))return a[i][1];return r},Es.prototype.update=function(e,t,n,r,a,i,o){void 0===n&&(n=to(r));var s=a===Ga;if(n!==this.keyHash)return s?this:(Ya(o),Ya(i),Ls(this,e,t,n,[r,a]));for(var u=this.entries,l=0,c=u.length;l<c&&!Ji(r,u[l][0]);l++);var f=l<c;if(f?u[l][1]===a:s)return this;if(Ya(o),(s||!f)&&Ya(i),s&&2===c)return new Ss(e,this.keyHash,u[1^l]);var p=e&&e===this.ownerID,d=p?u:Bo(u);return f?s?l===c-1?d.pop():d[l]=d.pop():d[l]=[r,a]:d.push([r,a]),p?(this.entries=d,this):new Es(e,this.keyHash,d)};var Ss=function(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n};Ss.prototype.get=function(e,t,n,r){return Ji(n,this.entry[0])?this.entry[1]:r},Ss.prototype.update=function(e,t,n,r,a,i,o){var s=a===Ga,u=Ji(r,this.entry[0]);return(u?a===this.entry[1]:s)?this:(Ya(o),s?void Ya(i):u?e&&e===this.ownerID?(this.entry[1]=a,this):new Ss(e,this.keyHash,[r,a]):(Ya(i),Ls(this,e,t,to(r),[r,a])))},_s.prototype.iterate=Es.prototype.iterate=function(e,t){for(var n=this.entries,r=0,a=n.length-1;r<=a;r++)if(!1===e(n[t?a-r:r]))return!1},Ns.prototype.iterate=ks.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,a=n.length-1;r<=a;r++){var i=n[t?a-r:r];if(i&&!1===i.iterate(e,t))return!1}},Ss.prototype.iterate=function(e,t){return e(this.entry)};var Cs,Is=function(e){function t(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&Ps(e._root)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n=t.node,r=t.index++,a=void 0;if(n.entry){if(0===r)return Os(e,n.entry)}else if(n.entries){if(r<=(a=n.entries.length-1))return Os(e,n.entries[this._reverse?a-r:r])}else if(r<=(a=n.nodes.length-1)){var i=n.nodes[this._reverse?a-r:r];if(i){if(i.entry)return Os(e,i.entry);t=this._stack=Ps(i,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}},t}(Si);function Os(e,t){return Ci(e,t[0],t[1])}function Ps(e,t){return{node:e,index:0,__prev:t}}function Ts(e,t,n,r){var a=Object.create(xs);return a.size=e,a._root=t,a.__ownerID=n,a.__hash=r,a.__altered=!1,a}function As(){return Cs||(Cs=Ts(0))}function Rs(e,t,n){var r,a;if(e._root){var i={value:!1},o={value:!1};if(r=Ds(e._root,e.__ownerID,0,void 0,t,n,i,o),!o.value)return e;a=e.size+(i.value?n===Ga?-1:1:0)}else{if(n===Ga)return e;a=1,r=new _s(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=a,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?Ts(a,r):As()}function Ds(e,t,n,r,a,i,o,s){return e?e.update(t,n,r,a,i,o,s):i===Ga?e:(Ya(s),Ya(o),new Ss(t,r,[a,i]))}function Ms(e){return e.constructor===Ss||e.constructor===Es}function Ls(e,t,n,r,a){if(e.keyHash===r)return new Es(t,r,[e.entry,a]);var i,o=(0===n?e.keyHash:e.keyHash>>>n)&Ka,s=(0===n?r:r>>>n)&Ka,u=o===s?[Ls(e,t,n+5,r,a)]:(i=new Ss(t,r,a),o<s?[e,i]:[i,e]);return new Ns(t,1<<o|1<<s,u)}function zs(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function js(e,t,n,r){var a=r?e:Bo(e);return a[t]=n,a}var Bs=8,Fs=16,Vs=8,Us="@@__IMMUTABLE_LIST__@@";function Ws(e){return Boolean(e&&e[Us])}var qs=function(e){function t(t){var n=Js();if(void 0===t||null===t)return n;if(Ws(t))return t;var r=e(t),a=r.size;return 0===a?n:(Vo(a),a>0&&a<Ha?Xs(0,a,5,null,new Hs(r.toArray())):n.withMutations((function(e){e.setSize(a),r.forEach((function(t,n){return e.set(n,t)}))})))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(e,t){if((e=Qa(this,e))>=0&&e<this.size){var n=eu(this,e+=this._origin);return n&&n.array[e&Ka]}return t},t.prototype.set=function(e,t){return function(e,t,n){if((t=Qa(e,t))!==t)return e;if(t>=e.size||t<0)return e.withMutations((function(e){t<0?tu(e,t).set(0,n):tu(e,0,t+1).set(t,n)}));t+=e._origin;var r=e._tail,a=e._root,i={value:!1};t>=nu(e._capacity)?r=Qs(r,e.__ownerID,0,t,n,i):a=Qs(a,e.__ownerID,e._level,t,n,i);if(!i.value)return e;if(e.__ownerID)return e._root=a,e._tail=r,e.__hash=void 0,e.__altered=!0,e;return Xs(e._origin,e._capacity,e._level,a,r)}(this,e,t)},t.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},t.prototype.insert=function(e,t){return this.splice(e,0,t)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):Js()},t.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations((function(n){tu(n,0,t+e.length);for(var r=0;r<e.length;r++)n.set(t+r,e[r])}))},t.prototype.pop=function(){return tu(this,0,-1)},t.prototype.unshift=function(){var e=arguments;return this.withMutations((function(t){tu(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])}))},t.prototype.shift=function(){return tu(this,1)},t.prototype.concat=function(){for(var t=arguments,n=[],r=0;r<arguments.length;r++){var a=t[r],i=e("string"!==typeof a&&Oi(a)?a:[a]);0!==i.size&&n.push(i)}return 0===n.length?this:0!==this.size||this.__ownerID||1!==n.length?this.withMutations((function(e){n.forEach((function(t){return t.forEach((function(t){return e.push(t)}))}))})):this.constructor(n[0])},t.prototype.setSize=function(e){return tu(this,0,e)},t.prototype.map=function(e,t){var n=this;return this.withMutations((function(r){for(var a=0;a<n.size;a++)r.set(a,e.call(t,r.get(a),a,n))}))},t.prototype.slice=function(e,t){var n=this.size;return ei(e,t,n)?this:tu(this,ti(e,n),ni(t,n))},t.prototype.__iterator=function(e,t){var n=t?this.size:0,r=Ys(this,t);return new Si((function(){var a=r();return a===Gs?{value:void 0,done:!0}:Ci(e,t?--n:n++,a)}))},t.prototype.__iterate=function(e,t){for(var n,r=t?this.size:0,a=Ys(this,t);(n=a())!==Gs&&!1!==e(n,t?--r:r++,this););return r},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Xs(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):0===this.size?Js():(this.__ownerID=e,this.__altered=!1,this)},t}(hi);qs.isList=Ws;var $s=qs.prototype;$s[Us]=!0,$s.delete=$s.remove,$s.merge=$s.concat,$s.setIn=ts,$s.deleteIn=$s.removeIn=rs,$s.update=is,$s.updateIn=os,$s.mergeIn=hs,$s.mergeDeepIn=ms,$s.withMutations=gs,$s.wasAltered=bs,$s.asImmutable=ys,$s["@@transducer/init"]=$s.asMutable=vs,$s["@@transducer/step"]=function(e,t){return e.push(t)},$s["@@transducer/result"]=function(e){return e.asImmutable()};var Hs=function(e,t){this.array=e,this.ownerID=t};Hs.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var r=n>>>t&Ka;if(r>=this.array.length)return new Hs([],e);var a,i=0===r;if(t>0){var o=this.array[r];if((a=o&&o.removeBefore(e,t-5,n))===o&&i)return this}if(i&&!a)return this;var s=Zs(this,e);if(!i)for(var u=0;u<r;u++)s.array[u]=void 0;return a&&(s.array[r]=a),s},Hs.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var r,a=n-1>>>t&Ka;if(a>=this.array.length)return this;if(t>0){var i=this.array[a];if((r=i&&i.removeAfter(e,t-5,n))===i&&a===this.array.length-1)return this}var o=Zs(this,e);return o.array.splice(a+1),r&&(o.array[a]=r),o};var Ks,Gs={};function Ys(e,t){var n=e._origin,r=e._capacity,a=nu(r),i=e._tail;return o(e._root,e._level,0);function o(e,s,u){return 0===s?function(e,o){var s=o===a?i&&i.array:e&&e.array,u=o>n?0:n-o,l=r-o;l>Ha&&(l=Ha);return function(){if(u===l)return Gs;var e=t?--l:u++;return s&&s[e]}}(e,u):function(e,a,i){var s,u=e&&e.array,l=i>n?0:n-i>>a,c=1+(r-i>>a);c>Ha&&(c=Ha);return function(){for(;;){if(s){var e=s();if(e!==Gs)return e;s=null}if(l===c)return Gs;var n=t?--c:l++;s=o(u&&u[n],a-5,i+(n<<a))}}}(e,s,u)}}function Xs(e,t,n,r,a,i,o){var s=Object.create($s);return s.size=t-e,s._origin=e,s._capacity=t,s._level=n,s._root=r,s._tail=a,s.__ownerID=i,s.__hash=o,s.__altered=!1,s}function Js(){return Ks||(Ks=Xs(0,0,5))}function Qs(e,t,n,r,a,i){var o,s=r>>>n&Ka,u=e&&s<e.array.length;if(!u&&void 0===a)return e;if(n>0){var l=e&&e.array[s],c=Qs(l,t,n-5,r,a,i);return c===l?e:((o=Zs(e,t)).array[s]=c,o)}return u&&e.array[s]===a?e:(i&&Ya(i),o=Zs(e,t),void 0===a&&s===o.array.length-1?o.array.pop():o.array[s]=a,o)}function Zs(e,t){return t&&e&&t===e.ownerID?e:new Hs(e?e.array.slice():[],t)}function eu(e,t){if(t>=nu(e._capacity))return e._tail;if(t<1<<e._level+5){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&Ka],r-=5;return n}}function tu(e,t,n){void 0!==t&&(t|=0),void 0!==n&&(n|=0);var r=e.__ownerID||new Xa,a=e._origin,i=e._capacity,o=a+t,s=void 0===n?i:n<0?i+n:a+n;if(o===a&&s===i)return e;if(o>=s)return e.clear();for(var u=e._level,l=e._root,c=0;o+c<0;)l=new Hs(l&&l.array.length?[void 0,l]:[],r),c+=1<<(u+=5);c&&(o+=c,a+=c,s+=c,i+=c);for(var f=nu(i),p=nu(s);p>=1<<u+5;)l=new Hs(l&&l.array.length?[l]:[],r),u+=5;var d=e._tail,h=p<f?eu(e,s-1):p>f?new Hs([],r):d;if(d&&p>f&&o<i&&d.array.length){for(var m=l=Zs(l,r),g=u;g>5;g-=5){var v=f>>>g&Ka;m=m.array[v]=Zs(m.array[v],r)}m.array[f>>>5&Ka]=d}if(s<i&&(h=h&&h.removeAfter(r,0,s)),o>=p)o-=p,s-=p,u=5,l=null,h=h&&h.removeBefore(r,0,o);else if(o>a||p<f){for(c=0;l;){var y=o>>>u&Ka;if(y!==p>>>u&Ka)break;y&&(c+=(1<<u)*y),u-=5,l=l.array[y]}l&&o>a&&(l=l.removeBefore(r,u,o-c)),l&&p<f&&(l=l.removeAfter(r,u,p-c)),c&&(o-=c,s-=c)}return e.__ownerID?(e.size=s-o,e._origin=o,e._capacity=s,e._level=u,e._root=l,e._tail=h,e.__hash=void 0,e.__altered=!0,e):Xs(o,s,u,l,h)}function nu(e){return e<Ha?0:e-1>>>5<<5}var ru,au=function(e){function t(e){return void 0===e||null===e?ou():Yi(e)?e:ou().withMutations((function(t){var n=di(e);Vo(n.size),n.forEach((function(e,n){return t.set(n,e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):ou()},t.prototype.set=function(e,t){return su(this,e,t)},t.prototype.remove=function(e){return su(this,e,Ga)},t.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate((function(t){return t&&e(t[1],t[0],n)}),t)},t.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?iu(t,n,e,this.__hash):0===this.size?ou():(this.__ownerID=e,this.__altered=!1,this._map=t,this._list=n,this)},t}(ws);function iu(e,t,n,r){var a=Object.create(au.prototype);return a.size=e?e.size:0,a._map=e,a._list=t,a.__ownerID=n,a.__hash=r,a.__altered=!1,a}function ou(){return ru||(ru=iu(As(),Js()))}function su(e,t,n){var r,a,i=e._map,o=e._list,s=i.get(t),u=void 0!==s;if(n===Ga){if(!u)return e;o.size>=Ha&&o.size>=2*i.size?(r=(a=o.filter((function(e,t){return void 0!==e&&s!==t}))).toKeyedSeq().map((function(e){return e[0]})).flip().toMap(),e.__ownerID&&(r.__ownerID=a.__ownerID=e.__ownerID)):(r=i.remove(t),a=s===o.size-1?o.pop():o.set(s,void 0))}else if(u){if(n===o.get(s)[1])return e;r=i,a=o.set(s,[t,n])}else r=i.set(t,o.size),a=o.set(o.size,[t,n]);return e.__ownerID?(e.size=r.size,e._map=r,e._list=a,e.__hash=void 0,e.__altered=!0,e):iu(r,a)}au.isOrderedMap=Yi,au.prototype[xi]=!0,au.prototype.delete=au.prototype.remove;var uu="@@__IMMUTABLE_STACK__@@";function lu(e){return Boolean(e&&e[uu])}var cu=function(e){function t(e){return void 0===e||null===e?hu():lu(e)?e:hu().pushAll(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(e,t){var n=this._head;for(e=Qa(this,e);n&&e--;)n=n.next;return n?n.value:t},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var e=arguments;if(0===arguments.length)return this;for(var t=this.size+arguments.length,n=this._head,r=arguments.length-1;r>=0;r--)n={value:e[r],next:n};return this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):du(t,n)},t.prototype.pushAll=function(t){if(0===(t=e(t)).size)return this;if(0===this.size&&lu(t))return t;Vo(t.size);var n=this.size,r=this._head;return t.__iterate((function(e){n++,r={value:e,next:r}}),!0),this.__ownerID?(this.size=n,this._head=r,this.__hash=void 0,this.__altered=!0,this):du(n,r)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):hu()},t.prototype.slice=function(t,n){if(ei(t,n,this.size))return this;var r=ti(t,this.size);if(ni(n,this.size)!==this.size)return e.prototype.slice.call(this,t,n);for(var a=this.size-r,i=this._head;r--;)i=i.next;return this.__ownerID?(this.size=a,this._head=i,this.__hash=void 0,this.__altered=!0,this):du(a,i)},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?du(this.size,this._head,e,this.__hash):0===this.size?hu():(this.__ownerID=e,this.__altered=!1,this)},t.prototype.__iterate=function(e,t){var n=this;if(t)return new Bi(this.toArray()).__iterate((function(t,r){return e(t,r,n)}),t);for(var r=0,a=this._head;a&&!1!==e(a.value,r++,this);)a=a.next;return r},t.prototype.__iterator=function(e,t){if(t)return new Bi(this.toArray()).__iterator(e,t);var n=0,r=this._head;return new Si((function(){if(r){var t=r.value;return r=r.next,Ci(e,n++,t)}return{value:void 0,done:!0}}))},t}(hi);cu.isStack=lu;var fu,pu=cu.prototype;function du(e,t,n,r){var a=Object.create(pu);return a.size=e,a._head=t,a.__ownerID=n,a.__hash=r,a.__altered=!1,a}function hu(){return fu||(fu=du(0))}pu[uu]=!0,pu.shift=pu.pop,pu.unshift=pu.push,pu.unshiftAll=pu.pushAll,pu.withMutations=gs,pu.wasAltered=bs,pu.asImmutable=ys,pu["@@transducer/init"]=pu.asMutable=vs,pu["@@transducer/step"]=function(e,t){return e.unshift(t)},pu["@@transducer/result"]=function(e){return e.asImmutable()};var mu="@@__IMMUTABLE_SET__@@";function gu(e){return Boolean(e&&e[mu])}function vu(e){return gu(e)&&_i(e)}function yu(e,t){if(e===t)return!0;if(!oi(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||ui(e)!==ui(t)||ci(e)!==ci(t)||_i(e)!==_i(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!fi(e);if(_i(e)){var r=e.entries();return t.every((function(e,t){var a=r.next().value;return a&&Ji(a[1],e)&&(n||Ji(a[0],t))}))&&r.next().done}var a=!1;if(void 0===e.size)if(void 0===t.size)"function"===typeof e.cacheResult&&e.cacheResult();else{a=!0;var i=e;e=t,t=i}var o=!0,s=t.__iterate((function(t,r){if(n?!e.has(t):a?!Ji(t,e.get(r,Ga)):!Ji(e.get(r,Ga),t))return o=!1,!1}));return o&&e.size===s}function bu(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function wu(e){if(!e||"object"!==typeof e)return e;if(!oi(e)){if(!$o(e))return e;e=Mi(e)}if(ui(e)){var t={};return e.__iterate((function(e,n){t[n]=wu(e)})),t}var n=[];return e.__iterate((function(e){n.push(wu(e))})),n}var xu=function(e){function t(t){return void 0===t||null===t?Su():gu(t)&&!_i(t)?t:Su().withMutations((function(n){var r=e(t);Vo(r.size),r.forEach((function(e){return n.add(e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(di(e).keySeq())},t.intersect=function(e){return(e=pi(e).toArray()).length?Nu.intersect.apply(t(e.pop()),e):Su()},t.union=function(e){return(e=pi(e).toArray()).length?Nu.union.apply(t(e.pop()),e):Su()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(e){return this._map.has(e)},t.prototype.add=function(e){return ku(this,this._map.set(e,e))},t.prototype.remove=function(e){return ku(this,this._map.remove(e))},t.prototype.clear=function(){return ku(this,this._map.clear())},t.prototype.map=function(e,t){var n=this,r=!1,a=ku(this,this._map.mapEntries((function(a){var i=a[1],o=e.call(t,i,i,n);return o!==i&&(r=!0),[o,o]}),t));return r?a:this},t.prototype.union=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return t=t.filter((function(e){return 0!==e.size})),0===t.length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations((function(n){for(var r=0;r<t.length;r++)"string"===typeof t[r]?n.add(t[r]):e(t[r]).forEach((function(e){return n.add(e)}))})):this.constructor(t[0])},t.prototype.intersect=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var r=[];return this.forEach((function(e){t.every((function(t){return t.includes(e)}))||r.push(e)})),this.withMutations((function(e){r.forEach((function(t){e.remove(t)}))}))},t.prototype.subtract=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var r=[];return this.forEach((function(e){t.some((function(t){return t.includes(e)}))&&r.push(e)})),this.withMutations((function(e){r.forEach((function(t){e.remove(t)}))}))},t.prototype.sort=function(e){return $u(Oo(this,e))},t.prototype.sortBy=function(e,t){return $u(Oo(this,t,e))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate((function(t){return e(t,t,n)}),t)},t.prototype.__iterator=function(e,t){return this._map.__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):0===this.size?this.__empty():(this.__ownerID=e,this._map=t,this)},t}(mi);xu.isSet=gu;var _u,Nu=xu.prototype;function ku(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function Eu(e,t){var n=Object.create(Nu);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Su(){return _u||(_u=Eu(As()))}Nu[mu]=!0,Nu.delete=Nu.remove,Nu.merge=Nu.concat=Nu.union,Nu.withMutations=gs,Nu.asImmutable=ys,Nu["@@transducer/init"]=Nu.asMutable=vs,Nu["@@transducer/step"]=function(e,t){return e.add(t)},Nu["@@transducer/result"]=function(e){return e.asImmutable()},Nu.__empty=Su,Nu.__make=Eu;var Cu,Iu=function(e){function t(e,n,r){if(!(this instanceof t))return new t(e,n,r);if(Fo(0!==r,"Cannot step a Range by 0"),e=e||0,void 0===n&&(n=1/0),r=void 0===r?1:Math.abs(r),n<e&&(r=-r),this._start=e,this._end=n,this._step=r,this.size=Math.max(0,Math.ceil((n-e)/r-1)+1),0===this.size){if(Cu)return Cu;Cu=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},t.prototype.get=function(e,t){return this.has(e)?this._start+Qa(this,e)*this._step:t},t.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},t.prototype.slice=function(e,n){return ei(e,n,this.size)?this:(e=ti(e,this.size),(n=ni(n,this.size))<=e?new t(0,0):new t(this.get(e,this._end),this.get(n,this._end),this._step))},t.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step===0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},t.prototype.lastIndexOf=function(e){return this.indexOf(e)},t.prototype.__iterate=function(e,t){for(var n=this.size,r=this._step,a=t?this._start+(n-1)*r:this._start,i=0;i!==n&&!1!==e(a,t?n-++i:i++,this);)a+=t?-r:r;return i},t.prototype.__iterator=function(e,t){var n=this.size,r=this._step,a=t?this._start+(n-1)*r:this._start,i=0;return new Si((function(){if(i===n)return{value:void 0,done:!0};var o=a;return a+=t?-r:r,Ci(e,t?n-++i:i++,o)}))},t.prototype.equals=function(e){return e instanceof t?this._start===e._start&&this._end===e._end&&this._step===e._step:yu(this,e)},t}(zi);function Ou(e,t,n){for(var r=Uo(t),a=0;a!==r.length;)if((e=Go(e,r[a++],Ga))===Ga)return n;return e}function Pu(e,t){return Ou(this,e,t)}function Tu(e,t){return Ou(e,t,Ga)!==Ga}function Au(){Vo(this.size);var e={};return this.__iterate((function(t,n){e[n]=t})),e}pi.isIterable=oi,pi.isKeyed=ui,pi.isIndexed=ci,pi.isAssociative=fi,pi.isOrdered=_i,pi.Iterator=Si,bu(pi,{toArray:function(){Vo(this.size);var e=new Array(this.size||0),t=ui(this),n=0;return this.__iterate((function(r,a){e[n++]=t?[a,r]:r})),e},toIndexedSeq:function(){return new yo(this)},toJS:function(){return wu(this)},toKeyedSeq:function(){return new vo(this,!0)},toMap:function(){return ws(this.toKeyedSeq())},toObject:Au,toOrderedMap:function(){return au(this.toKeyedSeq())},toOrderedSet:function(){return $u(ui(this)?this.valueSeq():this)},toSet:function(){return xu(ui(this)?this.valueSeq():this)},toSetSeq:function(){return new bo(this)},toSeq:function(){return ci(this)?this.toIndexedSeq():ui(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return cu(ui(this)?this.valueSeq():this)},toList:function(){return qs(ui(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Ro(this,Co(this,e))},includes:function(e){return this.some((function(t){return Ji(t,e)}))},entries:function(){return this.__iterator(2)},every:function(e,t){Vo(this.size);var n=!0;return this.__iterate((function(r,a,i){if(!e.call(t,r,a,i))return n=!1,!1})),n},filter:function(e,t){return Ro(this,ko(this,e,t,!0))},partition:function(e,t){return function(e,t,n){var r=ui(e),a=[[],[]];e.__iterate((function(i,o){a[t.call(n,i,o,e)?1:0].push(r?[o,i]:i)}));var i=Mo(e);return a.map((function(t){return Ro(e,i(t))}))}(this,e,t)},find:function(e,t,n){var r=this.findEntry(e,t);return r?r[1]:n},forEach:function(e,t){return Vo(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){Vo(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate((function(r){n?n=!1:t+=e,t+=null!==r&&void 0!==r?r.toString():""})),t},keys:function(){return this.__iterator(0)},map:function(e,t){return Ro(this,_o(this,e,t))},reduce:function(e,t,n){return zu(this,e,t,n,arguments.length<2,!1)},reduceRight:function(e,t,n){return zu(this,e,t,n,arguments.length<2,!0)},reverse:function(){return Ro(this,No(this,!0))},slice:function(e,t){return Ro(this,Eo(this,e,t,!0))},some:function(e,t){return!this.every(Fu(e),t)},sort:function(e){return Ro(this,Oo(this,e))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(e,t){return Ja(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,n){var r=ws().asMutable();return e.__iterate((function(a,i){r.update(t.call(n,a,i,e),0,(function(e){return e+1}))})),r.asImmutable()}(this,e,t)},equals:function(e){return yu(this,e)},entrySeq:function(){var e=this;if(e._cache)return new Bi(e._cache);var t=e.toSeq().map(Bu).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(Fu(e),t)},findEntry:function(e,t,n){var r=n;return this.__iterate((function(n,a,i){if(e.call(t,n,a,i))return r=[a,n],!1})),r},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},findLastEntry:function(e,t,n){return this.toKeyedSeq().reverse().findEntry(e,t,n)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(e){return this.find(Za,null,e)},flatMap:function(e,t){return Ro(this,function(e,t,n){var r=Mo(e);return e.toSeq().map((function(a,i){return r(t.call(n,a,i,e))})).flatten(!0)}(this,e,t))},flatten:function(e){return Ro(this,Io(this,e,!0))},fromEntrySeq:function(){return new wo(this)},get:function(e,t){return this.find((function(t,n){return Ji(n,e)}),void 0,t)},getIn:Pu,groupBy:function(e,t){return function(e,t,n){var r=ui(e),a=(_i(e)?au():ws()).asMutable();e.__iterate((function(i,o){a.update(t.call(n,i,o,e),(function(e){return(e=e||[]).push(r?[o,i]:i),e}))}));var i=Mo(e);return a.map((function(t){return Ro(e,i(t))})).asImmutable()}(this,e,t)},has:function(e){return this.get(e,Ga)!==Ga},hasIn:function(e){return Tu(this,e)},isSubset:function(e){return e="function"===typeof e.includes?e:pi(e),this.every((function(t){return e.includes(t)}))},isSuperset:function(e){return(e="function"===typeof e.isSubset?e:pi(e)).isSubset(this)},keyOf:function(e){return this.findKey((function(t){return Ji(t,e)}))},keySeq:function(){return this.toSeq().map(ju).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return Po(this,e)},maxBy:function(e,t){return Po(this,t,e)},min:function(e){return Po(this,e?Vu(e):Wu)},minBy:function(e,t){return Po(this,t?Vu(t):Wu,e)},rest:function(){return this.slice(1)},skip:function(e){return 0===e?this:this.slice(Math.max(0,e))},skipLast:function(e){return 0===e?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,t){return Ro(this,So(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(Fu(e),t)},sortBy:function(e,t){return Ro(this,Oo(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,t){return Ro(this,function(e,t,n){var r=Lo(e);return r.__iterateUncached=function(r,a){var i=this;if(a)return this.cacheResult().__iterate(r,a);var o=0;return e.__iterate((function(e,a,s){return t.call(n,e,a,s)&&++o&&r(e,a,i)})),o},r.__iteratorUncached=function(r,a){var i=this;if(a)return this.cacheResult().__iterator(r,a);var o=e.__iterator(2,a),s=!0;return new Si((function(){if(!s)return{value:void 0,done:!0};var e=o.next();if(e.done)return e;var a=e.value,u=a[0],l=a[1];return t.call(n,l,u,i)?2===r?e:Ci(r,u,l,e):(s=!1,{value:void 0,done:!0})}))},r}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(Fu(e),t)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(e){if(e.size===1/0)return 0;var t=_i(e),n=ui(e),r=t?1:0,a=e.__iterate(n?t?function(e,t){r=31*r+qu(to(e),to(t))|0}:function(e,t){r=r+qu(to(e),to(t))|0}:t?function(e){r=31*r+to(e)|0}:function(e){r=r+to(e)|0});return function(e,t){return t=Qi(t,3432918353),t=Qi(t<<15|t>>>-15,461845907),t=Qi(t<<13|t>>>-13,5),t=Qi((t=(t+3864292196|0)^e)^t>>>16,2246822507),t=Zi((t=Qi(t^t>>>13,3266489909))^t>>>16)}(a,r)}(this))}});var Ru=pi.prototype;Ru[ii]=!0,Ru[Ei]=Ru.values,Ru.toJSON=Ru.toArray,Ru.__toStringMapper=Ho,Ru.inspect=Ru.toSource=function(){return this.toString()},Ru.chain=Ru.flatMap,Ru.contains=Ru.includes,bu(di,{flip:function(){return Ro(this,xo(this))},mapEntries:function(e,t){var n=this,r=0;return Ro(this,this.toSeq().map((function(a,i){return e.call(t,[i,a],r++,n)})).fromEntrySeq())},mapKeys:function(e,t){var n=this;return Ro(this,this.toSeq().flip().map((function(r,a){return e.call(t,r,a,n)})).flip())}});var Du=di.prototype;Du[si]=!0,Du[Ei]=Ru.entries,Du.toJSON=Au,Du.__toStringMapper=function(e,t){return Ho(t)+": "+Ho(e)},bu(hi,{toKeyedSeq:function(){return new vo(this,!1)},filter:function(e,t){return Ro(this,ko(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return Ro(this,No(this,!1))},slice:function(e,t){return Ro(this,Eo(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(t||0,0),0===n||2===n&&!t)return this;e=ti(e,e<0?this.count():this.size);var r=this.slice(0,e);return Ro(this,1===n?r:r.concat(Bo(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.findLastEntry(e,t);return n?n[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return Ro(this,Io(this,e,!1))},get:function(e,t){return(e=Qa(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find((function(t,n){return n===e}),void 0,t)},has:function(e){return(e=Qa(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return Ro(this,function(e,t){var n=Lo(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,r){var a=this,i=0;return e.__iterate((function(e){return(!i||!1!==n(t,i++,a))&&!1!==n(e,i++,a)}),r),i},n.__iteratorUncached=function(n,r){var a,i=e.__iterator(1,r),o=0;return new Si((function(){return(!a||o%2)&&(a=i.next()).done?a:o%2?Ci(n,o++,t):Ci(n,o++,a.value,a)}))},n}(this,e))},interleave:function(){var e=[this].concat(Bo(arguments)),t=Ao(this.toSeq(),zi.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),Ro(this,n)},keySeq:function(){return Iu(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,t){return Ro(this,So(this,e,t,!1))},zip:function(){var e=[this].concat(Bo(arguments));return Ro(this,Ao(this,Uu,e))},zipAll:function(){var e=[this].concat(Bo(arguments));return Ro(this,Ao(this,Uu,e,!0))},zipWith:function(e){var t=Bo(arguments);return t[0]=this,Ro(this,Ao(this,e,t))}});var Mu=hi.prototype;Mu[li]=!0,Mu[xi]=!0,bu(mi,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var Lu=mi.prototype;function zu(e,t,n,r,a,i){return Vo(e.size),e.__iterate((function(e,i,o){a?(a=!1,n=e):n=t.call(r,n,e,i,o)}),i),n}function ju(e,t){return t}function Bu(e,t){return[t,e]}function Fu(e){return function(){return!e.apply(this,arguments)}}function Vu(e){return function(){return-e.apply(this,arguments)}}function Uu(){return Bo(arguments)}function Wu(e,t){return e<t?1:e>t?-1:0}function qu(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}Lu.has=Ru.includes,Lu.contains=Lu.includes,Lu.keys=Lu.values,bu(Li,Du),bu(zi,Mu),bu(ji,Lu);var $u=function(e){function t(e){return void 0===e||null===e?Yu():vu(e)?e:Yu().withMutations((function(t){var n=mi(e);Vo(n.size),n.forEach((function(e){return t.add(e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(di(e).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t}(xu);$u.isOrderedSet=vu;var Hu,Ku=$u.prototype;function Gu(e,t){var n=Object.create(Ku);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Yu(){return Hu||(Hu=Gu(ou()))}Ku[xi]=!0,Ku.zip=Mu.zip,Ku.zipWith=Mu.zipWith,Ku.zipAll=Mu.zipAll,Ku.__empty=Yu,Ku.__make=Gu;var Xu=function(e,t){var n;!function(e){if(bi(e))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(wi(e))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===e||"object"!==typeof e)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(e);var r=function(i){var o=this;if(i instanceof r)return i;if(!(this instanceof r))return new r(i);if(!n){n=!0;var s=Object.keys(e),u=a._indices={};a._name=t,a._keys=s,a._defaultValues=e;for(var l=0;l<s.length;l++){var c=s[l];u[c]=l,a[c]?"object"===typeof console&&console.warn&&console.warn("Cannot define "+Zu(this)+' with property "'+c+'" since that property name is part of the Record API.'):tl(a,c)}}return this.__ownerID=void 0,this._values=qs().withMutations((function(e){e.setSize(o._keys.length),di(i).forEach((function(t,n){e.set(o._indices[n],t===o._defaultValues[n]?void 0:t)}))})),this},a=r.prototype=Object.create(Ju);return a.constructor=r,t&&(r.displayName=t),r};Xu.prototype.toString=function(){for(var e,t=Zu(this)+" { ",n=this._keys,r=0,a=n.length;r!==a;r++)t+=(r?", ":"")+(e=n[r])+": "+Ho(this.get(e));return t+" }"},Xu.prototype.equals=function(e){return this===e||bi(e)&&el(this).equals(el(e))},Xu.prototype.hashCode=function(){return el(this).hashCode()},Xu.prototype.has=function(e){return this._indices.hasOwnProperty(e)},Xu.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._indices[e],r=this._values.get(n);return void 0===r?this._defaultValues[e]:r},Xu.prototype.set=function(e,t){if(this.has(e)){var n=this._values.set(this._indices[e],t===this._defaultValues[e]?void 0:t);if(n!==this._values&&!this.__ownerID)return Qu(this,n)}return this},Xu.prototype.remove=function(e){return this.set(e)},Xu.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:Qu(this,e)},Xu.prototype.wasAltered=function(){return this._values.wasAltered()},Xu.prototype.toSeq=function(){return el(this)},Xu.prototype.toJS=function(){return wu(this)},Xu.prototype.entries=function(){return this.__iterator(2)},Xu.prototype.__iterator=function(e,t){return el(this).__iterator(e,t)},Xu.prototype.__iterate=function(e,t){return el(this).__iterate(e,t)},Xu.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._values.__ensureOwner(e);return e?Qu(this,t,e):(this.__ownerID=e,this._values=t,this)},Xu.isRecord=bi,Xu.getDescriptiveName=Zu;var Ju=Xu.prototype;function Qu(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._values=t,r.__ownerID=n,r}function Zu(e){return e.constructor.displayName||e.constructor.name||"Record"}function el(e){return qi(e._keys.map((function(t){return[t,e.get(t)]})))}function tl(e,t){try{Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){Fo(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}catch(n){}}Ju[yi]=!0,Ju.delete=Ju.remove,Ju.deleteIn=Ju.removeIn=rs,Ju.getIn=Pu,Ju.hasIn=Ru.hasIn,Ju.merge=ss,Ju.mergeWith=us,Ju.mergeIn=hs,Ju.mergeDeep=ps,Ju.mergeDeepWith=ds,Ju.mergeDeepIn=ms,Ju.setIn=ts,Ju.update=is,Ju.updateIn=os,Ju.withMutations=gs,Ju.asMutable=vs,Ju.asImmutable=ys,Ju[Ei]=Ju.entries,Ju.toJSON=Ju.toObject=Ru.toObject,Ju.inspect=Ju.toSource=function(){return this.toString()};var nl=function(t){var n=t.images,r=(t.group,t.multiple),a=t.onPick,i=t.maxPicks,o=t.onMaxPicks,s=u((0,e.useState)(ws()),2),l=s[0],c=s[1];return(0,B.jsxs)("div",{className:"image_picker",children:[n.map((function(e,t){var n=l.has(e.value);return(0,B.jsxs)("div",{className:"responsive".concat(n?" selected":""),onClick:function(){return function(e){var t,n=r?l:ws();if(n.has(e.value)?t=n.delete(e.value):"undefined"===typeof i||n.size<i?t=n.set(e.value,{src:e.src,dim_lighting:e.dim_lighting,bright_lighting:e.bright_lighting,has_square_surfaces:e.has_square_surfaces}):o&&o(e),t){c(t);var s=[];t.forEach((function(e,t){s.push({data:e,value:t})})),a(r?s:s[0])}}(e)},children:[(0,B.jsx)("img",{src:e.src,className:"thumbnail".concat(n?" selected":""," object-fit-cover"),width:150,height:150,alt:"model training visual"}),(0,B.jsx)("div",{className:"checked",children:(0,B.jsx)("div",{className:"icon"})})]},t)})),(0,B.jsx)("div",{className:"clear"})]})},rl="".concat(window.location.origin).concat("/culture/aikr/build","/img/"),al=function(t){var n,r,a,i,o,s,c=t.set,f=t.mode,p=u((0,e.useState)([]),2),d=p[0],h=p[1],m=u((0,e.useState)(0),2),g=m[0],v=m[1],y=u((0,e.useState)(0),2),b=y[0],w=y[1],x=u((0,e.useState)(0),2),_=x[0],N=x[1],k=u((0,e.useState)(!1),2),E=k[0],S=k[1],C=qa((function(e){return e.data})),I=function(){return S(!1)},O=("Training"===f?null===(n=C[c])||void 0===n?void 0:n.dataset:C.validation_pool).map((function(e,t){return{src:"".concat(rl).concat(e.image),value:t,dim_lighting:e.dim_lighting,bright_lighting:e.bright_lighting,has_square_surfaces:e.has_square_surfaces}}));return(0,e.useEffect)((function(){if(d.length>0){var e=d.reduce((function(e,t){var n=t.data,r=n.dim_lighting,a=n.bright_lighting,i=n.has_square_surfaces;return{dim_lighting:+r+e.dim_lighting,bright_lighting:+a+e.bright_lighting,has_square_surfaces:+i+e.has_square_surfaces}}),{dim_lighting:0,bright_lighting:0,has_square_surfaces:0}),t=e.dim_lighting,n=e.bright_lighting,r=e.has_square_surfaces;v(t),w(n),N(r),qa.getState().updateGroupSelection(c,l({},"Evaluation"===f?"validate_selected":"selected",d.map((function(e){return{src:"".concat(e.data.src),value:e.data.value}}))))}}),[d,c,f]),(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(je,{children:(0,B.jsxs)(je.Body,{children:[(0,B.jsxs)("div",{className:"d-inline-flex justify-content-between w-100",children:[(0,B.jsx)(je.Title,{children:null===(r=C[c])||void 0===r?void 0:r.label}),(0,B.jsx)(pe,{bg:"secondary",style:{height:"max-content"},children:f})]}),(0,B.jsx)(je.Subtitle,{className:"mb-2 text-muted",children:"Click to ".concat(0===d.length?"add images to":"reselect your images for "," ").concat(null===(a=C[c])||void 0===a?void 0:a.label)}),d&&(0,B.jsx)(Ve,{className:"w-100 mt-3 mb-2",children:d.map((function(e,t){return(0,B.jsx)($e,{md:3,children:(0,B.jsx)(Xe,{src:e.data.src,thumbnail:!0,fluid:!0})},t)}))}),(0,B.jsx)($e,{sm:12,children:(0,B.jsxs)(Ze,{variant:"primary",onClick:function(){return S(!0)},className:"d-block w-100",children:[(0,B.jsx)(Or,{style:{verticalAlign:"middle"}})," Add"]})})]})}),(0,B.jsx)(dn,{children:(0,B.jsxs)(dn.Item,{eventKey:"0",children:[(0,B.jsx)(dn.Header,{children:(0,B.jsx)("strong",{children:"Data Breakdown"})}),(0,B.jsxs)(dn.Body,{children:[(0,B.jsx)("p",{children:" Yours vs. Big Data Company"}),(0,B.jsxs)(Ve,{children:[(0,B.jsx)($e,{sm:6,children:(0,B.jsx)(de,{dim:g||0,bright:b||0,square:_||0})}),(0,B.jsx)($e,{sm:6,children:(0,B.jsx)(de,{dim:(null===(i=C[c])||void 0===i?void 0:i.corporate_score[0])||0,bright:(null===(o=C[c])||void 0===o?void 0:o.corporate_score[1])||0,square:(null===(s=C[c])||void 0===s?void 0:s.corporate_score[2])||0})})]}),"Training"===f&&(0,B.jsx)(Ze,{variant:"warning",onClick:function(){var e;return h(function(e){return e.map((function(e,t){return{data:{bright_lighting:e.bright_lighting,dim_lighting:e.dim_lighting,has_square_surfaces:e.has_square_surfaces,src:"".concat(rl).concat(e.image)},value:t}}))}(null===(e=C[c])||void 0===e?void 0:e.dataset))},className:"d-block w-100 mt-3",children:"Let AI Assistant De-bias for me"})]})]})}),(0,B.jsxs)(xr,{show:E,onHide:I,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,B.jsx)(xr.Header,{closeButton:!0,children:(0,B.jsxs)(xr.Title,{id:"contained-modal-title-vcenter",children:["Select images for ",C[c].label]})}),(0,B.jsx)(xr.Body,{children:(0,B.jsx)(nl,{images:O,onPick:h,group:C[c],multiple:!0})}),(0,B.jsx)(xr.Footer,{children:(0,B.jsx)(Ze,{onClick:I,children:"Close"})})]})]})},il=__webpack_require__.p+"static/media/loading.c74a0e1d5f4ef2e8b3e5.gif",ol=function(e){var t=e.size,n=void 0===t?32:t;return(0,B.jsx)("img",{src:il,alt:"Loading...",width:n,height:n})},sl={prefix:"far",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 464c-114.7 0-208-93.31-208-208S141.3 48 256 48s208 93.31 208 208S370.7 464 256 464zM256 336c-18 0-32 14-32 32s13.1 32 32 32c17.1 0 32-14 32-32S273.1 336 256 336zM289.1 128h-51.1C199 128 168 159 168 198c0 13 11 24 24 24s24-11 24-24C216 186 225.1 176 237.1 176h51.1C301.1 176 312 186 312 198c0 8-4 14.1-11 18.1L244 251C236 256 232 264 232 272V288c0 13 11 24 24 24S280 301 280 288V286l45.1-28c21-13 34-36 34-60C360 159 329 128 289.1 128z"]},ul={prefix:"far",iconName:"user",icon:[448,512,[62144,128100],"f007","M272 304h-96C78.8 304 0 382.8 0 480c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32C448 382.8 369.2 304 272 304zM48.99 464C56.89 400.9 110.8 352 176 352h96c65.16 0 119.1 48.95 127 112H48.99zM224 256c70.69 0 128-57.31 128-128c0-70.69-57.31-128-128-128S96 57.31 96 128C96 198.7 153.3 256 224 256zM224 48c44.11 0 80 35.89 80 80c0 44.11-35.89 80-80 80S144 172.1 144 128C144 83.89 179.9 48 224 48z"]},ll={prefix:"fas",iconName:"user",icon:[448,512,[62144,128100],"f007","M224 256c70.7 0 128-57.31 128-128s-57.3-128-128-128C153.3 0 96 57.31 96 128S153.3 256 224 256zM274.7 304H173.3C77.61 304 0 381.6 0 477.3c0 19.14 15.52 34.67 34.66 34.67h378.7C432.5 512 448 496.5 448 477.3C448 381.6 370.4 304 274.7 304z"]};function cl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cl(Object(n),!0).forEach((function(t){hl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pl(e){return pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pl(e)}function dl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ml(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(e,t)||vl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gl(e){return function(e){if(Array.isArray(e))return yl(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||vl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vl(e,t){if(e){if("string"===typeof e)return yl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yl(e,t):void 0}}function yl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bl=function(){},wl={},xl={},_l=null,Nl={mark:bl,measure:bl};try{"undefined"!==typeof window&&(wl=window),"undefined"!==typeof document&&(xl=document),"undefined"!==typeof MutationObserver&&(_l=MutationObserver),"undefined"!==typeof performance&&(Nl=performance)}catch(NN){}var kl=(wl.navigator||{}).userAgent,El=void 0===kl?"":kl,Sl=wl,Cl=xl,Il=_l,Ol=Nl,Pl=(Sl.document,!!Cl.documentElement&&!!Cl.head&&"function"===typeof Cl.addEventListener&&"function"===typeof Cl.createElement),Tl=~El.indexOf("MSIE")||~El.indexOf("Trident/"),Al="svg-inline--fa",Rl="data-fa-i2svg",Dl="data-fa-pseudo-element",Ml="data-prefix",Ll="data-icon",zl="fontawesome-i2svg",jl=["HTML","HEAD","STYLE","SCRIPT"],Bl=function(){try{return!0}catch(NN){return!1}}(),Fl={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},Vl={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},Ul={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},Wl={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},ql=/fa[srltdbk\-\ ]/,$l="fa-layers-text",Hl=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,Kl={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},Gl=[1,2,3,4,5,6,7,8,9,10],Yl=Gl.concat([11,12,13,14,15,16,17,18,19,20]),Xl=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Jl="duotone-group",Ql="swap-opacity",Zl="primary",ec="secondary",tc=[].concat(gl(Object.keys(Vl)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Jl,Ql,Zl,ec]).concat(Gl.map((function(e){return"".concat(e,"x")}))).concat(Yl.map((function(e){return"w-".concat(e)}))),nc=Sl.FontAwesomeConfig||{};if(Cl&&"function"===typeof Cl.querySelector){[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=ml(e,2),n=t[0],r=t[1],a=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=Cl.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==a&&null!==a&&(nc[r]=a)}))}var rc=fl(fl({},{familyPrefix:"fa",styleDefault:"solid",replacementClass:Al,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0}),nc);rc.autoReplaceSvg||(rc.observeMutations=!1);var ac={};Object.keys(rc).forEach((function(e){Object.defineProperty(ac,e,{enumerable:!0,set:function(t){rc[e]=t,ic.forEach((function(e){return e(ac)}))},get:function(){return rc[e]}})})),Sl.FontAwesomeConfig=ac;var ic=[];var oc=16,sc={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function uc(){for(var e=12,t="";e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function lc(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function cc(e){return e.classList?lc(e.classList):(e.getAttribute("class")||"").split(" ").filter((function(e){return e}))}function fc(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function pc(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")}),"")}function dc(e){return e.size!==sc.size||e.x!==sc.x||e.y!==sc.y||e.rotate!==sc.rotate||e.flipX||e.flipY}function hc(){var e="fa",t=Al,n=ac.familyPrefix,r=ac.replacementClass,a=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(n!==e||r!==t){var i=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");a=a.replace(i,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(s,".".concat(r))}return a}var mc=!1;function gc(){ac.autoAddCss&&!mc&&(!function(e){if(e&&Pl){var t=Cl.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=Cl.head.childNodes,r=null,a=n.length-1;a>-1;a--){var i=n[a],o=(i.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=i)}Cl.head.insertBefore(t,r)}}(hc()),mc=!0)}var vc={mixout:function(){return{dom:{css:hc,insertCss:gc}}},hooks:function(){return{beforeDOMElementCreation:function(){gc()},beforeI2svg:function(){gc()}}}},yc=Sl||{};yc.___FONT_AWESOME___||(yc.___FONT_AWESOME___={}),yc.___FONT_AWESOME___.styles||(yc.___FONT_AWESOME___.styles={}),yc.___FONT_AWESOME___.hooks||(yc.___FONT_AWESOME___.hooks={}),yc.___FONT_AWESOME___.shims||(yc.___FONT_AWESOME___.shims=[]);var bc=yc.___FONT_AWESOME___,wc=[],xc=!1;function _c(e){Pl&&(xc?setTimeout(e,0):wc.push(e))}function Nc(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,a=e.children,i=void 0===a?[]:a;return"string"===typeof e?fc(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(fc(e[n]),'" ')}),"").trim()}(r),">").concat(i.map(Nc).join(""),"</").concat(t,">")}function kc(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}Pl&&((xc=(Cl.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Cl.readyState))||Cl.addEventListener("DOMContentLoaded",(function e(){Cl.removeEventListener("DOMContentLoaded",e),xc=1,wc.map((function(e){return e()}))})));var Ec=function(e,t,n,r){var a,i,o,s=Object.keys(e),u=s.length,l=void 0!==r?function(e,t){return function(n,r,a,i){return e.call(t,n,r,a,i)}}(t,r):t;for(void 0===n?(a=1,o=e[s[0]]):(a=0,o=n);a<u;a++)o=l(o,e[i=s[a]],i,e);return o};function Sc(e){var t=function(e){for(var t=[],n=0,r=e.length;n<r;){var a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){var i=e.charCodeAt(n++);56320==(64512&i)?t.push(((1023&a)<<10)+(1023&i)+65536):(t.push(a),n--)}else t.push(a)}return t}(e);return 1===t.length?t[0].toString(16):null}function Cc(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t}),{})}function Ic(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.skipHooks,a=void 0!==r&&r,i=Cc(t);"function"!==typeof bc.hooks.addPack||a?bc.styles[e]=fl(fl({},bc.styles[e]||{}),i):bc.hooks.addPack(e,Cc(t)),"fas"===e&&Ic("fa",t)}var Oc=bc.styles,Pc=bc.shims,Tc=Object.values(Ul),Ac=null,Rc={},Dc={},Mc={},Lc={},zc={},jc=Object.keys(Fl);function Bc(e,t){var n,r=t.split("-"),a=r[0],i=r.slice(1).join("-");return a!==e||""===i||(n=i,~tc.indexOf(n))?null:i}var Fc,Vc=function(){var e=function(e){return Ec(Oc,(function(t,n,r){return t[r]=Ec(n,e,{}),t}),{})};Rc=e((function(e,t,n){if(t[3]&&(e[t[3]]=n),t[2]){var r=t[2].filter((function(e){return"number"===typeof e}));r.forEach((function(t){e[t.toString(16)]=n}))}return e})),Dc=e((function(e,t,n){if(e[n]=n,t[2]){var r=t[2].filter((function(e){return"string"===typeof e}));r.forEach((function(t){e[t]=n}))}return e})),zc=e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in Oc||ac.autoFetchSvg,n=Ec(Pc,(function(e,n){var r=n[0],a=n[1],i=n[2];return"far"!==a||t||(a="fas"),"string"===typeof r&&(e.names[r]={prefix:a,iconName:i}),"number"===typeof r&&(e.unicodes[r.toString(16)]={prefix:a,iconName:i}),e}),{names:{},unicodes:{}});Mc=n.names,Lc=n.unicodes,Ac=Hc(ac.styleDefault)};function Uc(e,t){return(Rc[e]||{})[t]}function Wc(e,t){return(zc[e]||{})[t]}function qc(e){return Mc[e]||{prefix:null,iconName:null}}function $c(){return Ac}Fc=function(e){Ac=Hc(e.styleDefault)},ic.push(Fc),Vc();function Hc(e){var t=Vl[e]||Vl[Fl[e]],n=e in bc.styles?e:null;return t||n||null}function Kc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.skipLookups,r=void 0!==n&&n,a=null,i=e.reduce((function(e,t){var n=Bc(ac.familyPrefix,t);if(Oc[t]?(t=Tc.includes(t)?Wl[t]:t,a=t,e.prefix=t):jc.indexOf(t)>-1?(a=t,e.prefix=Hc(t)):n?e.iconName=n:t!==ac.replacementClass&&e.rest.push(t),!r&&e.prefix&&e.iconName){var i="fa"===a?qc(e.iconName):{},o=Wc(e.prefix,e.iconName);i.prefix&&(a=null),e.iconName=i.iconName||o||e.iconName,e.prefix=i.prefix||e.prefix,"far"!==e.prefix||Oc.far||!Oc.fas||ac.autoFetchSvg||(e.prefix="fas")}return e}),{prefix:null,iconName:null,rest:[]});return"fa"!==i.prefix&&"fa"!==a||(i.prefix=$c()||"fas"),i}var Gc=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n.reduce(this._pullDefinitions,{});Object.keys(a).forEach((function(t){e.definitions[t]=fl(fl({},e.definitions[t]||{}),a[t]),Ic(t,a[t]);var n=Ul[t];n&&Ic(n,a[t]),Vc()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],a=r.prefix,i=r.iconName,o=r.icon,s=o[2];e[a]||(e[a]={}),s.length>0&&s.forEach((function(t){"string"===typeof t&&(e[a][t]=o)})),e[a][i]=o})),e}}],n&&dl(t.prototype,n),r&&dl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Yc=[],Xc={},Jc={},Qc=Object.keys(Jc);function Zc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i=Xc[e]||[];return i.forEach((function(e){t=e.apply(null,[t].concat(r))})),t}function ef(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=Xc[e]||[];a.forEach((function(e){e.apply(null,n)}))}function tf(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Jc[e]?Jc[e].apply(null,t):void 0}function nf(e){"fa"===e.prefix&&(e.prefix="fas");var t=e.iconName,n=e.prefix||$c();if(t)return t=Wc(n,t)||t,kc(rf.definitions,n,t)||kc(bc.styles,n,t)}var rf=new Gc,af={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Pl?(ef("beforeI2svg",e),tf("pseudoElements2svg",e),tf("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===ac.autoReplaceSvg&&(ac.autoReplaceSvg=!0),ac.observeMutations=!0,_c((function(){uf({autoReplaceSvgRoot:t}),ef("watch",e)}))}},of={icon:function(e){if(null===e)return null;if("object"===pl(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Wc(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=Hc(e[0]);return{prefix:n,iconName:Wc(n,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(ac.familyPrefix,"-"))>-1||e.match(ql))){var r=Kc(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||$c(),iconName:Wc(r.prefix,r.iconName)||r.iconName}}if("string"===typeof e){var a=$c();return{prefix:a,iconName:Wc(a,e)||e}}}},sf={noAuto:function(){ac.autoReplaceSvg=!1,ac.observeMutations=!1,ef("noAuto")},config:ac,dom:af,parse:of,library:rf,findIconDefinition:nf,toHtml:Nc},uf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot,n=void 0===t?Cl:t;(Object.keys(bc.styles).length>0||ac.autoFetchSvg)&&Pl&&ac.autoReplaceSvg&&sf.dom.i2svg({node:n})};function lf(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return Nc(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(Pl){var t=Cl.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function cf(e){var t=e.icons,n=t.main,r=t.mask,a=e.prefix,i=e.iconName,o=e.transform,s=e.symbol,u=e.title,l=e.maskId,c=e.titleId,f=e.extra,p=e.watchable,d=void 0!==p&&p,h=r.found?r:n,m=h.width,g=h.height,v="fak"===a,y=[ac.replacementClass,i?"".concat(ac.familyPrefix,"-").concat(i):""].filter((function(e){return-1===f.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(f.classes).join(" "),b={children:[],attributes:fl(fl({},f.attributes),{},{"data-prefix":a,"data-icon":i,class:y,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},w=v&&!~f.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};d&&(b.attributes[Rl]=""),u&&(b.children.push({tag:"title",attributes:{id:b.attributes["aria-labelledby"]||"title-".concat(c||uc())},children:[u]}),delete b.attributes.title);var x=fl(fl({},b),{},{prefix:a,iconName:i,main:n,mask:r,maskId:l,transform:o,symbol:s,styles:fl(fl({},w),f.styles)}),_=r.found&&n.found?tf("generateAbstractMask",x)||{children:[],attributes:{}}:tf("generateAbstractIcon",x)||{children:[],attributes:{}},N=_.children,k=_.attributes;return x.children=N,x.attributes=k,s?function(e){var t=e.prefix,n=e.iconName,r=e.children,a=e.attributes,i=e.symbol,o=!0===i?"".concat(t,"-").concat(ac.familyPrefix,"-").concat(n):i;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:fl(fl({},a),{},{id:o}),children:r}]}]}(x):function(e){var t=e.children,n=e.main,r=e.mask,a=e.attributes,i=e.styles,o=e.transform;if(dc(o)&&n.found&&!r.found){var s={x:n.width/n.height/2,y:.5};a.style=pc(fl(fl({},i),{},{"transform-origin":"".concat(s.x+o.x/16,"em ").concat(s.y+o.y/16,"em")}))}return[{tag:"svg",attributes:a,children:t}]}(x)}function ff(e){var t=e.content,n=e.width,r=e.height,a=e.transform,i=e.title,o=e.extra,s=e.watchable,u=void 0!==s&&s,l=fl(fl(fl({},o.attributes),i?{title:i}:{}),{},{class:o.classes.join(" ")});u&&(l[Rl]="");var c=fl({},o.styles);dc(a)&&(c.transform=function(e){var t=e.transform,n=e.width,r=void 0===n?16:n,a=e.height,i=void 0===a?16:a,o=e.startCentered,s=void 0!==o&&o,u="";return u+=s&&Tl?"translate(".concat(t.x/oc-r/2,"em, ").concat(t.y/oc-i/2,"em) "):s?"translate(calc(-50% + ".concat(t.x/oc,"em), calc(-50% + ").concat(t.y/oc,"em)) "):"translate(".concat(t.x/oc,"em, ").concat(t.y/oc,"em) "),u+="scale(".concat(t.size/oc*(t.flipX?-1:1),", ").concat(t.size/oc*(t.flipY?-1:1),") "),u+"rotate(".concat(t.rotate,"deg) ")}({transform:a,startCentered:!0,width:n,height:r}),c["-webkit-transform"]=c.transform);var f=pc(c);f.length>0&&(l.style=f);var p=[];return p.push({tag:"span",attributes:l,children:[t]}),i&&p.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),p}function pf(e){var t=e.content,n=e.title,r=e.extra,a=fl(fl(fl({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),i=pc(r.styles);i.length>0&&(a.style=i);var o=[];return o.push({tag:"span",attributes:a,children:[t]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}var df=bc.styles;function hf(e){var t=e[0],n=e[1],r=ml(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(ac.familyPrefix,"-").concat(Jl)},children:[{tag:"path",attributes:{class:"".concat(ac.familyPrefix,"-").concat(ec),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(ac.familyPrefix,"-").concat(Zl),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}var mf={found:!1,width:512,height:512};function gf(e,t){var n=t;return"fa"===t&&null!==ac.styleDefault&&(t=$c()),new Promise((function(r,a){tf("missingIconAbstract");if("fa"===n){var i=qc(e)||{};e=i.iconName||e,t=i.prefix||t}if(e&&t&&df[t]&&df[t][e])return r(hf(df[t][e]));!function(e,t){Bl||ac.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),r(fl(fl({},mf),{},{icon:ac.showMissingIcons&&e&&tf("missingIconAbstract")||{}}))}))}var vf=function(){},yf=ac.measurePerformance&&Ol&&Ol.mark&&Ol.measure?Ol:{mark:vf,measure:vf},bf='FA "6.0.0"',wf=function(e){yf.mark("".concat(bf," ").concat(e," ends")),yf.measure("".concat(bf," ").concat(e),"".concat(bf," ").concat(e," begins"),"".concat(bf," ").concat(e," ends"))},xf=function(e){return yf.mark("".concat(bf," ").concat(e," begins")),function(){return wf(e)}},_f=function(){};function Nf(e){return"string"===typeof(e.getAttribute?e.getAttribute(Rl):null)}function kf(e){return Cl.createElementNS("http://www.w3.org/2000/svg",e)}function Ef(e){return Cl.createElement(e)}function Sf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ceFn,r=void 0===n?"svg"===e.tag?kf:Ef:n;if("string"===typeof e)return Cl.createTextNode(e);var a=r(e.tag);Object.keys(e.attributes||[]).forEach((function(t){a.setAttribute(t,e.attributes[t])}));var i=e.children||[];return i.forEach((function(e){a.appendChild(Sf(e,{ceFn:r}))})),a}var Cf={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach((function(e){t.parentNode.insertBefore(Sf(e),t)})),null===t.getAttribute(Rl)&&ac.keepOriginalSource){var n=Cl.createComment(function(e){var t=" ".concat(e.outerHTML," ");return"".concat(t,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){var t=e[0],n=e[1];if(~cc(t).indexOf(ac.replacementClass))return Cf.replace(e);var r=new RegExp("".concat(ac.familyPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var a=n[0].attributes.class.split(" ").reduce((function(e,t){return t===ac.replacementClass||t.match(r)?e.toSvg.push(t):e.toNode.push(t),e}),{toNode:[],toSvg:[]});n[0].attributes.class=a.toSvg.join(" "),0===a.toNode.length?t.removeAttribute("class"):t.setAttribute("class",a.toNode.join(" "))}var i=n.map((function(e){return Nc(e)})).join("\n");t.setAttribute(Rl,""),t.innerHTML=i}};function If(e){e()}function Of(e,t){var n="function"===typeof t?t:_f;if(0===e.length)n();else{var r=If;"async"===ac.mutateApproach&&(r=Sl.requestAnimationFrame||If),r((function(){var t=!0===ac.autoReplaceSvg?Cf.replace:Cf[ac.autoReplaceSvg]||Cf.replace,r=xf("mutate");e.map(t),r(),n()}))}}var Pf=!1;function Tf(){Pf=!0}function Af(){Pf=!1}var Rf=null;function Df(e){if(Il&&ac.observeMutations){var t=e.treeCallback,n=void 0===t?_f:t,r=e.nodeCallback,a=void 0===r?_f:r,i=e.pseudoElementsCallback,o=void 0===i?_f:i,s=e.observeMutationsRoot,u=void 0===s?Cl:s;Rf=new Il((function(e){if(!Pf){var t=$c();lc(e).forEach((function(e){if("childList"===e.type&&e.addedNodes.length>0&&!Nf(e.addedNodes[0])&&(ac.searchPseudoElements&&o(e.target),n(e.target)),"attributes"===e.type&&e.target.parentNode&&ac.searchPseudoElements&&o(e.target.parentNode),"attributes"===e.type&&Nf(e.target)&&~Xl.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){var t=e.getAttribute?e.getAttribute(Ml):null,n=e.getAttribute?e.getAttribute(Ll):null;return t&&n}(e.target)){var r=Kc(cc(e.target)),i=r.prefix,s=r.iconName;e.target.setAttribute(Ml,i||t),s&&e.target.setAttribute(Ll,s)}else(u=e.target)&&u.classList&&u.classList.contains&&u.classList.contains(ac.replacementClass)&&a(e.target);var u}))}})),Pl&&Rf.observe(u,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function Mf(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce((function(e,t){var n=t.split(":"),r=n[0],a=n.slice(1);return r&&a.length>0&&(e[r]=a.join(":").trim()),e}),{})),n}function Lf(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"",a=Kc(cc(e));return a.prefix||(a.prefix=$c()),t&&n&&(a.prefix=t,a.iconName=n),a.iconName&&a.prefix||a.prefix&&r.length>0&&(a.iconName=function(e,t){return(Dc[e]||{})[t]}(a.prefix,e.innerText)||Uc(a.prefix,Sc(e.innerText))),a}function zf(e){var t=lc(e.attributes).reduce((function(e,t){return"class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e}),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return ac.autoA11y&&(n?t["aria-labelledby"]="".concat(ac.replacementClass,"-title-").concat(r||uc()):(t["aria-hidden"]="true",t.focusable="false")),t}function jf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=Lf(e),r=n.iconName,a=n.prefix,i=n.rest,o=zf(e),s=Zc("parseNodeAttributes",{},e),u=t.styleParser?Mf(e):[];return fl({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:a,transform:sc,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:i,styles:u,attributes:o}},s)}var Bf=bc.styles;function Ff(e){var t="nest"===ac.autoReplaceSvg?jf(e,{styleParser:!1}):jf(e);return~t.extra.classes.indexOf($l)?tf("generateLayersText",e,t):tf("generateSvgReplacementMutation",e,t)}function Vf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Pl)return Promise.resolve();var n=Cl.documentElement.classList,r=function(e){return n.add("".concat(zl,"-").concat(e))},a=function(e){return n.remove("".concat(zl,"-").concat(e))},i=ac.autoFetchSvg?Object.keys(Fl):Object.keys(Bf),o=[".".concat($l,":not([").concat(Rl,"])")].concat(i.map((function(e){return".".concat(e,":not([").concat(Rl,"])")}))).join(", ");if(0===o.length)return Promise.resolve();var s=[];try{s=lc(e.querySelectorAll(o))}catch(NN){}if(!(s.length>0))return Promise.resolve();r("pending"),a("complete");var u=xf("onTree"),l=s.reduce((function(e,t){try{var n=Ff(t);n&&e.push(n)}catch(NN){Bl||"MissingIcon"===NN.name&&console.error(NN)}return e}),[]);return new Promise((function(e,n){Promise.all(l).then((function(n){Of(n,(function(){r("active"),r("complete"),a("pending"),"function"===typeof t&&t(),u(),e()}))})).catch((function(e){u(),n(e)}))}))}function Uf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Ff(e).then((function(e){e&&Of([e],t)}))}var Wf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?sc:n,a=t.symbol,i=void 0!==a&&a,o=t.mask,s=void 0===o?null:o,u=t.maskId,l=void 0===u?null:u,c=t.title,f=void 0===c?null:c,p=t.titleId,d=void 0===p?null:p,h=t.classes,m=void 0===h?[]:h,g=t.attributes,v=void 0===g?{}:g,y=t.styles,b=void 0===y?{}:y;if(e){var w=e.prefix,x=e.iconName,_=e.icon;return lf(fl({type:"icon"},e),(function(){return ef("beforeDOMElementCreation",{iconDefinition:e,params:t}),ac.autoA11y&&(f?v["aria-labelledby"]="".concat(ac.replacementClass,"-title-").concat(d||uc()):(v["aria-hidden"]="true",v.focusable="false")),cf({icons:{main:hf(_),mask:s?hf(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:w,iconName:x,transform:fl(fl({},sc),r),symbol:i,title:f,maskId:l,titleId:d,extra:{attributes:v,styles:b,classes:m}})}))}},qf={mixout:function(){return{icon:(e=Wf,function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t||{}).icon?t:nf(t||{}),a=n.mask;return a&&(a=(a||{}).icon?a:nf(a||{})),e(r,fl(fl({},n),{},{mask:a}))})};var e},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=Vf,e.nodeCallback=Uf,e}}},provides:function(e){e.i2svg=function(e){var t=e.node,n=void 0===t?Cl:t,r=e.callback;return Vf(n,void 0===r?function(){}:r)},e.generateSvgReplacementMutation=function(e,t){var n=t.iconName,r=t.title,a=t.titleId,i=t.prefix,o=t.transform,s=t.symbol,u=t.mask,l=t.maskId,c=t.extra;return new Promise((function(t,f){Promise.all([gf(n,i),u.iconName?gf(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((function(u){var f=ml(u,2),p=f[0],d=f[1];t([e,cf({icons:{main:p,mask:d},prefix:i,iconName:n,transform:o,symbol:s,maskId:l,title:r,titleId:a,extra:c,watchable:!0})])})).catch(f)}))},e.generateAbstractIcon=function(e){var t,n=e.children,r=e.attributes,a=e.main,i=e.transform,o=pc(e.styles);return o.length>0&&(r.style=o),dc(i)&&(t=tf("generateAbstractTransformGrouping",{main:a,transform:i,containerWidth:a.width,iconWidth:a.width})),n.push(t||a.icon),{children:n,attributes:r}}}},$f={mixout:function(){return{layer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.classes,r=void 0===n?[]:n;return lf({type:"layer"},(function(){ef("beforeDOMElementCreation",{assembler:e,params:t});var n=[];return e((function(e){Array.isArray(e)?e.map((function(e){n=n.concat(e.abstract)})):n=n.concat(e.abstract)})),[{tag:"span",attributes:{class:["".concat(ac.familyPrefix,"-layers")].concat(gl(r)).join(" ")},children:n}]}))}}}},Hf={mixout:function(){return{counter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,r=void 0===n?null:n,a=t.classes,i=void 0===a?[]:a,o=t.attributes,s=void 0===o?{}:o,u=t.styles,l=void 0===u?{}:u;return lf({type:"counter",content:e},(function(){return ef("beforeDOMElementCreation",{content:e,params:t}),pf({content:e.toString(),title:r,extra:{attributes:s,styles:l,classes:["".concat(ac.familyPrefix,"-layers-counter")].concat(gl(i))}})}))}}}},Kf={mixout:function(){return{text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?sc:n,a=t.title,i=void 0===a?null:a,o=t.classes,s=void 0===o?[]:o,u=t.attributes,l=void 0===u?{}:u,c=t.styles,f=void 0===c?{}:c;return lf({type:"text",content:e},(function(){return ef("beforeDOMElementCreation",{content:e,params:t}),ff({content:e,transform:fl(fl({},sc),r),title:i,extra:{attributes:l,styles:f,classes:["".concat(ac.familyPrefix,"-layers-text")].concat(gl(s))}})}))}}},provides:function(e){e.generateLayersText=function(e,t){var n=t.title,r=t.transform,a=t.extra,i=null,o=null;if(Tl){var s=parseInt(getComputedStyle(e).fontSize,10),u=e.getBoundingClientRect();i=u.width/s,o=u.height/s}return ac.autoA11y&&!n&&(a.attributes["aria-hidden"]="true"),Promise.resolve([e,ff({content:e.innerHTML,width:i,height:o,transform:r,title:n,extra:a,watchable:!0})])}}},Gf=new RegExp('"',"ug"),Yf=[1105920,1112319];function Xf(e,t){var n="".concat("data-fa-pseudo-element-pending").concat(t.replace(":","-"));return new Promise((function(r,a){if(null!==e.getAttribute(n))return r();var i=lc(e.children).filter((function(e){return e.getAttribute(Dl)===t}))[0],o=Sl.getComputedStyle(e,t),s=o.getPropertyValue("font-family").match(Hl),u=o.getPropertyValue("font-weight"),l=o.getPropertyValue("content");if(i&&!s)return e.removeChild(i),r();if(s&&"none"!==l&&""!==l){var c=o.getPropertyValue("content"),f=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(s[2])?Vl[s[2].toLowerCase()]:Kl[u],p=function(e){var t=e.replace(Gf,""),n=function(e,t){var n,r=e.length,a=e.charCodeAt(t);return a>=55296&&a<=56319&&r>t+1&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(a-55296)+n-56320+65536:a}(t,0),r=n>=Yf[0]&&n<=Yf[1],a=2===t.length&&t[0]===t[1];return{value:Sc(a?t[0]:t),isSecondary:r||a}}(c),d=p.value,h=p.isSecondary,m=s[0].startsWith("FontAwesome"),g=Uc(f,d),v=g;if(m){var y=function(e){var t=Lc[e],n=Uc("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(d);y.iconName&&y.prefix&&(g=y.iconName,f=y.prefix)}if(!g||h||i&&i.getAttribute(Ml)===f&&i.getAttribute(Ll)===v)r();else{e.setAttribute(n,v),i&&e.removeChild(i);var b={iconName:null,title:null,titleId:null,prefix:null,transform:sc,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},w=b.extra;w.attributes[Dl]=t,gf(g,f).then((function(a){var i=cf(fl(fl({},b),{},{icons:{main:a,mask:{prefix:null,iconName:null,rest:[]}},prefix:f,iconName:v,extra:w,watchable:!0})),o=Cl.createElement("svg");"::before"===t?e.insertBefore(o,e.firstChild):e.appendChild(o),o.outerHTML=i.map((function(e){return Nc(e)})).join("\n"),e.removeAttribute(n),r()})).catch(a)}}else r()}))}function Jf(e){return Promise.all([Xf(e,"::before"),Xf(e,"::after")])}function Qf(e){return e.parentNode!==document.head&&!~jl.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(Dl)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}function Zf(e){if(Pl)return new Promise((function(t,n){var r=lc(e.querySelectorAll("*")).filter(Qf).map(Jf),a=xf("searchPseudoElements");Tf(),Promise.all(r).then((function(){a(),Af(),t()})).catch((function(){a(),Af(),n()}))}))}var ep=!1,tp=function(e){return e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],a=n.slice(1).join("-");if(r&&"h"===a)return e.flipX=!0,e;if(r&&"v"===a)return e.flipY=!0,e;if(a=parseFloat(a),isNaN(a))return e;switch(r){case"grow":e.size=e.size+a;break;case"shrink":e.size=e.size-a;break;case"left":e.x=e.x-a;break;case"right":e.x=e.x+a;break;case"up":e.y=e.y-a;break;case"down":e.y=e.y+a;break;case"rotate":e.rotate=e.rotate+a}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},np={mixout:function(){return{parse:{transform:function(e){return tp(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-transform");return n&&(e.transform=tp(n)),e}}},provides:function(e){e.generateAbstractTransformGrouping=function(e){var t=e.main,n=e.transform,r=e.containerWidth,a=e.iconWidth,i={transform:"translate(".concat(r/2," 256)")},o="translate(".concat(32*n.x,", ").concat(32*n.y,") "),s="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),u="rotate(".concat(n.rotate," 0 0)"),l={outer:i,inner:{transform:"".concat(o," ").concat(s," ").concat(u)},path:{transform:"translate(".concat(a/2*-1," -256)")}};return{tag:"g",attributes:fl({},l.outer),children:[{tag:"g",attributes:fl({},l.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:fl(fl({},t.icon.attributes),l.path)}]}]}}}},rp={x:0,y:0,width:"100%",height:"100%"};function ap(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var ip={hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-mask"),r=n?Kc(n.split(" ").map((function(e){return e.trim()}))):{prefix:null,iconName:null,rest:[]};return r.prefix||(r.prefix=$c()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides:function(e){e.generateAbstractMask=function(e){var t,n=e.children,r=e.attributes,a=e.main,i=e.mask,o=e.maskId,s=e.transform,u=a.width,l=a.icon,c=i.width,f=i.icon,p=function(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,a={transform:"translate(".concat(n/2," 256)")},i="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)");return{outer:a,inner:{transform:"".concat(i," ").concat(o," ").concat(s)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:s,containerWidth:c,iconWidth:u}),d={tag:"rect",attributes:fl(fl({},rp),{},{fill:"white"})},h=l.children?{children:l.children.map(ap)}:{},m={tag:"g",attributes:fl({},p.inner),children:[ap(fl({tag:l.tag,attributes:fl(fl({},l.attributes),p.path)},h))]},g={tag:"g",attributes:fl({},p.outer),children:[m]},v="mask-".concat(o||uc()),y="clip-".concat(o||uc()),b={tag:"mask",attributes:fl(fl({},rp),{},{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,g]},w={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(t=f,"g"===t.tag?t.children:[t])},b]};return n.push(w,{tag:"rect",attributes:fl({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(v,")")},rp)}),{children:n,attributes:r}}}},op={provides:function(e){var t=!1;Sl.matchMedia&&(t=Sl.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var e=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:fl(fl({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var a=fl(fl({},r),{},{attributeName:"opacity"}),i={tag:"circle",attributes:fl(fl({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||i.children.push({tag:"animate",attributes:fl(fl({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:fl(fl({},a),{},{values:"1;0;1;1;0;1;"})}),e.push(i),e.push({tag:"path",attributes:fl(fl({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:fl(fl({},a),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:fl(fl({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:fl(fl({},a),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}};!function(e,t){var n=t.mixoutsTo;Yc=e,Xc={},Object.keys(Jc).forEach((function(e){-1===Qc.indexOf(e)&&delete Jc[e]})),Yc.forEach((function(e){var t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((function(e){"function"===typeof t[e]&&(n[e]=t[e]),"object"===pl(t[e])&&Object.keys(t[e]).forEach((function(r){n[e]||(n[e]={}),n[e][r]=t[e][r]}))})),e.hooks){var r=e.hooks();Object.keys(r).forEach((function(e){Xc[e]||(Xc[e]=[]),Xc[e].push(r[e])}))}e.provides&&e.provides(Jc)}))}([vc,qf,$f,Hf,Kf,{hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=Zf,e}}},provides:function(e){e.pseudoElements2svg=function(e){var t=e.node,n=void 0===t?Cl:t;ac.searchPseudoElements&&Zf(n)}}},{mixout:function(){return{dom:{unwatch:function(){Tf(),ep=!0}}}},hooks:function(){return{bootstrap:function(){Df(Zc("mutationObserverCallbacks",{}))},noAuto:function(){Rf&&Rf.disconnect()},watch:function(e){var t=e.observeMutationsRoot;ep?Af():Df(Zc("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}},np,ip,op,{hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return e.symbol=r,e}}}}],{mixoutsTo:sf});var sp=sf.parse,up=sf.icon;function lp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lp(Object(n),!0).forEach((function(t){pp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fp(e){return fp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fp(e)}function pp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dp(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function hp(e){return function(e){if(Array.isArray(e))return mp(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return mp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mp(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gp(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var vp=["style"];function yp(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),a=gp(t.slice(0,r)),i=t.slice(r+1).trim();return a.startsWith("webkit")?e[(n=a,n.charAt(0).toUpperCase()+n.slice(1))]=i:e[a]=i,e}),{})}var bp=!1;try{bp=!0}catch(NN){}function wp(e){return e&&"object"===fp(e)&&e.prefix&&e.iconName&&e.icon?e:sp.icon?sp.icon(e):null===e?null:e&&"object"===fp(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function xp(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?pp({},e,t):{}}var _p=["forwardedRef"];function Np(e){var t=e.forwardedRef,n=dp(e,_p),r=n.icon,a=n.mask,i=n.symbol,o=n.className,s=n.title,u=n.titleId,l=n.maskId,c=wp(r),f=xp("classes",[].concat(hp(function(e){var t,n=e.beat,r=e.fade,a=e.beatFade,i=e.bounce,o=e.shake,s=e.flash,u=e.spin,l=e.spinPulse,c=e.spinReverse,f=e.pulse,p=e.fixedWidth,d=e.inverse,h=e.border,m=e.listItem,g=e.flip,v=e.size,y=e.rotation,b=e.pull,w=(pp(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":a,"fa-bounce":i,"fa-shake":o,"fa-flash":s,"fa-spin":u,"fa-spin-reverse":c,"fa-spin-pulse":l,"fa-pulse":f,"fa-fw":p,"fa-inverse":d,"fa-border":h,"fa-li":m,"fa-flip":!0===g,"fa-flip-horizontal":"horizontal"===g||"both"===g,"fa-flip-vertical":"vertical"===g||"both"===g},"fa-".concat(v),"undefined"!==typeof v&&null!==v),pp(t,"fa-rotate-".concat(y),"undefined"!==typeof y&&null!==y&&0!==y),pp(t,"fa-pull-".concat(b),"undefined"!==typeof b&&null!==b),pp(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(w).map((function(e){return w[e]?e:null})).filter((function(e){return e}))}(n)),hp(o.split(" ")))),p=xp("transform","string"===typeof n.transform?sp.transform(n.transform):n.transform),d=xp("mask",wp(a)),h=up(c,cp(cp(cp(cp({},f),p),d),{},{symbol:i,title:s,titleId:u,maskId:l}));if(!h)return function(){var e;!bp&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",c),null;var m=h.abstract,g={ref:t};return Object.keys(n).forEach((function(e){Np.defaultProps.hasOwnProperty(e)||(g[e]=n[e])})),kp(m[0],g)}Np.displayName="FontAwesomeIcon",Np.propTypes={beat:Ke().bool,border:Ke().bool,beatFade:Ke().bool,bounce:Ke().bool,className:Ke().string,fade:Ke().bool,flash:Ke().bool,mask:Ke().oneOfType([Ke().object,Ke().array,Ke().string]),maskId:Ke().string,fixedWidth:Ke().bool,inverse:Ke().bool,flip:Ke().oneOf([!0,!1,"horizontal","vertical","both"]),icon:Ke().oneOfType([Ke().object,Ke().array,Ke().string]),listItem:Ke().bool,pull:Ke().oneOf(["right","left"]),pulse:Ke().bool,rotation:Ke().oneOf([0,90,180,270]),shake:Ke().bool,size:Ke().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Ke().bool,spinPulse:Ke().bool,spinReverse:Ke().bool,symbol:Ke().oneOfType([Ke().bool,Ke().string]),title:Ke().string,titleId:Ke().string,transform:Ke().oneOfType([Ke().string,Ke().object]),swapOpacity:Ke().bool},Np.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var kp=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var a=(n.children||[]).map((function(n){return e(t,n)})),i=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=yp(r);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[gp(t)]=r}return e}),{attrs:{}}),o=r.style,s=void 0===o?{}:o,u=dp(r,vp);return i.attrs.style=cp(cp({},i.attrs.style),s),t.apply(void 0,[n.tag,cp(cp({},i.attrs),u)].concat(hp(a)))}.bind(null,e.createElement);var Ep=e.createContext(null);function Sp(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}var Cp=Object.prototype.hasOwnProperty;function Ip(e,t,n){var r,a=Sp(e.keys());try{for(a.s();!(r=a.n()).done;)if(Op(n=r.value,t))return n}catch(i){a.e(i)}finally{a.f()}}function Op(e,t){var n,r,a;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Op(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;var i,o=Sp(e);try{for(o.s();!(i=o.n()).done;){if((a=r=i.value)&&"object"===typeof a&&!(a=Ip(t,a)))return!1;if(!t.has(a))return!1}}catch(l){o.e(l)}finally{o.f()}return!0}if(n===Map){if(e.size!==t.size)return!1;var s,u=Sp(e);try{for(u.s();!(s=u.n()).done;){if((a=(r=s.value)[0])&&"object"===typeof a&&!(a=Ip(t,a)))return!1;if(!Op(r[1],t.get(a)))return!1}}catch(l){u.e(l)}finally{u.f()}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||"object"===typeof e){for(n in r=0,e){if(Cp.call(e,n)&&++r&&!Cp.call(t,n))return!1;if(!(n in t)||!Op(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!==e&&t!==t}var Pp=function(t){var n=bn();return[t[0],(0,e.useCallback)((function(e){if(n())return t[1](e)}),[n,t[1]])]};function Tp(e){return e.split("-")[0]}function Ap(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Rp(e){return e instanceof Ap(e).Element||e instanceof Element}function Dp(e){return e instanceof Ap(e).HTMLElement||e instanceof HTMLElement}function Mp(e){return"undefined"!==typeof ShadowRoot&&(e instanceof Ap(e).ShadowRoot||e instanceof ShadowRoot)}var Lp=Math.max,zp=Math.min,jp=Math.round;function Bp(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,a=1;if(Dp(e)&&t){var i=e.offsetHeight,o=e.offsetWidth;o>0&&(r=jp(n.width)/o||1),i>0&&(a=jp(n.height)/i||1)}return{width:n.width/r,height:n.height/a,top:n.top/a,right:n.right/r,bottom:n.bottom/a,left:n.left/r,x:n.left/r,y:n.top/a}}function Fp(e){var t=Bp(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Vp(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Mp(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Up(e){return e?(e.nodeName||"").toLowerCase():null}function Wp(e){return Ap(e).getComputedStyle(e)}function qp(e){return["table","td","th"].indexOf(Up(e))>=0}function $p(e){return((Rp(e)?e.ownerDocument:e.document)||window.document).documentElement}function Hp(e){return"html"===Up(e)?e:e.assignedSlot||e.parentNode||(Mp(e)?e.host:null)||$p(e)}function Kp(e){return Dp(e)&&"fixed"!==Wp(e).position?e.offsetParent:null}function Gp(e){for(var t=Ap(e),n=Kp(e);n&&qp(n)&&"static"===Wp(n).position;)n=Kp(n);return n&&("html"===Up(n)||"body"===Up(n)&&"static"===Wp(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&Dp(e)&&"fixed"===Wp(e).position)return null;var n=Hp(e);for(Mp(n)&&(n=n.host);Dp(n)&&["html","body"].indexOf(Up(n))<0;){var r=Wp(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function Yp(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Xp(e,t,n){return Lp(e,zp(t,n))}function Jp(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Qp(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}var Zp="top",ed="bottom",td="right",nd="left",rd="auto",ad=[Zp,ed,td,nd],id="start",od="end",sd="viewport",ud="popper",ld=ad.reduce((function(e,t){return e.concat([t+"-"+id,t+"-"+od])}),[]),cd=[].concat(ad,[rd]).reduce((function(e,t){return e.concat([t,t+"-"+id,t+"-"+od])}),[]),fd=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];var pd={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,a=e.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,s=Tp(n.placement),u=Yp(s),l=[nd,td].indexOf(s)>=0?"height":"width";if(i&&o){var c=function(e,t){return Jp("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Qp(e,ad))}(a.padding,n),f=Fp(i),p="y"===u?Zp:nd,d="y"===u?ed:td,h=n.rects.reference[l]+n.rects.reference[u]-o[u]-n.rects.popper[l],m=o[u]-n.rects.reference[u],g=Gp(i),v=g?"y"===u?g.clientHeight||0:g.clientWidth||0:0,y=h/2-m/2,b=c[p],w=v-f[l]-c[d],x=v/2-f[l]/2+y,_=Xp(b,x,w),N=u;n.modifiersData[r]=((t={})[N]=_,t.centerOffset=_-x,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&Vp(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function dd(e){return e.split("-")[1]}var hd={top:"auto",right:"auto",bottom:"auto",left:"auto"};function md(e){var t,n=e.popper,r=e.popperRect,a=e.placement,i=e.variation,o=e.offsets,s=e.position,u=e.gpuAcceleration,l=e.adaptive,c=e.roundOffsets,f=e.isFixed,p=o.x,d=void 0===p?0:p,h=o.y,m=void 0===h?0:h,g="function"===typeof c?c({x:d,y:m}):{x:d,y:m};d=g.x,m=g.y;var v=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),b=nd,w=Zp,x=window;if(l){var _=Gp(n),N="clientHeight",k="clientWidth";if(_===Ap(n)&&"static"!==Wp(_=$p(n)).position&&"absolute"===s&&(N="scrollHeight",k="scrollWidth"),a===Zp||(a===nd||a===td)&&i===od)w=ed,m-=(f&&_===x&&x.visualViewport?x.visualViewport.height:_[N])-r.height,m*=u?1:-1;if(a===nd||(a===Zp||a===ed)&&i===od)b=td,d-=(f&&_===x&&x.visualViewport?x.visualViewport.width:_[k])-r.width,d*=u?1:-1}var E,S=Object.assign({position:s},l&&hd),C=!0===c?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:jp(t*r)/r||0,y:jp(n*r)/r||0}}({x:d,y:m}):{x:d,y:m};return d=C.x,m=C.y,u?Object.assign({},S,((E={})[w]=y?"0":"",E[b]=v?"0":"",E.transform=(x.devicePixelRatio||1)<=1?"translate("+d+"px, "+m+"px)":"translate3d("+d+"px, "+m+"px, 0)",E)):Object.assign({},S,((t={})[w]=y?m+"px":"",t[b]=v?d+"px":"",t.transform="",t))}var gd={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,a=void 0===r||r,i=n.adaptive,o=void 0===i||i,s=n.roundOffsets,u=void 0===s||s,l={placement:Tp(t.placement),variation:dd(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,md(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:u})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,md(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},vd={passive:!0};var yd={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,a=r.scroll,i=void 0===a||a,o=r.resize,s=void 0===o||o,u=Ap(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&l.forEach((function(e){e.addEventListener("scroll",n.update,vd)})),s&&u.addEventListener("resize",n.update,vd),function(){i&&l.forEach((function(e){e.removeEventListener("scroll",n.update,vd)})),s&&u.removeEventListener("resize",n.update,vd)}},data:{}},bd={left:"right",right:"left",bottom:"top",top:"bottom"};function wd(e){return e.replace(/left|right|bottom|top/g,(function(e){return bd[e]}))}var xd={start:"end",end:"start"};function _d(e){return e.replace(/start|end/g,(function(e){return xd[e]}))}function Nd(e){var t=Ap(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function kd(e){return Bp($p(e)).left+Nd(e).scrollLeft}function Ed(e){var t=Wp(e),n=t.overflow,r=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+r)}function Sd(e){return["html","body","#document"].indexOf(Up(e))>=0?e.ownerDocument.body:Dp(e)&&Ed(e)?e:Sd(Hp(e))}function Cd(e,t){var n;void 0===t&&(t=[]);var r=Sd(e),a=r===(null==(n=e.ownerDocument)?void 0:n.body),i=Ap(r),o=a?[i].concat(i.visualViewport||[],Ed(r)?r:[]):r,s=t.concat(o);return a?s:s.concat(Cd(Hp(o)))}function Id(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Od(e,t){return t===sd?Id(function(e){var t=Ap(e),n=$p(e),r=t.visualViewport,a=n.clientWidth,i=n.clientHeight,o=0,s=0;return r&&(a=r.width,i=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,s=r.offsetTop)),{width:a,height:i,x:o+kd(e),y:s}}(e)):Rp(t)?function(e){var t=Bp(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):Id(function(e){var t,n=$p(e),r=Nd(e),a=null==(t=e.ownerDocument)?void 0:t.body,i=Lp(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=Lp(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),s=-r.scrollLeft+kd(e),u=-r.scrollTop;return"rtl"===Wp(a||n).direction&&(s+=Lp(n.clientWidth,a?a.clientWidth:0)-i),{width:i,height:o,x:s,y:u}}($p(e)))}function Pd(e,t,n){var r="clippingParents"===t?function(e){var t=Cd(Hp(e)),n=["absolute","fixed"].indexOf(Wp(e).position)>=0&&Dp(e)?Gp(e):e;return Rp(n)?t.filter((function(e){return Rp(e)&&Vp(e,n)&&"body"!==Up(e)})):[]}(e):[].concat(t),a=[].concat(r,[n]),i=a[0],o=a.reduce((function(t,n){var r=Od(e,n);return t.top=Lp(r.top,t.top),t.right=zp(r.right,t.right),t.bottom=zp(r.bottom,t.bottom),t.left=Lp(r.left,t.left),t}),Od(e,i));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Td(e){var t,n=e.reference,r=e.element,a=e.placement,i=a?Tp(a):null,o=a?dd(a):null,s=n.x+n.width/2-r.width/2,u=n.y+n.height/2-r.height/2;switch(i){case Zp:t={x:s,y:n.y-r.height};break;case ed:t={x:s,y:n.y+n.height};break;case td:t={x:n.x+n.width,y:u};break;case nd:t={x:n.x-r.width,y:u};break;default:t={x:n.x,y:n.y}}var l=i?Yp(i):null;if(null!=l){var c="y"===l?"height":"width";switch(o){case id:t[l]=t[l]-(n[c]/2-r[c]/2);break;case od:t[l]=t[l]+(n[c]/2-r[c]/2)}}return t}function Ad(e,t){void 0===t&&(t={});var n=t,r=n.placement,a=void 0===r?e.placement:r,i=n.boundary,o=void 0===i?"clippingParents":i,s=n.rootBoundary,u=void 0===s?sd:s,l=n.elementContext,c=void 0===l?ud:l,f=n.altBoundary,p=void 0!==f&&f,d=n.padding,h=void 0===d?0:d,m=Jp("number"!==typeof h?h:Qp(h,ad)),g=c===ud?"reference":ud,v=e.rects.popper,y=e.elements[p?g:c],b=Pd(Rp(y)?y:y.contextElement||$p(e.elements.popper),o,u),w=Bp(e.elements.reference),x=Td({reference:w,element:v,strategy:"absolute",placement:a}),_=Id(Object.assign({},v,x)),N=c===ud?_:w,k={top:b.top-N.top+m.top,bottom:N.bottom-b.bottom+m.bottom,left:b.left-N.left+m.left,right:N.right-b.right+m.right},E=e.modifiersData.offset;if(c===ud&&E){var S=E[a];Object.keys(k).forEach((function(e){var t=[td,ed].indexOf(e)>=0?1:-1,n=[Zp,ed].indexOf(e)>=0?"y":"x";k[e]+=S[n]*t}))}return k}var Rd={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var a=n.mainAxis,i=void 0===a||a,o=n.altAxis,s=void 0===o||o,u=n.fallbackPlacements,l=n.padding,c=n.boundary,f=n.rootBoundary,p=n.altBoundary,d=n.flipVariations,h=void 0===d||d,m=n.allowedAutoPlacements,g=t.options.placement,v=Tp(g),y=u||(v===g||!h?[wd(g)]:function(e){if(Tp(e)===rd)return[];var t=wd(e);return[_d(e),t,_d(t)]}(g)),b=[g].concat(y).reduce((function(e,n){return e.concat(Tp(n)===rd?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,a=n.boundary,i=n.rootBoundary,o=n.padding,s=n.flipVariations,u=n.allowedAutoPlacements,l=void 0===u?cd:u,c=dd(r),f=c?s?ld:ld.filter((function(e){return dd(e)===c})):ad,p=f.filter((function(e){return l.indexOf(e)>=0}));0===p.length&&(p=f);var d=p.reduce((function(t,n){return t[n]=Ad(e,{placement:n,boundary:a,rootBoundary:i,padding:o})[Tp(n)],t}),{});return Object.keys(d).sort((function(e,t){return d[e]-d[t]}))}(t,{placement:n,boundary:c,rootBoundary:f,padding:l,flipVariations:h,allowedAutoPlacements:m}):n)}),[]),w=t.rects.reference,x=t.rects.popper,_=new Map,N=!0,k=b[0],E=0;E<b.length;E++){var S=b[E],C=Tp(S),I=dd(S)===id,O=[Zp,ed].indexOf(C)>=0,P=O?"width":"height",T=Ad(t,{placement:S,boundary:c,rootBoundary:f,altBoundary:p,padding:l}),A=O?I?td:nd:I?ed:Zp;w[P]>x[P]&&(A=wd(A));var R=wd(A),D=[];if(i&&D.push(T[C]<=0),s&&D.push(T[A]<=0,T[R]<=0),D.every((function(e){return e}))){k=S,N=!1;break}_.set(S,D)}if(N)for(var M=function(e){var t=b.find((function(t){var n=_.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return k=t,"break"},L=h?3:1;L>0;L--){if("break"===M(L))break}t.placement!==k&&(t.modifiersData[r]._skip=!0,t.placement=k,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Dd(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Md(e){return[Zp,td,ed,nd].some((function(t){return e[t]>=0}))}var Ld={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,a=t.rects.popper,i=t.modifiersData.preventOverflow,o=Ad(t,{elementContext:"reference"}),s=Ad(t,{altBoundary:!0}),u=Dd(o,r),l=Dd(s,a,i),c=Md(u),f=Md(l);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}};var zd={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,a=n.offset,i=void 0===a?[0,0]:a,o=cd.reduce((function(e,n){return e[n]=function(e,t,n){var r=Tp(e),a=[nd,Zp].indexOf(r)>=0?-1:1,i="function"===typeof n?n(Object.assign({},t,{placement:e})):n,o=i[0],s=i[1];return o=o||0,s=(s||0)*a,[nd,td].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}(n,t.rects,i),e}),{}),s=o[t.placement],u=s.x,l=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=o}};var jd={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Td({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};var Bd={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,a=n.mainAxis,i=void 0===a||a,o=n.altAxis,s=void 0!==o&&o,u=n.boundary,l=n.rootBoundary,c=n.altBoundary,f=n.padding,p=n.tether,d=void 0===p||p,h=n.tetherOffset,m=void 0===h?0:h,g=Ad(t,{boundary:u,rootBoundary:l,padding:f,altBoundary:c}),v=Tp(t.placement),y=dd(t.placement),b=!y,w=Yp(v),x="x"===w?"y":"x",_=t.modifiersData.popperOffsets,N=t.rects.reference,k=t.rects.popper,E="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,S="number"===typeof E?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),C=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(_){if(i){var O,P="y"===w?Zp:nd,T="y"===w?ed:td,A="y"===w?"height":"width",R=_[w],D=R+g[P],M=R-g[T],L=d?-k[A]/2:0,z=y===id?N[A]:k[A],j=y===id?-k[A]:-N[A],B=t.elements.arrow,F=d&&B?Fp(B):{width:0,height:0},V=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},U=V[P],W=V[T],q=Xp(0,N[A],F[A]),$=b?N[A]/2-L-q-U-S.mainAxis:z-q-U-S.mainAxis,H=b?-N[A]/2+L+q+W+S.mainAxis:j+q+W+S.mainAxis,K=t.elements.arrow&&Gp(t.elements.arrow),G=K?"y"===w?K.clientTop||0:K.clientLeft||0:0,Y=null!=(O=null==C?void 0:C[w])?O:0,X=R+H-Y,J=Xp(d?zp(D,R+$-Y-G):D,R,d?Lp(M,X):M);_[w]=J,I[w]=J-R}if(s){var Q,Z="x"===w?Zp:nd,ee="x"===w?ed:td,te=_[x],ne="y"===x?"height":"width",re=te+g[Z],ae=te-g[ee],ie=-1!==[Zp,nd].indexOf(v),oe=null!=(Q=null==C?void 0:C[x])?Q:0,se=ie?re:te-N[ne]-k[ne]-oe+S.altAxis,ue=ie?te+N[ne]+k[ne]-oe-S.altAxis:ae,le=d&&ie?function(e,t,n){var r=Xp(e,t,n);return r>n?n:r}(se,te,ue):Xp(d?se:re,te,d?ue:ae);_[x]=le,I[x]=le-te}t.modifiersData[r]=I}},requiresIfExists:["offset"]};function Fd(e,t,n){void 0===n&&(n=!1);var r=Dp(t),a=Dp(t)&&function(e){var t=e.getBoundingClientRect(),n=jp(t.width)/e.offsetWidth||1,r=jp(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),i=$p(t),o=Bp(e,a),s={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&(("body"!==Up(t)||Ed(i))&&(s=function(e){return e!==Ap(e)&&Dp(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:Nd(e);var t}(t)),Dp(t)?((u=Bp(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):i&&(u.x=kd(i))),{x:o.left+s.scrollLeft-u.x,y:o.top+s.scrollTop-u.y,width:o.width,height:o.height}}function Vd(e){var t=new Map,n=new Set,r=[];function a(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&a(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||a(e)})),r}function Ud(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var Wd={placement:"bottom",modifiers:[],strategy:"absolute"};function qd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function $d(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,a=t.defaultOptions,i=void 0===a?Wd:a;return function(e,t,n){void 0===n&&(n=i);var a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Wd,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},o=[],s=!1,u={state:a,setOptions:function(n){var s="function"===typeof n?n(a.options):n;l(),a.options=Object.assign({},i,a.options,s),a.scrollParents={reference:Rp(e)?Cd(e):e.contextElement?Cd(e.contextElement):[],popper:Cd(t)};var c=function(e){var t=Vd(e);return fd.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,a.options.modifiers)));return a.orderedModifiers=c.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"===typeof i){var s=i({state:a,name:t,instance:u,options:r}),l=function(){};o.push(s||l)}})),u.update()},forceUpdate:function(){if(!s){var e=a.elements,t=e.reference,n=e.popper;if(qd(t,n)){a.rects={reference:Fd(t,Gp(n),"fixed"===a.options.strategy),popper:Fp(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var i=a.orderedModifiers[r],o=i.fn,l=i.options,c=void 0===l?{}:l,f=i.name;"function"===typeof o&&(a=o({state:a,options:c,name:f,instance:u})||a)}else a.reset=!1,r=-1}}},update:Ud((function(){return new Promise((function(e){u.forceUpdate(),e(a)}))})),destroy:function(){l(),s=!0}};if(!qd(e,t))return u;function l(){o.forEach((function(e){return e()})),o=[]}return u.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var Hd=$d({defaultModifiers:[Ld,jd,gd,yd,zd,Rd,Bd,pd]}),Kd=["enabled","placement","strategy","modifiers"];function Gd(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var Yd={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:function(){}},Xd={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(e){var t=e.state;return function(){var e=t.elements,n=e.reference,r=e.popper;if("removeAttribute"in n){var a=(n.getAttribute("aria-describedby")||"").split(",").filter((function(e){return e.trim()!==r.id}));a.length?n.setAttribute("aria-describedby",a.join(",")):n.removeAttribute("aria-describedby")}}},fn:function(e){var t,n=e.state.elements,r=n.popper,a=n.reference,i=null==(t=r.getAttribute("role"))?void 0:t.toLowerCase();if(r.id&&"tooltip"===i&&"setAttribute"in a){var o=a.getAttribute("aria-describedby");if(o&&-1!==o.split(",").indexOf(r.id))return;a.setAttribute("aria-describedby",o?"".concat(o,",").concat(r.id):r.id)}}},Jd=[];var Qd=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.enabled,i=void 0===a||a,o=r.placement,s=void 0===o?"bottom":o,l=r.strategy,c=void 0===l?"absolute":l,f=r.modifiers,p=void 0===f?Jd:f,d=Gd(r,Kd),h=(0,e.useRef)(p),m=(0,e.useRef)(),g=(0,e.useCallback)((function(){var e;null==(e=m.current)||e.update()}),[]),v=(0,e.useCallback)((function(){var e;null==(e=m.current)||e.forceUpdate()}),[]),y=Pp((0,e.useState)({placement:s,update:g,forceUpdate:v,attributes:{},styles:{popper:{},arrow:{}}})),b=u(y,2),w=b[0],x=b[1],_=(0,e.useMemo)((function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(e){var t=e.state,n={},r={};Object.keys(t.elements).forEach((function(e){n[e]=t.styles[e],r[e]=t.attributes[e]})),x({state:t,styles:n,attributes:r,update:g,forceUpdate:v,placement:t.placement})}}}),[g,v,x]),N=(0,e.useMemo)((function(){return Op(h.current,p)||(h.current=p),h.current}),[p]);return(0,e.useEffect)((function(){m.current&&i&&m.current.setOptions({placement:s,strategy:c,modifiers:[].concat(Zt(N),[_,Yd])})}),[c,s,_,i,N]),(0,e.useEffect)((function(){if(i&&null!=t&&null!=n)return m.current=Hd(t,n,Object.assign({},d,{placement:s,strategy:c,modifiers:[].concat(Zt(N),[Xd,_])})),function(){null!=m.current&&(m.current.destroy(),m.current=void 0,x((function(e){return Object.assign({},e,{attributes:{},styles:{popper:{}}})})))}}),[i,t,n]),w},Zd=function(){};function eh(e){return 0===e.button}function th(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var nh=function(e){return e&&("current"in e?e.current:e)},rh={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};var ah=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zd,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.disabled,i=r.clickTrigger,o=void 0===i?"click":i,s=(0,e.useRef)(!1),u=(0,e.useRef)(!1),l=(0,e.useCallback)((function(e){var n=nh(t);v()(!!n,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),s.current=!n||th(e)||!eh(e)||!!yn(n,e.target)||u.current,u.current=!1}),[t]),c=j((function(e){var n=nh(t);n&&yn(n,e.target)&&(u.current=!0)})),f=j((function(e){s.current||n(e)}));(0,e.useEffect)((function(){if(!a&&null!=t){var e=et(nh(t)),n=(e.defaultView||window).event,r=null;rh[o]&&(r=kt(e,rh[o],c,!0));var i=kt(e,o,l,!0),s=kt(e,o,(function(e){e!==n?f(e):n=void 0})),u=[];return"ontouchstart"in e.documentElement&&(u=[].slice.call(e.body.children).map((function(e){return kt(e,"mousemove",Zd)}))),function(){null==r||r(),i(),s(),u.forEach((function(e){return e()}))}}}),[t,a,o,l,c,f])};function ih(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(e)?e:Object.keys(e).map((function(t){return e[t].name=t,e[t]}))}function oh(e){var t,n,r,a,i=e.enabled,o=e.enableEvents,s=e.placement,u=e.flip,l=e.offset,c=e.fixed,f=e.containerPadding,p=e.arrowElement,d=e.popperConfig,h=void 0===d?{}:d,m=function(e){var t={};return Array.isArray(e)?(null==e||e.forEach((function(e){t[e.name]=e})),t):e||t}(h.modifiers);return Object.assign({},h,{placement:s,enabled:i,strategy:c?"fixed":h.strategy,modifiers:ih(Object.assign({},m,{eventListeners:{enabled:o},preventOverflow:Object.assign({},m.preventOverflow,{options:f?Object.assign({padding:f},null==(t=m.preventOverflow)?void 0:t.options):null==(n=m.preventOverflow)?void 0:n.options}),offset:{options:Object.assign({offset:l},null==(r=m.offset)?void 0:r.options)},arrow:Object.assign({},m.arrow,{enabled:!!p,options:Object.assign({},null==(a=m.arrow)?void 0:a.options,{element:p})}),flip:Object.assign({enabled:!!u},m.flip)}))})}var sh=["children"];var uh=function(){};function lh(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,e.useContext)(Ep),r=mn(),a=u(r,2),i=a[0],o=a[1],s=(0,e.useRef)(!1),l=t.flip,c=t.offset,f=t.rootCloseEvent,p=t.fixed,d=void 0!==p&&p,h=t.placement,m=t.popperConfig,g=void 0===m?{}:m,v=t.enableEventListeners,y=void 0===v||v,b=t.usePopper,w=void 0===b?!!n:b,x=null==(null==n?void 0:n.show)?!!t.show:n.show;x&&!s.current&&(s.current=!0);var _=function(e){null==n||n.toggle(!1,e)},N=n||{},k=N.placement,E=N.setMenu,S=N.menuElement,C=N.toggleElement,I=Qd(C,S,oh({placement:h||k||"bottom-start",enabled:w,enableEvents:null==y?x:y,offset:c,flip:l,fixed:d,arrowElement:i,popperConfig:g})),O=Object.assign({ref:E||uh,"aria-labelledby":null==C?void 0:C.id},I.attributes.popper,{style:I.styles.popper}),P={show:x,placement:k,hasShown:s.current,toggle:null==n?void 0:n.toggle,popper:w?I:null,arrowProps:w?Object.assign({ref:o},I.attributes.arrow,{style:I.styles.arrow}):{}};return ah(S,_,{clickTrigger:f,disabled:!x}),[O,P]}function ch(e){var t=e.children,n=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,sh),r=u(lh(n),2),a=r[0],i=r[1];return(0,B.jsx)(B.Fragment,{children:t(a,i)})}ch.displayName="DropdownMenu",ch.defaultProps={usePopper:!0};var fh=ch;function ph(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var dh={};ph(dh,"SSRProvider",(function(){return gh})),ph(dh,"useSSRSafeId",(function(){return yh})),ph(dh,"useIsSSR",(function(){return bh}));var hh={prefix:String(Math.round(1e10*Math.random())),current:0},mh=e.createContext(hh);function gh(t){var n=(0,e.useContext)(mh),r=(0,e.useMemo)((function(){return{prefix:n===hh?"":"".concat(n.prefix,"-").concat(++n.current),current:0}}),[n]);return e.createElement(mh.Provider,{value:r},t.children)}var vh=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement);function yh(t){var n=(0,e.useContext)(mh);return n!==hh||vh||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server."),(0,e.useMemo)((function(){return t||"react-aria".concat(n.prefix,"-").concat(++n.current)}),[t])}function bh(){var t=(0,e.useContext)(mh)!==hh,n=u((0,e.useState)(t),2),r=n[0],a=n[1];return"undefined"!==typeof window&&t&&(0,e.useLayoutEffect)((function(){a(!1)}),[]),r}var wh=function(e){var t;return"menu"===(null==(t=e.getAttribute("role"))?void 0:t.toLowerCase())},xh=function(){};function _h(){var t=yh(),n=(0,e.useContext)(Ep)||{},r=n.show,a=void 0!==r&&r,i=n.toggle,o=void 0===i?xh:i,s=n.setToggle,u=n.menuElement,l=(0,e.useCallback)((function(e){o(!a,e)}),[a,o]),c={id:t,ref:s||xh,onClick:l,"aria-expanded":!!a};return u&&wh(u)&&(c["aria-haspopup"]=!0),[c,{show:a,toggle:o}]}function Nh(e){var t=e.children,n=u(_h(),2),r=n[0],a=n[1];return(0,B.jsx)(B.Fragment,{children:t(r,a)})}Nh.displayName="DropdownToggle";var kh=Nh,Eh=["eventKey","disabled","onClick","active","as"];function Sh(t){var n=t.key,r=t.href,a=t.active,i=t.disabled,o=t.onClick,s=(0,e.useContext)(D),u=((0,e.useContext)(A)||{}).activeKey,c=R(n,r),f=null==a&&null!=n?R(u)===c:a;return[l({onClick:j((function(e){i||(null==o||o(e),s&&!e.isPropagationStopped()&&s(c,e))})),"aria-disabled":i||void 0,"aria-selected":f},L("dropdown-item"),""),{isActive:f}]}var Ch=e.forwardRef((function(e,t){var n=e.eventKey,r=e.disabled,a=e.onClick,i=e.active,o=e.as,s=void 0===o?W:o,l=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,Eh),c=u(Sh({key:n,href:l.href,disabled:r,onClick:a,active:i}),1)[0];return(0,B.jsx)(s,Object.assign({},l,{ref:t},c))}));Ch.displayName="DropdownItem";var Ih=Ch;function Oh(){var t=I(),n=(0,e.useRef)(null),r=(0,e.useCallback)((function(e){n.current=e,t()}),[t]);return[n,r]}function Ph(t){var n=t.defaultShow,r=t.show,a=t.onSelect,i=t.onToggle,o=t.itemSelector,s=void 0===o?"* [".concat(L("dropdown-item"),"]"):o,l=t.focusFirstItemOnShow,c=t.placement,f=void 0===c?"bottom-start":c,p=t.children,d=In(),h=u(x(r,n,i),2),m=h[0],g=h[1],v=u(Oh(),2),y=v[0],b=v[1],w=y.current,_=u(Oh(),2),N=_[0],k=_[1],E=N.current,S=wn(m),I=(0,e.useRef)(null),O=(0,e.useRef)(!1),P=(0,e.useContext)(D),T=(0,e.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?void 0:t.type;g(e,{originalEvent:t,source:n})}),[g]),A=j((function(e,t){null==a||a(e,t),T(!1,t,"select"),t.isPropagationStopped()||null==P||P(e,t)})),R=(0,e.useMemo)((function(){return{toggle:T,placement:f,show:m,menuElement:w,toggleElement:E,setMenu:b,setToggle:k}}),[T,f,m,w,E,b,k]);w&&S&&!m&&(O.current=w.contains(w.ownerDocument.activeElement));var M=j((function(){E&&E.focus&&E.focus()})),z=j((function(){var e=I.current,t=l;if(null==t&&(t=!(!y.current||!wh(y.current))&&"keyboard"),!1!==t&&("keyboard"!==t||/^key.+$/.test(e))){var n=C(y.current,s)[0];n&&n.focus&&n.focus()}}));(0,e.useEffect)((function(){m?z():O.current&&(O.current=!1,M())}),[m,O,M,z]),(0,e.useEffect)((function(){I.current=null}));var F=function(e,t){if(!y.current)return null;var n=C(y.current,s),r=n.indexOf(e)+t;return n[r=Math.max(0,Math.min(r,n.length))]};return function(t,n,r,a){void 0===a&&(a=!1);var i=j(r);(0,e.useEffect)((function(){var e="function"===typeof t?t():t;return e.addEventListener(n,i,a),function(){return e.removeEventListener(n,i,a)}}),[t])}((0,e.useCallback)((function(){return d.document}),[d]),"keydown",(function(e){var t,n,r=e.key,a=e.target,i=null==(t=y.current)?void 0:t.contains(a),o=null==(n=N.current)?void 0:n.contains(a);if((!/input|textarea/i.test(a.tagName)||!(" "===r||"Escape"!==r&&i||"Escape"===r&&"search"===a.type))&&(i||o)&&("Tab"!==r||y.current&&m)){I.current=e.type;var s={originalEvent:e,source:e.type};switch(r){case"ArrowUp":var u=F(a,-1);return u&&u.focus&&u.focus(),void e.preventDefault();case"ArrowDown":if(e.preventDefault(),m){var l=F(a,1);l&&l.focus&&l.focus()}else g(!0,s);return;case"Tab":_t(a.ownerDocument,"keyup",(function(e){var t;("Tab"!==e.key||e.target)&&null!=(t=y.current)&&t.contains(e.target)||g(!1,s)}),{once:!0});break;case"Escape":"Escape"===r&&(e.preventDefault(),e.stopPropagation()),g(!1,s)}}})),(0,B.jsx)(D.Provider,{value:A,children:(0,B.jsx)(Ep.Provider,{value:R,children:p})})}Ph.displayName="Dropdown",Ph.Menu=fh,Ph.Toggle=kh,Ph.Item=Ih;var Th=Ph,Ah=e.createContext({});Ah.displayName="DropdownContext";var Rh=Ah;var Dh="undefined"!==typeof __webpack_require__.g&&__webpack_require__.g.navigator&&"ReactNative"===__webpack_require__.g.navigator.product,Mh="undefined"!==typeof document||Dh?e.useLayoutEffect:e.useEffect;new WeakMap;var Lh=["onKeyDown"];var zh=e.forwardRef((function(e,t){var n,r=e.onKeyDown,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,Lh),i=u(V(Object.assign({tagName:"a"},a)),1)[0],o=j((function(e){i.onKeyDown(e),null==r||r(e)}));return((n=a.href)&&"#"!==n.trim()||a.role)&&"button"!==a.role?(0,B.jsx)("a",Object.assign({ref:t},a,{onKeyDown:r})):(0,B.jsx)("a",Object.assign({ref:t},a,i,{onKeyDown:o}))}));zh.displayName="Anchor";var jh=zh,Bh=["bsPrefix","className","eventKey","disabled","onClick","active","as"],Fh=e.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.eventKey,i=e.disabled,o=void 0!==i&&i,s=e.onClick,l=e.active,c=e.as,p=void 0===c?jh:c,h=d(e,Bh),g=te(n,"dropdown-item"),v=u(Sh({key:a,href:h.href,disabled:o,onClick:s,active:l}),2),y=v[0],b=v[1];return(0,B.jsx)(p,f(f(f({},h),y),{},{ref:t,className:m()(r,g,b.isActive&&"active",o&&"disabled")}))}));Fh.displayName="DropdownItem";var Vh=Fh,Uh=e.createContext(null);Uh.displayName="InputGroupContext";var Wh=Uh,qh=e.createContext(null);qh.displayName="NavbarContext";var $h=qh;function Hh(e,t){return e}var Kh=["bsPrefix","className","align","rootCloseEvent","flip","show","renderOnMount","as","popperConfig","variant"];function Gh(e,t,n){var r=e?n?"bottom-start":"bottom-end":n?"bottom-end":"bottom-start";return"up"===t?r=e?n?"top-start":"top-end":n?"top-end":"top-start":"end"===t?r=e?n?"left-end":"right-end":n?"left-start":"right-start":"start"===t&&(r=e?n?"right-end":"left-end":n?"right-start":"left-start"),r}var Yh=e.forwardRef((function(t,n){var r=t.bsPrefix,a=t.className,i=t.align,o=t.rootCloseEvent,s=t.flip,l=t.show,c=t.renderOnMount,p=t.as,h=void 0===p?"div":p,g=t.popperConfig,v=t.variant,y=d(t,Kh),b=!1,w=(0,e.useContext)($h),x=te(r,"dropdown-menu"),_=(0,e.useContext)(Rh),N=_.align,k=_.drop,E=_.isRTL;i=i||N;var S=(0,e.useContext)(Wh),C=[];if(i)if("object"===typeof i){var I=Object.keys(i);if(I.length){var O=I[0],T=i[O];b="start"===T,C.push("".concat(x,"-").concat(O,"-").concat(T))}}else"end"===i&&(b=!0);var A=Gh(b,k,E),R=u(lh({flip:s,rootCloseEvent:o,show:l,usePopper:!w&&0===C.length,offset:[0,2],popperConfig:g,placement:A}),2),D=R[0],M=R[1],L=M.hasShown,z=M.popper,j=M.show,F=M.toggle;if(D.ref=P(Hh(n),D.ref),Mh((function(){j&&(null==z||z.update())}),[j]),!L&&!c&&!S)return null;"string"!==typeof h&&(D.show=j,D.close=function(){return null==F?void 0:F(!1)},D.align=i);var V=y.style;return null!=z&&z.placement&&(V=f(f({},y.style),D.style),y["x-placement"]=z.placement),(0,B.jsx)(h,f(f(f(f({},y),D),{},{style:V},(C.length||w)&&{"data-bs-popper":"static"}),{},{className:m().apply(void 0,[a,x,j&&"show",b&&"".concat(x,"-end"),v&&"".concat(x,"-").concat(v)].concat(C))}))}));Yh.displayName="DropdownMenu",Yh.defaultProps={flip:!0};var Xh=Yh,Jh=["bsPrefix","split","className","childBsPrefix","as"],Qh=e.forwardRef((function(t,n){var r=t.bsPrefix,a=t.split,i=t.className,o=t.childBsPrefix,s=t.as,l=void 0===s?Ze:s,c=d(t,Jh),p=te(r,"dropdown-toggle"),h=(0,e.useContext)(Ep),g=(0,e.useContext)(Wh);void 0!==o&&(c.bsPrefix=o);var v=u(_h(),1)[0];return v.ref=P(v.ref,Hh(n)),(0,B.jsx)(l,f(f({className:m()(i,p,a&&"".concat(p,"-split"),!!g&&(null==h?void 0:h.show)&&"show")},v),c))}));Qh.displayName="DropdownToggle";var Zh=Qh,em=["bsPrefix","drop","show","className","align","onSelect","onToggle","focusFirstItemOnShow","as","navbar","autoClose"],tm=ve("dropdown-header",{defaultProps:{role:"heading"}}),nm=ve("dropdown-divider",{Component:"hr",defaultProps:{role:"separator"}}),rm=ve("dropdown-item-text",{Component:"span"}),am=e.forwardRef((function(t,n){var r=_(t,{show:"onToggle"}),a=r.bsPrefix,i=r.drop,o=r.show,s=r.className,u=r.align,l=r.onSelect,c=r.onToggle,p=r.focusFirstItemOnShow,h=r.as,g=void 0===h?"div":h,v=(r.navbar,r.autoClose),y=d(r,em),b=(0,e.useContext)(Wh),w=te(a,"dropdown"),x=re(),N=j((function(e,t){var n;t.originalEvent.currentTarget!==document||"keydown"===t.source&&"Escape"!==t.originalEvent.key||(t.source="rootClose"),n=t.source,(!1===v?"click"===n:"inside"===v?"rootClose"!==n:"outside"!==v||"select"!==n)&&(null==c||c(e,t))})),k=Gh("end"===u,i,x),E=(0,e.useMemo)((function(){return{align:u,drop:i,isRTL:x}}),[u,i,x]);return(0,B.jsx)(Rh.Provider,{value:E,children:(0,B.jsx)(Th,{placement:k,show:o,onSelect:l,onToggle:N,focusFirstItemOnShow:p,itemSelector:".".concat(w,"-item:not(.disabled):not(:disabled)"),children:b?y.children:(0,B.jsx)(g,f(f({},y),{},{ref:n,className:m()(s,o&&"show",(!i||"down"===i)&&w,"up"===i&&"dropup","end"===i&&"dropend","start"===i&&"dropstart")}))})})}));am.displayName="Dropdown",am.defaultProps={navbar:!1,align:"start",autoClose:!0};var im=Object.assign(am,{Toggle:Zh,Menu:Xh,Item:Vh,ItemText:rm,Divider:nm,Header:tm}),om=["bsPrefix","className","as","active","eventKey"],sm=e.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.as,i=void 0===a?jh:a,o=e.active,s=e.eventKey,l=d(e,om);n=te(n,"nav-link");var c=u($(f({key:R(s,l.href),active:o},l)),2),p=c[0],h=c[1];return(0,B.jsx)(i,f(f(f({},l),p),{},{ref:t,className:m()(r,n,l.disabled&&"disabled",h.isActive&&"active")}))}));sm.displayName="NavLink",sm.defaultProps={disabled:!1};var um=sm,lm=["id","title","children","bsPrefix","className","rootCloseEvent","menuRole","disabled","active","renderMenuOnMount","menuVariant"],cm=e.forwardRef((function(e,t){var n=e.id,r=e.title,a=e.children,i=e.bsPrefix,o=e.className,s=e.rootCloseEvent,u=e.menuRole,l=e.disabled,c=e.active,p=e.renderMenuOnMount,h=e.menuVariant,g=d(e,lm),v=te(void 0,"nav-item");return(0,B.jsxs)(im,f(f({ref:t},g),{},{className:m()(o,v),children:[(0,B.jsx)(im.Toggle,{id:n,eventKey:null,active:c,disabled:l,childBsPrefix:i,as:um,children:r}),(0,B.jsx)(im.Menu,{role:u,renderOnMount:p,rootCloseEvent:s,variant:h,children:a})]}))}));cm.displayName="NavDropdown";var fm=Object.assign(cm,{Item:im.Item,ItemText:im.ItemText,Divider:im.Divider,Header:im.Header}),pm=(__webpack_require__(573),ve("nav-item")),dm=["as","bsPrefix","variant","fill","justify","navbar","navbarScroll","className","activeKey"],hm=e.forwardRef((function(t,n){var r,a,i,o=_(t,{activeKey:"onSelect"}),s=o.as,u=void 0===s?"div":s,c=o.bsPrefix,p=o.variant,h=o.fill,g=o.justify,v=o.navbar,y=o.navbarScroll,b=o.className,w=o.activeKey,x=d(o,dm),N=te(c,"nav"),k=!1,E=(0,e.useContext)($h),S=(0,e.useContext)(Ne);return E?(a=E.bsPrefix,k=null==v||v):S&&(i=S.cardHeaderBsPrefix),(0,B.jsx)(Q,f({as:u,ref:n,activeKey:w,className:m()(b,(r={},l(r,N,!k),l(r,"".concat(a,"-nav"),k),l(r,"".concat(a,"-nav-scroll"),k&&y),l(r,"".concat(i,"-").concat(p),!!i),l(r,"".concat(N,"-").concat(p),!!p),l(r,"".concat(N,"-fill"),h),l(r,"".concat(N,"-justified"),g),r))},x))}));hm.displayName="Nav",hm.defaultProps={justify:!1,fill:!1};var mm=Object.assign(hm,{Item:pm,Link:um}),gm=["bsPrefix","className","as"],vm=e.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.as,i=d(e,gm);n=te(n,"navbar-brand");var o=a||(i.href?"a":"span");return(0,B.jsx)(o,f(f({},i),{},{ref:t,className:m()(r,n)}))}));vm.displayName="NavbarBrand";var ym=vm,bm=["children","bsPrefix"],wm=e.forwardRef((function(t,n){var r=t.children,a=t.bsPrefix,i=d(t,bm);a=te(a,"navbar-collapse");var o=(0,e.useContext)($h);return(0,B.jsx)(Vt,f(f({in:!(!o||!o.expanded)},i),{},{children:(0,B.jsx)("div",{ref:n,className:a,children:r})}))}));wm.displayName="NavbarCollapse";var xm=wm,_m=["bsPrefix","className","children","label","as","onClick"],Nm=e.forwardRef((function(t,n){var r=t.bsPrefix,a=t.className,i=t.children,o=t.label,s=t.as,u=void 0===s?"button":s,l=t.onClick,c=d(t,_m);r=te(r,"navbar-toggler");var p=(0,e.useContext)($h)||{},h=p.onToggle,g=p.expanded,v=j((function(e){l&&l(e),h&&h()}));return"button"===u&&(c.type="button"),(0,B.jsx)(u,f(f({},c),{},{ref:n,onClick:v,"aria-label":o,className:m()(a,r,!g&&"collapsed"),children:i||(0,B.jsx)("span",{className:"".concat(r,"-icon")})}))}));Nm.displayName="NavbarToggle",Nm.defaultProps={label:"Toggle navigation"};var km=Nm,Em=new WeakMap,Sm=function(e,t){if(e&&t){var n=Em.get(t)||new Map;Em.set(t,n);var r=n.get(e);return r||((r=t.matchMedia(e)).refCount=0,n.set(r.media,r)),r}};function Cm(t,n){void 0===n&&(n="undefined"===typeof window?void 0:window);var r=Sm(t,n),a=(0,e.useState)((function(){return!!r&&r.matches})),i=a[0],o=a[1];return Mh((function(){var e=Sm(t,n);if(!e)return o(!1);var r=Em.get(n),a=function(){o(e.matches)};return e.refCount++,e.addListener(a),a(),function(){e.removeListener(a),e.refCount--,e.refCount<=0&&(null==r||r.delete(e.media)),e=void 0}}),[t]),i}var Im,Om=function(t){var n=Object.keys(t);function r(e,t){return e===t?t:e?e+" and "+t:t}function a(e){var r=function(e){return n[Math.min(n.indexOf(e)+1,n.length-1)]}(e),a=t[r];return"(max-width: "+(a="number"===typeof a?a-.2+"px":"calc("+a+" - 0.2px)")+")"}return function(n,i,o){var s,u;"object"===typeof n?(s=n,o=i,i=!0):((u={})[n]=i=i||!0,s=u);var l=(0,e.useMemo)((function(){return Object.entries(s).reduce((function(e,n){var i=n[0],o=n[1];return"up"!==o&&!0!==o||(e=r(e,function(e){var n=t[e];return"number"===typeof n&&(n+="px"),"(min-width: "+n+")"}(i))),"down"!==o&&!0!==o||(e=r(e,a(i))),e}),"")}),[JSON.stringify(s)]);return Cm(l,o)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),Pm=Om,Tm=ve("offcanvas-body"),Am=["bsPrefix","className","children"],Rm=(l(Im={},pt,"show"),l(Im,dt,"show"),Im),Dm=e.forwardRef((function(t,n){var r=t.bsPrefix,a=t.className,i=t.children,o=d(t,Am);return r=te(r,"offcanvas"),(0,B.jsx)(Dt,f(f({ref:n,addEndListener:It},o),{},{childRef:i.ref,children:function(t,n){return e.cloneElement(i,f(f({},n),{},{className:m()(a,i.props.className,(t===pt||t===ht)&&"".concat(r,"-toggling"),Rm[t])}))}}))}));Dm.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1},Dm.displayName="OffcanvasToggling";var Mm=Dm,Lm=["bsPrefix","className"],zm=e.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=d(e,Lm);return n=te(n,"offcanvas-header"),(0,B.jsx)(fr,f(f({ref:t},a),{},{className:m()(r,n)}))}));zm.displayName="OffcanvasHeader",zm.defaultProps={closeLabel:"Close",closeButton:!1};var jm=zm,Bm=ve("offcanvas-title",{Component:ye("h5")}),Fm=["bsPrefix","className","children","aria-labelledby","placement","show","backdrop","keyboard","scroll","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function Vm(e){return(0,B.jsx)(Mm,f({},e))}function Um(e){return(0,B.jsx)(Qn,f({},e))}var Wm=e.forwardRef((function(t,n){var r=t.bsPrefix,a=t.className,i=t.children,o=t["aria-labelledby"],s=t.placement,u=t.show,l=t.backdrop,c=t.keyboard,p=t.scroll,h=t.onEscapeKeyDown,g=t.onShow,v=t.onHide,y=t.container,b=t.autoFocus,w=t.enforceFocus,x=t.restoreFocus,_=t.restoreFocusOptions,N=t.onEntered,k=t.onExit,E=t.onExiting,S=t.onEnter,C=t.onEntering,I=t.onExited,O=t.backdropClassName,P=t.manager,T=d(t,Fm),A=(0,e.useRef)();r=te(r,"offcanvas");var R=((0,e.useContext)($h)||{}).onToggle,D=j((function(){null==R||R(),null==v||v()})),M=(0,e.useMemo)((function(){return{onHide:D}}),[D]);var L=(0,e.useCallback)((function(e){return(0,B.jsx)("div",f(f({},e),{},{className:m()("".concat(r,"-backdrop"),O)}))}),[O,r]);return(0,B.jsx)(er.Provider,{value:M,children:(0,B.jsx)(Dn,{show:u,ref:n,backdrop:l,container:y,keyboard:c,autoFocus:b,enforceFocus:w&&!p,restoreFocus:x,restoreFocusOptions:_,onEscapeKeyDown:h,onShow:g,onHide:D,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==S||S.apply(void 0,[e].concat(n))},onEntering:C,onEntered:N,onExit:k,onExiting:E,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==I||I.apply(void 0,n)},manager:P||(p?(A.current||(A.current=new Gn({handleContainerOverflow:!1})),A.current):Hn()),transition:Vm,backdropTransition:Um,renderBackdrop:L,renderDialog:function(e){return(0,B.jsx)("div",f(f(f({role:"dialog"},e),T),{},{className:m()(a,r,"".concat(r,"-").concat(s)),"aria-labelledby":o,children:i}))}})})}));Wm.displayName="Offcanvas",Wm.defaultProps={show:!1,backdrop:!0,keyboard:!0,scroll:!1,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,placement:"start"};var qm=Object.assign(Wm,{Body:Tm,Header:jm,Title:Bm}),$m=["className","bsPrefix","backdrop","backdropClassName","keyboard","scroll","placement","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onShow","onHide","onEscapeKeyDown","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],Hm=e.forwardRef((function(t,n){var r=t.className,a=t.bsPrefix,i=t.backdrop,o=t.backdropClassName,s=t.keyboard,u=t.scroll,l=t.placement,c=t.autoFocus,p=t.enforceFocus,h=t.restoreFocus,g=t.restoreFocusOptions,v=t.onShow,y=t.onHide,b=t.onEscapeKeyDown,w=t.onEnter,x=t.onEntering,_=t.onEntered,N=t.onExit,k=t.onExiting,E=t.onExited,S=d(t,$m),C=(0,e.useContext)($h);a=te(a,"offcanvas");var I="string"===typeof(null==C?void 0:C.expand),O=Pm(I?C.expand:"xs","up");return I&&O?(0,B.jsx)("div",f(f({ref:n},S),{},{className:m()(r,a,"".concat(a,"-").concat(l))})):(0,B.jsx)(qm,f({ref:n,show:!(null==C||!C.expanded),bsPrefix:a,backdrop:i,backdropClassName:o,keyboard:s,scroll:u,placement:l,autoFocus:c,enforceFocus:p,restoreFocus:h,restoreFocusOptions:g,onShow:v,onHide:y,onEscapeKeyDown:b,onEnter:w,onEntering:x,onEntered:_,onExit:N,onExiting:k,onExited:E},S))}));Hm.displayName="NavbarOffcanvas";var Km=Hm,Gm=["bsPrefix","expand","variant","bg","fixed","sticky","className","as","expanded","onToggle","onSelect","collapseOnSelect"],Ym=ve("navbar-text",{Component:"span"}),Xm=e.forwardRef((function(t,n){var r=_(t,{expanded:"onToggle"}),a=r.bsPrefix,i=r.expand,o=r.variant,s=r.bg,u=r.fixed,l=r.sticky,c=r.className,p=r.as,h=void 0===p?"nav":p,g=r.expanded,v=r.onToggle,y=r.onSelect,b=r.collapseOnSelect,w=d(r,Gm),x=te(a,"navbar"),N=(0,e.useCallback)((function(){null==y||y.apply(void 0,arguments),b&&g&&(null==v||v(!1))}),[y,b,g,v]);void 0===w.role&&"nav"!==h&&(w.role="navigation");var k="".concat(x,"-expand");"string"===typeof i&&(k="".concat(k,"-").concat(i));var E=(0,e.useMemo)((function(){return{onToggle:function(){return null==v?void 0:v(!g)},bsPrefix:x,expanded:!!g,expand:i}}),[x,g,i,v]);return(0,B.jsx)($h.Provider,{value:E,children:(0,B.jsx)(D.Provider,{value:N,children:(0,B.jsx)(h,f(f({ref:n},w),{},{className:m()(c,x,i&&k,o&&"".concat(x,"-").concat(o),s&&"bg-".concat(s),l&&"sticky-".concat(l),u&&"fixed-".concat(u))}))})})}));Xm.defaultProps={expand:!0,variant:"light",collapseOnSelect:!1},Xm.displayName="Navbar";var Jm=Object.assign(Xm,{Brand:ym,Collapse:xm,Offcanvas:Km,Text:Ym,Toggle:km}),Qm=["bsPrefix","fluid","as","className"],Zm=e.forwardRef((function(e,t){var n=e.bsPrefix,r=e.fluid,a=e.as,i=void 0===a?"div":a,o=e.className,s=d(e,Qm),u=te(n,"container"),l="string"===typeof r?"-".concat(r):"-fluid";return(0,B.jsx)(i,f(f({ref:t},s),{},{className:m()(o,r?"".concat(u).concat(l):u)}))}));Zm.displayName="Container",Zm.defaultProps={fluid:!1};var eg=Zm,tg="/static/website/www/img/nav",ng=function(t){var n,r=t.user;if(r){var a=JSON.parse(r);if(a.username||!1){var i=(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Np,{icon:ll,className:"pe-2 ps-1"})," ",(0,B.jsx)("span",{children:a.username})]});n=(0,B.jsxs)(fm,{title:i,id:"collasible-nav-dropdown",className:"w-auto mx-0 px-0",children:[(0,B.jsx)(fm.Item,{href:"/users/".concat(a.id),children:"My Projects"}),(0,B.jsx)(fm.Item,{href:"/users/".concat(a.id,"/classes"),children:"My Classrooms"}),(0,B.jsx)(fm.Item,{href:"/users/".concat(a.id,"/workbooks"),children:"My Workbooks"}),(0,B.jsx)(fm.Divider,{}),(0,B.jsx)(fm.Item,{href:"/accounts/logout",children:"Not You? (LOGOUT)"})]})}else n=(0,B.jsxs)(e.Fragment,{children:[(0,B.jsx)(mm.Link,{href:"/accounts/signup/",children:"Sign Up"}),(0,B.jsxs)(mm.Link,{href:"/accounts/login/",children:[(0,B.jsx)(Np,{icon:ul,className:"pe-2 ps-1"}),"Login"]})]})}return(0,B.jsx)(Jm,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",fixed:"top",children:(0,B.jsxs)(eg,{children:[(0,B.jsxs)(Jm.Brand,{href:"/",children:[(0,B.jsx)("img",{src:"".concat(tg,"/nsf.gif"),width:"40",height:"40",alt:"NSF Logo"}),(0,B.jsx)("img",{src:"".concat(tg,"/logo.svg"),width:"100",height:"40",alt:"CSDT Logo"})]}),(0,B.jsx)(Jm.Toggle,{"aria-controls":"responsive-navbar-nav"}),(0,B.jsxs)(Jm.Collapse,{id:"responsive-navbar-nav",children:[(0,B.jsxs)(mm,{children:[(0,B.jsx)(mm.Link,{href:"/projects",children:"Projects"}),(0,B.jsx)(mm.Link,{href:"/news",children:"News"}),(0,B.jsx)(mm.Link,{href:"/publications",children:"Publications"}),(0,B.jsx)(mm.Link,{href:"/about",children:"About"})]}),(0,B.jsxs)(mm,{className:"justify-content-end",children:[n," ",(0,B.jsxs)(mm.Link,{className:"help-divide d-none d-lg-block",disabled:!0,children:[" ","|"]}),(0,B.jsx)(mm.Link,{href:"/culture/help/index.html",children:(0,B.jsx)(Np,{icon:sl,className:"pe-2 ps-1"})})]})]})]})})},rg="Modal_prompt__rX-NF",ag=function(){var t=u((0,e.useState)(!0),2),n=t[0],r=t[1],a=function(){return r(!1)},i=qa((function(e){return e.data}));return(0,B.jsxs)(xr,{show:n,onHide:a,centered:!0,className:rg,children:[(0,B.jsx)(xr.Header,{closeButton:!0,children:(0,B.jsx)(xr.Title,{children:i.prompt_header})}),(0,B.jsx)(xr.Body,{children:i.prompt_body}),(0,B.jsx)(xr.Footer,{children:(0,B.jsx)(Ze,{variant:"success",onClick:a,children:"Let's Get Started"})})]})},ig="SideNavigation_navbar__side__AJQ3h",og="SideNavigation_mainlink__UdZsf",sg="SideNavigation_active__zPcLu",ug="SideNavigation_container__sidenav__Xv8Pn",lg=function(){return(0,B.jsx)("div",{className:"col-lg-2 d-none d-lg-flex ".concat(ug),children:(0,B.jsx)("div",{className:ig,children:(0,B.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,B.jsx)("li",{className:og,children:(0,B.jsx)("a",{href:"../index.html",children:"Background"})}),(0,B.jsx)("li",{className:og,children:(0,B.jsx)("a",{href:"../how.html",children:"How Does AI Work to Classify Things?"})}),(0,B.jsx)("li",{className:"".concat(og," ").concat(sg),children:(0,B.jsx)("a",{href:"#!",children:"Create an AI App: Joe's Lunch"})}),(0,B.jsx)("li",{className:og,children:(0,B.jsx)("a",{href:"../creative.html",children:"How Does AI Work as a Creative Tool?"})}),(0,B.jsx)("li",{className:og,children:(0,B.jsx)("a",{href:"../art.html",children:"Create an AI App: AI for African Arts"})}),(0,B.jsx)("li",{className:og,children:(0,B.jsx)("a",{href:"../create.html",children:"Create Your Own AI Project"})})]})})})},cg="ProgressBar_steps__cBmmD",fg="ProgressBar_step__j+zz7",pg="ProgressBar_step__active__D+Gj9",dg="ProgressBar_step__complete__iihxy",hg="ProgressBar_step__icon__oTArY",mg="ProgressBar_step__incomplete__HKCQ4",gg="ProgressBar_step__label__BwfRm",vg="ProgressBar_step__inactive__oLRq0",yg=function(e){var t=e.current;return(0,B.jsxs)("ul",{className:cg,children:[(0,B.jsxs)("li",{className:"".concat(fg," ").concat(0===t?mg:dg," ").concat(0===t?pg:vg),children:[(0,B.jsx)("span",{className:hg}),(0,B.jsx)("span",{className:gg,children:"Select Images"})]}),(0,B.jsxs)("li",{className:"".concat(fg," ").concat(0===t||1===t?mg:dg," ").concat(1===t?pg:vg),children:[(0,B.jsx)("span",{className:hg}),(0,B.jsx)("span",{className:gg,children:"Train Model"})]}),(0,B.jsxs)("li",{className:"".concat(fg," ").concat(0===t||1===t?mg:dg," ").concat(2===t?pg:vg),children:[(0,B.jsx)("span",{className:hg}),(0,B.jsx)("span",{className:gg,children:"Evaluate Images"})]})]})},bg=JSON.parse('[{"image":"joeslunch/factorymade/bad-10.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":true},{"image":"joeslunch/factorymade/bad-1.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":false},{"image":"joeslunch/factorymade/bad-2.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":true},{"image":"joeslunch/factorymade/bad-3.png","dim_lighting":true,"bright_lighting":false,"has_square_surfaces":true},{"image":"joeslunch/factorymade/bad-4.png","dim_lighting":true,"bright_lighting":false,"has_square_surfaces":true},{"image":"joeslunch/factorymade/bad-5.png","dim_lighting":true,"bright_lighting":false,"has_square_surfaces":true},{"image":"joeslunch/factorymade/bad-6.png","dim_lighting":true,"bright_lighting":false,"has_square_surfaces":true},{"image":"joeslunch/factorymade/bad-7.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":true},{"image":"joeslunch/factorymade/bad-9.png","dim_lighting":true,"bright_lighting":false,"has_square_surfaces":true}]'),wg=JSON.parse('[{"image":"joeslunch/homecooked/good-10.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":false},{"image":"joeslunch/homecooked/good-1.png","dim_lighting":true,"bright_lighting":false,"has_square_surfaces":true},{"image":"joeslunch/homecooked/good-2.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":false},{"image":"joeslunch/homecooked/good-3.png","dim_lighting":true,"bright_lighting":false,"has_square_surfaces":false},{"image":"joeslunch/homecooked/good-4.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":true},{"image":"joeslunch/homecooked/good-5.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":false},{"image":"joeslunch/homecooked/good-6.png","dim_lighting":true,"bright_lighting":false,"has_square_surfaces":false},{"image":"joeslunch/homecooked/good-7.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":false},{"image":"joeslunch/homecooked/good-8.png","dim_lighting":true,"bright_lighting":false,"has_square_surfaces":false},{"image":"joeslunch/homecooked/good-9.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":true},{"image":"joeslunch/factorymade/bad-10.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":true},{"image":"joeslunch/factorymade/bad-1.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":false},{"image":"joeslunch/factorymade/bad-2.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":true},{"image":"joeslunch/factorymade/bad-3.png","dim_lighting":true,"bright_lighting":false,"has_square_surfaces":true},{"image":"joeslunch/factorymade/bad-4.png","dim_lighting":true,"bright_lighting":false,"has_square_surfaces":true},{"image":"joeslunch/factorymade/bad-5.png","dim_lighting":true,"bright_lighting":false,"has_square_surfaces":true},{"image":"joeslunch/factorymade/bad-6.png","dim_lighting":true,"bright_lighting":false,"has_square_surfaces":true},{"image":"joeslunch/factorymade/bad-7.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":true},{"image":"joeslunch/factorymade/bad-9.png","dim_lighting":true,"bright_lighting":false,"has_square_surfaces":true}]'),xg={lunch:{group_a:{label:"Home Cooked",dataset:JSON.parse('[{"image":"joeslunch/homecooked/good-10.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":false},{"image":"joeslunch/homecooked/good-1.png","dim_lighting":true,"bright_lighting":false,"has_square_surfaces":true},{"image":"joeslunch/homecooked/good-2.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":false},{"image":"joeslunch/homecooked/good-3.png","dim_lighting":true,"bright_lighting":false,"has_square_surfaces":false},{"image":"joeslunch/homecooked/good-4.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":true},{"image":"joeslunch/homecooked/good-5.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":false},{"image":"joeslunch/homecooked/good-6.png","dim_lighting":true,"bright_lighting":false,"has_square_surfaces":false},{"image":"joeslunch/homecooked/good-7.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":false},{"image":"joeslunch/homecooked/good-8.png","dim_lighting":true,"bright_lighting":false,"has_square_surfaces":false},{"image":"joeslunch/homecooked/good-9.png","dim_lighting":false,"bright_lighting":true,"has_square_surfaces":true}]'),corporate_score:[4,4,4]},group_b:{label:"Factory Made",dataset:bg,corporate_score:[4,4,4]},header:"Joe's Lunch",prompt_header:"Help Save Joe's Lunch!",prompt_body:"Our favorite school cafeteria worker, Chef Joe, is in danger of being put out of work by factory made lunches.Your cell phone app will be used by students to help them buy only Joe's delicious hand-made lunches. So yourfirst step is to train the AI on the two classes of images: authentic hand-made versus factory-producedimitations.",validation_pool:wg,homepage_prompt:"Select some images for both of the categories: home cooked and factory made foods. Once you do that, you can start training your model!"}},_g=(window.location.search.split("?").pop()||"").split("&").filter((function(e){return e})).map((function(e){return e.split("=")})).reduce((function(e,t){var n=u(t,2),r=n[0],a=n[1];return f(f({},e),{},l({},r,"1"===a||"true"===a))}),{}),Ng=(window.location.search.split("?").pop()||"").split("&").filter((function(e){return e})).map((function(e){return e.split("=")})).reduce((function(e,t){var n=u(t,2),r=n[0],a=n[1];return f(f({},e),{},l({},r,a))}),{}),kg=function(){var e=i(r().mark((function e(t){var n,a,i,o,s,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=Object.keys(t),a=[],i=0;i<n.length;i++)for(o=n[i],s=0;s<t[o].length;s++)u=t[o][s],a.push({label:o,src:u.src,file:u});return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Eg=function(){var e=i(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={images:[],labels:[],files:[]},e.abrupt("return",t.reduce((function(e,t){var n=t.src,r=t.label,a=t.file;return{images:e.images.concat(n),labels:e.labels.concat(r),files:e.files.concat(a)}}),n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Sg=function(){return new Promise((function(e){window.requestAnimationFrame((function(){return e()}))}))},Cg="Dropzone_container__IDzYS",Ig="Dropzone_over__pz1ky",Og="Dropzone_evaluation__UzSGD",Pg="Dropzone_input__lTK49",Tg=function(){var e=i(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.file((function(t){var r=new FileReader;r.onload=function(r){return e({file:t,src:r.target.result,path:n.split("/").join("")})},r.readAsDataURL(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ag=Tg,Rg=function(){var e=i(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a=t.createReader(),o=[];a.readEntries(function(){var t=i(r().mark((function t(a){var i,s,u,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=0;case 1:if(!(i<a.length)){t.next=17;break}if(!(s=a[i]).isFile){t.next=10;break}return t.next=6,Ag(s,n);case 6:u=t.sent,o.push(u),t.next=14;break;case 10:return t.next=12,Dg(s,n+s.name+"/");case 12:l=t.sent,o=o.concat(l);case 14:i++,t.next=1;break;case 17:return t.abrupt("return",e(o));case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Dg=function(){var e=i(r().mark((function e(t){var n,a=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"",e.next=3,Rg(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mg=Dg,Lg=function(){var e=i(r().mark((function e(t){var n,a,i,o,s,u,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.dataTransfer||{},a=n.items||[],i=[],o=0;case 4:if(!(o<a.length)){e.next=14;break}if(!(s=a[o].webkitGetAsEntry())){e.next=11;break}return e.next=9,Mg(s);case 9:u=e.sent,i=i.concat(u);case 11:o++,e.next=4;break;case 14:return c=i.reduce((function(e,t){return t.path?f(f({},e),{},l({},t.path,(e[t.path]||[]).concat(t))):e}),{}),e.abrupt("return",c);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zg=Lg,jg=function(e,t){for(var n=e.split(","),r=n[0].match(/:(.*?);/)[1],a=atob(n[1]),i=a.length,o=new Uint8Array(i);i--;)o[i]=a.charCodeAt(i);return new File([o],t,{type:r})},Bg=function(){var e=i(r().mark((function e(t){var n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return a=e.sent,e.abrupt("return",new Promise((function(e){var t=new FileReader;t.readAsDataURL(a),t.onloadend=function(){var n=t.result;e(n)}})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fg=function(){var e=i(r().mark((function e(t,n,a){var i,o,s,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=void 0===a?n.selected:n.validate_selected,o=Sp(i),e.prev=2,o.s();case 4:if((s=o.n()).done){e.next=10;break}return u=s.value,e.next=8,Bg(u.src).then((function(e){t.push({src:e,file:jg(e,"test.png"),label:n.label})}));case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),o.e(e.t0);case 15:return e.prev=15,o.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})));return function(t,n,r){return e.apply(this,arguments)}}(),Vg=function(){var e=i(r().mark((function e(t,n,a){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=new Array,void 0!==a){e.next=14;break}if(void 0!==(null===t||void 0===t?void 0:t.selected)&&void 0!==(null===n||void 0===n?void 0:n.selected)){e.next=4;break}throw new Error("You must select at least one image for each group to train.");case 4:if(e.t0=t.selected,!e.t0){e.next=8;break}return e.next=8,Fg(i,t,a);case 8:if(e.t1=n.selected,!e.t1){e.next=12;break}return e.next=12,Fg(i,n,a);case 12:e.next=24;break;case 14:if(void 0!==(null===t||void 0===t?void 0:t.validate_selected)||void 0!==(null===n||void 0===n?void 0:n.validate_selected)){e.next=16;break}throw new Error("You must select at least one image from either group to validate.");case 16:if(e.t2=t.validate_selected,!e.t2){e.next=20;break}return e.next=20,Fg(i,t,a);case 20:if(e.t3=n.validate_selected,!e.t3){e.next=24;break}return e.next=24,Fg(i,n,a);case 24:return e.abrupt("return",i);case 25:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Ug=[],Wg=function(e){return Object.entries(e).filter((function(e){return e[1]})).map((function(e){return u(e,1)[0]}))},qg=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(t||[]).reduce((function(e,t){return t?"string"===typeof t?e.concat(t):e.concat(Wg(t)):e}),Ug).join(" ")},$g=function(t){var n,a=u((0,e.useState)(!1),2),o=a[0],s=a[1],c=t.enableDrop,f=qa((function(e){return e.data.group_a})),p=qa((function(e){return e.data.group_b})),d=function(){var e=i(r().mark((function e(n){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.onDrop&&t.onDrop(),n.preventDefault(),n.persist(),e.next=5,zg(n);case 5:a=e.sent,n.dataTransfer.items?n.dataTransfer.items.clear():n.dataTransfer.clearData(),t.onParseFiles(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=qg(Cg,l({},Ig,o));(0,e.useEffect)((function(){return function(){n&&clearTimeout(n)}}),[n]);var m=void 0===t.mode&&(!f.selected||!p.selected),g="Evaluate Images"===t.mode&&(!f.validate_selected&&!p.validate_selected||0===(null===f||void 0===f?void 0:f.validate_selected.length)&&0===(null===p||void 0===p?void 0:p.validate_selected.length)),v=m||g;return(0,B.jsxs)(B.Fragment,{children:[c&&(0,B.jsxs)("div",{className:"".concat(h," ").concat("Evaluate Images"===t.mode?Og:""),draggable:!0,onDrop:d,onDragOver:function(e){n&&clearTimeout(n),!1===o&&s(!0),n=window.setTimeout((function(){s(!1)}),50),e.preventDefault()},children:[t.children||(0,B.jsx)("span",{children:"Drop Images To Begin Training"}),(0,B.jsx)("input",{className:Pg,type:"file",name:"files[]","data-multiple-caption":"{count} files selected",multiple:!0,"aria-label":"..."})]}),(0,B.jsx)("button",{onClick:function(){Vg(f,p,null===t||void 0===t?void 0:t.mode).then((function(e){return e.map((function(e){return{label:e.label,src:e.src,file:e.file}}))})).catch((function(e){alert(e),console.error(e)})).then((function(e){t.onParseObject(e)}))},className:"btn btn-".concat(v?"secondary":"primary"," w-100 "),disabled:v,children:t.mode||"Train Model"})]})},Hg=["bsPrefix","className","children","aspectRatio","style"];var Kg=e.forwardRef((function(t,n){var r=t.bsPrefix,a=t.className,i=t.children,o=t.aspectRatio,s=t.style,u=d(t,Hg);r=te(r,"ratio");var l,c="number"===typeof o;return(0,B.jsx)("div",f(f({ref:n},u),{},{style:f(f({},s),c&&{"--bs-aspect-ratio":(l=o,l<=0||l>100?"100%":"".concat(l<1?100*l:l,"%"))}),className:m()(r,a,!c&&"".concat(r,"-").concat(o)),children:e.Children.only(i)}))}));Kg.defaultProps={aspectRatio:"1x1"};var Gg=Kg,Yg="TrainingPreview_loader__RYcP0",Xg="TrainingPreview_container__88AUM",Jg="TrainingPreview_images__jg98Q",Qg=function(t){var n=t.images,r=u((0,e.useState)(0),2),a=r[0],i=r[1],o=$a((function(e){return e.setValue})),s=qa((function(e){return e.data.group_a})),c=qa((function(e){return e.data.group_b})),p=qa((function(e){return e.updateGroupSelection})),d=(0,e.useRef)(0),h=(0,e.useRef)(),m=n&&n[a%n.length],g=qg(Xg,l({},Jg,n&&n.length>0)),v=(0,e.useCallback)((function(){if(d.current)(new Date).getTime(),d.current;h.current&&clearTimeout(h.current),i((function(e){return e+1})),d.current=(new Date).getTime(),h.current=setTimeout((function(){v()}),75)}),[]),y=(0,e.useCallback)((function(){h.current&&(clearTimeout(h.current),h.current=void 0,o("predictions",[]),p("group_a",f(f({},s),{},{validate_selected:[]})),p("group_b",f(f({},c),{},{validate_selected:[]})))}),[o,s,c,p]);return(0,e.useEffect)((function(){return v(),function(){return y()}}),[v,y]),(0,B.jsx)("div",{className:g,children:m?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Gg,{aspectRatio:"1x1",className:"mb-3",children:(0,B.jsx)("img",{src:m,alt:"Training visual",className:"shadow rounded"})}),(0,B.jsxs)("div",{className:"d-flex justify-between align-items-center",children:[(0,B.jsx)(ol,{}),(0,B.jsx)("span",{className:"px-2 fw-bold",children:"Training your model..."})]})]}):(0,B.jsxs)("div",{className:Yg,children:[(0,B.jsx)(ol,{}),(0,B.jsx)("span",{children:"Reading images"})]})})},Zg=__webpack_require__(313),ev=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function tv(e,t){function n(){this.constructor=e}ev(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var nv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};function rv(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function av(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var iv=Zg.ViN.get("EPSILON");function ov(){return iv}var sv=0;function uv(){return sv++}var lv={};function cv(e){return void 0===e&&(e=""),e in lv||(lv[e]=0),lv[e]+=1,e+lv[e].toString()}var fv={float32:{},int32:{}};function pv(e,t){return void 0===t&&(t="float32"),null==fv[t][e]&&(fv[t][e]=(0,Zg.iD$)(e,t),(0,Zg.CnY)(fv[t][e])),fv[t][e]}var dv=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return tv(t,e),t}(Error),hv=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return tv(t,e),t}(Error),mv=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return tv(t,e),t}(Error),gv=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return tv(t,e),t}(Error),vv=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return tv(t,e),t}(Error);!function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}tv(t,e)}(Error);function yv(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}return(n=new Array(t)).fill(e),n}function bv(e,t){if(!e)throw new vv(t)}function wv(e,t){for(var n=0,r=0,a=e;r<a.length;r++)a[r]===t&&n++;return n}function xv(e){return 1===e.length?e[0]:e}function _v(e){return Array.isArray(e)?e:[e]}function Nv(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function kv(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var Ev={};function Sv(e){return null===e||void 0===e?null:{className:e.getClassName(),config:e.getConfig()}}function Cv(e,t,n,r){if(void 0===t&&(t={}),void 0===n&&(n={}),void 0===r&&(r="object"),"string"==typeof e){var a=e,i=void 0;if(a in n)i=n[a];else if(a in Ev)i=Ev[a];else if(null==(i=t[a]))throw new mv("Unknown "+r+": "+e+". This may be due to one of the following reasons:\n1. The "+r+" is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom "+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");return i}var o=e;if(null==o.className||null==o.config)throw new mv(r+": Improper config format: "+JSON.stringify(o)+".\n'className' and 'config' must set.");var s,u,l,c=o.className,f=void 0,p=void 0;if(c in n?(f=(s=n.get(c))[0],p=s[1]):c in Ev?(f=(u=Ev.className)[0],p=u[1]):c in t&&(f=(l=t[c])[0],p=l[1]),null==f)throw new mv("Unknown "+r+": "+c+". This may be due to one of the following reasons:\n1. The "+r+" is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom "+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");if(null!=p){for(var d={},h=0,m=Object.keys(Ev);h<m.length;h++)d[x=m[h]]=Ev[x];for(var g=0,v=Object.keys(n);g<v.length;g++)d[x=v[g]]=n[x];o.config.customObjects=d;for(var y=nv({},Ev),b=0,w=Object.keys(n);b<w.length;b++){var x=w[b];Ev[x]=n[x]}var _=p(f,o.config);return Ev=nv({},y),_}y=nv({},Ev);for(var N=0,k=Object.keys(n);N<k.length;N++)x=k[N],Ev[x]=n[x];return _=new f(o.config),Ev=nv({},y),_}function Iv(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function Ov(e){if(null==e)return e;for(var t=[],n=0,r=e;n<r.length;n++){var a=r[n];-1===t.indexOf(a)&&t.push(a)}return t}function Pv(e){if(null==e)throw new mv("Invalid value in obj: "+JSON.stringify(e));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Tv(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new mv(n+" is not a valid "+t+".  Valid values are "+e+" or null/undefined.")}function Av(e,t,n,r){return void 0===n&&(n=0),void 0===r&&(r=1/0),bv(n>=0),bv(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function Rv(e,t){return(0,Zg.lub)((function(){return(0,Zg._b3)((0,Zg.Smz)((0,Zg.NT4)(e,e),t,!0))}))}var Dv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.getConfig=function(){return{}},t}(Zg.m7h.Serializable),Mv=function(e){function t(t){var n=e.call(this)||this;return n.defaultMaxValue=2,n.defaultAxis=0,n.maxValue=null!=t.maxValue?t.maxValue:n.defaultMaxValue,n.axis=null!=t.axis?t.axis:n.defaultAxis,n}return tv(t,e),t.prototype.apply=function(e){var t=this;return(0,Zg.lub)((function(){var n=Rv(e,t.axis),r=(0,Zg.iUl)(n,0,t.maxValue);return(0,Zg.dC7)(e,(0,Zg.hiC)(r,(0,Zg.IHx)(pv(ov()),n)))}))},t.prototype.getConfig=function(){return{maxValue:this.maxValue,axis:this.axis}},t.className="MaxNorm",t}(Dv);Zg.m7h.SerializationMap.register(Mv);var Lv=function(e){function t(t){var n=e.call(this)||this;return n.defaultAxis=0,n.axis=null!=t.axis?t.axis:n.defaultAxis,n}return tv(t,e),t.prototype.apply=function(e){var t=this;return(0,Zg.lub)((function(){return(0,Zg.hiC)(e,(0,Zg.IHx)(pv(ov()),Rv(e,t.axis)))}))},t.prototype.getConfig=function(){return{axis:this.axis}},t.className="UnitNorm",t}(Dv);Zg.m7h.SerializationMap.register(Lv);var zv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.apply=function(e){return(0,Zg.UYe)(e)},t.className="NonNeg",t}(Dv);Zg.m7h.SerializationMap.register(zv);var jv=function(e){function t(t){var n=e.call(this)||this;return n.defaultMinValue=0,n.defaultMaxValue=1,n.defaultRate=1,n.defaultAxis=0,n.minValue=null!=t.minValue?t.minValue:n.defaultMinValue,n.maxValue=null!=t.maxValue?t.maxValue:n.defaultMaxValue,n.rate=null!=t.rate?t.rate:n.defaultRate,n.axis=null!=t.axis?t.axis:n.defaultAxis,n}return tv(t,e),t.prototype.apply=function(e){var t=this;return(0,Zg.lub)((function(){var n=Rv(e,t.axis),r=(0,Zg.IHx)((0,Zg.dC7)(pv(t.rate),(0,Zg.iUl)(n,t.minValue,t.maxValue)),(0,Zg.dC7)(pv(1-t.rate),n));return(0,Zg.dC7)(e,(0,Zg.hiC)(r,(0,Zg.IHx)(pv(ov()),n)))}))},t.prototype.getConfig=function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}},t.className="MinMaxNorm",t}(Dv);Zg.m7h.SerializationMap.register(jv);var Bv={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Fv(e){return Sv(e)}function Vv(e,t){return void 0===t&&(t={}),Cv(e,Zg.m7h.SerializationMap.getMap().classNameMap,t,"constraint")}function Uv(e){return null==e?null:"string"==typeof e?Vv({className:e in Bv?Bv[e]:e,config:{}}):e instanceof Dv?e:Vv(e)}Object.freeze({maxNorm:function(e){return new Mv(e)},unitNorm:function(e){return new Lv(e)},nonNeg:function(){return new zv},minMaxNorm:function(e){return new jv(e)}});var Wv=new Map,qv=["channelsFirst","channelsLast"];function $v(e){Tv(qv,"DataFormat",e)}var Hv=["valid","same","causal"];function Kv(e){Tv(Hv,"PaddingMode",e)}var Gv=["max","avg"];var Yv=[];function Xv(e,t){Yv.push(e);try{var n=t();return Yv.pop(),n}catch(e){throw Yv.pop(),e}}function Jv(e){if(!ey(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===Yv.length?"":Yv.join("/")+"/")+e}function Qv(e){if(!ey(e))throw new Error("Not a valid tensor name: '"+e+"'");Wv.has(e)||Wv.set(e,0);var t=Wv.get(e);if(Wv.set(e,Wv.get(e)+1),t>0){var n=e+"_"+t;return Wv.set(n,1),n}return e}var Zv=new RegExp(/^[A-Za-z][A-Za-z0-9\._\/]*$/);function ey(e){return!!e.match(Zv)}function ty(e){return e===parseInt(e.toString(),10)}function ny(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function ry(e){return e=Array.isArray(e)?new Float32Array(e):e,(0,Zg.RRF)(e)}function ay(e){return(0,Zg.VV$)(ry(e)).dataSync()[0]}function iy(e){return(0,Zg.Fp7)(ry(e)).dataSync()[0]}function oy(e,t){if(t<e)throw new mv("end ("+t+") < begin ("+e+") is forbidden.");for(var n=[],r=e;r<t;++r)n.push(r);return n}function sy(e,t){return e.asType(t)}function uy(e,t){void 0===t&&(t=-1);var n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),e.reshape(n)}function ly(e,t,n){return(0,Zg.lub)((function(){switch(e.rank){case 1:return(0,Zg.jZU)(e,t,n);case 2:return(0,Zg.SmN)(e,[t,0],[n,e.shape[1]]);case 3:return(0,Zg.CnO)(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return(0,Zg.p0P)(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);default:throw new mv("sliceAlongFirstAxis() received an unsupported tensor rank: "+e.rank)}}))}function cy(e,t,n){return(0,Zg.lub)((function(){switch(e.rank){case 1:return(0,Zg.jZU)(e,t,n);case 2:return(0,Zg.SmN)(e,[0,t],[e.shape[0],n]);case 3:return(0,Zg.CnO)(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return(0,Zg.p0P)(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new mv("sliceAlongLastAxis() received an unsupported tensor rank: "+e.rank)}}))}function fy(e,t,n,r){return(0,Zg.lub)((function(){switch(e.rank){case 1:return(0,Zg.jZU)(e,t,n);case 2:switch(r){case 1:return ly(e,t,n);case 2:return cy(e,t,n);default:throw new mv("The axis is not within the rank of the tensor "+r)}case 3:switch(r){case 1:return ly(e,t,n);case 2:return(0,Zg.CnO)(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return cy(e,t,n);default:throw new mv("The axis is not within the rank of the tensor "+r)}case 4:switch(r){case 1:return ly(e,t,n);case 2:return(0,Zg.p0P)(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return(0,Zg.p0P)(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return cy(e,t,n);default:throw new mv("The axis is not within the rank of the tensor "+r)}default:throw new mv("sliceAlongLastAxis() received an unsupported tensor rank: "+e.rank)}}))}function py(e,t){var n;return void 0===t&&(t=-1),t<0&&(t=0!==(n=e[0].rank)?n:0),t===e[0].rank&&(t=-1),(0,Zg.zoF)(e,t)}function dy(e,t){switch(e.rank){case 1:return(0,Zg.gME)([e,t]);case 2:return(0,Zg.Izb)([e,t],0);case 3:return(0,Zg.MNy)([e,t],0);case 4:return(0,Zg.ZaL)([e,t],0);default:throw new mv("concatAlongFirstAxis() received an unsupported tensor rank: "+e.rank)}}function hy(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new mv("The length of input n ("+t.length+") does not match the number of dimensions in input x ("+e.rank+")");return(0,Zg.Gg6)(e,t)}function my(e,t,n,r,a){return void 0===t&&(t=0),void 0===n&&(n=1),(0,Zg.nGf)(e,t,n,r,a)}function gy(e,t){if(2!==t.rank)throw new gv("dot support for y other than rank 2 is not yet implemented: y shape = "+t.shape);if(2===e.rank)return(0,Zg.OI3)(e,t);if(3===e.rank){var n=e.shape[0],r=e.shape[1],a=e.shape[2];return e=e.reshape([n*r,a]),(0,Zg.OI3)(e,t).reshape([n,r,t.shape[1]])}throw new gv("dot support for x of rank "+e.rank+" is not yet implemented: x shape = "+e.shape)}function vy(e,t,n){return(0,Zg.lub)((function(){return t=Array.isArray(t)?(0,Zg.RRF)(t,"int32"):t.toInt(),(0,Zg.Iqj)(e,t,n)}))}function yy(e){return(0,Zg.NT4)(e,e)}function by(e,t,n){return(0,Zg.lub)((function(){if(null==n&&(n="channelsLast"),$v(n),1!==t.rank&&t.rank!==e.rank)throw new mv("Unexpected bias dimensions: "+t.rank+"; expected it to be 1 or "+e.rank);var r,a=t.shape;if(5===e.rank)"channelsFirst"===n?r=1===a.length?e.add(t.reshape([1,a[0],1,1,1])):e.add(t.reshape([1,a[3],a[0],a[1],a[2]])):"channelsLast"===n&&(r=1===a.length?e.add(t.reshape([1,1,1,1,a[0]])):e.add(t.reshape([1].concat(a))));else if(4===e.rank)"channelsFirst"===n?r=1===a.length?e.add(t.reshape([1,a[0],1,1])):e.add(t.reshape([1,a[2],a[0],a[1]])):"channelsLast"===n&&(r=1===a.length?e.add(t.reshape([1,1,1,a[0]])):e.add(t.reshape([1].concat(a))));else if(3===e.rank)"channelsFirst"===n?r=1===a.length?e.add(t.reshape([1,a[0],1])):e.add(t.reshape([1,a[1],a[0]])):"channelsLast"===n&&(r=1===a.length?e.add(t.reshape([1,1,a[0]])):e.add(t.reshape([1].concat(a))));else{if(!(e.rank<3))throw new mv("Unsupported input rank by biasAdd: "+e.rank);r=e.add(t)}return r}))}function wy(e,t,n,r){return(0,Zg.lub)((function(){if(null!=n&&!Zg.D5U.arraysEqual(e.shape,n))throw new gv("Non-default noise shape is not implemented yet: "+JSON.stringify(n));if(null!=r)throw new gv("seed is not implemented for dropout yet.");var a=(0,Zg.Nbs)((0,Zg.IHx)((0,Zg.W76)(t),(0,Zg.LGj)(e.shape,0,1,"float32")));return a=(0,Zg.dC7)((0,Zg.hiC)(pv(1),(0,Zg.luU)(pv(1),t)),a),(0,Zg.dC7)(e,a)}))}function xy(e,t,n){return void 0===n&&(n=!1),n?e():t()}var _y=["fanIn","fanOut","fanAvg"];var Ny=["normal","uniform"];var ky=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.fromConfigUsesCustomObjects=function(){return!1},t.prototype.getConfig=function(){return{}},t}(Zg.m7h.Serializable),Ey=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.apply=function(e,t){return(0,Zg.lls)(e,t)},t.className="Zeros",t}(ky);Zg.m7h.SerializationMap.register(Ey);var Sy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.apply=function(e,t){return(0,Zg.iUs)(e,t)},t.className="Ones",t}(ky);Zg.m7h.SerializationMap.register(Sy);var Cy=function(e){function t(t){var n=e.call(this)||this;if("object"!=typeof t)throw new mv("Expected argument of type ConstantConfig but got "+t);if(void 0===t.value)throw new mv("config must have value set but got "+t);return n.value=t.value,n}return tv(t,e),t.prototype.apply=function(e,t){var n=this;return(0,Zg.lub)((function(){return(0,Zg.dC7)((0,Zg.iD$)(n.value),(0,Zg.iUs)(e,t))}))},t.prototype.getConfig=function(){return{value:this.value}},t.className="Constant",t}(ky);Zg.m7h.SerializationMap.register(Cy);var Iy=function(e){function t(t){var n=e.call(this)||this;return n.DEFAULT_MINVAL=-.05,n.DEFAULT_MAXVAL=.05,n.minval=t.minval||n.DEFAULT_MINVAL,n.maxval=t.maxval||n.DEFAULT_MAXVAL,n.seed=t.seed,n}return tv(t,e),t.prototype.apply=function(e,t){return(0,Zg.LGj)(e,this.minval,this.maxval,t)},t.prototype.getConfig=function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}},t.className="RandomUniform",t}(ky);Zg.m7h.SerializationMap.register(Iy);var Oy=function(e){function t(t){var n=e.call(this)||this;return n.DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=t.mean||n.DEFAULT_MEAN,n.stddev=t.stddev||n.DEFAULT_STDDEV,n.seed=t.seed,n}return tv(t,e),t.prototype.apply=function(e,t){if("bool"===t)throw new gv("randomNormal does not support dType bool.");return my(e,this.mean,this.stddev,t,this.seed)},t.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},t.className="RandomNormal",t}(ky);Zg.m7h.SerializationMap.register(Oy);var Py=function(e){function t(t){var n=e.call(this)||this;return n.DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=t.mean||n.DEFAULT_MEAN,n.stddev=t.stddev||n.DEFAULT_STDDEV,n.seed=t.seed,n}return tv(t,e),t.prototype.apply=function(e,t){if("bool"===t)throw new gv("truncatedNormal does not support dType bool.");return(0,Zg.Xu6)(e,this.mean,this.stddev,t,this.seed)},t.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},t.className="TruncatedNormal",t}(ky);Zg.m7h.SerializationMap.register(Py);var Ty=function(e){function t(t){var n=e.call(this)||this;return n.gain=null!=t.gain?(0,Zg.iD$)(t.gain):pv(1),n}return tv(t,e),t.prototype.apply=function(e,t){var n=this;return(0,Zg.lub)((function(){if(2!==e.length||e[0]!==e[1])throw new mv("Identity matrix initializer can only be used for 2D square matrices.");return(0,Zg.dC7)(n.gain,(0,Zg.iyy)(e[0]))}))},t.prototype.getConfig=function(){return{gain:this.gain.get()}},t.className="Identity",t}(ky);Zg.m7h.SerializationMap.register(Ty);var Ay=function(e){function t(t){var n=e.call(this)||this;if(t.scale<0)throw new mv("scale must be a positive float. Got: "+t.scale);return n.scale=null==t.scale?1:t.scale,n.mode=t.mode,function(e){Tv(_y,"FanMode",e)}(n.mode),n.distribution=t.distribution,function(e){Tv(Ny,"Distribution",e)}(n.distribution),n.seed=t.seed,n}return tv(t,e),t.prototype.apply=function(e,t){var n=function(e,t){var n,r;if(void 0===t&&(t="channelsLast"),$v(t),2===e.length)n=e[0],r=e[1];else if(-1!==[3,4,5].indexOf(e.length))if("channelsFirst"===t){var a=ny(e,2);n=e[1]*a,r=e[0]*a}else"channelsLast"===t&&(a=ny(e,0,e.length-2),n=e[e.length-2]*a,r=e[e.length-1]*a);else{var i=ny(e);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}(e),r=n[0],a=n[1],i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("bool"===t)throw new gv(this.getClassName()+" does not support dType bool.");return(0,Zg.Xu6)(e,0,o,t,this.seed)}var s=Math.sqrt(3*i);return(0,Zg.LGj)(e,-s,s,t)},t.prototype.getConfig=function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}},t.className="VarianceScaling",t}(ky);Zg.m7h.SerializationMap.register(Ay);var Ry=function(e){function t(t){return e.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==t?null:t.seed})||this}return tv(t,e),t.prototype.getClassName=function(){return Ay.className},t}(Ay),Dy=function(e){function t(t){return e.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==t?null:t.seed})||this}return tv(t,e),t.prototype.getClassName=function(){return Ay.className},t}(Ay),My=function(e){function t(t){return e.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})||this}return tv(t,e),t.prototype.getClassName=function(){return Ay.className},t}(Ay),Ly=function(e){function t(t){return e.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})||this}return tv(t,e),t.prototype.getClassName=function(){return Ay.className},t}(Ay),zy=function(e){function t(t){var n=e.call(this)||this;if(n.DEFAULT_GAIN=1,n.gain=null==t.gain?n.DEFAULT_GAIN:t.gain,n.seed=t.seed,null!=n.seed)throw new gv("Random seed is not implemented for Orthogonal Initializer yet.");return n}return tv(t,e),t.prototype.apply=function(e,t){var n=this;return(0,Zg.lub)((function(){if(2!==e.length)throw new gv("The Orthogonal Initializer does not support non-2D shapes yet.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more than 2000 ("+e[0]*e[1]+") elements: Slowness may result.");var t=my(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=Zg.$r2.gramSchmidt(t);return e[0]>e[1]&&(r=r.transpose()),(0,Zg.dC7)(pv(n.gain),r)}))},t.prototype.getConfig=function(){return{gain:this.gain,seed:this.seed}},t.className="Orthogonal",t}(ky);Zg.m7h.SerializationMap.register(zy);var jy={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",identity:"Identity",leCunNormal:"LeCunNormal",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function By(e,t){return void 0===t&&(t={}),Cv(e,Zg.m7h.SerializationMap.getMap().classNameMap,t,"initializer")}function Fy(e){return Sv(e)}function Vy(e){if("string"==typeof e){var t=e in jy?jy[e]:e;return"GlorotUniform"===t?new Ry:"GlorotNormal"===t?new Dy:"HeNormal"===t?new My:"LeCunNormal"===t?new Ly:By({className:t,config:{}})}return e instanceof ky?e:By(e)}Object.freeze({zeros:function(){return new Ey},ones:function(){return new Sy},constant:function(e){return new Cy(e)},randomUniform:function(e){return new Iy(e)},randomNormal:function(e){return new Oy(e)},truncatedNormal:function(e){return new Py(e)},identity:function(e){return new Ty(e)},varianceScaling:function(e){return new Ay(e)},glorotUniform:function(e){return new Ry(e)},glorotNormal:function(e){return new Dy(e)},heNormal:function(e){return new My(e)},leCunNormal:function(e){return new Ly(e)},orthogonal:function(e){return new zy(e)}});function Uy(e){return Array.isArray(e)&&Array.isArray(e[0])}function Wy(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function qy(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new mv("Expected Tensor length to be 1; got "+e.length);t=e[0]}else t=e;return t}function $y(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new mv("Expected exactly 1 Shape; got "+e.length)}return e}function Hy(e){for(var t=0,n=0,r=e;n<r.length;n++){var a=r[n];0===a.shape.length?t+=1:t+=a.shape.reduce((function(e,t){return e*t}))}return t}var Ky="Variable",Gy=function(){function e(e,t,n,r,a){void 0===t&&(t="float32"),void 0===n&&(n=Ky),void 0===r&&(r=!0),void 0===a&&(a=null),this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=uv(),n=null==n?Ky:n,this.originalName=Jv(n),this.name=Qv(this.originalName),this.trainable=r,this.constraint=a,this.val=(0,Zg.VD$)(e,this.trainable,this.name,this.dtype)}return e.prototype.read=function(){return this.assertNotDisposed(),this.val},e.prototype.write=function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this},e.prototype.dispose=function(){this.assertNotDisposed(),this.val.dispose()},e.prototype.assertNotDisposed=function(){if(this.val.isDisposed)throw new Error("LayersVariable "+this.name+" is already disposed.")},e}();function Yy(e){return e.map((function(e){return e.read()}))}function Xy(e){e.map((function(e){e[0].write(e[1])}))}var Jy=function(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}},Qy=function(e,t,n,r,a,i,o){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=a,this.outputTensorIndex=o,this.id=uv(),null!=i&&(this.originalName=Jv(i),this.name=Qv(this.originalName)),this.rank=t.length},Zy=0,eb=function(){function e(e,t){this.callArgs=t,this.id=Zy++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(var n=0,r=e.inboundLayers;n<r.length;n++){var a=r[n];null!=a&&a.outboundNodes.push(this)}e.outboundLayer.inboundNodes.push(this)}return e.prototype.getConfig=function(){for(var e=[],t=0,n=this.inboundLayers;t<n.length;t++){var r=n[t];null!=r?e.push(r.name):e.push(null)}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}},e}(),tb=0,nb=function(e){function t(t){var n=e.call(this)||this;n._callHook=null,n._addedWeightNames=[],n._stateful=!1,n.id=tb++,n.activityRegularizer=null,n.inputSpec=null,n.supportsMasking=!1,n._trainableWeights=[],n._nonTrainableWeights=[],n._losses=[],n._updates=[],n._built=!1,n.inboundNodes=[],n.outboundNodes=[];var r=t.name;if(!r){var a=n.getClassName();r=Nv(a)+"_"+cv(a)}if(n.name=r,n.trainable=null==t.trainable||t.trainable,n.updatable=null==t.updatable||t.updatable,null!=t.inputShape||null!=t.batchInputShape){var i=void 0;if(null!=t.batchInputShape)i=t.batchInputShape;else if(null!=t.inputShape){var o=null;null!=t.batchSize&&(o=t.batchSize),i=[o].concat(t.inputShape)}n.batchInputShape=i;var s=t.dtype;null==s&&(s=t.inputDType),null==s&&(s="float32"),n.dtype=s}return null!=t.weights?n.initialWeights=t.weights:n.initialWeights=null,n._refCount=null,n}return tv(t,e),t.nodeKey=function(e,t){return e.name+"_ib-"+t.toString()},t.prototype.getNodeAtIndex=function(e,t){if(0===this.inboundNodes.length)throw new hv("The layer has never been called and thus has no defined "+t+".");if(this.inboundNodes.length<=e)throw new mv("Asked to get "+t+" at node "+e+", but the layer has only "+this.inboundNodes.length+" inbound nodes.");return this.inboundNodes[e]},t.prototype.getInputAt=function(e){return xv(this.getNodeAtIndex(e,"input").inputTensors)},t.prototype.getOutputAt=function(e){return xv(this.getNodeAtIndex(e,"output").outputTensors)},Object.defineProperty(t.prototype,"input",{get:function(){if(this.inboundNodes.length>1)throw new dv("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new dv("Layer "+this.name+" is not connected, no input to return.");return xv(this.getNodeAtIndex(0,"input").inputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"output",{get:function(){if(0===this.inboundNodes.length)throw new dv("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new dv("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return xv(this.getNodeAtIndex(0,"output").outputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"losses",{get:function(){return this._losses},enumerable:!0,configurable:!0}),t.prototype.calculateLosses=function(){return this.losses.map((function(e){return e()}))},Object.defineProperty(t.prototype,"updates",{get:function(){return this._updates},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"built",{get:function(){return this._built},set:function(e){this._built=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.trainable?this._trainableWeights:[]},set:function(e){this._trainableWeights=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this._nonTrainableWeights:this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stateful",{get:function(){return this._stateful},enumerable:!0,configurable:!0}),t.prototype.resetStates=function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")},t.prototype.assertInputCompatibility=function(e){if(e=_v(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=_v(this.inputSpec);if(e.length!==t.length)throw new mv("Layer "+this.name+" expects "+t.length+" inputs, but it received "+e.length+" input tensors. Input received: "+e);for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new mv("Input "+n+" is incompatible with layer "+this.name+": expected ndim="+a.ndim+", found ndim="+i);if(null!=a.maxNDim&&i>a.maxNDim)throw new mv("Input "+n+" is incompatible with layer "+this.name+": expected max_ndim="+a.maxNDim+", found ndim="+i);if(null!=a.minNDim&&i<a.minNDim)throw new mv("Input "+n+" is incompatible with layer "+this.name+": expected min_ndim="+a.minNDim+", found ndim="+i+".");if(null!=a.dtype&&r.dtype!==a.dtype)throw new mv("Input "+n+" is incompatible with layer "+this.name+" : expected dtype="+a.dtype+", found dtype="+r.dtype+".");if(a.axes){var o=r.shape;for(var s in a.axes){var u=Number(s),l=a.axes[s],c=u>=0?o[u]:o[o.length+u];if(null!=l&&-1===[l,null].indexOf(c))throw new mv("Input "+n+" is incompatible with layer "+this.name+": expected axis "+u+" of input shape to have value "+l+" but got shape "+o+".")}}if(null!=a.shape)for(var f=0;f<a.shape.length;++f){var p=a.shape[f],d=r.shape[f];if(null!=p&&null!=d&&p!==d)throw new mv("Input "+n+" is incompatible with layer "+this.name+": expected shape="+a.shape+", found shape=${xShape}.")}}}}},t.prototype.call=function(e,t){return e},t.prototype.invokeCallHook=function(e,t){null!=this._callHook&&this._callHook(e,t)},t.prototype.setCallHook=function(e){this._callHook=e},t.prototype.clearCallHook=function(){this._callHook=null},t.prototype.apply=function(e,t){var n=this;t=t||{},this.assertNotDisposed();for(var r=_v(e),a=!0,i=0,o=r;i<o.length;i++)if(!(o[i]instanceof Qy)){a=!1;break}for(var s=!0,u=0,l=r;u<l.length;u++)if(l[u]instanceof Qy){s=!1;break}if(a===s)throw new mv("Arguments to apply() must be all SymbolicTensors or all Tensors");return Xv(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);for(var a=[],i=0,o=_v(e);i<o.length;i++){var u=o[i];a.push(u.shape)}n.build(xv(a)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&s&&(n._refCount=1)}if(n.assertInputCompatibility(e),s){for(var l=[],c=0,f=_v(m=n.call(e,t));c<f.length;c++){var p=f[c];-1!==r.indexOf(p)&&(p=p.clone()),l.push(p)}if(m=xv(l),null!=n.activityRegularizer)throw new gv("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return m}var d=function(e){for(var t=[],n=0,r=e=_v(e);n<r.length;n++){var a=r[n];t.push(a.shape)}return xv(t)}(e),h=n.computeOutputShape(d),m=void 0,g="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?d[0]:d),m=null!=h&&h.length>0&&Array.isArray(h[0])?h.map((function(r,a){return new Qy(g,r,n,_v(e),t,n.name,a)})):new Qy(g,h,n,_v(e),t,n.name),n.addInboundNode(e,m,null,null,d,h,t),n._refCount++,null!=n.activityRegularizer)throw new gv("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return m}))},t.prototype.warnOnIncompatibleInputShape=function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+JSON.stringify(e)+") does not match that of the batchInputShape ("+JSON.stringify(this.batchInputShape)+") of the layer "+this.name);else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor ("+JSON.stringify(e)+") does not match the expectation of layer "+this.name+": "+JSON.stringify(this.batchInputShape))}},Object.defineProperty(t.prototype,"outputShape",{get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new dv("The layer "+this.name+" has never been called and thus has no defined output shape.");for(var e=[],t=0,n=this.inboundNodes;t<n.length;t++){var r=n[t],a=JSON.stringify(r.outputShapes);-1===e.indexOf(a)&&e.push(a)}if(1===e.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new dv("The layer "+this.name+' has multiple inbound nodes with different output shapes. Hence the notion of "outut shape" is ill-defined for the layer.')},enumerable:!0,configurable:!0}),t.prototype.countParams=function(){if(!this.built)throw new hv("You tried to call countParams() on "+this.name+", but the layer is not built yet. Build it first by calling build(batchInputShape).");return Hy(this.weights)},t.prototype.build=function(e){this.built=!0},t.prototype.getWeights=function(e){return void 0===e&&(e=!1),Yy(e?this.trainableWeights:this.weights)},t.prototype.setWeights=function(e){var t=this;(0,Zg.lub)((function(){var n=t.weights;if(n.length!==e.length)throw new mv('You called setWeights(weights) on layer "'+t.name+'" with a weight list of length '+e.length+", but the layer was expecting "+n.length+" weights. Provided weights: "+e+"...");if(0!==n.length){for(var r=[],a=Yy(n),i=0;i<a.length;++i){var o=a[i],s=n[i],u=e[i];if(!Zg.D5U.arraysEqual(o.shape,u.shape))throw new mv("Layer weight shape "+o.shape+" not compatible with provided weight shape "+u.shape);r.push([s,u])}Xy(r)}}))},t.prototype.addWeight=function(e,t,n,r,a,i,o){if(-1!==this._addedWeightNames.indexOf(e))throw new mv("Duplicate weight name "+e+" for layer "+this.name);this._addedWeightNames.push(e),null==n&&(n="float32");var s=new Gy(r.apply(t,n),n,e,i,o);return null!=a&&this.addLoss((function(){return a.apply(s.read())})),null==i&&(i=!0),i?this._trainableWeights.push(s):this._nonTrainableWeights.push(s),s},t.prototype.addLoss=function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=_v(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,e))},t.prototype.computeOutputShape=function(e){return e},t.prototype.computeMask=function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer "+this.name+" does not support masking,but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer "+n.name+" does not support masking,but was passed an inputMask.")}))}return null}return t},t.prototype.addInboundNode=function(e,t,n,r,a,i,o){void 0===o&&(o=null);var s=_v(e);t=_v(t),n=_v(n),r=_v(r),a=Wy(a),i=Wy(i);for(var u=[],l=[],c=[],f=0,p=s;f<p.length;f++){var d=p[f];u.push(d.sourceLayer),l.push(d.nodeIndex),c.push(d.tensorIndex)}new eb({outboundLayer:this,inboundLayers:u,nodeIndices:l,tensorIndices:c,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var h=0;h<t.length;h++)t[h].sourceLayer=this,t[h].nodeIndex=this.inboundNodes.length-1,t[h].tensorIndex=h},t.prototype.getConfig=function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e},t.prototype.disposeWeights=function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length},t.prototype.assertNotDisposed=function(){if(0===this._refCount)throw new Error("Layer '"+this.name+"' is already disposed.")},t.prototype.dispose=function(){if(!this.built)throw new Error("Cannot dispose Layer "+this.name+" because it has not been built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer "+this.name+" because it has not been used yet.");this.assertNotDisposed();var e=0;return 0==--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}},t}(Zg.m7h.Serializable);function rb(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++)for(var o=0,s=rb(r.inputTensors[i],r.inboundLayers[i],r.nodeIndices[i]);o<s.length;o++){var u=s[o];-1===a.indexOf(u)&&a.push(u)}return a}var ab=function(e){function t(t){var n=e.call(this,{dtype:t.dtype,name:null!=t.name?t.name:cv("input").toString()})||this;if(null==t.batchSize&&(t.batchSize=null),null==t.sparse&&(t.sparse=!1),n.trainable=!1,n.built=!0,n.sparse=t.sparse,null!=t.inputShape&&null!=t.batchInputShape)throw new mv("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var r=t.batchInputShape;if(null==r){if(null==t.inputShape)throw new mv("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");r=[t.batchSize].concat(t.inputShape)}else if(null!=t.batchSize)throw new mv("Cannot specify batchSize if batchInputShape isspecified when creating an InputLayer.");var a=t.dtype||"float32";n.batchInputShape=r,n.dtype=a,n.inputSpec=[{shape:r}];var i=new Qy(n.dtype,n.batchInputShape,n,[],{},n.name);return i.nodeIndex=0,i.tensorIndex=0,new eb({outboundLayer:n,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[r],outputShapes:[r]}),n}return tv(t,e),t.prototype.apply=function(e,t){throw new mv("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)},t.prototype.dispose=function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}},t.prototype.getConfig=function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}},t.className="InputLayer",t}(nb);function ib(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new mv("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new ab({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}function ob(e){return rv(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,u;return av(this,(function(l){switch(l.label){case 0:if(null==e)return[2];for(a in t=[],n=[],r=[],e)"number"!=typeof(i=e[a])&&(o=i,t.push(o.data()),n.push(a),r.push(o));return[4,Promise.all(t)];case 1:for(s=l.sent(),u=0;u<s.length;++u)e[n[u]]=s[u][0];return(0,Zg.B90)(r),[2]}}))}))}Zg.m7h.SerializationMap.register(ab);var sb=function(){function e(){this.validationData=null}return e.prototype.setParams=function(e){this.params=e},e.prototype.onEpochBegin=function(e,t){return rv(this,void 0,void 0,(function(){return av(this,(function(e){return[2]}))}))},e.prototype.onEpochEnd=function(e,t){return rv(this,void 0,void 0,(function(){return av(this,(function(e){return[2]}))}))},e.prototype.onBatchBegin=function(e,t){return rv(this,void 0,void 0,(function(){return av(this,(function(e){return[2]}))}))},e.prototype.onBatchEnd=function(e,t){return rv(this,void 0,void 0,(function(){return av(this,(function(e){return[2]}))}))},e.prototype.onTrainBegin=function(e){return rv(this,void 0,void 0,(function(){return av(this,(function(e){return[2]}))}))},e.prototype.onTrainEnd=function(e){return rv(this,void 0,void 0,(function(){return av(this,(function(e){return[2]}))}))},e.prototype.setModel=function(e){},e}(),ub=function(){function e(e,t){void 0===t&&(t=10),null==e&&(e=[]),this.callbacks=e,this.queueLength=t}return e.prototype.append=function(e){this.callbacks.push(e)},e.prototype.setParams=function(e){for(var t=0,n=this.callbacks;t<n.length;t++)n[t].setParams(e)},e.prototype.setModel=function(e){for(var t=0,n=this.callbacks;t<n.length;t++)n[t].setModel(e)},e.prototype.onEpochBegin=function(e,t){return rv(this,void 0,void 0,(function(){var n,r;return av(this,(function(a){switch(a.label){case 0:null==t&&(t={}),n=0,r=this.callbacks,a.label=1;case 1:return n<r.length?[4,r[n].onEpochBegin(e,t)]:[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.onEpochEnd=function(e,t){return rv(this,void 0,void 0,(function(){var n,r;return av(this,(function(a){switch(a.label){case 0:null==t&&(t={}),n=0,r=this.callbacks,a.label=1;case 1:return n<r.length?[4,r[n].onEpochEnd(e,t)]:[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.onBatchBegin=function(e,t){return rv(this,void 0,void 0,(function(){var n,r;return av(this,(function(a){switch(a.label){case 0:null==t&&(t={}),n=0,r=this.callbacks,a.label=1;case 1:return n<r.length?[4,r[n].onBatchBegin(e,t)]:[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.onBatchEnd=function(e,t){return rv(this,void 0,void 0,(function(){var n,r;return av(this,(function(a){switch(a.label){case 0:null==t&&(t={}),n=0,r=this.callbacks,a.label=1;case 1:return n<r.length?[4,r[n].onBatchEnd(e,t)]:[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.onTrainBegin=function(e){return rv(this,void 0,void 0,(function(){var t,n;return av(this,(function(r){switch(r.label){case 0:null==e&&(e={}),t=0,n=this.callbacks,r.label=1;case 1:return t<n.length?[4,n[t].onTrainBegin(e)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))},e.prototype.onTrainEnd=function(e){return rv(this,void 0,void 0,(function(){var t,n;return av(this,(function(r){switch(r.label){case 0:null==e&&(e={}),t=0,n=this.callbacks,r.label=1;case 1:return t<n.length?[4,n[t].onTrainEnd(e)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))},e}(),lb=function(){function e(e){this.yieldEvery=e,this.batchCount=0,this.batchDurationsMillis=[],this.autoYieldEveryBatches=null,this.batchStartMillis=Zg.D5U.now()}return e.prototype.resolveOneTensorInLogs=function(e){return rv(this,void 0,void 0,(function(){var t,n,r,a,i;return av(this,(function(o){switch(o.label){case 0:for(n in t=[],e)t.push(n);r=0,o.label=1;case 1:return r<t.length?(a=t[r],"number"==typeof(i=e[a])?[3,3]:[4,i.data()]):[3,4];case 2:return o.sent(),[3,4];case 3:return r++,[3,1];case 4:return[2]}}))}))},e.prototype.maybeYieldOnBatch=function(t){return rv(this,void 0,void 0,(function(){var n,r;return av(this,(function(a){switch(a.label){case 0:return"auto"!==this.yieldEvery?[3,7]:(this.batchCount++,null!=this.autoYieldEveryBatches?[3,3]:[4,this.resolveOneTensorInLogs(t)]);case 1:return a.sent(),n=Zg.D5U.now(),[4,(0,Zg.glt)()];case 2:return a.sent(),this.batchCount>e.SKIP_FIRST_BATCHES&&(this.batchDurationsMillis.push(n-this.batchStartMillis),this.batchDurationsMillis.length>=e.DECISION_BATCH_COUNT&&(r=this.batchDurationsMillis.reduce((function(e,t){return e+t}))/this.batchDurationsMillis.length,this.autoYieldEveryBatches=Math.round(e.THRESHOLD_MILLIS/r),this.autoYieldEveryBatches<1&&(this.autoYieldEveryBatches=1))),this.batchStartMillis=Zg.D5U.now(),this.lastYieldBatchCount=this.batchCount,[3,6];case 3:return this.batchCount-this.lastYieldBatchCount>=this.autoYieldEveryBatches?[4,(0,Zg.glt)()]:[3,6];case 4:return a.sent(),[4,this.resolveOneTensorInLogs(t)];case 5:a.sent(),this.lastYieldBatchCount=this.batchCount,a.label=6;case 6:return[3,9];case 7:return"batch"!==this.yieldEvery?[3,9]:[4,(0,Zg.glt)()];case 8:a.sent(),a.label=9;case 9:return[2]}}))}))},e.prototype.maybeYieldOnEpoch=function(){return rv(this,void 0,void 0,(function(){return av(this,(function(e){switch(e.label){case 0:return"epoch"!==this.yieldEvery?[3,2]:[4,(0,Zg.glt)()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.SKIP_FIRST_BATCHES=1,e.DECISION_BATCH_COUNT=2,e.THRESHOLD_MILLIS=16,e}(),cb=function(e){function t(t){var n=e.call(this)||this;return n.yieldEvery=t||"auto",n}return tv(t,e),t.prototype.onTrainBegin=function(e){return rv(this,void 0,void 0,(function(){return av(this,(function(e){return this.autoYielder=new lb(this.yieldEvery),[2]}))}))},t.prototype.onEpochBegin=function(e){return rv(this,void 0,void 0,(function(){return av(this,(function(e){return this.seen=0,this.totals={},[2]}))}))},t.prototype.onBatchEnd=function(e,t){return rv(this,void 0,void 0,(function(){var e,n,r,a,i=this;return av(this,(function(o){switch(o.label){case 0:return[4,this.autoYielder.maybeYieldOnBatch(t)];case 1:for(a in o.sent(),null==t&&(t={}),e=null==t.size?0:t.size,this.seen+=e,n=function(n){var a=t[n];if("number"==typeof a)r.totals.hasOwnProperty(n)||(r.totals[n]=0),r.totals[n]=r.totals[n]+a*e;else{var o=void 0;n in r.totals?o=r.totals[n]:r.totals[n]=pv(0),r.totals[n]=(0,Zg.lub)((function(){return(0,Zg.IHx)(i.totals[n],(0,Zg.dC7)(a,pv(e)))})),null!=o&&o.dispose()}},r=this,t)n(a);return[2]}}))}))},t.prototype.onEpochEnd=function(e,t){return rv(this,void 0,void 0,(function(){var e,n,r,a,i,o=this;return av(this,(function(s){switch(s.label){case 0:return[4,this.autoYielder.maybeYieldOnEpoch()];case 1:if(s.sent(),null!=t)for(e=function(e){if(null==n.totals[e])return"continue";"number"==typeof n.totals[e]?t[e]=n.totals[e]/n.seen:(0,Zg.lub)((function(){t[e]=(0,Zg.dC7)((0,Zg.hiC)(pv(1),pv(o.seen)),o.totals[e]),o.totals[e].dispose(),(0,Zg.CnY)(t[e])}))},n=this,r=0,a=this.params.metrics;r<a.length;r++)i=a[r],e(i);return[2]}}))}))},t}(sb),fb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.onTrainBegin=function(e){return rv(this,void 0,void 0,(function(){return av(this,(function(e){return this.epoch=[],this.history={},[2]}))}))},t.prototype.onEpochEnd=function(e,t){return rv(this,void 0,void 0,(function(){var n;return av(this,(function(r){for(n in null==t&&(t={}),this.epoch.push(e),t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n]);return[2]}))}))},t.prototype.syncData=function(){return rv(this,void 0,void 0,(function(){var e,t,n,r,a,i,o,s,u;return av(this,(function(l){switch(l.label){case 0:for(r in e=[],t=[],n=[],this.history)for(a=this.history[r],i=0;i<a.length;++i)"number"!=typeof a[i]&&(o=a[i],e.push(o.data()),t.push(r),n.push(i));return[4,Promise.all(e)];case 1:for(s=l.sent(),u=0;u<s.length;++u)this.history[t[u]][n[u]].dispose(),this.history[t[u]][n[u]]=s[u][0];return[2]}}))}))},t}(sb),pb=function(e){function t(t){var n=e.call(this)||this;return n.trainBegin=t.onTrainBegin,n.trainEnd=t.onTrainEnd,n.epochBegin=t.onEpochBegin,n.epochEnd=t.onEpochEnd,n.batchBegin=t.onBatchBegin,n.batchEnd=t.onBatchEnd,n}return tv(t,e),t.prototype.onEpochBegin=function(e,t){return rv(this,void 0,void 0,(function(){return av(this,(function(n){switch(n.label){case 0:return null==this.epochBegin?[3,3]:[4,ob(t)];case 1:return n.sent(),[4,this.epochBegin(e,t)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.onEpochEnd=function(e,t){return rv(this,void 0,void 0,(function(){return av(this,(function(n){switch(n.label){case 0:return null==this.epochEnd?[3,3]:[4,ob(t)];case 1:return n.sent(),[4,this.epochEnd(e,t)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.onBatchBegin=function(e,t){return rv(this,void 0,void 0,(function(){return av(this,(function(n){switch(n.label){case 0:return null==this.batchBegin?[3,3]:[4,ob(t)];case 1:return n.sent(),[4,this.batchBegin(e,t)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.onBatchEnd=function(e,t){return rv(this,void 0,void 0,(function(){return av(this,(function(n){switch(n.label){case 0:return null==this.batchEnd?[3,3]:[4,ob(t)];case 1:return n.sent(),[4,this.batchEnd(e,t)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.onTrainBegin=function(e){return rv(this,void 0,void 0,(function(){return av(this,(function(t){switch(t.label){case 0:return null==this.trainBegin?[3,3]:[4,ob(e)];case 1:return t.sent(),[4,this.trainBegin(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},t.prototype.onTrainEnd=function(e){return rv(this,void 0,void 0,(function(){return av(this,(function(t){switch(t.label){case 0:return null==this.trainEnd?[3,3]:[4,ob(e)];case 1:return t.sent(),[4,this.trainEnd(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},t}(sb);function db(e,t){return(0,Zg.lub)((function(){var n=(0,Zg.Smz)(yy(e),t,!0),r=(0,Zg.dC7)((0,Zg.iD$)(ov()),(0,Zg.JpU)(e)),a=(0,Zg._b3)((0,Zg.gWQ)(n,r));return(0,Zg.hiC)(e,a)}))}function hb(e,t){return(0,Zg.lub)((function(){return(0,Zg.J69)(yy((0,Zg.luU)(t,e)),-1)}))}function mb(e,t){return(0,Zg.lub)((function(){return(0,Zg.J69)((0,Zg.WnP)((0,Zg.luU)(t,e)),-1)}))}function gb(e,t){return(0,Zg.lub)((function(){var n=(0,Zg.luU)(e,t),r=(0,Zg.iUl)((0,Zg.WnP)(e),ov(),Number.MAX_VALUE),a=(0,Zg.WnP)((0,Zg.hiC)(n,r));return(0,Zg.dC7)(pv(100),(0,Zg.J69)(a,-1))}))}function vb(e,t){return(0,Zg.lub)((function(){var n=pv(1),r=(0,Zg.iUl)(t,ov(),Number.MAX_VALUE),a=(0,Zg.cM7)((0,Zg.IHx)(n,r)),i=(0,Zg.iUl)(e,ov(),Number.MAX_VALUE),o=(0,Zg.cM7)((0,Zg.IHx)(n,i));return(0,Zg.J69)(yy((0,Zg.luU)(a,o)),-1)}))}function yb(e,t){return(0,Zg.lub)((function(){var n=pv(0),r=pv(1),a=(0,Zg.gWQ)(n,(0,Zg.luU)(r,(0,Zg.dC7)(e,t)));return(0,Zg.J69)(yy(a),-1)}))}function bb(e,t){return(0,Zg.lub)((function(){var n=pv(0),r=pv(1),a=(0,Zg.gWQ)(n,(0,Zg.luU)(r,(0,Zg.dC7)(e,t)));return(0,Zg.J69)(a,-1)}))}function wb(e,t){return(0,Zg.lub)((function(){var n=pv(0),r=pv(1),a=(0,Zg.Smz)((0,Zg.dC7)(e,t),-1),i=(0,Zg.Fp7)((0,Zg.dC7)((0,Zg.luU)(r,e),t),-1);return(0,Zg.gWQ)(n,(0,Zg.IHx)(r,(0,Zg.luU)(i,a)))}))}function xb(e,t){return(0,Zg.lub)((function(){var n=pv(Math.log(2)),r=(0,Zg.luU)(t,e),a=(0,Zg.luU)((0,Zg.IHx)(r,(0,Zg.Wvh)((0,Zg.dC7)(pv(-2),r))),n);return(0,Zg.J69)(a,-1)}))}function _b(e,t,n){return void 0===n&&(n=!1),(0,Zg.lub)((function(){if(n)t=(0,Zg.XAC)(t);else{var r=(0,Zg.Smz)(t,t.shape.length-1,!0);t=(0,Zg.hiC)(t,r)}return t=(0,Zg.iUl)(t,ov(),1-ov()),(0,Zg.W76)((0,Zg.Smz)((0,Zg.dC7)(e.toFloat(),(0,Zg.cM7)(t)),t.shape.length-1))}))}function Nb(e,t,n){return void 0===n&&(n=!1),(0,Zg.lub)((function(){var r=(0,Zg.GWj)(function(e){var t=[ny(e.shape)];return e.reshape(t)}(e)).toInt(),a=t.shape;return _b((0,Zg.lfX)(r,a[a.length-1]).reshape(a),t,n)}))}function kb(e,t){return(0,Zg.lub)((function(){var n;return n=(0,Zg.iUl)(t,ov(),1-ov()),n=(0,Zg.cM7)((0,Zg.hiC)(n,(0,Zg.luU)((0,Zg.JpU)(n),n))),(0,Zg.J69)(function(e,t){return(0,Zg.lub)((function(){var n=(0,Zg.gWQ)(t,(0,Zg.P84)(t)),r=(0,Zg.dC7)(t,e),a=(0,Zg.cM7)((0,Zg.IHx)(pv(1),(0,Zg.Qqt)((0,Zg.W76)((0,Zg.WnP)(t)))));return(0,Zg.IHx)((0,Zg.luU)(n,r),a)}))}(e,n),-1)}))}function Eb(e,t){return(0,Zg.lub)((function(){var n=(0,Zg.iUl)(e,ov(),1),r=(0,Zg.iUl)(t,ov(),1);return(0,Zg.Smz)((0,Zg.dC7)(e,(0,Zg.cM7)((0,Zg.hiC)(n,r))),-1)}))}function Sb(e,t){return(0,Zg.lub)((function(){var n=(0,Zg.cM7)((0,Zg.IHx)(pv(ov()),t));return(0,Zg.J69)((0,Zg.luU)(t,(0,Zg.dC7)(e,n)),-1)}))}function Cb(e,t){return(0,Zg.lub)((function(){var n=db(e,-1),r=db(t,-1),a=(0,Zg.dC7)(n,r);return(0,Zg.W76)((0,Zg.Smz)(a,-1))}))}function Ib(e){var t={meanSquaredError:hb,meanAbsoluteError:mb,meanAbsolutePercentageError:gb,meanSquaredLogarithmicError:vb,squaredHinge:yb,hinge:bb,categoricalHinge:wb,logcosh:xb,categoricalCrossentropy:_b,sparseCategoricalCrossentropy:Nb,binaryCrossentropy:kb,kullbackLeiblerDivergence:Eb,poisson:Sb,cosineProximity:Cb};if("string"==typeof e){if(e in t)return t[e];throw new mv("Unknown loss "+e)}return e}function Ob(e,t){return(0,Zg.lub)((function(){var n=(0,Zg.dC7)(pv(.5),(0,Zg.JpU)(t)),r=sy((0,Zg.pjt)(t,n),e.dtype);return(0,Zg.J69)((0,Zg.DgJ)(e,r),-1)}))}function Pb(e,t){return(0,Zg.lub)((function(){return sy((0,Zg.DgJ)((0,Zg.NqF)(e,-1),(0,Zg.NqF)(t,-1)),"float32")}))}function Tb(e,t){return kb(e,t)}function Ab(e,t){throw new gv}var Rb=hb,Db=hb,Mb=mb,Lb=mb,zb=gb,jb=gb,Bb=_b,Fb=Cb,Vb=Nb;function Ub(e,t,n,r){void 0===r&&(r=console.log);var a,i=function(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var s=o[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,s)}if(t)for(var u=0,l=e.layers;u<l.length;u++){for(var c=!1,f=0,p=l[u].inboundNodes;f<p.length;f++){var d=p[f];if(-1!==r.indexOf(d)){if(c){t=!1;break}c=!0}}if(!t)break}return t}(e),o=["Layer (type)","Output shape","Param #"];if(i?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var s in o.push("Receives inputs"),a=[],e.nodesByDepth)a.push.apply(a,e.nodesByDepth[s]);r("_".repeat(t)),Wb(o,n,r),r("=".repeat(t));for(var u=e.layers,l=0;l<u.length;++l)i?qb(u[l],n,r):$b(u[l],n,a,r),r((l===u.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var c=function(e){return null!=e.collectedTrainableWeights?Hy(e.collectedTrainableWeights):Hy(e.trainableWeights)}(e),f=Hy(e.nonTrainableWeights);r("Total params: "+(c+f)),r("Trainable params: "+c),r("Non-trainable params: "+f),r("_".repeat(t))}function Wb(e,t,n){void 0===n&&(n=console.log);for(var r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function qb(e,t,n){var r;try{r=JSON.stringify(e.outputShape)}catch(e){r="multiple"}Wb([e.name+" ("+e.getClassName()+")",r,e.countParams().toString()],t,n)}function $b(e,t,n,r){var a;try{a=JSON.stringify(e.outputShape)}catch(e){a="multiple"}for(var i=[],o=0,s=e.inboundNodes;o<s.length;o++){var u=s[o];if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(var l=0;l<u.inboundLayers.length;++l){var c=u.inboundLayers[l].name,f=u.nodeIndices[l],p=u.tensorIndices[l];i.push(c+"["+f+"]["+p+"]")}}var d=e.name,h=e.getClassName(),m=0===i.length?"":i[0];for(Wb([d+" ("+h+")",a,e.countParams().toString(),m],t,r),l=1;l<i.length;++l)Wb(["","","",i[l]],t,r)}function Hb(e,t){return void 0===t&&(t={}),Cv(e,Zg.m7h.SerializationMap.getMap().classNameMap,t,"layer")}function Kb(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function Gb(e,t){if(null===e)return null;if("string"==typeof e)return kv(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];Kb(t,a,i)?n.push(i):n.push(Gb(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var l=u[s],c=e[l];if("name"===l&&"string"==typeof c)o[l]=c;else{var f=kv(l);o[f]=Gb(c,f)}}return o}function Yb(e,t){if(null===e||void 0===e)return null;if("string"==typeof e)return Nv(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];Kb(t,a,i)?n.push(i):n.push(Yb(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var l=u[s],c=e[l];o[Nv(l)]="name"!==l&&"className"!==l||"string"!=typeof c?Yb(c,l):c}return o}function Xb(e,t,n,r){if(!n.startsWith("2."))throw new mv("Unsupported Keras version in weights being loaded: "+n);return t}function Jb(e,t,n){var r=function(e){if("float32"===e)return"float32";throw new mv("Invalid dtype: "+e)}(e);return Zg.esB.make(t,{values:0===t.length?n:Zg.D5U.flatten(n)},r)}var Qb=function(e){function t(n){var r=e.call(this,{})||this;if(r.containerNodes=new Set,r.name=n.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=cv(a)}if(r.supportsMasking=!1,r.trainable=!0,r.updatable=!0,Array.isArray(n.inputs)?r.inputs=n.inputs.slice():r.inputs=[n.inputs],Array.isArray(n.outputs)?r.outputs=n.outputs.slice():r.outputs=[n.outputs],Ov(r.inputs).length!==r.inputs.length)throw new mv("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+r.inputs.map((function(e){return e.name})));Ov(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+r.outputs.map((function(e){return e.name}))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[];for(var i=0,o=r.outputs;i<o.length;i++){var s=(S=o[i]).sourceLayer,u=S.nodeIndex,l=S.tensorIndex;r.outputLayers.push(s),r.outputLayersNodeIndices.push(u),r.outputLayersTensorIndices.push(l)}for(var c=0,f=r.inputs;c<f.length;c++)s=(S=f[c]).sourceLayer,u=S.nodeIndex,l=S.tensorIndex,bv(0===u,"input layer has >1 nodes"),bv(0===l,"input layer has >1 tensors"),r.inputLayers.push(s),r.inputLayersNodeIndices.push(u),r.inputLayersTensorIndices.push(l);r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var p=0;p<r.inputLayers.length;p++){if(!((s=r.inputLayers[p])instanceof ab))throw new TypeError("Input layers to a Model must be InputLayer objects. Received inputs: "+n.inputs+". Input "+p+" (0-based) originates from layer type "+s.getClassName()+".");r.inputNames.push(s.name),r.feedInputShapes.push(s.batchInputShape),r.feedInputNames.push(s.name)}for(var d=0,h=r.outputLayers;d<h.length;d++)s=h[d],r.outputNames.push(s.name);r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));for(var m={},g={},v={},y={},b={},w=[],x=function e(n,a,i,o,s,u){null!=o&&null!=s&&null!=u||(o=n.sourceLayer,s=n.nodeIndex,u=n.tensorIndex);var l=o.inboundNodes[s];if(-1!==i.indexOf(l))throw new hv("The tensor "+n.name+' at layer "'+o.name+'" is part of a cycle.');if(-1===a.indexOf(l)){r.containerNodes.add(t.nodeKey(o,s)),o.id in b||(b[o.id]=Object.keys(b).length),-1===i.indexOf(l)&&i.push(l);for(var c=l.inboundLayers.length,f=0;f<c;f++){e(l.inputTensors[f],a,i,l.inboundLayers[f],l.nodeIndices[f],l.tensorIndices[f])}for(a.push(l);i.indexOf(l)>=0;)i.splice(i.indexOf(l),1);w.push(l)}},_=[],N=[],k=0,E=r.outputs;k<E.length;k++){var S=E[k];x(S,_,N)}for(var C=0,I=w.slice().reverse();C<I.length;C++){g[(X=I[C]).id]=X,X.id in m||(m[X.id]=0);var O=m[X.id],P=null==v[X.outboundLayer.id]?0:v[X.outboundLayer.id];for(O=Math.max(O,P),v[X.outboundLayer.id]=O,y[X.outboundLayer.id]=X.outboundLayer,m[X.id]=O,p=0;p<X.inboundLayers.length;p++){var T=X.inboundLayers[p],A=(u=X.nodeIndices[p],T.inboundNodes[u]),R=null==m[A.id]?0:m[A.id];m[A.id]=Math.max(O+1,R),g[A.id]=A}}var D={};for(var M in m)(O=m[M])in D||(D[O]=[]),D[O].push(g[M]);var L={};for(var z in v)(O=v[z])in L||(L[O]=[]),L[O].push(y[z]);var j=Object.keys(L).map((function(e){return parseInt(e,10)})).sort(Iv);r.layers=[];for(var B=0,F=j;B<F.length;B++){var V=L[O=F[B]];V.sort((function(e,t){var n=b[e.id],r=b[t.id];return n<r?-1:n>r?1:0}));for(var U=0,W=V;U<W.length;U++)s=W[U],r.layers.push(s)}r.layersByDepth=L,j=Object.keys(D).map((function(e){return parseInt(e,10)})).sort(Iv);for(var q=r.inputs.slice(),$=[],H=0,K=j;H<K.length;H++)for(var G=0,Y=D[O=K[H]];G<Y.length;G++){var X;if(null!=(s=(X=Y[G]).outboundLayer)){for(var J=0,Q=X.inputTensors;J<Q.length;J++)if(S=Q[J],-1===q.indexOf(S))throw new hv("Graph disconnected: cannot obtain value for tensor "+S+' at layer "'+s.name+'". The following previous layers were accessed without issue: '+$);for(var Z=0,ee=X.outputTensors;Z<ee.length;Z++)S=ee[Z],q.push(S);$.push(s.name)}}r.nodesByDepth=D;for(var te=r.layers.map((function(e){return e.name})),ne=function(e){var t=te.filter((function(t){return t===e})).length;if(1!==t)throw new hv('The name "'+e+'" is used '+t+" times in the model. All layer names should be unique. Layer names: "+JSON.stringify(te))},re=0,ae=te;re<ae.length;re++)ne(ae[re]);return r.outboundNodes=[],r.inboundNodes=[],new eb({outboundLayer:r,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return tv(t,e),t.prototype.assertNotDisposed=function(){if(0===this._refCount)throw new Error("Container '"+this.name+"' is already disposed.")},t.prototype.dispose=function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount)for(var t=0,n=this.layers;t<n.length;t++){var r=n[t];e.numDisposedVariables+=r.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){if(this._trainableWeights.length>0)throw new mv("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];for(var e=[],t=0,n=this.layers;t<n.length;t++){var r=n[t];e=e.concat(r.trainableWeights)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){for(var e=[],t=0,n=this.layers;t<n.length;t++){var r=n[t];e.push.apply(e,r.nonTrainableWeights)}if(!this.trainable){for(var a=[],i=0,o=this.layers;i<o.length;i++)r=o[i],a.push.apply(a,r.trainableWeights);return a.concat(e)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),t.prototype.loadWeights=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=!0),n?function(e,t,n){void 0===n&&(n=!0);for(var r={},a=0,i=0,o=t;i<o.length;i++)for(var s=0,u=o[i].weights;s<u.length;s++){var l=u[s];if(null!=r[l.originalName])throw new mv("Duplicate weight name: "+l.originalName);r[l.originalName]=l,a++}var c=[];for(var f in e){if(null!=r[f])c.push([r[f],e[f]]);else if(n)throw new mv("Provided weight data has no target variable: "+f);delete r[f]}if(n){var p=[];for(var d in r)p.push(d);if(p.length>0)throw new mv(p.length+" of "+a+" weights are not set: "+p)}Xy(c)}(e,this.layers,r):function(e,t,n){void 0===n&&(n=!1);for(var r=e.keras_version,a=(e.backend,t.map((function(e){return e.name}))),i={},o=0,s=t;o<s.length;o++)null!=(y=s[o]).name&&(null==i[y.name]&&(i[y.name]=[]),i[y.name].push(y));for(var u=e.weights,l=[],c=0;c<a.length;++c){var f=a[c],p=u[f];null==p&&(p=[]);for(var d=[],h=0;h<p.length;++h){var m=p[h];d.push(new Gy(Jb(m.dtype,m.shape,m.value)))}for(var g=0,v=i[f];g<v.length;g++){var y,b=(y=v[g]).weights;if((d=Xb(0,d,r)).length!==b.length){if(!n)throw new mv("Layer #"+c+' (named "'+y.name+'") expects '+b.length+" weight(s), but the saved weights have "+d.length+" element(s).");console.warn("Skipping loading of weights of layer "+y.name+" due to mismatch in number of weights: ("+d.length+" vs "+b.length+").")}for(var w=0;w<d.length;++w)!n||Zg.D5U.arraysEqual(b[w].shape,d[w].shape)?l.push([b[w],d[w].read()]):console.warn("Skipping loading of weights for layer "+y.name+" due to mismatch in shape ("+b[w].shape+" vs "+d[w].shape+")")}}Xy(l)}(e,this.layers,t)},t.prototype.updatedConfig=function(){var e=this.getConfig();return{className:this.getClassName(),config:e,kerasVersion:"tfjs-layers 0.7.5",backend:"TensorFlow.js"}},t.prototype.toJSON=function(e,t){void 0===t&&(t=!0);var n=Yb(this.updatedConfig());return t?JSON.stringify(n):n},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){var r;return e=_v(e),r="mask"in t?_v(t.mask):yv(null,e.length),n.runInternalGraph(e,r)[0]}))},t.prototype.computeMask=function(e,t){var n=this;return(0,Zg.lub)((function(){var r;return e=_v(e),r=null==t?yv(null,e.length):_v(t),n.runInternalGraph(e,r)[1]}))},t.prototype.computeOutputShape=function(e){var t=Wy(e);if(t.length!==this.inputLayers.length)throw new mv("Invalid inputShape argument "+e+": model has "+this.inputLayers.length+" tensor inputs.");for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],i=t[r];n[N=a.name+"_0_0"]=i}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(Iv);if(o.length>1)for(var s=0,u=o;s<u.length;s++)for(var l=u[s],c=0,f=this.nodesByDepth[l];c<f.length;c++){var p=f[c];if(a=p.outboundLayer,-1===this.inputLayers.map((function(e){return e.id})).indexOf(a.id)){for(var d=[],h=0;h<p.inboundLayers.length;h++){var m=p.inboundLayers[h],g=p.nodeIndices[h],v=p.tensorIndices[h],y=n[N=m.name+"_"+g+"_"+v];d.push(y)}var b=Wy(a.computeOutputShape(xv(d))),w=a.inboundNodes.indexOf(p);for(h=0;h<b.length;h++)n[N=a.name+"_"+w+"_"+h]=b[h]}}var x=[],_=[];for(r=0;r<this.outputLayers.length;r++){a=this.outputLayers[r],w=this.outputLayersNodeIndices[r],v=this.outputLayersTensorIndices[r];var N=a.name+"_"+w+"_"+v;_.push(N)}for(r=0;r<_.length;r++){var k=_[r];bv(k in n),x.push(n[k])}return xv(x)},t.prototype.runInternalGraph=function(e,t){null==t&&(t=yv(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],i=e[r],o=t[r];n[a.id]=[i,o]}for(var s=0,u=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(Iv);s<u.length;s++)for(var l=u[s],c=0,f=this.nodesByDepth[l];c<f.length;c++){for(var p=f[c],d=p.outboundLayer,h=p.inputTensors,m=p.outputTensors,g=new Array,v=0,y=h;v<y.length;v++)(a=y[v]).id in n&&g.push(n[a.id]);if(g.length===h.length){var b={},w=void 0,x=void 0,_=void 0,N=void 0;if(null!=p.callArgs&&(b=p.callArgs),1===g.length){var k=g[0],E=k[0],S=k[1];null==b.mask&&(b.mask=S),_=_v(d.call(E,b)),N=_v(d.computeMask(E,S)),w=[E],x=[S]}else w=g.map((function(e){return e[0]})),x=g.map((function(e){return e[1]})),null==b.mask&&(b.mask=x),_=_v(d.call(w,b)),N=_v(d.computeMask(w,x));if(d.activityRegularizer)throw new gv("Model invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(r=0;r<m.length;++r)a=m[r],i=_[r],o=N[r],n[a.id]=[i,o]}}for(var C=[],I=[],O=[],P=0,T=this.outputs;P<T.length;P++){bv((a=T[P]).id in n,"Could not compute output "+a.name+" : "+a.id);var A=n[a.id],R=A[0];o=A[1],O.push(R.shape),C.push(R),I.push(o)}return[C,I,O]},t.prototype.buildNodeConversionMap=function(e){for(var n,r={},a=0,i=this.layers;a<i.length;a++){var o=i[a];n=o instanceof t?1:0;for(var s=0;s<o.inboundNodes.length;s++){var u=t.nodeKey(o,s);u in this.containerNodes&&(r[u]=n,n+=1)}}return r},t.prototype.getLayer=function(e,t){if(null!=t){if(this.layers.length<=t)throw new mv("Was asked to retrieve layer at index "+t+", but model only has "+this.layers.length+" layer(s).");return this.layers[t]}if(null==e)throw new mv("Provide either a layer name or layer index");for(var n=0,r=this.layers;n<r.length;n++){var a=r[n];if(a.name===e)return a}throw new mv("No such layer: "+e)},t.prototype.calculateLosses=function(){var e=this;return(0,Zg.lub)((function(){for(var n=[],r=0,a=e.layers;r<a.length;r++)for(var i=a[r],o=0;o<i.inboundNodes.length;++o){var s=t.nodeKey(i,o);e.containerNodes.has(s)&&n.push.apply(n,i.calculateLosses())}return n}))},t.prototype.getConfig=function(){for(var e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[],a=0,i=this.layers;a<i.length;a++){for(var o=(b=i[a]).getClassName(),s=b.getConfig(),u=[],l=0;l<b.inboundNodes.length;l++){var c=b.inboundNodes[l],f=t.nodeKey(b,l),p={};if(this.containerNodes.has(f)){if(c.callArgs)try{JSON.stringify(c.callArgs),p=c.callArgs}catch(e){console.warn("Layer "+b.name+" was passed non-serializable keyword arguments: "+c.callArgs+". They will not be included in the serialized model (and thus will be missing at deserialization time)."),p={}}if(c.inboundLayers.length>0){for(var d=[],h=0;h<c.inboundLayers.length;h++){var m=c.inboundLayers[h],g=c.nodeIndices[h],v=c.tensorIndices[h];null!==(x=n[t.nodeKey(m,g)])&&void 0!==x||(x=0),d.push([m.name,x,v,p])}u.push(d)}}}r.push({name:b.name,className:o,config:s,inboundNodes:u})}e.layers=r;var y=[];for(h=0;h<this.inputLayers.length;h++){var b=this.inputLayers[h];g=this.inputLayersNodeIndices[h],f=t.nodeKey(b,g),this.containerNodes.has(f)&&(null!==(x=n[f])&&void 0!==x||(x=0),v=this.inputLayersTensorIndices[h],y.push([b.name,x,v]))}e.inputLayers=y;var w=[];for(h=0;h<this.outputLayers.length;h++){var x;if(b=this.outputLayers[h],g=this.outputLayersNodeIndices[h],f=t.nodeKey(b,g),this.containerNodes.has(f))null!==(x=n[f])&&void 0!==x||(x=0),v=this.outputLayersTensorIndices[h],w.push([b.name,x,v])}return e.outputLayers=w,e},t.fromConfig=function(e,t){var n={},r={};function a(e,t){e.name in r?r[e.name].push(t):r[e.name]=[t]}function i(e,t){for(var r,i=[],o=0,s=t;o<s.length;o++){var u=s[o],l=u[0],c=u[1],f=u[2];if(3===u.length)r={};else{if(4!==u.length)throw new mv("Improperly formatted model config for layer "+JSON.stringify(e)+": "+JSON.stringify(u));r=u[3]}if(!(l in n))return void a(e,t);var p=n[l];if(p.inboundNodes.length<=c)return void a(e,t);var d=p.inboundNodes[c];i.push(d.outputTensors[f])}i.length>0&&e.apply(xv(i),r)}function o(e){var r=e.name,i=Hb(e,null!=t.customObjects?t.customObjects:{});n[r]=i;for(var o=0,s=e.inboundNodes;o<s.length;o++){var u=s[o];if(!(u instanceof Array))throw new mv("Corrupted configuration, expected array for nodeData: "+u);a(i,u)}}for(var s=t.name,u=t.layers,l=0,c=u;l<c.length;l++)o(d=c[l]);for(;!Pv(r);)for(var f=0,p=u;f<p.length;f++){var d=p[f];if((S=n[d.name]).name in r){for(var h=0,m=r[S.name];h<m.length;h++)i(S,m[h]);delete r[S.name]}}for(var g=[],v=[],y=0,b=t.inputLayers;y<b.length;y++){var w=(d=b[y])[0],x=d[1],_=d[2];bv(w in n);var N=(S=n[w]).inboundNodes[x].outputTensors;g.push(N[_])}for(var k=0,E=t.outputLayers;k<E.length;k++){var S;w=(d=E[k])[0],x=d[1],_=d[2],bv(w in n),N=(S=n[w]).inboundNodes[x].outputTensors,v.push(N[_])}return new e({inputs:g,outputs:v,name:s})},Object.defineProperty(t.prototype,"stateful",{get:function(){if(this._stateful)throw new mv("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(var e=0,t=this.layers;e<t.length;e++)if(t[e].stateful)return!0;return!1},enumerable:!0,configurable:!0}),t.prototype.resetStates=function(){var e=this;(0,Zg.lub)((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))},t}(nb);var Zb,ew=function(){function e(t){if(this.id2Value={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n];else{if(null==t)return;for(var r=0,a=t;r<a.length;r++){var i=a[r];this.add(i.key,i.value)}}}return e.prototype.add=function(e,t){if(null!=this.id2Value[e.id])throw new mv("Duplicate key: name="+e.name+", id="+e.id);return this.id2Value[e.id]=function(e,t){if(null!=e.shape){if(e.shape.length!==t.shape.length)throw new mv("The rank of feed ("+t.shape.length+") does not match the rank of the key ("+e.shape.length+").");for(var n=0;n<e.shape.length;++n)if(null!=e.shape[n]&&e.shape[n]!==t.shape[n])throw new mv("The "+n+"-th dimension of the feed ("+t.shape[n]+") is incompatible with that of the key ("+e.shape[n]+").")}if(null==e.dtype||e.dtype===t.dtype)return t;try{return(0,Zg.pju)(t,e.dtype)}catch(n){throw new mv("The dtype of the feed ("+t.dtype+") can not be cast to the dtype of the key '"+e.name+"' ("+e.dtype+").")}}(e,t),this},e.prototype.addFeed=function(e){this.add(e.key,e.value)},e.prototype.hasKey=function(e){return null!=this.id2Value[e.id]},e.prototype.getValue=function(e){if(null==this.id2Value[e.id])throw new mv("Nonexistent key: "+JSON.stringify(e));return this.id2Value[e.id]},e}();function tw(e,t,n){for(var r=Array.isArray(e),a=r?e:[e],i=[],o=new ew(t),s=0,u=a;s<u.length;s++){var l=u[s];i.push(nw(l,o,n))}return r?i:i[0]}function nw(e,t,n){if(t.hasKey(e))return t.getValue(e);if(e.sourceLayer instanceof ab)throw new mv("Missing a feed value for SymbolicTensor from InputLayer '"+ab.name+"'");for(var r=[],a=0,i=e.inputs;a<i.length;a++){var o=nw(i[a],t,n);r.push(o)}var s=e.sourceLayer.apply(r,n);Array.isArray(s)||(s=[s]);for(var u=function(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r)for(var a=0,i=e.sourceLayer.inboundNodes[r].outputTensors;a<i.length;a++)if(i[a].id===e.id){n=r;break}t=e.sourceLayer.getOutputAt(n)}return t}(e),l=Array.isArray(u)?u:[u],c=0;c<l.length;++c)t.add(l[c],s[c]);return 1===s.length?s[0]:s[e.outputTensorIndex]}function rw(e){return Array.isArray(e)}function aw(e){return!function(e){return e instanceof Zg.esB}(e)&&!rw(e)}function iw(e,t,n,r,a){if(void 0===r&&(r=!0),void 0===a&&(a=""),null==t||0===t.length){if(null!=e){var i=!1;if(rw(e)&&e.length>0)i=!0;else if(aw(e)){for(var o in e)if(e.hasOwnProperty(o)){i=!0;break}}else i=!0;if(i)throw new mv("Error when checking model "+a+" expected no data, but got "+e)}return[]}if(null==e)return t.map((function(e){return null}));var s;if(aw(e)){s=[];for(var u=0,l=t;u<l.length;u++){var c=l[u];if(null==e[c])throw new mv('No data provided for "'+c+'". Need data for each key in: '+t);s.push(e[c])}}else if(rw(e)){if(e.length!==t.length)throw new mv("Error when checking model "+a+": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see "+t.length+" Tensor(s), but instead got the following list of Tensor(s): "+e);s=e}else{if(t.length>1)throw new mv("The model "+a+" expects "+t.length+" Tensor(s), but only received one Tensor. Found: Tensor with shape "+e.shape);s=[e]}for(var f=0;f<t.length;++f)1===(p=s[f]).shape.length&&(s[f]=uy(p,1));if(null!=n)for(f=0;f<t.length;++f)if(null!=n[f]){var p;if((p=s[f]).shape.length!==n[f].length)throw new mv("Error when checking "+a+": expected "+t[f]+" to have "+n[f].length+" dimension(s). but got array with shape "+p.shape);for(var d=0;d<n[f].length;++d)if(0!==d||r){var h=p.shape[d],m=n[f][d];if(null!=m&&m>=0&&h!==m)throw new mv("Error when checking "+a+": expected "+t[f]+" to have shape ["+n[f]+"], but got array with shape ["+p.shape+"].")}}return s}function ow(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function sw(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return ly(e,t,n-t)})):ly(e,t,n-t)}function uw(e,t){return(0,Zg.lub)((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return uw(e,t)})):vy(e,"int32"===t.dtype?t:t.toInt())}))}function lw(e,t,n,r,a){var i;if(void 0===r&&(r=!0),void 0===a&&(a=""),Array.isArray(e)){if(e.length!==t.length)throw new mv("Error when checking model "+a+": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see "+t.length+" Tensor(s), but instead got "+e.length+" Tensors(s).");i=e}else{if(t.length>1)throw new mv("The model expects "+t.length+" "+a+" Tensors, but only received one Tensor. Found: array with shape "+JSON.stringify(e.shape)+".");i=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var s=i[o];if(s.shape.length!==n[o].length)throw new mv("Error when checking "+a+": expected "+t[o]+" to have "+n[o].length+" dimension(s), but got array with shape "+JSON.stringify(s.shape));for(var u=0;u<n[o].length;++u)if(0!==u||r){var l=s.shape[u],c=n[o][u];if(null!=c&&c!==l)throw new mv("Error when checking "+a+": expected "+t[o]+" to have shape "+JSON.stringify(n[o])+" but got array with shape "+JSON.stringify(s.shape)+".")}}}function cw(e){Zg.D5U.assert(e>0&&Number.isInteger(e),"batchSize is required to be a positive integer, but got "+e)}!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(Zb||(Zb={}));var fw=function(e){function t(t){var n=e.call(this,t)||this;return n.isTraining=!1,n}return tv(t,e),t.prototype.summary=function(e,t,n){if(void 0===n&&(n=console.log),!this.built)throw new mv("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Ub(this,e,t,n)},t.prototype.compile=function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer=function(e){var t={Adagrad:function(){return Zg.p_j.adagrad(.01)},Adadelta:function(){return Zg.p_j.adadelta(1,.95,ov())},Adam:function(){return Zg.p_j.adam(.001,.9,.999,ov())},Adamax:function(){return Zg.p_j.adamax(.002,.9,.999,ov(),0)},RMSProp:function(){return Zg.p_j.rmsprop(.001,.9,0,ov())},SGD:function(){return Zg.p_j.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new mv("Unknown Optimizer "+e)}(e.optimizer);else{if(!(e.optimizer instanceof Zg.gaJ))throw new mv("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer=e.optimizer}var n=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new mv("When passing an Array as loss, it should have one entry per model output. The model has "+this.outputs.length+" output(s), but you passed loss="+e.loss+".");var r=e.loss;n=r.map((function(e){return Ib(e)}))}else{var a=Ib(e.loss);this.outputs.map((function(e){n.push(a)}))}else{for(var i in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(i))throw new mv('Unknown entry in loss dictionary: "'+i+'". Only expect the following keys: '+this.outputNames);for(var o in this.outputNames)null==e.loss[o]&&console.warn('Output "'+o+'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to '+o+" during training"),n.push(Ib(e.loss[o]))}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var s=0;s<this.outputs.length;++s){var u=this.internalOutputShapes[s],l=this.outputNames[s];this.feedOutputNames.push(l),this.feedOutputShapes.push(u),this.feedLossFns.push(this.lossFunctions[s])}var c=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Xv("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===c.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var f=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));if(Array.isArray(e))return t.map((function(t){return e}));if(null!=e){for(var n=[],r=0,a=t;r<a.length;r++){var i=a[r],o=e.hasOwnProperty(i)?e[i]:[];Array.isArray(o)||(o=[o]),n.push(o)}return n}throw new TypeError("Type of metrics argument not understood. Expected an Array or Object, found: "+e)}(e.metrics,this.outputNames);Xv("metric",(function(){for(var e=function(e){if(-1!==c.indexOf(e))return"continue";!function(n){for(var r,a,i,o=function(n){if(-1!==["accuracy","acc","crossentropy","ce"].indexOf(n)){var o=t.internalOutputShapes[e];1===o[o.length-1]||t.lossFunctions[e]===kb?-1!==["accuracy","acc"].indexOf(n)?a=Ob:-1!==["crossentropy","ce"].indexOf(n)&&(a=Tb):t.lossFunctions[e]===Nb?-1!==["accuracy","acc"].indexOf(n)?a=Ab:-1!==["crossentropy","ce"].indexOf(n)&&(a=Vb):-1!==["accuracy","acc"].indexOf(n)?a=Pb:-1!==["crossentropy","ce"].indexOf(n)&&(a=Bb);var s=void 0;-1!==["accuracy","acc"].indexOf(n)?s="acc":-1!==["crossentropy","ce"].indexOf(n)&&(s="ce"),i=a,r=""+s}else{var u=function(e){var t={binaryAccuracy:Ob,categoricalAccuracy:Pb,categoricalCrossentropy:Bb,sparseCategoricalCrossentropy:Vb,mse:Rb,MSE:Db,mae:Mb,MAE:Lb,mape:zb,MAPE:jb,cosine:Fb};if("string"==typeof e&&e in t)return t[e];if("string"!=typeof e&&null!=e)return e;throw new mv("Unknown metric "+e)}(n);i=u,r=""+n}var l;Xv(r,(function(){l=i})),function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])}(e,r,l)},s=0,u=n;s<u.length;s++)o(u[s])}(f[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights},t.prototype.checkTrainableWeightsConsistency=function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")},t.prototype.evaluate=function(e,t,n){void 0===n&&(n={});var r=null==n.batchSize?32:n.batchSize;cw(r);var a=this.standardizeUserData(e,t,!0,r),i=a[0].concat(a[1]);this.makeTestFunction();var o=this.testFunction;return xv(this.testLoop(o,i,r,n.verbose,n.steps))},t.prototype.checkNumSamples=function(e,t,n,r){var a;if(void 0===r&&(r="steps"),null!=n){if(a=null,null!=t)throw new mv("If "+r+" is set, batchSize must be null or undefined.Got batchSize = "+t)}else{if(null==e)throw new mv("Either the input data should have a defined shape, or "+r+" shoud be specified.");a=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return a},t.prototype.execute=function(e,t){if(Array.isArray(t)&&0===t.length)throw new mv("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new ew;if(e instanceof Zg.esB&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new mv("The number of inputs provided ("+e.length+") does not match the number of inputs of this model ("+this.inputs.length+").");for(var o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else for(var s=0,u=this.inputs;s<u.length;s++){var l=u[s],c=e[l.name];if(null==c)throw new mv("No value is provided for the model's input "+l.name);i.add(l,c)}var f=tw(a,i);return n?f:f[0]},t.prototype.retrieveSymbolicTensors=function(e){for(var t=yv(null,e.length),n=e.length,r=0,a=this.layers;r<a.length;r++){for(var i=a[r],o=Array.isArray(i.output)?i.output:[i.output],s=o.map((function(e){return e.name})),u=0;u<e.length;++u){var l=s.indexOf(e[u]);if(-1!==l&&(t[u]=o[l],n--),0===n)break}if(0===n)break}if(n>0){var c=[];throw t.forEach((function(t,n){null==t&&c.push(e[n])})),new mv("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(c))}return t},t.prototype.predictLoop=function(e,t,n){var r=this;return void 0===t&&(t=32),void 0===n&&(n=!1),(0,Zg.lub)((function(){var a=r.checkNumSamples(e);if(n)throw new gv("Verbose predictLoop() is not implemented yet.");for(var i=ow(a,t),o=[],s=function(t){var n=(0,Zg.lub)((function(){var n=i[t][0],a=i[t][1],o=sw(e,n,a),s=[];if(Array.isArray(o))for(var u=0;u<o.length;++u)s.push({key:r.inputs[u],value:o[u]});else s.push({key:r.inputs[0],value:o});var l=new ew(s);return tw(r.outputs,l)}));if(0===t)for(var a=0,s=n;a<s.length;a++){var u=s[a];o.push(u)}else for(var l=0;l<n.length;++l)o[l]=dy(o[l],n[l])},u=0;u<i.length;++u)s(u);return xv(o)}))},t.prototype.predict=function(e,t){void 0===t&&(t={}),lw(e,this.inputNames,this.feedInputShapes,!1);var n=null==t.batchSize?32:t.batchSize;return cw(n),this.predictLoop(e,n)},t.prototype.predictOnBatch=function(e){return lw(e,this.inputNames,this.feedInputShapes,!0),this.predictLoop(e,e.shape[0])},t.prototype.standardizeUserData=function(e,t,n,r){if(void 0===n&&(n=!0),null==this.optimizer)throw new hv("You must compile a model before training/testing. Use Model.compile(modelCompileConfig).");for(var a=[],i=0;i<this.feedOutputShapes.length;++i){var o=this.feedOutputShapes[i];this.feedLossFns[i]===Nb?a.push(o.slice(0,o.length-1).concat([1])):a.push(o)}if(function(e,t,n){var r=Ov(e.map((function(e){return e.shape[0]})));r.sort();var a=Ov(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new mv("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(e.map((function(e){return e.shape}))));if(a.length>1)throw new mv("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(t.map((function(e){return e.shape}))));if(r.length>0&&a.length>0&&!Zg.D5U.arraysEqual(r,a))throw new mv("Input Tensors should have the same number of samples as target Tensors. Found "+r[0]+" input sample(s) and "+a[0]+" target sample(s).")}(e=iw(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=iw(t,this.feedOutputNames,a,!1,"target")),function(e,t,n){for(var r=[hb,kb,_b],a=0;a<e.length;++a){var i=e[a],o=t[a],s=n[a];if(null!=o){if(o===_b&&1===i.shape[i.shape.length-1])throw new mv("You are passing a target array of shape "+i.shape+" while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var u=i.shape.slice(1),l=s.slice(1),c=0;c<u.length;++c){var f=u[c],p=l[c];if(null!=p&&f!==p)throw new mv("A target Tensor with shape "+i.shape+" was passed for an output of shape "+s+", while using a loss function that expects targets to have the same shape as the output.")}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&e[0].shape[0]%r!=0)throw new mv("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+r+". Found: "+e[0].shape[0]+" sample(s).");return[e,t,null]},t.prototype.fitLoop=function(e,t,n,r,a,i,o,s,u,l,c,f,p,d,h){return rv(this,void 0,void 0,(function(){var m,g,v,y,b,w,x,_,N=this;return av(this,(function(k){switch(k.label){case 0:if(null==r&&(r=32),null==a&&(a=1),null==l&&(l=!0),null==f&&(f=0),m=!1,null!=s&&null!=u&&(m=!0),null!=d&&(m=!0,null==p))throw new mv("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");if(null!=(g=this.checkNumSamples(t,r,p,"steps_per_epoch"))&&(v=oy(0,g)),this.history=new fb,y=new cb(h),o=(o=null==o?[y]:[y].concat(o)).concat([this.history]),i>0)throw new gv("Verbose mode is not implemented yet.");return(b=new ub(o)).setModel(this),b.setParams({epochs:a,initialEpoch:f,samples:g,steps:p,batchSize:r,verbose:i,doValidation:m,metrics:c}),[4,b.onTrainBegin()];case 1:k.sent(),this.stopTraining_=!1,w=function(a){var i,o,c,f,d;return av(this,(function(h){switch(h.label){case 0:return[4,b.onEpochBegin(a)];case 1:if(h.sent(),i={},null==p)return[3,2];throw new gv("stepsPerEpoch mode is not implemented yet.");case 2:if("batch"===l)throw new gv("batch shuffling is not implemneted yet");l&&Zg.D5U.shuffle(v),o=(0,Zg.RRF)(v),c=ow(g,r),f=function(a){var l;return av(this,(function(f){switch(f.label){case 0:return l={},[4,b.onBatchBegin(a,l)];case 1:return f.sent(),(0,Zg.lub)((function(){var f=c[a][0],p=c[a][1],d=ly(o,f,p-f);l.batch=a,l.size=p-f;for(var h=uw(t,d),g=e(h),v=0;v<n.length;++v){var y=n[v],b=g[v];l[y]=b,(0,Zg.CnY)(b)}if(a===c.length-1&&m){var w=N.testLoop(s,u,r);for(v=0;v<n.length;++v)y=n[v],b=w[v],(0,Zg.CnY)(b),i["val_"+y]=b}})),[4,b.onBatchEnd(a,l)];case 2:return f.sent(),function(e){if(null!=e)for(var t in e){var n=e[t];"number"!=typeof n&&n.dispose()}}(l),x.stopTraining_?[2,"break"]:[2]}}))},d=0,h.label=3;case 3:return d<c.length?[5,f(d)]:[3,6];case 4:if("break"===h.sent())return[3,6];h.label=5;case 5:return++d,[3,3];case 6:o.dispose(),h.label=7;case 7:return[4,b.onEpochEnd(a,i)];case 8:return h.sent(),x.stopTraining_?[2,"break"]:[2]}}))},x=this,_=f,k.label=2;case 2:return _<a?[5,w(_)]:[3,5];case 3:if("break"===k.sent())return[3,5];k.label=4;case 4:return++_,[3,2];case 5:return[4,b.onTrainEnd()];case 6:return k.sent(),[4,this.history.syncData()];case 7:return k.sent(),[2,this.history]}}))}))},t.prototype.testLoop=function(e,t,n,r,a){var i=this;return void 0===r&&(r=0),(0,Zg.lub)((function(){var o=i.checkNumSamples(t,n,a,"steps"),s=[];if(1===r)throw new gv("Verbose mode is not implemented yet.");if(null!=a)throw new gv("steps mode in testLoop() is not implemented yet");for(var u=ow(o,n),l=(0,Zg.RRF)(oy(0,o)),c=0;c<u.length;++c){var f=u[c][0],p=u[c][1],d=ly(l,f,p-f),h=uw(t,d),m=e(h);if(0===c)for(var g=0;g<m.length;++g)s.push(pv(0));for(g=0;g<m.length;++g){var v=m[g];s[g]=(0,Zg.IHx)(s[g],(0,Zg.dC7)(pv(p-f),v))}}for(g=0;g<s.length;++g)s[g]=(0,Zg.hiC)(s[g],pv(o));return s}))},t.prototype.getDedupedMetricsNames=function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;wv(e,r)>1&&(a+="_"+wv(e.slice(0,n),r)),t.push(a)}return t},t.prototype.makeTestFunction=function(){var e=this;this.testFunction=function(t){return(0,Zg.lub)((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],s=0;s<e.inputs.length;++s)o.push({key:e.inputs[s],value:a[s]});var u=new ew(o),l=tw(e.outputs,u);for(s=0;s<e.lossFunctions.length;++s){var c=e.lossFunctions[s],f=(0,Zg.J69)(c(i[s],l[s]));n=0===s?f:(0,Zg.IHx)(n,f),r.push(n)}for(s=0;s<e.metricsTensors.length;++s){var p=e.metricsTensors[s][0],d=e.metricsTensors[s][1],h=(0,Zg.J69)(p(i[d],l[d]));r.push(h)}return r}))}},t.prototype.fit=function(e,t,n){return void 0===n&&(n={}),rv(this,void 0,void 0,(function(){var r,a,i,o,s,u,l,c,f,p,d,h,m,g,v,y,b,w,x,_=this;return av(this,(function(N){switch(N.label){case 0:if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0,N.label=1;case 1:if(N.trys.push([1,,3,4]),cw(r=null==n.batchSize?32:n.batchSize),a=this.standardizeUserData(e,t,!1,r),i=a[0],o=a[1],s=!1,u=void 0,l=void 0,c=void 0,f=!1,null!=n.validationData&&n.validationData.length>0){if(s=!0,2!==n.validationData.length)throw 3===n.validationData.length?new gv("validationData including sample weights is not supported yet."):new mv("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+n.validationData+" is invalid.");u=n.validationData[0],l=n.validationData[1],p=this.standardizeUserData(u,l,!0,r),u=p[0],l=p[1],c=u.concat(l)}else null!=n.validationSplit&&n.validationSplit>0&&n.validationSplit<1?(s=!0,d=Math.floor(i[0].shape[0]*(1-n.validationSplit)),h=i[0].shape[0],u=sw(i,d,h),i=sw(i,0,d),l=sw(o,d,h),o=sw(o,0,d),f=!0,c=u.concat(l)):null!=n.validationSteps&&(s=!0);return m=i.concat(o),this.checkTrainableWeightsConsistency(),g=function(e){var t=e.slice(0,_.inputs.length),n=e.slice(_.inputs.length,_.inputs.length+_.outputs.length),r=[],a=_.collectedTrainableWeights.map((function(e){return e.read()}));return[_.optimizer.minimize((function(){for(var e=[],a=0;a<_.inputs.length;++a)e.push({key:_.inputs[a],value:t[a]});var i,o=new ew(e),s=tw(_.outputs,o,{training:!0});for(a=0;a<_.lossFunctions.length;++a){var u=(0,_.lossFunctions[a])(n[a],s[a]);(0,Zg.J69)(u),i=0===a?u:(0,Zg.IHx)(i,u)}for(a=0;a<_.metricsTensors.length;++a){var l=_.metricsTensors[a][0],c=_.metricsTensors[a][1],f=(0,Zg.J69)(l(n[c],s[c]));(0,Zg.CnY)(f),r.push(f)}return i=(0,Zg.J69)(i),_.calculateLosses().forEach((function(e){i=(0,Zg.IHx)(i,e)})),i}),!0,a)].concat(r)},v=this.getDedupedMetricsNames(),y=void 0,b=void 0,s?(this.makeTestFunction(),y=this.testFunction,b=v.slice().concat(v.map((function(e){return"val_"+e})))):(y=null,c=[],b=v.slice()),w=function(e){return null==e?null:e instanceof sb?[e]:Array.isArray(e)&&e[0]instanceof sb?e:_v(e).map((function(e){return new pb(e)}))}(n.callbacks),[4,this.fitLoop(g,m,v,r,n.epochs,n.verbose,w,y,c,n.shuffle,b,n.initialEpoch,null,null,n.yieldEvery)];case 2:return x=N.sent(),f&&(c.forEach((function(e){return e.dispose()})),i.forEach((function(e){return e.dispose()})),o.forEach((function(e){return e.dispose()}))),this.isTraining=!1,[2,x];case 3:return this.isTraining=!1,[7];case 4:return[2]}}))}))},t.prototype.getNamedWeights=function(e){for(var t={},n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||(t[r[i].originalName]=a[i]);return t},Object.defineProperty(t.prototype,"stopTraining",{set:function(e){this.stopTraining_=e},enumerable:!0,configurable:!0}),t.prototype.save=function(e,t){return rv(this,void 0,void 0,(function(){var n,r,a;return av(this,(function(i){switch(i.label){case 0:if("string"==typeof e){if(0===(n=Zg.io.getSaveHandlers(e)).length)throw new mv("Cannot find any save handlers for URL '"+e+"'");if(n.length>1)throw new mv("Found more than one ("+n.length+") save handlers for URL '"+e+"'");e=n[0]}if(null==e.save)throw new mv("Model.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[4,Zg.io.encodeWeights(this.getNamedWeights(t))];case 1:return r=i.sent(),!1,null,a=this.toJSON(null,false),[2,e.save({modelTopology:a,weightData:r.data,weightSpecs:r.specs})]}}))}))},t.className="Model",t}(Qb);function pw(e,t,n){return void 0===n&&(n=!0),rv(this,void 0,void 0,(function(){var r,a,i;return av(this,(function(o){switch(o.label){case 0:if(null==e.load)throw new mv("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,e.load()];case 1:if(r=o.sent(),null!=(a=r.modelTopology).model_config&&(a=a.model_config),i=Hb(Gb(a),t),null!=r.weightData){if(null==r.weightSpecs)throw new mv("Model artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");!1,!0,i.loadWeights(Zg.io.decodeWeights(r.weightData,r.weightSpecs),false,true,n)}return[2,i]}}))}))}Zg.m7h.SerializationMap.register(fw);var dw=function(e){function t(t){var n=e.call(this,{inputs:[],outputs:[]})||this;if(t=t||{},n.trainable=!0,n._updatable=!0,n.built=!1,n.name=null!=t.name?t.name:cv("sequential_"),null!=t.layers)for(var r=0,a=t.layers;r<a.length;r++){var i=a[r];n.add(i)}return n}return tv(t,e),t.prototype.add=function(e){var n,r=e instanceof t||e instanceof fw;if(r){if(1!==(n=e).outputs.length)throw new mv("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new mv("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new mv("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=ib({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new mv("A layer added to a Sequential model must not already be connected somewhere else. Model received layer "+e.name+" which has "+e.inboundNodes.length+" pre-existing inbound connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new mv("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=rb(this.outputs[0])}this.inboundNodes=[],new eb({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:yv(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1},t.prototype.pop=function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}},t.prototype.call=function(e,t){return null==this.model&&this.build(),this.model.call(e,t)},t.prototype.build=function(e){if($y(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new fw({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.model.updatable=this.updatable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0},t.prototype.countParams=function(){return this.built||this.build(),e.prototype.countParams.call(this)},t.prototype.summary=function(t,n,r){void 0===r&&(r=console.log),this.built||this.build(),e.prototype.summary.call(this,t,n,r)},t.prototype.setWeights=function(e){null==this.model&&this.build(),this.model.setWeights(e)},Object.defineProperty(t.prototype,"updatable",{get:function(){return this._updatable},set:function(e){this.built&&(this.model.updatable=e),this._updatable=e},enumerable:!0,configurable:!0}),t.prototype.evaluate=function(e,t,n){if(void 0===n&&(n={}),!this.built)throw new hv("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)},t.prototype.predict=function(e,t){return void 0===t&&(t={}),null==this.model&&this.build(),this.model.predict(e,t)},t.prototype.predictOnBatch=function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)},t.prototype.compile=function(e){this.build(),this.model.compile(e),this.optimizer=this.model.optimizer,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames},t.prototype.fit=function(e,t,n){return void 0===n&&(n={}),rv(this,void 0,void 0,(function(){return av(this,(function(r){if(!this.built)throw new hv("The model needs to be compiled before being used.");return[2,this.model.fit(e,t,n)]}))}))},t.fromConfig=function(e,n){var r=new e({});if(!(r instanceof t))throw new mv("Sequential.fromConfig called on non-Sequential input: "+r);if(!(n instanceof Array))throw new mv("Sequential.fromConfig called without an array of configs");if(null==n[0].className||"Merge"===n[0].className)throw new mv("Legacy serialization format not supported yet.");for(var a=0,i=n;a<i.length;a++){var o=Hb(i[a]);r.add(o)}return r},Object.defineProperty(t.prototype,"stopTraining",{set:function(e){this.model.stopTraining=e},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){for(var e=[],t=0,n=this.layers;t<n.length;t++){var r=n[t];e.push({className:r.getClassName(),config:r.getConfig()})}return e},t.className="Sequential",t}(fw);function hw(e){return new fw(e)}function mw(e,t){return void 0===t&&(t=!0),function(e,t){return void 0===t&&(t=!0),rv(this,void 0,void 0,(function(){var n;return av(this,(function(r){if("string"==typeof e){if(0===(n=Zg.io.getLoadHandlers(e)).length)n.push(Zg.io.browserHTTPRequest(e));else if(n.length>1)throw new mv("Found more than one ("+n.length+") load handlers for URL '"+e+"'");e=n[0]}return[2,pw(e,void 0,t)]}))}))}(e,t)}Zg.m7h.SerializationMap.register(dw);var gw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.getConfig=function(){return{}},t}(Zg.m7h.Serializable),vw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.apply=function(e,t){return void 0===t&&(t=1),function(e,t){if(void 0===t&&(t=1),1!==t)throw new gv("Support for alpha values other than 1 ("+t+") is not implemented yet.");return(0,Zg.pyx)(e)}(e,t)},t.className="elu",t}(gw);Zg.m7h.SerializationMap.register(vw);var yw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.apply=function(e){return(0,Zg.U8D)(e)},t.className="selu",t}(gw);Zg.m7h.SerializationMap.register(yw);var bw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.apply=function(e){return(0,Zg.UYe)(e)},t.className="relu",t}(gw);Zg.m7h.SerializationMap.register(bw);var ww=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.apply=function(e){return(0,Zg.lub)((function(){return(0,Zg.LTh)(pv(6),(0,Zg.UYe)(e))}))},t.className="relu6",t}(gw);Zg.m7h.SerializationMap.register(ww);var xw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.apply=function(e){return e},t.className="linear",t}(gw);Zg.m7h.SerializationMap.register(xw);var _w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.apply=function(e){return(0,Zg.XD2)(e)},t.className="sigmoid",t}(gw);Zg.m7h.SerializationMap.register(_w);var Nw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.apply=function(e){return function(e){return(0,Zg.lub)((function(){var t=(0,Zg.IHx)(pv(.5),(0,Zg.dC7)(pv(.2),e));return(0,Zg.iUl)(t,0,1)}))}(e)},t.className="hardSigmoid",t}(gw);Zg.m7h.SerializationMap.register(Nw);var kw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.apply=function(e){return(0,Zg.Wvh)(e)},t.className="softplus",t}(gw);Zg.m7h.SerializationMap.register(kw);var Ew=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.apply=function(e){return function(e){return(0,Zg.lub)((function(){return(0,Zg.hiC)(e,(0,Zg.IHx)(pv(1),(0,Zg.WnP)(e)))}))}(e)},t.className="softsign",t}(gw);Zg.m7h.SerializationMap.register(Ew);var Sw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.apply=function(e){return(0,Zg.AEp)(e)},t.className="tanh",t}(gw);Zg.m7h.SerializationMap.register(Sw);var Cw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.apply=function(e,t){return void 0===t&&(t=-1),(0,Zg.XAC)(e,t)},t.className="softmax",t}(gw);function Iw(e){return e.getClassName()}function Ow(e,t){return void 0===t&&(t={}),Cv(e,Zg.m7h.SerializationMap.getMap().classNameMap,t,"activation")}function Pw(e){return null==e?Ow({className:"linear",config:{}}):"string"==typeof e?Ow({className:e,config:{}}):e instanceof gw?e:Ow(e)}Zg.m7h.SerializationMap.register(Cw);var Tw=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;return n.supportsMasking=!0,null!=t&&(n.maxValue=t.maxValue),n}return tv(t,e),t.prototype.call=function(e,t){e=qy(e);var n=(0,Zg.UYe)(e);return null!=this.maxValue&&(n=(0,Zg.iUl)(n,0,this.maxValue)),n},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t={maxValue:this.maxValue},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="ReLU",t}(nb);Zg.m7h.SerializationMap.register(Tw);var Aw=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;return n.DEFAULT_ALPHA=.3,null==t&&(t={}),n.alpha=null==t.alpha?n.DEFAULT_ALPHA:t.alpha,n}return tv(t,e),t.prototype.call=function(e,t){var n=qy(e);return(0,Zg.hi7)(n,this.alpha)},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t={alpha:this.alpha},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="LeakyReLU",t}(nb);Zg.m7h.SerializationMap.register(Aw);var Rw=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;if(n.DEFAULT_ALPHA=1,null==t&&(t={}),null!=t.alpha&&t.alpha!==n.DEFAULT_ALPHA)throw new gv("Non-default alpha value ("+t.alpha+") is not supported by the ELU layer yet.");return n.alpha=null==t.alpha?n.DEFAULT_ALPHA:t.alpha,n}return tv(t,e),t.prototype.call=function(e,t){var n=qy(e);return(0,Zg.pyx)(n)},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t={alpha:this.alpha},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="ELU",t}(nb);Zg.m7h.SerializationMap.register(Rw);var Dw=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;return n.DEFAULT_THETA=1,null==t&&(t={}),n.theta=null==t.theta?n.DEFAULT_THETA:t.theta,n.thetaTensor=pv(n.theta),n}return tv(t,e),t.prototype.call=function(e,t){var n=qy(e);return n.mul(sy(n.greater(this.thetaTensor),"float32"))},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t={theta:this.theta},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="ThresholdedReLU",t}(nb);Zg.m7h.SerializationMap.register(Dw);var Mw=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;return n.DEFAULT_AXIS=1,null==t&&(t={}),n.softmax=(new Cw).apply,n.axis=null==t.axis?n.DEFAULT_AXIS:t.axis,n}return tv(t,e),t.prototype.call=function(e,t){var n=qy(e);return this.softmax(n,this.axis)},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t={axis:this.axis},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Softmax",t}(nb);Zg.m7h.SerializationMap.register(Mw);var Lw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t}(Zg.m7h.Serializable),zw=function(e){function t(t){var n=e.call(this)||this,r=null==t||null==t.l1?.01:t.l1,a=null==t||null==t.l2?.01:t.l2;return n.hasL1=0!==r,n.hasL2=0!==a,n.l1=pv(r),n.l2=pv(a),n}return tv(t,e),t.prototype.apply=function(e){var t=this;return(0,Zg.lub)((function(){var n=(0,Zg.lls)([1]);return t.hasL1&&(n=(0,Zg.IHx)(n,(0,Zg.Smz)((0,Zg.dC7)(t.l1,(0,Zg.WnP)(e))))),t.hasL2&&(n=(0,Zg.IHx)(n,(0,Zg.Smz)((0,Zg.dC7)(t.l2,yy(e))))),n.asScalar()}))},t.prototype.getConfig=function(){return{l1:this.l1.dataSync()[0],l2:this.l2.dataSync()[0]}},t.fromConfig=function(e,t){return new e({l1:t.l1,l2:t.l2})},t.className="L1L2",t}(Lw);Zg.m7h.SerializationMap.register(zw);var jw={l1l2:"L1L2"};function Bw(e){return Sv(e)}function Fw(e,t){return void 0===t&&(t={}),Cv(e,Zg.m7h.SerializationMap.getMap().classNameMap,t,"regularizer")}function Vw(e){return null==e?null:"string"==typeof e?Fw({className:e in jw?jw[e]:e,config:{}}):e instanceof Lw?e:Fw(e)}function Uw(e,t,n){if("number"==typeof e)return yv(e,t);if(e.length!==t)throw new mv("The "+n+" argument must be a tuple of "+t+" integers. Received: "+e.length+" elements.");for(var r=0;r<t;++r){var a=e[r];if(!ty(a))throw new mv("The "+n+" argument must be a tuple of "+t+" integers. Received: "+JSON.stringify(e)+" including a non-integer number "+a)}return e}function Ww(e,t,n,r,a){return void 0===a&&(a=1),null==e?e:(i="same"===n?e:e-(t+(t-1)*(a-1))+1,Math.floor((i+r-1)/r));var i}function qw(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+iy([n-t,0]);else{if("same"!==r)throw new mv("Unsupport padding mode: "+r+".");e*=t}return e}function $w(e,t){return(0,Zg.lub)((function(){return $v(t),"channelsFirst"===t?(0,Zg.p4s)(e,[0,2,3,1]):e}))}var Hw=function(e){function t(n,r){var a=e.call(this,r)||this;if(a.bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",t.verifyConfig(r),a.rank=n,1!==a.rank&&2!==a.rank)throw new gv("Convolution layer for rank other than 1 or 2 ("+a.rank+") is not implemented yet.");if(a.kernelSize=Uw(r.kernelSize,n,"kernelSize"),a.strides=Uw(null==r.strides?1:r.strides,n,"strides"),a.padding=null==r.padding?"valid":r.padding,Kv(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,$v(a.dataFormat),a.activation=Pw(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=Vy(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=Uv(r.biasConstraint),a.biasRegularizer=Vw(r.biasRegularizer),a.activityRegularizer=Vw(r.activityRegularizer),a.dilationRate=Uw(null==r.dilationRate?1:r.dilationRate,n,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new mv("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(a.dilationRate));if(2===a.rank)if("number"==typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new mv("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(a.dilationRate));return a}return tv(t,e),t.verifyConfig=function(e){if(bv("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!Av(e.kernelSize,"number",1,2))throw new mv("BaseConv expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(e.kernelSize)+".")},t.prototype.getConfig=function(){var t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Iw(this.activation),useBias:this.useBias,biasInitializer:Fy(this.biasInitializer),biasRegularizer:Bw(this.biasRegularizer),activityRegularizer:Bw(this.activityRegularizer),biasConstraint:Fv(this.biasConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(nb),Kw=function(e){function t(n,r){var a=e.call(this,n,r)||this;return a.kernel=null,t.verifyConfig(r),a.filters=r.filters,a.kernelInitializer=Vy(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=Uv(r.kernelConstraint),a.kernelRegularizer=Vw(r.kernelRegularizer),a}return tv(t,e),t.prototype.build=function(e){e=$y(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new mv("The channel dimension of the input should be defined. Found "+e[t]);var n,r=e[t],a=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(n={},n[t]=r,n)}],this.built=!0},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){var t;e=qy(e);var r=null==n.bias?null:n.bias.read();if(1===n.rank)t=function(e,t,n,r,a,i,o){return void 0===r&&(r=1),void 0===a&&(a="valid"),void 0===o&&(o=1),(0,Zg.lub)((function(){if(null==i&&(i="channelsLast"),$v(i),3!==e.shape.length)throw new mv("The input of a conv1dWithBias operation should be 3, but is "+e.shape.length+" instead.");if(3!==t.shape.length)throw new mv("The kernel for a conv1dWithBias operation should be 3, but is "+t.shape.length+" instead");if(null!=n&&1!==n.shape.length)throw new mv("The bias for a conv1dWithBias operation should be 1, but is "+t.shape.length+" instead");if("channelsFirst"===i&&(e=(0,Zg.p4s)(e,[0,2,1])),"causal"===a)throw new gv("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=(0,Zg.PAt)(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(s=by(s,n)),s}))}(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=function(e,t,n,r,a,i,o){return void 0===r&&(r=[1,1]),void 0===a&&(a="valid"),(0,Zg.lub)((function(){if(null==i&&(i="channelsLast"),$v(i),3!==e.rank&&4!==e.rank)throw new mv("conv2dWithBias expects input to be of rank 3 or 4, but received "+e.rank+".");if(3!==t.rank&&4!==t.rank)throw new mv("conv2dWithBias expects kernel to be of rank 3 or 4, but received "+e.rank+".");var s=$w(e,i);if("causal"===a)throw new gv("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return s=(0,Zg.Tek)(s,t,r,"same"===a?"same":"valid","NHWC",o),null!=n&&(s=by(s,n)),"channelsFirst"===i&&(s=(0,Zg.p4s)(s,[0,3,1,2])),s}))}(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else if(3===n.rank)throw new gv("3D convolution is not implemented yet.");return null!=n.activation&&(t=n.activation.apply(t)),t}))},t.prototype.computeOutputShape=function(e){e=$y(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=Ww(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i},t.prototype.getConfig=function(){var t={filters:this.filters,kernelInitializer:Fy(this.kernelInitializer),kernelRegularizer:Bw(this.kernelRegularizer),kernelConstraint:Fv(this.kernelConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.verifyConfig=function(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new mv("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(e.filters))},t}(Hw),Gw=function(e){function t(n){var r=e.call(this,2,n)||this;return t.verifyConfig(n),r}return tv(t,e),t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.rank,t},t.verifyConfig=function(e){if("number"!=typeof e.kernelSize&&!Av(e.kernelSize,"number",1,2))throw new mv("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(e.kernelSize)+".")},t.className="Conv2D",t}(Kw);Zg.m7h.SerializationMap.register(Gw);var Yw=function(e){function t(t){var n=e.call(this,t)||this;if(n.inputSpec=[new Jy({ndim:4})],"same"!==n.padding&&"valid"!==n.padding)throw new mv("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+n.padding);return n}return tv(t,e),t.prototype.build=function(e){if(4!==(e=$y(e)).length)throw new mv("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new mv("The channel dimension of the inputs should be defined. Found `None`.");var n,r=e[t],a=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Jy({ndim:4,axes:(n={},n[t]=r,n)})],this.built=!0},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){var t=qy(e);if(4!==t.shape.length)throw new mv("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+t.shape.length);var r,a,i=t.shape,o=i[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=i[r],u=i[a],l=n.kernelSize[0],c=n.kernelSize[1],f=n.strides[0],p=n.strides[1],d=[o,qw(s,f,l,n.padding),qw(u,p,c,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=(0,Zg.p4s)(t,[0,2,3,1]));var h=(0,Zg.bc)(t,n.kernel.read(),d,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(h=(0,Zg.p4s)(h,[0,3,1,2])),null!=n.bias&&(h=by(h,n.bias.read(),n.dataFormat)),null!=n.activation&&(h=n.activation.apply(h)),h}))},t.prototype.computeOutputShape=function(e){var t,n,r,a=(e=$y(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=qw(a[n],s,i,this.padding),a[r]=qw(a[r],u,o,this.padding),a},t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.dilationRate,t},t.className="Conv2DTranspose",t}(Gw);Zg.m7h.SerializationMap.register(Yw);var Xw=function(e){function t(t,n){var r=e.call(this,t,n)||this;if(r.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",r.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",r.depthwiseKernel=null,r.pointwiseKernel=null,null==n.filters)throw new mv("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=n.kernelInitializer||null!=n.kernelRegularizer||null!=n.kernelConstraint)throw new mv("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=n.padding&&"same"!==n.padding&&"valid"!==n.padding)throw new mv("SeparableConv"+r.rank+"D supports only padding modes: 'same' and 'valid', but received "+JSON.stringify(n.padding));return r.depthMultiplier=null==n.depthMultiplier?1:n.depthMultiplier,r.depthwiseInitializer=Vy(n.depthwiseInitializer||r.DEFAULT_DEPTHWISE_INITIALIZER),r.depthwiseRegularizer=Vw(n.depthwiseRegularizer),r.depthwiseConstraint=Uv(n.depthwiseConstraint),r.pointwiseInitializer=Vy(n.depthwiseInitializer||r.DEFAULT_POINTWISE_INITIALIZER),r.pointwiseRegularizer=Vw(n.pointwiseRegularizer),r.pointwiseConstraint=Uv(n.pointwiseConstraint),r}return tv(t,e),t.prototype.build=function(e){if((e=$y(e)).length<this.rank+2)throw new mv("Inputs to SeparableConv"+this.rank+"D should have rank "+(this.rank+2)+", but received input shape: "+JSON.stringify(e));var t,n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n]||e[n]<0)throw new mv("The channel dimension of the inputs should be defined, but found "+JSON.stringify(e[n]));for(var r=e[n],a=this.kernelSize.concat([r,this.depthMultiplier]),i=[],o=0;o<this.rank;++o)i.push(1);i.push(r*this.depthMultiplier,this.filters),this.depthwiseKernel=this.addWeight("depthwise_kernel",a,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.inputSpec=[new Jy({ndim:this.rank+2,axes:(t={},t[n]=r,t)})],this.built=!0},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){var t;if(e=qy(e),1===n.rank)throw new gv("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=(0,Zg.p4s)(e,[0,2,3,1])),t=(0,Zg.U_I)(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=by(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=(0,Zg.p4s)(t,[0,3,1,2])),t}))},t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=Fy(this.depthwiseInitializer),t.pointwiseInitializer=Fy(this.pointwiseInitializer),t.depthwiseRegularizer=Bw(this.depthwiseRegularizer),t.pointwiseRegularizer=Bw(this.pointwiseRegularizer),t.depthwiseConstraint=Fv(this.depthwiseConstraint),t.pointwiseConstraint=Fv(this.pointwiseConstraint),t},t.className="SeparableConv",t}(Kw),Jw=function(e){function t(t){return e.call(this,2,t)||this}return tv(t,e),t.className="SeparableConv2D",t}(Xw);Zg.m7h.SerializationMap.register(Jw);var Qw=function(e){function t(n){var r=e.call(this,1,n)||this;return t.verifyConfig(n),r.inputSpec=[{ndim:3}],r}return tv(t,e),t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.rank,delete t.dataFormat,t},t.verifyConfig=function(e){if("number"!=typeof e.kernelSize&&!Av(e.kernelSize,"number",1,1))throw new mv("Conv1D expects config.kernelSize to be number or number[] with length 1, but received "+JSON.stringify(e.kernelSize)+".")},t.className="Conv1D",t}(Kw);Zg.m7h.SerializationMap.register(Qw);var Zw=function(e){function t(t){var n=e.call(this,t)||this;return"number"==typeof t.cropping?n.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:"number"==typeof t.cropping[0]?n.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:n.cropping=t.cropping,n.dataFormat=void 0===t.dataFormat?"channelsLast":t.dataFormat,n.inputSpec=[{ndim:4}],n}return tv(t,e),t.prototype.computeOutputShape=function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){return e=qy(e),"channelsLast"===n.dataFormat?fy(fy(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2),n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3):fy(fy(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3),n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))},t.prototype.getConfig=function(){var t={cropping:this.cropping,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Cropping2D",t}(nb);Zg.m7h.SerializationMap.register(Zw);var ex=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_SIZE=[2,2],n.inputSpec=[{ndim:4}],n.size=null==t.size?n.DEFAULT_SIZE:t.size,n.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,n}return tv(t,e),t.prototype.computeOutputShape=function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}return t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2],[e[0],t,n,e[3]]},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){var t=qy(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=(0,Zg.p4s)(t,[0,2,3,1]);var a=n.size[0]*r[2],i=n.size[1]*r[3],o=t.resizeNearestNeighbor([a,i]);return(0,Zg.p4s)(o,[0,3,1,2])}return a=n.size[0]*r[1],i=n.size[1]*r[2],t.resizeNearestNeighbor([a,i])}))},t.prototype.getConfig=function(){var t={size:this.size,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="UpSampling2D",t}(nb);Zg.m7h.SerializationMap.register(ex);var tx=function(e){function t(t){var n=e.call(this,2,t)||this;return n.depthwiseKernel=null,n.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,n.depthwiseInitializer=Vy(t.depthwiseInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.depthwiseConstraint=Uv(t.depthwiseConstraint),n.depthwiseRegularizer=Vw(t.depthwiseRegularizer),n}return tv(t,e),t.prototype.build=function(e){if((e=$y(e)).length<4)throw new mv("Inputs to DepthwiseConv2D should have rank 4. Received input shape: "+JSON.stringify(e)+".");var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new mv("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not ("+e[t]+").");var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){var t=function(e,t,n,r,a,i){return void 0===n&&(n=[1,1]),void 0===r&&(r="valid"),(0,Zg.lub)((function(){null==a&&(a="channelsLast"),$v(a);var o=$w(e,a);if(4!==e.rank)throw new mv("Input for depthwiseConv2d is required to be 4-D, but is instead "+e.rank+"-D");if(4!==t.rank)throw new mv("depthwiseKernel is required to be 4-D, but is instead "+t.rank+"-D");return o=(0,Zg.B10)(o,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(o=(0,Zg.p4s)(o,[0,3,1,2])),o}))}(e=qy(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=by(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))},t.prototype.computeOutputShape=function(e){e=$y(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=Ww(t,this.kernelSize[0],this.padding,this.strides[0]),i=Ww(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]},t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=Fy(this.depthwiseInitializer),t.depthwiseRegularizer=Bw(this.depthwiseRegularizer),t.depthwiseConstraint=Fv(this.depthwiseRegularizer),t},t.className="DepthwiseConv2D",t}(Hw);Zg.m7h.SerializationMap.register(tx);var nx=function(e){function t(t){var n=e.call(this,t)||this;if(n.rate=Math.max(Math.min(t.rate,1),0),n.rateScalar=pv(n.rate),n.noiseShape=t.noiseShape,n.seed=t.seed,null!=n.seed)throw new gv("Non-default seed is not implemented in Dropout layer yet: "+n.seed);return n.supportsMasking=!0,n}return tv(t,e),t.prototype.getNoiseShape=function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){n.invokeCallHook(e,t);var r=qy(e);if(null!=n.noiseShape&&!Zg.D5U.arraysEqual(r.shape,n.noiseShape))throw new gv("Non-default noise shape is not implemented in Dropout layer yet: "+JSON.stringify(n.noiseShape));if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return xy((function(){return wy(r,n.rateScalar,i,n.seed)}),(function(){return r}),a)}return e}))},t.prototype.getConfig=function(){var t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Dropout",t}(nb);Zg.m7h.SerializationMap.register(nx);var rx=function(e){function t(t){var n=e.call(this,t)||this;if(n.activation=null,n.useBias=!0,n.kernel=null,n.bias=null,n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_BIAS_INITIALIZER="zeros",null==t.batchInputShape&&null==t.inputShape&&null!=t.inputDim){var r=null;null!=t.batchSize&&(r=t.batchSize),n.batchInputShape=[r,t.inputDim]}return n.units=t.units,n.activation=Pw(t.activation),null!=t.useBias&&(n.useBias=t.useBias),n.kernelInitializer=Vy(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.biasInitializer=Vy(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelConstraint=Uv(t.kernelConstraint),n.biasConstraint=Uv(t.biasConstraint),n.kernelRegularizer=Vw(t.kernelRegularizer),n.biasRegularizer=Vw(t.biasRegularizer),n.activityRegularizer=Vw(t.activityRegularizer),n.inputSpec=[{minNDim:2}],n}return tv(t,e),t.prototype.build=function(e){var t,n=(e=$y(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(t={},t[-1]=n,t)}],this.built=!0},t.prototype.computeOutputShape=function(e){var t=(e=$y(e)).slice();return t[t.length-1]=this.units,t},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){n.invokeCallHook(e,t);var r=gy(qy(e),n.kernel.read());return null!=n.bias&&(r=by(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r)),r}))},t.prototype.getConfig=function(){var t={units:this.units,activation:Iw(this.activation),useBias:this.useBias,kernelInitializer:Fy(this.kernelInitializer),biasInitializer:Fy(this.biasInitializer),kernelRegularizer:Bw(this.kernelRegularizer),biasRegularizer:Bw(this.biasRegularizer),activityRegularizer:Bw(this.activityRegularizer),kernelConstraint:Fv(this.kernelConstraint),biasConstraint:Fv(this.biasConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Dense",t}(nb);Zg.m7h.SerializationMap.register(rx);var ax=function(e){function t(t){var n=e.call(this,t||{})||this;return n.inputSpec=[{minNDim:3}],n}return tv(t,e),t.prototype.computeOutputShape=function(e){for(var t=0,n=(e=$y(e)).slice(1);t<n.length;t++)if(null==n[t])throw new mv('The shape of the input to "Flatten" is not fully defined (got '+e.slice(1)+'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.');return[e[0],ny(e,1)]},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){return n.invokeCallHook(e,t),function(e){if(e.rank<=1)throw new mv("batchFlatten requires a minimum rank of 2. Got rank: "+e.rank+".");var t=[e.shape[0],ny(e.shape,1)];return e.reshape(t)}(qy(e))}))},t.className="Flatten",t}(nb);Zg.m7h.SerializationMap.register(ax);var ix=function(e){function t(t){var n=e.call(this,t)||this;return n.supportsMasking=!0,n.activation=Pw(t.activation),n}return tv(t,e),t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){n.invokeCallHook(e,t);var r=qy(e);return n.activation.apply(r)}))},t.prototype.getConfig=function(){var t={activation:Iw(this.activation)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Activation",t}(nb);Zg.m7h.SerializationMap.register(ix);var ox=function(e){function t(t){var n=e.call(this,t)||this;return n.n=t.n,n.inputSpec=[{ndim:2}],n}return tv(t,e),t.prototype.computeOutputShape=function(e){return[e[0],this.n,e[1]]},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){return function(e,t){return(0,Zg.lub)((function(){if(2!==e.shape.length)throw new mv("repeat() expects a rank-2 tensor, but received a rank-"+e.shape.length+" tensor.");return hy(uy(e,1),[1,t,1])}))}(e=qy(e),n.n)}))},t.prototype.getConfig=function(){var t={n:this.n},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="RepeatVector",t}(nb);Zg.m7h.SerializationMap.register(ox);var sx=function(e){function t(t){var n=e.call(this,t)||this;n.targetShape=t.targetShape;for(var r=0;r<n.targetShape.length;++r)n.isUnknown(n.targetShape[r])&&(n.targetShape[r]=null);return n}return tv(t,e),t.prototype.isUnknown=function(e){return e<0||null==e},t.prototype.fixUnknownDimension=function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==i)throw new mv("Can only specifiy one unknown dimension.");i=o}else a*=s}var u=ny(e);if(null!==i){if(0===a||u%a!=0)throw new mv(n);r[i]=u/a}else if(u!==a)throw new mv(n);return r},t.prototype.computeOutputShape=function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){n.invokeCallHook(e,t);var r=qy(e),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return r.reshape(i)}))},t.prototype.getConfig=function(){var t={targetShape:this.targetShape},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Reshape",t}(nb);Zg.m7h.SerializationMap.register(sx);var ux=function(e){function t(t){var n=e.call(this,t)||this;if(null==t.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+t.dims+" instead.");var r=oy(1,t.dims.length+1);if(!Zg.D5U.arraysEqual(t.dims.slice().sort(),r))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");return n.dims=t.dims,n.dimsIncludingBatch=[0].concat(n.dims),n.inputSpec=[new Jy({ndim:n.dims.length+1})],n}return tv(t,e),t.prototype.computeOutputShape=function(e){var t=(e=$y(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t},t.prototype.call=function(e,t){return(0,Zg.p4s)(qy(e),this.dimsIncludingBatch)},t.prototype.getConfig=function(){var t={dims:this.dims},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Permute",t}(nb);Zg.m7h.SerializationMap.register(ux);var lx=function(e){function t(t){var n=e.call(this,t)||this;if(n.embeddings=null,n.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==t.batchInputShape&&null==t.inputShape){var r=null;null!=t.batchSize&&(r=t.batchSize),null==t.inputLength?n.batchInputShape=[r,null]:n.batchInputShape=[r].concat(_v(t.inputLength))}return n.inputDim=t.inputDim,n.outputDim=t.outputDim,n.embeddingsInitializer=Vy(t.embeddingsInitializer||n.DEFAULT_EMBEDDINGS_INITIALIZER),n.embeddingsRegularizer=Vw(t.embeddingsRegularizer),n.activityRegularizer=Vw(t.activityRegularizer),n.embeddingsConstraint=Uv(t.embeddingsConstraint),n.maskZero=t.maskZero,n.inputLength=t.inputLength,n}return tv(t,e),t.prototype.build=function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0},t.prototype.warnOnIncompatibleInputShape=function(e){},t.prototype.computeMask=function(e,t){throw new gv("computeMask has not been implemented for Embedding yet")},t.prototype.computeOutputShape=function(e){if(e=$y(e),null==this.inputLength)return e.concat([this.outputDim]);var t=_v(this.inputLength);if(t.length!==e.length-1)throw new mv('"inputLength" is '+this.inputLength+", but received input shape has shape "+e);for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new mv('"inputLength" is '+this.inputLength+", but received input shape has shape "+e);null==a&&(t[n]=i),n++}return[e[0]].concat(t,[this.outputDim])},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){n.invokeCallHook(e,t);var r=qy(e);return"int32"!==r.dtype&&(r=sy(r,"int32")),vy(n.embeddings.read(),r.as1D()).reshape($y(n.computeOutputShape(r.shape)))}))},t.prototype.getConfig=function(){var t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Fy(this.embeddingsInitializer),embeddingsRegularizer:Bw(this.embeddingsRegularizer),activityRegularizer:Bw(this.activityRegularizer),embeddingsConstraint:Fv(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Embedding",t}(nb);Zg.m7h.SerializationMap.register(lx);var cx=function(e){function t(t){var n=e.call(this,t||{})||this;return n.supportsMasking=!0,n}return tv(t,e),t.prototype.mergeFunction=function(e){throw new gv},t.prototype.computeElementwiseOpOutputShape=function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new mv("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n},t.prototype.build=function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[$y(e)]),e.length<2)throw new mv("A merge layer should be called on an Array of at least 2 inputs. Got "+e.length+" input(s).");for(var t=[],n=0,r=e;n<r.length;n++)null!=(o=r[n])&&null!==o[0]&&t.push(o[0]);if((t=Ov(t)).length>1)throw new mv("Can not merge tensors with different batch sizes. Got tensors with shapes: "+JSON.stringify(e)+".");for(var a=null==e[0]?null:e[0].slice(1),i=1;i<e.length;++i){var o=null==e[i]?null:e[i].slice(1);a=this.computeElementwiseOpOutputShape(a,o)}var s=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===Ov(s).length?this.reshapeRequired=!1:this.reshapeRequired=!0},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){if(n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){for(var a=iy(r),i=0,o=e;i<o.length;i++){for(var s=(p=o[i]).rank,u=0;u<a-s;++u)p=uy(p,1);t.push(p)}return n.mergeFunction(t)}for(var l=!1,c=0,f=e;c<f.length;c++){var p;if(null==(s=(p=f[c]).rank)){var d=p.shape,h=d[0],m=d.slice(1).concat([h]),g=p.reshape([h].concat(ny(d.slice(1))));g=(g=(0,Zg.p4s)(g,[1,0])).reshape(m),t.push(g),l=!0}else if(s>1){var v=oy(1,s).concat([0]);t.push((0,Zg.p4s)(p,v)),l=!0}else t.push(p)}var y=n.mergeFunction(t),b=y.rank;if(l)if(null==b){var w=y.shape;m=[h=w[w.length-1]].concat(w.slice(0,w.length-1)),y=(0,Zg.p4s)(y.reshape([-1,h]),[1,0]).reshape(m)}else b>1&&(v=[b-1].concat(oy(0,b-1)),y=(0,Zg.p4s)(y,v));return y}return n.mergeFunction(e)}))},t.prototype.computeOutputShape=function(e){var t;t=null==e[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}for(var a=[],i=0,o=e;i<o.length;i++)null!=(r=o[i])&&null!==r[0]&&a.push(r[0]);return 1===(a=Ov(a)).length?a.concat(t):[null].concat(t)},t}(nb),fx=function(e){function t(t){return e.call(this,t)||this}return tv(t,e),t.prototype.mergeFunction=function(e){return(0,Zg.lub)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=(0,Zg.IHx)(t,e[n]);return t}))},t.className="Add",t}(cx);Zg.m7h.SerializationMap.register(fx);var px=function(e){function t(t){return e.call(this,t)||this}return tv(t,e),t.prototype.mergeFunction=function(e){return(0,Zg.lub)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=(0,Zg.dC7)(t,e[n]);return t}))},t.className="Multiply",t}(cx);Zg.m7h.SerializationMap.register(px);var dx=function(e){function t(t){return e.call(this,t)||this}return tv(t,e),t.prototype.mergeFunction=function(e){return(0,Zg.lub)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=(0,Zg.IHx)(t,e[n]);return(0,Zg.dC7)(pv(1/e.length),t)}))},t.className="Average",t}(cx);Zg.m7h.SerializationMap.register(dx);var hx=function(e){function t(t){return e.call(this,t)||this}return tv(t,e),t.prototype.mergeFunction=function(e){return(0,Zg.lub)((function(){for(var t=e[0],n=1;n<e.length;++n)t=(0,Zg.gWQ)(t,e[n]);return t}))},t.className="Maximum",t}(cx);Zg.m7h.SerializationMap.register(hx);var mx=function(e){function t(t){return e.call(this,t)||this}return tv(t,e),t.prototype.mergeFunction=function(e){return(0,Zg.lub)((function(){for(var t=e[0],n=1;n<e.length;++n)t=(0,Zg.LTh)(t,e[n]);return t}))},t.className="Minimum",t}(cx);Zg.m7h.SerializationMap.register(mx);var gx=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_AXIS=-1,null==t&&(t={}),n.axis=null==t.axis?n.DEFAULT_AXIS:t.axis,n.supportsMasking=!0,n.reshapeRequired=!1,n}return tv(t,e),t.prototype.build=function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new mv("A `Concatenate` layer should be called on a list of at least 2 inputs");for(var t=!0,n=0,r=e;n<r.length;n++)if(null!=(c=r[n])){t=!1;break}if(!t){for(var a=[],i=0;i<e.length;++i){var o=e[i].slice();o.splice(this.axis,1);for(var s=!1,u=0,l=a;u<l.length;u++){var c=l[u];if(Zg.D5U.arraysEqual(c,o)){s=!0;break}}s||a.push(o)}if(a.length>1)throw new mv("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}},t.prototype.mergeFunction=function(e){var t=this;return(0,Zg.lub)((function(){return py(e,t.axis)}))},t.prototype.computeOutputShape=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new mv("A `Concatenate` layer should be called on a list of inputs.");for(var t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis,a=0,i=t.slice(1);a<i.length;a++){var o=i[a];if(null==n[r]||null==o[r]){n[r]=null;break}n[r]+=o[r]}return n},t.prototype.getConfig=function(){var t={axis:this.axis},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Concatenate",t}(cx);function vx(e,t,n,r,a,i){var o;if(void 0===i&&(i=.001),2===e.rank)o=(0,Zg.JHc)(e,t,n,i,a,r);else if(3===e.rank)o=(0,Zg.csF)(e,t,n,i,a,r);else{if(4!==e.rank)throw new gv("batchNormalization is not implememnted for array of rank "+e.rank+" yet");o=(0,Zg.bVb)(e,t,n,i,a,r)}return o}function yx(e,t,n,r,a){return void 0===a&&(a=.001),Zg.D5U.arraysEqual(r.slice().sort(),oy(0,e.rank-1))?function(e,t,n,r,a){return void 0===a&&(a=.001),(0,Zg.lub)((function(){var i=(0,Zg.Gi7)(e,r),o=i.mean,s=i.variance;return[vx(e,o,s,n,t,a),o,s]}))}(e,t,n,r,a):function(e,t,n,r,a){return void 0===a&&(a=.001),(0,Zg.lub)((function(){for(var i=(0,Zg.Gi7)(e,r),o=i.mean,s=i.variance,u=[],l=0,c=oy(0,e.rank);l<c.length;l++){var f=c[l];-1!==r.indexOf(f)?u.push(1):u.push(e.shape[f])}var p=o.reshape(u),d=s.reshape(u),h=null==t?null:t.reshape(u),m=null==n?null:n.reshape(u);return[vx(e,p,d,m,h,a),o,s]}))}(e,t,n,r,a)}Zg.m7h.SerializationMap.register(gx);var bx=function(e){function t(t){var n=e.call(this,t)||this;return n.supportsMasking=!0,n.axis=null==t.axis?-1:t.axis,n.momentum=null==t.momentum?.99:t.momentum,n.epsilon=null==t.epsilon?.001:t.epsilon,n.center=null==t.center||t.center,n.scale=null==t.scale||t.scale,n.betaInitializer=Vy(t.betaInitializer||"zeros"),n.gammaInitializer=Vy(t.gammaInitializer||"ones"),n.movingMeanInitializer=Vy(t.movingMeanInitializer||"zeros"),n.movingVarianceInitializer=Vy(t.movingVarianceInitializer||"ones"),n.betaConstraint=Uv(t.betaConstraint),n.gammaConstraint=Uv(t.gammaConstraint),n.betaRegularizer=Vw(t.betaRegularizer),n.gammaRegularizer=Vw(t.gammaRegularizer),n.stepCount=0,n}return tv(t,e),t.prototype.build=function(e){e=$y(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new mv("Axis "+t+" of input tensor should have a defined dimension but the layer received an input with shape "+JSON.stringify(e)+".");this.inputSpec=[new Jy({ndim:e.length,axes:(r={},r[t]=n,r)})];var r,a=[n];this.scale&&(this.gamma=this.addWeight("gamma",a,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",a,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",a,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",a,null,this.movingVarianceInitializer,null,!1),this.built=!0},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){var r=null!=t.training&&t.training,a=qy(e),i=a.shape,o=i.length,s=oy(0,o),u=n.axis>=0?n.axis:n.axis+o;s.splice(u,1);var l=yv(1,o);l[u]=i[u];var c=s.slice();c.sort();var f=!Zg.D5U.arraysEqual(c,oy(0,o).slice(0,o-1));if(!r)return function(){if(f){var e=n.movingMean.read().reshape(l),t=n.movingVariance.read().reshape(l),r=n.center?n.beta.read().reshape(l):null,i=n.scale?n.gamma.read().reshape(l):null;return vx(a,e,t,r,i,n.epsilon)}return vx(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var p=yx(a,n.gamma.read(),n.beta.read(),s,n.epsilon),d=p[0],h=p[1],m=p[2],g=ny(s.map((function(e){return a.shape[e]}))),v=m.mul(pv(g/(g-(1+n.epsilon))));return function(){n.stepCount++;var e=(0,Zg.p_)(n.movingMean.read(),h,n.momentum,n.stepCount);n.movingMean.write(e);var t=(0,Zg.p_)(n.movingVariance.read(),v,n.momentum,n.stepCount);n.movingVariance.write(t)}(),d}))},t.prototype.getConfig=function(){var t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Fy(this.betaInitializer),gammaInitializer:Fy(this.gammaInitializer),movingMeanInitializer:Fy(this.movingMeanInitializer),movingVarianceInitializer:Fy(this.movingVarianceInitializer),betaRegularizer:Bw(this.betaRegularizer),gammaRegularizer:Bw(this.gammaRegularizer),betaConstraint:Fv(this.betaConstraint),gammaConstraint:Fv(this.gammaConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="BatchNormalization",t}(nb);Zg.m7h.SerializationMap.register(bx);var wx=function(e){function t(t){var n=this;if(null==t&&(t={}),(n=e.call(this,t)||this).dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,null==t.padding)n.padding=[[1,1],[1,1]];else if("number"==typeof t.padding)n.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,2!==t.padding.length)throw new mv("ZeroPadding2D expects padding to be a length-2 array, but received a length-"+t.padding.length+" array.");var r=void 0,a=void 0;if("number"==typeof t.padding[0])r=[t.padding[0],t.padding[0]],a=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,2!==t.padding[0].length)throw new mv("ZeroPadding2D expects height padding to be a length-2 array, but received a length-"+t.padding[0].length+" array.");if(r=t.padding[0],2!==t.padding[1].length)throw new mv("ZeroPadding2D expects width padding to be a length-2 array, but received a length-"+t.padding[1].length+" array.");a=t.padding[1]}n.padding=[r,a]}return n.inputSpec=[new Jy({ndim:4})],n}return tv(t,e),t.prototype.computeOutputShape=function(e){var t,n;return e=$y(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){return function(e,t,n){return(0,Zg.lub)((function(){if(4!==e.rank)throw new mv("temporalPadding expects input tensor to be 4-D, but received a "+e.rank+"-D tensor.");if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new mv("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new mv("Unknown data format: "+n+". Supported data formats are 'channelsLast' and 'channelsFirst.");var r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],(0,Zg.vku)(e,r)}))}(qy(e),n.padding,n.dataFormat)}))},t.prototype.getConfig=function(){var t={padding:this.padding,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="ZeroPadding2D",t}(nb);function xx(e,t,n,r,a,i){return(0,Zg.lub)((function(){var o;$v(a),function(e){Tv(Gv,"PoolMode",e)}(i),Kv(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=$w(e,a);var s="same"===r?"same":"valid";return o="max"===i?(0,Zg._sB)(e,t,n,s):(0,Zg.wS1)(e,t,n,s),"channelsFirst"===a&&(o=(0,Zg.p4s)(o,[0,3,1,2])),o}))}Zg.m7h.SerializationMap.register(wx);var _x=function(e){function t(t){var n=this;if(null==t.poolSize&&(t.poolSize=2),n=e.call(this,t)||this,"number"==typeof t.poolSize)n.poolSize=[t.poolSize];else{if(!Array.isArray(t.poolSize)||1!==t.poolSize.length||"number"!=typeof t.poolSize[0])throw new mv("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.poolSize));n.poolSize=t.poolSize}if(null==t.strides)n.strides=n.poolSize;else if("number"==typeof t.strides)n.strides=[t.strides];else{if(!Array.isArray(t.strides)||1!==t.strides.length||"number"!=typeof t.strides[0])throw new mv("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.strides));n.strides=t.strides}return n.padding=null==t.padding?"valid":t.padding,Kv(n.padding),n.inputSpec=[new Jy({ndim:3})],n}return tv(t,e),t.prototype.computeOutputShape=function(e){var t=Ww((e=$y(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){n.invokeCallHook(e,t),e=uy(qy(e),2);var r=n.poolingFunction(qy(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return(0,Zg.L9e)(r,[2])}))},t.prototype.getConfig=function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(nb),Nx=function(e){function t(t){return e.call(this,t)||this}return tv(t,e),t.prototype.poolingFunction=function(e,t,n,r,a){return $v(a),Kv(r),xx(e,t,n,r,a,"max")},t.className="MaxPooling1D",t}(_x);Zg.m7h.SerializationMap.register(Nx);var kx=function(e){function t(t){return e.call(this,t)||this}return tv(t,e),t.prototype.poolingFunction=function(e,t,n,r,a){return $v(a),Kv(r),xx(e,t,n,r,a,"avg")},t.className="AveragePooling1D",t}(_x);Zg.m7h.SerializationMap.register(kx);var Ex=function(e){function t(t){var n=this;if(null==t.poolSize&&(t.poolSize=[2,2]),(n=e.call(this,t)||this).poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],null==t.strides)n.strides=n.poolSize;else if(Array.isArray(t.strides)){if(2!==t.strides.length)throw new mv("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+t.strides.length+".");n.strides=t.strides}else n.strides=[t.strides,t.strides];return n.padding=null==t.padding?"valid":t.padding,n.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,$v(n.dataFormat),Kv(n.padding),n.inputSpec=[new Jy({ndim:4})],n}return tv(t,e),t.prototype.computeOutputShape=function(e){e=$y(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=Ww(t,this.poolSize[0],this.padding,this.strides[0]),n=Ww(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){return n.invokeCallHook(e,t),n.poolingFunction(qy(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))},t.prototype.getConfig=function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(nb),Sx=function(e){function t(t){return e.call(this,t)||this}return tv(t,e),t.prototype.poolingFunction=function(e,t,n,r,a){return $v(a),Kv(r),xx(e,t,n,r,a,"max")},t.className="MaxPooling2D",t}(Ex);Zg.m7h.SerializationMap.register(Sx);var Cx=function(e){function t(t){return e.call(this,t)||this}return tv(t,e),t.prototype.poolingFunction=function(e,t,n,r,a){return $v(a),Kv(r),xx(e,t,n,r,a,"avg")},t.className="AveragePooling2D",t}(Ex);Zg.m7h.SerializationMap.register(Cx);var Ix=function(e){function t(t){var n=e.call(this,t)||this;return n.inputSpec=[new Jy({ndim:3})],n}return tv(t,e),t.prototype.computeOutputShape=function(e){return[e[0],e[2]]},t.prototype.call=function(e,t){throw new gv},t}(nb),Ox=function(e){function t(t){return e.call(this,t)||this}return tv(t,e),t.prototype.call=function(e,t){return(0,Zg.lub)((function(){var t=qy(e);return(0,Zg.J69)(t,1)}))},t.className="GlobalAveragePooling1D",t}(Ix);Zg.m7h.SerializationMap.register(Ox);var Px=function(e){function t(t){return e.call(this,t)||this}return tv(t,e),t.prototype.call=function(e,t){return(0,Zg.lub)((function(){var t=qy(e);return(0,Zg.Fp7)(t,1)}))},t.className="GlobalMaxPooling1D",t}(Ix);Zg.m7h.SerializationMap.register(Px);var Tx=function(e){function t(t){var n=e.call(this,t)||this;return n.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,$v(n.dataFormat),n.inputSpec=[new Jy({ndim:4})],n}return tv(t,e),t.prototype.computeOutputShape=function(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]},t.prototype.call=function(e,t){throw new gv},t.prototype.getConfig=function(){var t={dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(nb),Ax=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){var t=qy(e);return"channelsLast"===n.dataFormat?(0,Zg.J69)(t,[1,2]):(0,Zg.J69)(t,[2,3])}))},t.className="GlobalAveragePooling2D",t}(Tx);Zg.m7h.SerializationMap.register(Ax);var Rx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){var t=qy(e);return"channelsLast"===n.dataFormat?(0,Zg.Fp7)(t,[1,2]):(0,Zg.Fp7)(t,[2,3])}))},t.className="GlobalMaxPooling2D",t}(Tx);function Dx(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new mv("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function Mx(e,t,n,r,a,i,o,s){void 0===r&&(r=!1),void 0===o&&(o=!1);var u=t.shape.length;if(u<3)throw new mv("Input should be at least 3D, but is "+u+"D.");var l,c,f=[1,0].concat(oy(2,u));if(t=(0,Zg.p4s)(t,f),null!=a)throw new gv("The rnn() function of the deeplearn.js backend does not support masking yet.");if(null!=i)throw new gv("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),r&&(t=(0,Zg.GYS)(t,0));for(var p=n,d=t.shape[0],h=0;h<d;++h){var m=ly(t,h,1),g=e(m=m.reshape(m.shape.slice(1)),p);c=g[0],l=0===h?c.reshape([1].concat(c.shape)):dy(l,c.reshape([1].concat(c.shape))),p=g[1]}return[c,(0,Zg.p4s)(l,[1,0].concat(oy(2,l.shape.length))),p]}Zg.m7h.SerializationMap.register(Rx);var Lx=function(e){function t(t){var n,r=e.call(this,t)||this;if(null==t.cell)throw new mv("cell property is missing for the constructor of RNN.");if(null==(n=Array.isArray(t.cell)?new qx({cells:t.cell}):t.cell).stateSize)throw new mv("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=n,r.returnSequences=null!=t.returnSequences&&t.returnSequences,r.returnState=null!=t.returnState&&t.returnState,r.goBackwards=null!=t.goBackwards&&t.goBackwards,r._stateful=null!=t.stateful&&t.stateful,r.unroll=null!=t.unroll&&t.unroll,r.supportsMasking=!0,r.inputSpec=[new Jy({ndim:3})],r.stateSpec=null,r.states=null,r.numConstants=null,r.keptStates=[],r}return tv(t,e),t.prototype.getStates=function(){return null==this.states?oy(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states},t.prototype.setStates=function(e){this.states=e},t.prototype.computeOutputShape=function(e){Uy(e)&&(e=e[0]);var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){for(var a=[],i=0,o=t;i<o.length;i++){var s=o[i];a.push([e[0],s])}return[n].concat(a)}return n},t.prototype.computeMask=function(e,t){throw new gv("computeMask has not been implemented for RNN yet")},t.prototype.build=function(e){if(null!=this.numConstants)throw new gv("Constants support is not implemented in RNN yet.");Uy(e)&&(e=e[0]);var t=this.stateful?e[0]:null,n=e[e.length-1];this.inputSpec[0]=new Jy({shape:[t,null,n]});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!Zg.D5U.arraysEqual(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new mv("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec="+this.stateSpec+"; However cell.stateSize is "+this.cell.stateSize)}else this.stateSpec=r.map((function(e){return new Jy({shape:[null,e]})}));this.stateful&&this.resetStates()},t.prototype.resetStates=function(e){var t=this;(0,Zg.lub)((function(){if(!t.stateful)throw new dv("Cannot call resetStates() on an RNN Layer that is not stateful.");var n=t.inputSpec[0].shape[0];if(null==n)throw new mv("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states)Array.isArray(t.cell.stateSize)?t.states=t.cell.stateSize.map((function(e){return(0,Zg.lls)([n,e])})):t.states=[(0,Zg.lls)([n,t.cell.stateSize])];else if(null==e)(0,Zg.B90)(t.states),null!=t.keptStates&&((0,Zg.B90)(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states=t.cell.stateSize.map((function(e){return(0,Zg.lls)([n,e])})):t.states[0]=(0,Zg.lls)([n,t.cell.stateSize]);else{if(t.keptStates.push(t.states.slice()),Array.isArray(e)||(e=[e]),e.length!==t.states.length)throw new mv("Layer "+t.name+" expects "+t.states.length+" state(s), but it received "+e.length+" state value(s). Input received: "+e);for(var r=0;r<t.states.length;++r){var a=e[r],i=Array.isArray(t.cell.stateSize)?t.cell.stateSize[r]:t.cell.stateSize,o=[n,i];if(!Zg.D5U.arraysEqual(a.shape,o))throw new mv("State "+r+" is incompatible with layer "+t.name+": expected shape="+o+", received shape="+a.shape);t.states[r]=a}}t.states.forEach((function(e){return(0,Zg.CnY)(e)}))}))},t.prototype.apply=function(t,n){var r=null==n?null:n.initialState,a=null==n?null:n.constants;null==n&&(n={});var i=Dx(t,r,a,this.numConstants);t=i.inputs,r=i.initialState,a=i.constants;var o=[],s=[];if(null!=r){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(var u=0,l=r;u<l.length;u++){var c=l[u];this.stateSpec.push(new Jy({shape:c.shape}))}s=s.concat(this.stateSpec)}if(null!=a&&(n.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof Qy){var f=[t].concat(o),p=this.inputSpec.concat(s),d=this.inputSpec;this.inputSpec=p;var h=e.prototype.apply.call(this,f,n);return this.inputSpec=d,h}return e.prototype.apply.call(this,t,n)},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;if(e=qy(e),null==i&&(i=n.stateful?n.states:n.getInitialState(e)),null!=r)throw new gv("Masking is not implemented for RNN yet");var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new mv("RNN Layer has "+o+" state(s) but was passed "+i.length+" initial state(s).");e.shape[1];n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},u=Mx((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,i,n.goBackwards,null,null,n.unroll),l=u[0],c=u[1],f=u[2];n.stateful&&n.resetStates(f);var p=n.returnSequences?c:l;return n.returnState?[p].concat(f):p}))},t.prototype.getInitialState=function(e){var t=this;return(0,Zg.lub)((function(){var n=(0,Zg.lls)(e.shape);return n=uy(n=(0,Zg.Smz)(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?hy(n,[1,e]):n})):t.cell.stateSize>1?[hy(n,[1,t.cell.stateSize])]:[n]}))},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.trainable?this.cell.trainableWeights:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var n=this.cell.getConfig();t.cell={className:this.cell.getClassName(),config:n};var r=e.prototype.getConfig.call(this);return Object.assign(t,r),t},t.className="RNN",t}(nb);Zg.m7h.SerializationMap.register(Lx);var zx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t}(nb),jx=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=t.units,n.activation=Pw(null==t.activation?n.DEFAULT_ACTIVATION:t.activation),n.useBias=null==t.useBias||t.useBias,n.kernelInitializer=Vy(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=Vy(t.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=Vy(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=Vw(t.kernelRegularizer),n.recurrentRegularizer=Vw(t.recurrentRegularizer),n.biasRegularizer=Vw(t.biasRegularizer),n.kernelConstraint=Uv(t.kernelConstraint),n.recurrentConstraint=Uv(t.recurrentConstraint),n.biasConstraint=Uv(t.biasConstraint),n.dropout=ay([1,iy([0,null==t.dropout?0:t.dropout])]),n.recurrentDropout=ay([1,iy([0,null==t.recurrentDropout?0:t.recurrentDropout])]),n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}return tv(t,e),t.prototype.build=function(e){e=$y(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){if(2!==e.length)throw new mv("SimpleRNNCell expects 2 input Tensors, got "+e.length+".");var r=e[1];e=e[0];var a,i=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=$x((function(){return(0,Zg.JpU)(e)}),n.dropout,i)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=$x((function(){return(0,Zg.JpU)(r)}),n.recurrentDropout,i));var o=n.dropoutMask,s=n.recurrentDropoutMask;a=gy(null!=o?(0,Zg.dC7)(e,o):e,n.kernel.read()),null!=n.bias&&(a=by(a,n.bias.read())),null!=s&&(r=(0,Zg.dC7)(r,s));var u=(0,Zg.IHx)(a,gy(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))},t.prototype.getConfig=function(){var t={units:this.units,activation:Iw(this.activation),useBias:this.useBias,kernelInitializer:Fy(this.kernelInitializer),recurrentInitializer:Fy(this.recurrentInitializer),biasInitializer:Fy(this.biasInitializer),kernelRegularizer:Bw(this.kernelRegularizer),recurrentRegularizer:Bw(this.recurrentRegularizer),biasRegularizer:Bw(this.biasRegularizer),activityRegularizer:Bw(this.activityRegularizer),kernelConstraint:Fv(this.kernelConstraint),recurrentConstraint:Fv(this.recurrentConstraint),biasConstraint:Fv(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="SimpleRNNCell",t}(zx);Zg.m7h.SerializationMap.register(jx);var Bx=function(e){function t(t){return t.cell=new jx(t),e.call(this,t)||this}return tv(t,e),t.prototype.call=function(t,n){var r=this;return(0,Zg.lub)((function(){null!=r.cell.dropoutMask&&((0,Zg.B90)(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&((0,Zg.B90)(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==n?null:n.mask,i=null==n?null:n.training,o=null==n?null:n.initialState;return e.prototype.call.call(r,t,{mask:a,training:i,initialState:o})}))},Object.defineProperty(t.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var t={units:this.units,activation:Iw(this.activation),useBias:this.useBias,kernelInitializer:Fy(this.kernelInitializer),recurrentInitializer:Fy(this.recurrentInitializer),biasInitializer:Fy(this.biasInitializer),kernelRegularizer:Bw(this.kernelRegularizer),recurrentRegularizer:Bw(this.recurrentRegularizer),biasRegularizer:Bw(this.biasRegularizer),activityRegularizer:Bw(this.activityRegularizer),kernelConstraint:Fv(this.kernelConstraint),recurrentConstraint:Fv(this.recurrentConstraint),biasConstraint:Fv(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},n=e.prototype.getConfig.call(this);return delete n.cell,Object.assign(t,n),t},t.className="SimpleRNN",t}(Lx);Zg.m7h.SerializationMap.register(Bx);var Fx=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=t.units,n.activation=Pw(void 0===t.activation?n.DEFAULT_ACTIVATION:t.activation),n.recurrentActivation=Pw(void 0===t.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),n.useBias=null==t.useBias||t.useBias,n.kernelInitializer=Vy(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=Vy(t.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=Vy(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=Vw(t.kernelRegularizer),n.recurrentRegularizer=Vw(t.recurrentRegularizer),n.biasRegularizer=Vw(t.biasRegularizer),n.kernelConstraint=Uv(t.kernelConstraint),n.recurrentConstraint=Uv(t.recurrentConstraint),n.biasConstraint=Uv(t.biasConstraint),n.dropout=ay([1,iy([0,null==t.dropout?0:t.dropout])]),n.recurrentDropout=ay([1,iy([0,null==t.recurrentDropout?0:t.recurrentDropout])]),n.implementation=t.implementation,n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}return tv(t,e),t.prototype.build=function(e){var t=(e=$y(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){if(2!==e.length)throw new mv("GRUCell expects 2 input Tensors (inputs, h, c), got "+e.length+".");var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=$x((function(){return(0,Zg.JpU)(e)}),n.dropout,r,3)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=$x((function(){return(0,Zg.JpU)(a)}),n.recurrentDropout,r,3));var i,o,s,u=n.dropoutMask,l=n.recurrentDropoutMask;if(1===n.implementation){var c=cy(n.kernel.read(),0,n.units),f=cy(n.kernel.read(),n.units,n.units),p=cy(n.kernel.read(),2*n.units,n.units),d=cy(n.recurrentKernel.read(),0,n.units),h=cy(n.recurrentKernel.read(),n.units,n.units),m=cy(n.recurrentKernel.read(),2*n.units,n.units),g=void 0,v=void 0,y=void 0;0<n.dropout&&n.dropout<1?(g=(0,Zg.dC7)(e,u[0]),v=(0,Zg.dC7)(e,u[1]),y=(0,Zg.dC7)(e,u[2])):(g=e,v=e,y=e);var b=gy(g,c),w=gy(v,f),x=gy(y,p);if(n.useBias){var _=ly(n.bias.read(),0,n.units),N=ly(n.bias.read(),n.units,n.units),k=ly(n.bias.read(),2*n.units,n.units);b=by(b,_),w=by(w,N),x=by(x,k)}var E=void 0,S=void 0,C=void 0;0<n.recurrentDropout&&n.recurrentDropout<1?(E=(0,Zg.dC7)(a,l[0]),S=(0,Zg.dC7)(a,l[1]),C=(0,Zg.dC7)(a,l[2])):(E=a,S=a,C=a),i=n.recurrentActivation.apply((0,Zg.IHx)(b,gy(E,d))),o=n.recurrentActivation.apply((0,Zg.IHx)(w,gy(S,h))),s=n.activation.apply((0,Zg.IHx)(x,gy((0,Zg.dC7)(o,C),m)))}else{0<n.dropout&&n.dropout<1&&(e=(0,Zg.dC7)(e,u[0]));var I=gy(e,n.kernel.read());n.useBias&&(I=by(I,n.bias.read())),0<n.dropout&&n.dropout<1&&(a=(0,Zg.dC7)(a,l[0]));var O=gy(a,cy(n.recurrentKernel.read(),0,2*n.units)),P=(b=cy(I,0,n.units),w=cy(I,n.units,n.units),cy(O,0,n.units)),T=cy(O,n.units,n.units);i=n.recurrentActivation.apply((0,Zg.IHx)(b,P)),o=n.recurrentActivation.apply((0,Zg.IHx)(w,T)),x=cy(I,2*n.units,n.units);var A=gy((0,Zg.dC7)(o,a),cy(n.recurrentKernel.read(),2*n.units,n.units));s=n.activation.apply((0,Zg.IHx)(x,A))}var R=(0,Zg.IHx)((0,Zg.dC7)(i,a),(0,Zg.dC7)((0,Zg.IHx)(pv(1),(0,Zg.W76)(i)),s));return[R,R]}))},t.prototype.getConfig=function(){var t={units:this.units,activation:Iw(this.activation),recurrentActivation:Iw(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Fy(this.kernelInitializer),recurrentInitializer:Fy(this.recurrentInitializer),biasInitializer:Fy(this.biasInitializer),kernelRegularizer:Bw(this.kernelRegularizer),recurrentRegularizer:Bw(this.recurrentRegularizer),biasRegularizer:Bw(this.biasRegularizer),activityRegularizer:Bw(this.activityRegularizer),kernelConstraint:Fv(this.kernelConstraint),recurrentConstraint:Fv(this.recurrentConstraint),biasConstraint:Fv(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="GRUCell",t}(zx);Zg.m7h.SerializationMap.register(Fx);var Vx=function(e){function t(t){return 0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new Fx(t),e.call(this,t)||this}return tv(t,e),t.prototype.call=function(t,n){var r=this;return(0,Zg.lub)((function(){null!=r.cell.dropoutMask&&((0,Zg.B90)(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&((0,Zg.B90)(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==n?null:n.mask,i=null==n?null:n.training,o=null==n?null:n.initialState;return e.prototype.call.call(r,t,{mask:a,training:i,initialState:o})}))},Object.defineProperty(t.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var t={units:this.units,activation:Iw(this.activation),recurrentActivation:Iw(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Fy(this.kernelInitializer),recurrentInitializer:Fy(this.recurrentInitializer),biasInitializer:Fy(this.biasInitializer),kernelRegularizer:Bw(this.kernelRegularizer),recurrentRegularizer:Bw(this.recurrentRegularizer),biasRegularizer:Bw(this.biasRegularizer),activityRegularizer:Bw(this.activityRegularizer),kernelConstraint:Fv(this.kernelConstraint),recurrentConstraint:Fv(this.recurrentConstraint),biasConstraint:Fv(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return delete n.cell,Object.assign(t,n),t},t.fromConfig=function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)},t.className="GRU",t}(Lx);Zg.m7h.SerializationMap.register(Vx);var Ux=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=t.units,n.activation=Pw(void 0===t.activation?n.DEFAULT_ACTIVATION:t.activation),n.recurrentActivation=Pw(void 0===t.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),n.useBias=null==t.useBias||t.useBias,n.kernelInitializer=Vy(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=Vy(t.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=Vy(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.unitForgetBias=t.unitForgetBias,n.kernelRegularizer=Vw(t.kernelRegularizer),n.recurrentRegularizer=Vw(t.recurrentRegularizer),n.biasRegularizer=Vw(t.biasRegularizer),n.kernelConstraint=Uv(t.kernelConstraint),n.recurrentConstraint=Uv(t.recurrentConstraint),n.biasConstraint=Uv(t.biasConstraint),n.dropout=ay([1,iy([0,null==t.dropout?0:t.dropout])]),n.recurrentDropout=ay([1,iy([0,null==t.recurrentDropout?0:t.recurrentDropout])]),n.implementation=t.implementation,n.stateSize=[n.units,n.units],n.dropoutMask=null,n.recurrentDropoutMask=null,n}return tv(t,e),t.prototype.build=function(e){var t,n,r=(e=$y(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,i=this.units;t=new((n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tv(t,e),t.prototype.apply=function(e,t){var n=a.apply([i]),r=(new Sy).apply([i]),o=a.apply([2*i]);return dy(dy(n,r),o)},t}(ky)).className="CustomInit",n)}else t=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,t,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){var r=null!=t.training&&t.training;if(3!==e.length)throw new mv("LSTMCell expects 3 input Tensors (inputs, h, c), got "+e.length+".");var a=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=$x((function(){return(0,Zg.JpU)(e)}),n.dropout,r,4)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=$x((function(){return(0,Zg.JpU)(a)}),n.recurrentDropout,r,4));var o,s,u,l,c=n.dropoutMask,f=n.recurrentDropoutMask;if(1===n.implementation){var p=cy(n.kernel.read(),0,n.units),d=cy(n.kernel.read(),n.units,n.units),h=cy(n.kernel.read(),2*n.units,n.units),m=cy(n.kernel.read(),3*n.units,n.units),g=cy(n.recurrentKernel.read(),0,n.units),v=cy(n.recurrentKernel.read(),n.units,n.units),y=cy(n.recurrentKernel.read(),2*n.units,n.units),b=cy(n.recurrentKernel.read(),3*n.units,n.units),w=void 0,x=void 0,_=void 0,N=void 0;0<n.dropout&&n.dropout<1?(w=(0,Zg.dC7)(e,c[0]),x=(0,Zg.dC7)(e,c[1]),_=(0,Zg.dC7)(e,c[2]),N=(0,Zg.dC7)(e,c[3])):(w=e,x=e,_=e,N=e);var k=gy(w,p),E=gy(x,d),S=gy(_,h),C=gy(N,m);if(n.useBias){var I=ly(n.bias.read(),0,n.units),O=ly(n.bias.read(),n.units,n.units),P=ly(n.bias.read(),2*n.units,n.units),T=ly(n.bias.read(),3*n.units,n.units);k=by(k,I),E=by(E,O),S=by(S,P),C=by(C,T)}var A=void 0,R=void 0,D=void 0,M=void 0;0<n.recurrentDropout&&n.recurrentDropout<1?(A=(0,Zg.dC7)(a,f[0]),R=(0,Zg.dC7)(a,f[1]),D=(0,Zg.dC7)(a,f[2]),M=(0,Zg.dC7)(a,f[3])):(A=a,R=a,D=a,M=a),o=n.recurrentActivation.apply((0,Zg.IHx)(k,gy(A,g))),s=n.recurrentActivation.apply((0,Zg.IHx)(E,gy(R,v))),u=(0,Zg.IHx)((0,Zg.dC7)(s,i),(0,Zg.dC7)(o,n.activation.apply((0,Zg.IHx)(S,gy(D,y))))),l=n.recurrentActivation.apply((0,Zg.IHx)(C,gy(M,b)))}else{0<n.dropout&&n.dropout<1&&(e=(0,Zg.dC7)(e,c[0]));var L=gy(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=(0,Zg.dC7)(a,f[0])),L=(0,Zg.IHx)(L,gy(a,n.recurrentKernel.read())),n.useBias&&(L=by(L,n.bias.read()));var z=cy(L,0,n.units),j=cy(L,n.units,n.units),B=cy(L,2*n.units,n.units),F=cy(L,3*n.units,n.units);o=n.recurrentActivation.apply(z),s=n.recurrentActivation.apply(j),u=(0,Zg.IHx)((0,Zg.dC7)(s,i),(0,Zg.dC7)(o,n.activation.apply(B))),l=n.recurrentActivation.apply(F)}var V=(0,Zg.dC7)(l,n.activation.apply(u));return[V,V,u]}))},t.prototype.getConfig=function(){var t={units:this.units,activation:Iw(this.activation),recurrentActivation:Iw(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Fy(this.kernelInitializer),recurrentInitializer:Fy(this.recurrentInitializer),biasInitializer:Fy(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Bw(this.kernelRegularizer),recurrentRegularizer:Bw(this.recurrentRegularizer),biasRegularizer:Bw(this.biasRegularizer),activityRegularizer:Bw(this.activityRegularizer),kernelConstraint:Fv(this.kernelConstraint),recurrentConstraint:Fv(this.recurrentConstraint),biasConstraint:Fv(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="LSTMCell",t}(zx);Zg.m7h.SerializationMap.register(Ux);var Wx=function(e){function t(t){return 0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new Ux(t),e.call(this,t)||this}return tv(t,e),t.prototype.call=function(t,n){var r=this;return(0,Zg.lub)((function(){null!=r.cell.dropoutMask&&((0,Zg.B90)(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&((0,Zg.B90)(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==n?null:n.mask,i=null==n?null:n.training,o=null==n?null:n.initialState;return e.prototype.call.call(r,t,{mask:a,training:i,initialState:o})}))},Object.defineProperty(t.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unitForgetBias",{get:function(){return this.cell.unitForgetBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var t={units:this.units,activation:Iw(this.activation),recurrentActivation:Iw(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Fy(this.kernelInitializer),recurrentInitializer:Fy(this.recurrentInitializer),biasInitializer:Fy(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Bw(this.kernelRegularizer),recurrentRegularizer:Bw(this.recurrentRegularizer),biasRegularizer:Bw(this.biasRegularizer),activityRegularizer:Bw(this.activityRegularizer),kernelConstraint:Fv(this.kernelConstraint),recurrentConstraint:Fv(this.recurrentConstraint),biasConstraint:Fv(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return delete n.cell,Object.assign(t,n),t},t.fromConfig=function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)},t.className="LSTM",t}(Lx);Zg.m7h.SerializationMap.register(Wx);var qx=function(e){function t(t){var n=e.call(this,t)||this;return n.cells=t.cells,n}return tv(t,e),Object.defineProperty(t.prototype,"stateSize",{get:function(){for(var e=[],t=0,n=this.cells.slice().reverse();t<n.length;t++){var r=n[t];Array.isArray(r.stateSize)?e.push.apply(e,r.stateSize):e.push(r.stateSize)}return e},enumerable:!0,configurable:!0}),t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){for(var r=e.slice(1),a=[],i=0,o=n.cells.slice().reverse();i<o.length;i++){var s=o[i];Array.isArray(s.stateSize)?a.push(r.splice(0,s.stateSize.length)):a.push(r.splice(0,1))}a.reverse();for(var u,l=[],c=0;c<n.cells.length;++c)s=n.cells[c],r=a[c],u=0===c?[e[0]].concat(r):[u[0]].concat(r),u=s.call(u,t),l.push(u.slice(1));r=[];for(var f=0,p=l.slice().reverse();f<p.length;f++){var d=p[f];r.push.apply(r,d)}return[u[0]].concat(r)}))},t.prototype.build=function(e){var t;Uy(e)&&(e=e[0]);for(var n=0,r=this.cells;n<r.length;n++){var a=r[n];a.build(e),t=Array.isArray(a.stateSize)?a.stateSize[0]:a.stateSize,e=[e[0],t]}this.built=!0},t.prototype.getConfig=function(){for(var t=[],n=0,r=this.cells;n<r.length;n++){var a=r[n];t.push({className:this.getClassName(),config:a.getConfig()})}var i={cells:t},o=e.prototype.getConfig.call(this);return Object.assign(i,o),i},t.fromConfig=function(e,t,n){void 0===n&&(n={});for(var r=[],a=0,i=t.cells;a<i.length;a++){var o=i[a];r.push(Hb(o,n))}return new e({cells:r})},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){if(!this.trainable)return[];for(var e=[],t=0,n=this.cells;t<n.length;t++){var r=n[t];e.push.apply(e,r.trainableWeights)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){for(var e=[],t=0,n=this.cells;t<n.length;t++){var r=n[t];e.push.apply(e,r.nonTrainableWeights)}if(!this.trainable){for(var a=[],i=0,o=this.cells;i<o.length;i++)r=o[i],a.push.apply(a,r.trainableWeights);return a.concat(e)}return e},enumerable:!0,configurable:!0}),t.prototype.getWeights=function(){for(var e=[],t=0,n=this.cells;t<n.length;t++){var r=n[t];e.push.apply(e,r.weights)}return Yy(e)},t.prototype.setWeights=function(e){for(var t=[],n=0,r=this.cells;n<r.length;n++)for(var a=r[n],i=a.weights.length,o=e.splice(i),s=0;s<a.weights.length;++s)t.push([a.weights[s],o[s]]);Xy(t)},t.className="StackedRNNCells",t}(zx);function $x(e,t,n,r){function a(){return wy(e(),pv(t))}if(void 0===n&&(n=null),void 0===r&&(r=1),r>1){for(var i=[],o=0;o<r;o++)i.push(xy(a,e,n));return i.forEach((function(e){return(0,Zg.CnY)(e)})),i}return(0,Zg.CnY)(xy(a,e,n))}Zg.m7h.SerializationMap.register(qx);var Hx=function(e){function t(t){var n=e.call(this,t)||this;return n.layer=t.layer,n}return tv(t,e),t.prototype.build=function(e){this.built=!0},Object.defineProperty(t.prototype,"trainable",{get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.layer.trainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.layer.nonTrainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updates",{get:function(){return this.layer._updates},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"losses",{get:function(){return this.layer.losses},enumerable:!0,configurable:!0}),t.prototype.getWeights=function(){return this.layer.getWeights()},t.prototype.setWeights=function(e){this.layer.setWeights(e)},t.prototype.getConfig=function(){var t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.fromConfig=function(e,t,n){void 0===n&&(n={});var r=Hb(t.layer,n);delete t.layer;var a={layer:r};return Object.assign(a,t),new e(a)},t}(nb),Kx=function(e){function t(t){var n=e.call(this,t)||this;return n.supportsMasking=!0,n}return tv(t,e),t.prototype.build=function(t){if((t=$y(t)).length<3)throw new mv("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(t));this.inputSpec=[{shape:t}];var n=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),e.prototype.build.call(this,t)},t.prototype.computeOutputShape=function(e){var t=[(e=$y(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){return Mx((function(e,r){return[n.layer.call(e,t),[]]}),e=qy(e),[],!1,null,null,!1,e.shape[1])[1]}))},t.className="TimeDistributed",t}(Hx);Zg.m7h.SerializationMap.register(Kx);var Gx=["sum","mul","concat","ave"];var Yx=function(e){function t(t){var n=e.call(this,t)||this,r=t.layer.getConfig();if(n.forwardLayer=Hb({className:t.layer.getClassName(),config:r}),r.goBackwards=!0!==r.goBackwards,n.backwardLayer=Hb({className:t.layer.getClassName(),config:r}),n.forwardLayer.name="forward_"+n.forwardLayer.name,n.backwardLayer.name="backward_"+n.backwardLayer.name,function(e){Tv(Gx,"BidirectionalMergeMode",e)}(t.mergeMode),n.mergeMode=t.mergeMode,t.weights)throw new gv("weights support is not implemented for Bidirectional layer yet.");return n._stateful=t.layer.stateful,n.returnSequences=t.layer.returnSequences,n.returnState=t.layer.returnState,n.supportsMasking=!0,n._trainable=!0,n.inputSpec=t.layer.inputSpec,n.numConstants=null,n}return tv(t,e),Object.defineProperty(t.prototype,"trainable",{get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)},enumerable:!0,configurable:!0}),t.prototype.getWeights=function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())},t.prototype.setWeights=function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))},t.prototype.computeOutputShape=function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState?(r=a.slice(1),t=a[0]):t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):xv(n)},t.prototype.apply=function(t,n){var r=null==n?null:n.initialState,a=null==n?null:n.constants;null==n&&(n={});var i=Dx(t,r,a,this.numConstants);if(t=i.inputs,r=i.initialState,a=i.constants,Array.isArray(t)&&(r=t.slice(1),t=t[0]),(null==r||0===r.length)&&null==a)return e.prototype.apply.call(this,t,n);var o=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new mv("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push.apply(o,r);var l=r.map((function(e){return new Jy({shape:e.shape})}));this.forwardLayer.stateSpec=l.slice(0,u/2),this.backwardLayer.stateSpec=l.slice(u/2),s.push.apply(s,l)}if(null!=a)throw new gv("Support for constants in Bidirectional layers is not implemented yet.");for(var c=o[0]instanceof Qy,f=0,p=o;f<p.length;f++)if(p[f]instanceof Qy!==c)throw new mv("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){var d=[t].concat(o),h=this.inputSpec.concat(s),m=this.inputSpec;this.inputSpec=h;var g=e.prototype.apply.call(this,d,n);return this.inputSpec=m,g}return e.prototype.apply.call(this,t,n)},t.prototype.call=function(e,t){var n=this;return(0,Zg.lub)((function(){if(null!=t.mask)throw new gv("The support for masking is not implemented for Bidirectional layers yet.");var r,a,i,o,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var u=s.slice(0,s.length/2),l=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),a=n.forwardLayer.call(e,Object.assign(t,{initialState:l}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=(0,Zg.GYS)(a,1)),"concat"===n.mergeMode?o=py([r,a]):"sum"===n.mergeMode?o=(0,Zg.IHx)(r,a):"ave"===n.mergeMode?o=(0,Zg.dC7)(pv(.5),(0,Zg.IHx)(r,a)):"mul"===n.mergeMode?o=(0,Zg.dC7)(r,a):null==n.mergeMode&&(o=[r,a]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))},t.prototype.resetStates=function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()},t.prototype.build=function(e){var t=this;Xv(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),Xv(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var t={mergeMode:this.mergeMode},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.fromConfig=function(e,t){var n=Hb(t.layer);if(delete t.layer,null!=t.numConstants)throw new gv("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)},t.className="Bidirectional",t}(Hx);function Xx(e){return new kx(e)}function Jx(e){return new Cx(e)}function Qx(e){return new Px(e)}function Zx(e){return new Rx(e)}function e_(e){return new Nx(e)}function t_(e){return new Sx(e)}Zg.m7h.SerializationMap.register(Yx);var n_=Qx,r_=Zx,a_=e_,i_=t_,o_=Object.freeze({inputLayer:function(e){return new ab(e)},elu:function(e){return new Rw(e)},reLU:function(e){return new Tw(e)},leakyReLU:function(e){return new Aw(e)},softmax:function(e){return new Mw(e)},thresholdedReLU:function(e){return new Dw(e)},conv1d:function(e){return new Qw(e)},conv2d:function(e){return new Gw(e)},conv2dTranspose:function(e){return new Yw(e)},separableConv2d:function(e){return new Jw(e)},cropping2D:function(e){return new Zw(e)},upSampling2d:function(e){return new ex(e)},depthwiseConv2d:function(e){return new tx(e)},activation:function(e){return new ix(e)},dense:function(e){return new rx(e)},dropout:function(e){return new nx(e)},flatten:function(e){return new ax(e)},repeatVector:function(e){return new ox(e)},reshape:function(e){return new sx(e)},permute:function(e){return new ux(e)},embedding:function(e){return new lx(e)},add:function(e){return new fx(e)},average:function(e){return new dx(e)},concatenate:function(e){return new gx(e)},maximum:function(e){return new hx(e)},minimum:function(e){return new mx(e)},multiply:function(e){return new px(e)},batchNormalization:function(e){return new bx(e)},zeroPadding2d:function(e){return new wx(e)},averagePooling1d:Xx,avgPool1d:function(e){return Xx(e)},avgPooling1d:function(e){return Xx(e)},averagePooling2d:Jx,avgPool2d:function(e){return Jx(e)},avgPooling2d:function(e){return Jx(e)},globalAveragePooling1d:function(e){return new Ox(e)},globalAveragePooling2d:function(e){return new Ax(e)},globalMaxPooling1d:Qx,globalMaxPooling2d:Zx,maxPooling1d:e_,maxPooling2d:t_,gru:function(e){return new Vx(e)},gruCell:function(e){return new Fx(e)},lstm:function(e){return new Wx(e)},lstmCell:function(e){return new Ux(e)},simpleRNN:function(e){return new Bx(e)},simpleRNNCell:function(e){return new jx(e)},rnn:function(e){return new Lx(e)},stackedRNNCells:function(e){return new qx(e)},bidirectional:function(e){return new Yx(e)},timeDistributed:function(e){return new Kx(e)},globalMaxPool1d:n_,globalMaxPool2d:r_,maxPool1d:a_,maxPool2d:i_,Layer:nb,RNN:Lx,RNNCell:zx,input:function(e){return ib(e)}});Object.freeze({binaryAccuracy:function(e,t){return Ob(e,t)},binaryCrossentropy:function(e,t){return Tb(e,t)},categoricalAccuracy:function(e,t){return Pb(e,t)},categoricalCrossentropy:function(e,t){return Bb(e,t)},cosineProximity:function(e,t){return Cb(e,t)},meanAbsoluteError:function(e,t){return mb(e,t)},meanAbsolutePercentageError:function(e,t){return gb(e,t)},MAPE:function(e,t){return gb(e,t)},mape:function(e,t){return gb(e,t)},meanSquaredError:function(e,t){return hb(e,t)},MSE:function(e,t){return hb(e,t)},mse:function(e,t){return hb(e,t)}});Object.freeze({l1l2:function(e){return new zw(e)},l1:function(e){return function(e){return new zw({l1:null!=e?e.l1:null,l2:0})}(e)},l2:function(e){return function(e){return new zw({l2:null!=e?e.l2:null,l1:0})}(e)}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t}tv(t,e),t.prototype.setModel=function(e){if(!(e instanceof fw))throw new Error("model must be a Model, not some other Container");this.model=e}}(sb);var s_,u_=__webpack_require__(930),l_=(Zg.jTM,u_.gJ,function(e){var t=Math.min(e.shape[0],e.shape[1]),n=e.shape[0]/2-t/2,r=e.shape[1]/2-t/2;return e.slice([n,r,0],[t,t,3])}),c_=function(){var e=i(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zg.lub((function(){return l_(Zg.BHj.resizeBilinear(t,n)).expandDims(0).toFloat().div(Zg.iD$(127)).sub(Zg.iD$(1))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f_=c_,p_=function(e){return e.reduce((function(e,t){return void 0!==e[t]?e:f(f({},e),{},l({},t,Object.keys(e).length))}),{})},d_="mobilenet_v1_0.25_224",h_=l({},d_,{url:"https://storage.googleapis.com/tfjs-models/tfjs/mobilenet_v1_0.25_224/model.json",layer:"conv_pw_13_relu"}),m_=function(){var e=i(r().mark((function e(){var t,n,a,i,o=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=o.length>0&&void 0!==o[0]?o[0]:d_)instanceof fw)){e.next=3;break}return e.abrupt("return",t);case 3:if(h_[t]){e.next=5;break}throw new Error("You have supplied an invalid key for a pretrained model");case 5:return n=h_[t],e.next=8,mw(n.url);case 8:return a=e.sent,i=a.getLayer(n.layer),e.abrupt("return",hw({inputs:[a.inputs[0]],outputs:i.output}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g_=m_,v_=function(e){var t=e.classes;return[o_.flatten({inputShape:[7,7,256]}),o_.dense({units:100,activation:"relu",kernelInitializer:"varianceScaling",useBias:!0}),o_.dense({units:t,kernelInitializer:"varianceScaling",useBias:!1,activation:"softmax"})]},y_=function(e,t){return e||(void 0!==t?Math.floor(.4*t.shape[0])||1:void 0)},b_=function(e,t,n,r,a){if(a.trainingModel)return"function"===typeof a.trainingModel?a.trainingModel(t,n,r):a.trainingModel;var i=function(e){return new dw(e)}({layers:v_({classes:n})}),o=Zg.p_j.adam(1e-4);return i.compile({optimizer:o,loss:"categoricalCrossentropy",metrics:["accuracy"]}),i},w_=function(){var e=i(r().mark((function e(t,n,a,i,o){var s,u,l,c,p;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.xs,u=n.ys,void 0!==s&&void 0!==u){e.next=3;break}throw new Error("Add some examples before training!");case 3:return l=b_(0,n,a,i,o),c=y_(i.batchSize,s),e.next=7,l.fit(s,u,f(f({},i),{},{batchSize:c,epochs:i.epochs||20}));case 7:return p=e.sent,e.abrupt("return",{model:l,history:p});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),x_=w_,__=function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Image;r.src=t,r.crossOrigin="Anonymous",r.onload=function(){return e(r)},r.onerror=function(e){return n(e)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N_=function(){var e=i(r().mark((function e(t,n){var a,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=document.createElement("canvas"),!(i=a.getContext("2d"))){e.next=6;break}return i.drawImage.apply(i,[t,0,0,t.width,t.height,0,0].concat(Zt(n))),o=i.getImageData.apply(i,[0,0].concat(Zt(n))),e.abrupt("return",o);case 6:throw new Error("No context found; are you in the browser?");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k_=function(){var e=i(r().mark((function e(t,n){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N_(t,n);case 2:return a=e.sent,e.abrupt("return",E_(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E_=function(){var e=i(r().mark((function e(t){var n,a,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,a=t.width,i=t.height,e.abrupt("return",Zg.wOQ(Array.from(n),[a,i,4]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S_=function(){var e=i(r().mark((function e(t,n,a){var i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zg.glt();case 2:if(!(t instanceof Zg.wOQ)){e.next=6;break}return e.abrupt("return",t);case 6:if("string"!==typeof t){e.next=17;break}return e.next=9,__(t);case 9:return i=e.sent,e.next=12,Zg.glt();case 12:return e.next=14,k_(i,n);case 14:case 29:return e.abrupt("return",e.sent);case 17:if(!(t instanceof HTMLImageElement)){e.next=26;break}return e.next=20,k_(t,n);case 20:return o=e.sent,e.next=23,Zg.glt();case 23:return e.abrupt("return",o);case 26:if(!(t instanceof ImageData)){e.next=30;break}return e.next=29,E_(t);case 30:throw new Error("Unsupported image type");case 31:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),C_=function(){var e=i(r().mark((function e(t,n,a){var i,o,s,u,l,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[],o=[],s=[],u=0;case 4:if(!(u<t.length)){e.next=22;break}return l=t[u],e.prev=6,e.next=9,S_(l,n,u);case 9:c=e.sent,i.push(c),a&&s.push(a[u]),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),o.push({image:l,error:e.t0,index:u});case 17:return e.next=19,Zg.glt();case 19:u++,e.next=4;break;case 22:return e.abrupt("return",{images:i,errors:o,labels:s});case 23:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,n,r){return e.apply(this,arguments)}}(),I_=C_,O_=function(e){return function(e){return Object.entries(e).sort((function(e,t){return e[1]-t[1]})).map((function(e){return u(e,1)[0]}))}(e).join("-")},P_=function(e){return"downloads://ml-classifier-".concat(O_(e))},T_=function(e){var t=Zg.CnY(e[0]);return e.slice(1).reduce((function(e,t){return Zg.lub((function(){var n=Zg.CnY(e.concat(t,0));return e.dispose(),n}))}),t)},A_=function(e,t){var n=Object.keys(t).length;if(n<=1)throw new Error("You must provide more than 1 class for training");return e.reduce((function(e,r){var a=function(e,t){return Zg.lub((function(){return Zg.lfX(Zg.RRF([e]).toInt(),t)}))}(t[r],n);return Zg.lub((function(){if(void 0===e)return Zg.CnY(a);var t=e,n=Zg.CnY(t.concat(a,0));return t.dispose(),a.dispose(),n}))}),void 0)},R_=Nn((function e(t){var n=this;xn(this,e),this.pretrainedModel=void 0,this.model=void 0,this.callbacks=[],this.args=void 0,this.data={classes:{}},this.callbackFn=function(e,t){var r="".concat(e).concat(t.substring(0,1).toUpperCase()).concat(t.substring(1));if(n.args[r]&&"function"===typeof n.args[r]){for(var a,i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];(a=n.args)[r].apply(a,o)}},this.init=i(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.callbackFn("onLoad","start"),e.next=3,g_(n.args.pretrainedModel);case 3:return n.pretrainedModel=e.sent,n.callbacks.map((function(e){return e()})),n.callbackFn("onLoad","complete"),e.next=8,n.getInputDims();case 8:t=e.sent,Zg.lub((function(){n.pretrainedModel.predict(Zg.lls([1].concat(Zt(t),[3])))}));case 10:case"end":return e.stop()}}),e)}))),this.loaded=i(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){if(n.pretrainedModel)return e();n.callbacks.push((function(){e()}))})));case 1:case"end":return e.stop()}}),e)}))),this.cropAndActivateImage=function(){var e=i(r().mark((function e(t){var a,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.loaded();case 2:return e.next=4,n.getInputDims();case 4:return a=e.sent,e.next=7,Zg.glt();case 7:return e.next=9,f_(t,a);case 9:return i=e.sent,e.next=12,Zg.glt();case 12:return o=n.pretrainedModel.predict(i),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getInputDims=i(r().mark((function e(){var t,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.loaded();case 2:return t=n.pretrainedModel.inputLayers,a=t[0].batchInputShape,e.abrupt("return",[a[1],a[2]]);case 5:case"end":return e.stop()}}),e)}))),this.getData=function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("train"===t||"eval"===t){e.next=2;break}throw new Error("Datatype ".concat(t," unsupported"));case 2:return e.abrupt("return",{xs:n.data[t].xs,ys:n.data[t].ys,classes:n.data.classes});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getModel=function(){return n.model},this.addData=function(){var e=i(r().mark((function e(t,a){var i,o,s,u,l,c,f,p,d,h,m,g,v=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"train",n.callbackFn("onAddData","start",t,a,i),t){e.next=4;break}throw new Error("You must supply images");case 4:if(a){e.next=6;break}throw new Error("You must supply labels");case 6:return e.next=8,n.getInputDims();case 8:return o=e.sent,e.next=11,I_(t,o,a);case 11:if(s=e.sent,u=s.images,l=s.errors,c=s.labels,u.length===c.length){e.next=17;break}throw new Error("Class mismatch between labels and images");case 17:if("train"!==i&&"eval"!==i){e.next=39;break}f=[],p=0;case 20:if(!(p<u.length)){e.next=31;break}return d=u[p],e.next=24,n.cropAndActivateImage(d);case 24:return h=e.sent,f.push(h),e.next=28,Zg.glt();case 28:p++,e.next=20;break;case 31:return n.data.classes=p_(c),m=T_(f),e.next=35,Zg.glt();case 35:return g=A_(c,n.data.classes),e.next=38,Zg.glt();case 38:n.data[i]={xs:m,ys:g};case 39:return e.next=41,Zg.glt();case 41:n.callbackFn("onAddData","complete",t,c,i,l);case 42:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.clearData=function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.callbackFn("onClearData","start",t),t&&(n.data[t]={}),n.data.train={},n.data.eval={},n.callbackFn("onClearData","complete",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.train=i(r().mark((function e(){var t,a,i,o,s,u,l=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},n.callbackFn("onTrain","start",t),e.next=4,n.loaded();case 4:return e.next=6,n.getData("train");case 6:if((a=e.sent).xs){e.next=9;break}throw new Error("You must add some training examples");case 9:if(a.ys){e.next=11;break}throw new Error("You must add some training labels");case 11:if(!((i=Object.keys(a.classes).length)<=1)){e.next=14;break}throw new Error("You must train with more than one class");case 14:return e.next=16,x_(n.pretrainedModel,a,i,t,n.args);case 16:return o=e.sent,s=o.model,u=o.history,n.model=s,n.callbackFn("onTrain","complete",t,u),e.abrupt("return",u);case 22:case"end":return e.stop()}}),e)}))),this.predict=function(){var e=i(r().mark((function e(t,a){var i,o,s,c,p,d,h,m,g,v,y;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.callbackFn("onPredict","start",t),e.next=4,n.loaded();case 4:if(n.model){e.next=6;break}throw new Error("You must call train prior to calling predict");case 6:return e.next=8,n.getInputDims();case 8:return s=e.sent,e.next=11,I_([t],s);case 11:if(c=e.sent,p=c.images,!(d=c.errors)||!d.length||p[0]){e.next=16;break}throw d[0].error;case 16:return h=p[0],e.next=19,n.cropAndActivateImage(h);case 19:return m=e.sent,g=Zg.lub((function(){var e=n.model.predict(m);return i=(i=(i=(i=(i=(i=e.toString()).replace(/[\\[\]']+/g,"")).replace(/["Tensor"]+/g,"")).trim()).replaceAll(",","")).split(" "),o=i.map((function(e){return(100*parseFloat(e.replace("-","e-"))).toFixed(2)})),e.as1D().argMax()})),e.next=23,g.data();case 23:return v=e.sent[0],g.dispose(),y=Object.entries(n.data.classes).reduce((function(e,t){var n=u(t,2),r=n[0],a=n[1];return f(f({},e),{},l({},a,r))}),{})[v],n.callbackFn("onPredict","complete",t,a,y,o),e.abrupt("return",y);case 30:e.prev=30,e.t0=e.catch(0),console.error(e.t0,t,a);case 33:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t,n){return e.apply(this,arguments)}}(),this.evaluate=i(r().mark((function e(){var t,a,i,o=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n.callbackFn("onEvaluate","start",t),e.next=4,n.loaded();case 4:if(n.model){e.next=6;break}throw new Error("You must call train prior to calling predict");case 6:return e.next=8,n.getData("eval");case 8:if((a=e.sent).xs&&a.ys){e.next=11;break}throw new Error("You must add some evaluation examples");case 11:return e.next=13,n.model.evaluate(a.xs,a.ys,t);case 13:return i=e.sent,n.callbackFn("onEvaluate","complete",t,i),e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)}))),this.save=function(){var e=i(r().mark((function e(t){var a,i,o=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:{},n.callbackFn("onSave","start",t,a),e.next=4,n.loaded();case 4:if(n.model){e.next=6;break}throw new Error("You must call train prior to calling save");case 6:return e.next=8,n.model.save(t||P_(n.data.classes),a);case 8:return i=e.sent,n.callbackFn("onSave","complete",t,a,i),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.args=t,this.init()})),D_=R_,M_="ClassifierCore_classifier__YUPGr",L_="ClassifierCore_classifierAlt__0Yhvk",z_=Math.pow(2,31)-1;function j_(e,t,n){var r=n-Date.now();e.current=r<=z_?setTimeout(t,r):setTimeout((function(){return j_(e,t,n)}),z_)}function B_(){var t=bn(),n=(0,e.useRef)();return gn((function(){return clearTimeout(n.current)})),(0,e.useMemo)((function(){var e=function(){return clearTimeout(n.current)};return{set:function(r,a){void 0===a&&(a=0),t()&&(e(),a<=z_?n.current=setTimeout(r,a):j_(n,r,Date.now()+a))},clear:e}}),[])}var F_=(l(s_={},pt,"showing"),l(s_,ht,"showing show"),s_),V_=e.forwardRef((function(e,t){return(0,B.jsx)(Qn,f(f({},e),{},{ref:t,transitionClasses:F_}))}));V_.displayName="ToastFade";var U_=V_,W_=e.createContext({onClose:function(){}}),q_=["bsPrefix","closeLabel","closeVariant","closeButton","className","children"],$_=e.forwardRef((function(t,n){var r=t.bsPrefix,a=t.closeLabel,i=t.closeVariant,o=t.closeButton,s=t.className,u=t.children,l=d(t,q_);r=te(r,"toast-header");var c=(0,e.useContext)(W_),p=j((function(e){null==c||null==c.onClose||c.onClose(e)}));return(0,B.jsxs)("div",f(f({ref:n},l),{},{className:m()(r,s),children:[u,o&&(0,B.jsx)(ur,{"aria-label":a,variant:i,onClick:p,"data-dismiss":"toast"})]}))}));$_.displayName="ToastHeader",$_.defaultProps={closeLabel:"Close",closeButton:!0};var H_=$_,K_=ve("toast-body"),G_=["bsPrefix","className","transition","show","animation","delay","autohide","onClose","bg"],Y_=e.forwardRef((function(t,n){var r=t.bsPrefix,a=t.className,i=t.transition,o=void 0===i?U_:i,s=t.show,u=void 0===s||s,l=t.animation,c=void 0===l||l,p=t.delay,h=void 0===p?5e3:p,g=t.autohide,v=void 0!==g&&g,y=t.onClose,b=t.bg,w=d(t,G_);r=te(r,"toast");var x=(0,e.useRef)(h),_=(0,e.useRef)(y);(0,e.useEffect)((function(){x.current=h,_.current=y}),[h,y]);var N=B_(),k=!(!v||!u),E=(0,e.useCallback)((function(){k&&(null==_.current||_.current())}),[k]);(0,e.useEffect)((function(){N.set(E,x.current)}),[N,E]);var S=(0,e.useMemo)((function(){return{onClose:y}}),[y]),C=!(!o||!c),I=(0,B.jsx)("div",f(f({},w),{},{ref:n,className:m()(r,a,b&&"bg-".concat(b),!C&&(u?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"}));return(0,B.jsx)(W_.Provider,{value:S,children:C&&o?(0,B.jsx)(o,{in:u,unmountOnExit:!0,children:I}):I})}));Y_.displayName="Toast";var X_=Object.assign(Y_,{Body:K_,Header:H_}),J_=["bsPrefix","position","containerPosition","className","as"],Q_={"top-start":"top-0 start-0","top-center":"top-0 start-50 translate-middle-x","top-end":"top-0 end-0","middle-start":"top-50 start-0 translate-middle-y","middle-center":"top-50 start-50 translate-middle","middle-end":"top-50 end-0 translate-middle-y","bottom-start":"bottom-0 start-0","bottom-center":"bottom-0 start-50 translate-middle-x","bottom-end":"bottom-0 end-0"},Z_=e.forwardRef((function(e,t){var n=e.bsPrefix,r=e.position,a=e.containerPosition,i=void 0===a?"absolute":a,o=e.className,s=e.as,u=void 0===s?"div":s,l=d(e,J_);return n=te(n,"toast-container"),(0,B.jsx)(u,f(f({ref:t},l),{},{className:m()(n,r&&[i?"position-".concat(i):null,Q_[r]],o)}))}));Z_.displayName="ToastContainer";var eN=Z_,tN="Evaluation_prediction_card__6kDQr",nN="Evaluation_noMatch__bzLY4",rN="Evaluation_match__Cj4oJ",aN="Evaluation_sureLink__ksGbB",iN="Evaluation_predictionRow__0DWlI",oN=function(t){var n=t.predictionData,r=n.label,a=n.src,i=n.score,o=n.prediction,s=u((0,e.useState)(!1),2),l=s[0],c=s[1],f=function(){return c(!l)};return(0,B.jsxs)(B.Fragment,{children:[i&&(0,B.jsxs)("article",{children:[" ",(0,B.jsxs)("div",{"aria-live":"polite","aria-atomic":"true",className:"position-relative",children:[(0,B.jsx)(eN,{position:"top-center",children:(0,B.jsxs)(X_,{show:l,onClose:f,style:{backgroundColor:"rgba(255,255,255)"},children:[(0,B.jsxs)(X_.Header,{children:[(0,B.jsx)("img",{src:"holder.js/20x20?text=%20",className:"rounded me-2",alt:""}),(0,B.jsx)("strong",{className:"me-auto",children:"Sure"})]}),(0,B.jsxs)(X_.Body,{children:[" ",'This machine learning model learns a boundary that helps separate where home cooked and factory made meals tend to lie. Any given meal might lie more towards the home cooked or the factory made meal side. Where the meal falls is translated into how well it "fits" each side and is given as two "sureness" percentages. A decision rule is needed to interpret the "sureness" and decide which kind of meal your image is. Given these two fits, what boundary would you use to decide what category of meal it is? Some people use 50% as their boundary line.']})]})})," "]}),(0,B.jsxs)("p",{className:"text-center",children:["Is it ",(0,B.jsx)("strong",{children:r}),"?"]}),(0,B.jsx)("p",{children:"Category Probability: "}),(0,B.jsxs)("p",{children:["Your model is ",(0,B.jsxs)("span",{children:[i[1]===r?i[0]:i[2],"%"]})," ",(0,B.jsx)("span",{className:aN,onClick:f,children:"sure"})," ","it is ",r," and"," "]})," ",(0,B.jsxs)("p",{children:["is ",(0,B.jsxs)("span",{children:[i[1]===r?i[2]:i[0],"%"]})," ",(0,B.jsx)("span",{className:aN,onClick:f,children:"sure"})," ","it is ",i[1]===r?i[3]:i[1]]}),(0,B.jsx)("img",{src:a,className:"mx-auto my-2 w-75 d-flex justify-content-center",alt:""}),(0,B.jsxs)("p",{className:"mb-0",children:["Predicted as: ",o," "]})]}),!i&&(0,B.jsx)("section",{children:(0,B.jsx)("p",{className:"text-center",children:"Click on an image to view its stats."})})]})},sN=function(e){var t=e.prediction,n=t.src,r=t.prediction,a=t.label;return(0,B.jsxs)("div",{className:"my-2 ".concat(tN),children:[(0,B.jsx)("img",{src:n,className:"w-100 d-flex justify-content-center mx-auto ",alt:"".concat(a," predicted as ").concat(r)}),(0,B.jsx)("p",{className:r===a?rN:nN,children:r})]})},uN=function(e){var t=e.score;return(0,B.jsxs)("div",{className:"mt-4 container",children:[(0,B.jsx)("h1",{children:"Results"}),(0,B.jsx)("hr",{}),(0,B.jsx)("div",{className:"row",children:(0,B.jsxs)("div",{className:"col",children:[(0,B.jsx)("h5",{children:"Your model's accuracy "}),(0,B.jsxs)("h1",{children:[t,"% "]})]})}),(0,B.jsx)("p",{className:"lead text-muted font-weight-light fs-4",children:"Congrats on running your test! Just so you have a comparison, most industry AI systems are about 70-90% accurate. But as scientists we often learn more when we falsify a hypothesis, so all experiments are good accomplishments."})]})},lN=function(e){var t=e.predictions,n=e.onClick,r=function(e){n(e)},a=[];return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("section",{className:"row ".concat(iN),children:t.map((function(e,t){var n=e.label===e.prediction;return a.push(n),(0,B.jsx)("div",{className:"col-md-4",onClick:function(){r(e)},children:(0,B.jsx)(sN,{prediction:e})},t)}))}),(0,B.jsx)(uN,{score:(a.filter((function(e){return!0===e})).length/a.length*100).toFixed(1)})]})},cN=function(t){var n=t.predict,a=u((0,e.useState)([]),2),o=a[0],s=a[1],l=$a((function(e){return e.setValue})),c=$a((function(e){return e.predictions})),f=function(){var e=i(r().mark((function e(t){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kg(t);case 2:a=e.sent,n(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s([]),n(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:"row",hidden:c.length>0,children:(0,B.jsx)("div",{className:"mx-auto  mt-4 col-md-4",children:(0,B.jsx)($g,{onParseFiles:f,onParseObject:p,mode:"Evaluate Images",children:"Drop Images to test"})})}),(0,B.jsxs)("div",{className:"row justify-content-center",hidden:0===c.length,children:[(0,B.jsx)("div",{className:"col-md-6",children:(0,B.jsx)(lN,{predictions:c,onClick:function(e){s(e)}})}),(0,B.jsxs)("div",{className:"col-md-4",children:[(0,B.jsx)(oN,{predictionData:o}),(0,B.jsx)("button",{className:"btn btn-primary w-100",onClick:function(){return l("predictions",[])},hidden:0===c.length,children:"Pick New Images"})]})]})]})},fN=function(e){e.labels,e.onDownload,e.downloading;var t=e.predict,n=(e.logs,e.accuracy.training,e.errors,$a((function(e){return e.predictions})));return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:"row",hidden:n.length>0,children:(0,B.jsx)("div",{className:"mb-5 col-md-10 mx-auto",children:(0,B.jsx)("p",{children:"Now that you have trained your model, let's test it. You can test just one image or several. The software will keep track of the category label you predicted for each image."})})}),(0,B.jsxs)("section",{className:"row justify-content-center",children:[(0,B.jsx)("div",{className:"col-md-5",hidden:n.length>0,children:(0,B.jsx)(al,{set:"group_a",mode:"Evaluation"})}),(0,B.jsx)("div",{className:"col-md-5",hidden:n.length>0,children:(0,B.jsx)(al,{set:"group_b",mode:"Evaluation"})})]}),(0,B.jsx)("section",{className:"row",children:(0,B.jsx)("div",{className:"col-md-12",children:t&&(0,B.jsx)(cN,{predict:t})})})]})},pN={params:{},uploadFormat:"nested",imagesFormats:void 0,showDownload:!0},dN=function(t){var n=(0,e.useMemo)((function(){return f(f({},pN),t)}),[t]),a=(0,e.useRef)(null),o=u((0,e.useState)([]),2),s=o[0],l=o[1],c=u((0,e.useState)([]),2),p=c[0],d=c[1],h=u((0,e.useState)([]),2),m=h[0],g=h[1],v=u((0,e.useState)("empty"),2),y=v[0],b=v[1],w=u((0,e.useState)({}),2),x=w[0],_=w[1],N=u((0,e.useState)([]),2),k=N[0],E=N[1],S=u((0,e.useState)(!1),2),C=S[0],I=S[1],O=$a((function(e){return e.setValue})),P=$a((function(e){return e.predictions})),T=$a((function(e){return e.updatePredictions})),A=u((0,e.useState)({training:void 0,evaluation:void 0}),2),R=A[0],D=A[1],M=n.getMLClassifier,L=n.trainingState,z=n.showDownload,j=(0,e.useCallback)(function(){var e=i(r().mark((function e(t,a,i,o){var u,l,c,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.onPredictComplete&&n.onPredictComplete(t,a,i),u="".concat(i),l=Zt(new Set(s)),c=o,f=[Math.max(c[0],c[1]),u,Math.min(c[0],c[1]),0===l.indexOf(u)?l[1]:l[0]],T({src:t,prediction:u,label:a,score:o=f});case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),[n,s,T]),F=function(){var e=i(r().mark((function e(t){var n,i,o,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t.length)){e.next=8;break}return i=t[n],o=i.src,s=i.label,e.next=5,a.current.predict(o,s);case 5:n++,e.next=1;break;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=(0,e.useCallback)(function(){var e=i(r().mark((function e(t,o,s,u){var c,d,h,m;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.onAddDataComplete&&n.onAddDataComplete(t,o,s,u),"train"!==s){e.next=14;break}return b("training"),l(o),E(t),g((u||[]).map((function(e){return f(f({},e),{},{file:p[e.index]})}))),c=n.params.train||{},e.next=9,a.current.train(f(f({},c),{},{callbacks:{onBatchEnd:function(){var e=i(r().mark((function e(t,n){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.callbacks&&c.callbacks.onBatchEnd&&c.callbacks.onBatchEnd(t,n),a=n.loss?n.loss instanceof Array?n.loss:[n.loss]:[],_(f(f({},n),{},{loss:a.concat(n.loss)})),e.next=5,Sg();case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}));case 9:d=e.sent,h=d.history.acc,m=h[h.length-1],b("trained"),D(f(f({},R),{},{training:m}));case 14:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),[n,p,R,a]),U=function(){var e=i(r().mark((function e(t){var n,i,o,s,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kg(t);case 2:return n=e.sent,e.next=5,Eg(n);case 5:return i=e.sent,o=i.images,s=i.labels,u=i.files,d(u),e.abrupt("return",a.current.addData(o,s,"train"));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=(0,e.useCallback)(function(){var e=i(r().mark((function e(t,a,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b("parsing"),n.onAddDataStart&&n.onAddDataStart(),"train"===i&&(b("training"),E(t));case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[n]),q=(0,e.useMemo)((function(){return{onLoadStart:n.onLoadStart,onLoadComplete:n.onLoadComplete,onClearDataStart:n.onClearDataStart,onClearDataComplete:n.onClearDataComplete,onTrainStart:n.onTrainStart,onTrainComplete:n.onTrainComplete,onPredictStart:n.onPredictStart,onEvaluateStart:n.onEvaluateStart,onEvaluateComplete:n.onEvaluateComplete,onSaveStart:n.onSaveStart,onSaveComplete:n.onSaveComplete,onPredictComplete:j,onAddDataStart:W,onAddDataComplete:V}}),[n,j,W,V]),$=function(){var e=i(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.next=3,a.current.save((n.params||{}).save);case 3:I(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,e.useEffect)((function(){a.current=new D_(q),M&&M(a.current)}),[]),(0,B.jsxs)("div",{className:"row align-items-center",children:[("empty"===y||"selection"===L)&&(0,B.jsx)("div",{className:L_+" col-md-6",children:(0,B.jsx)($g,{onDrop:function(e){b("uploading")},onParseFiles:U,onParseObject:function(e){var t=new Array,n=new Array;return n=e.map((function(e){return e.src})),t=e.map((function(e){return e.label})),a.current.addData(n,t,"train")}})}),["training","uploading","parsing"].includes(y)&&(0,B.jsx)("div",{className:M_+" col-md-6",children:(0,B.jsx)(Qg,{images:k})}),"trained"===y&&"evaluation"===L&&k&&(0,B.jsx)("div",{className:" col-md-12",children:(0,B.jsx)(fN,{logs:x,labels:s,downloading:C,onDownload:z?$:void 0,predict:F,predictions:P,accuracy:R,errors:m,onButtonClick:function(){O("predictions",[])}})})]})},hN="App_info__n6y-J",mN="App_containerBody__YN6yG",gN="App_containerRow__djxeq",vN="App_content__container__34Inl",yN="App_title__qG9Yv",bN=void 0===_g.SHOW_DOWNLOAD||_g.SHOW_DOWNLOAD,wN=Ng.embedded,xN=Ng.dataset||"lunch",_N=function(){var t=u((0,e.useState)(!1),2),n=t[0],a=t[1],o=u((0,e.useState)(!1),2),s=o[0],l=o[1],c=u((0,e.useState)("selection"),2),f=c[0],p=c[1],d=qa((function(e){return e.setData})),h=qa((function(e){return e.data}));(0,e.useEffect)((function(){d(xN in xg?xg[xN]:xg.lunch)}),[d]);var m=(0,e.useRef)(null),g=function(){var e=i(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(!0),p("evaluation");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return null!==(null===h||void 0===h?void 0:h.header)?(0,B.jsxs)(B.Fragment,{children:[!wN&&(0,B.jsx)(ng,{user:localStorage.getItem("currentUser")}),(0,B.jsx)("div",{className:"".concat(mN," container"),children:(0,B.jsxs)("div",{className:"".concat(wN?"justify-content-center":gN," row"),children:[!wN&&(0,B.jsx)(lg,{}),(0,B.jsxs)("div",{className:"col-lg-10 ".concat(wN?"":vN),children:[(0,B.jsxs)("div",{className:"row justify-content-between",children:[(0,B.jsx)("div",{className:"col-auto",children:(0,B.jsx)("h1",{className:"".concat(yN),children:h.header})}),"evaluation"===f&&(0,B.jsx)("div",{className:"col-auto align-self-center",children:(0,B.jsx)("button",{className:"btn btn-secondary",onClick:function(){a(!1),l(!1),p("selection")},children:"Retrain Model"})})]}),(0,B.jsxs)("section",{className:"row",children:[(0,B.jsxs)("div",{className:"col-md-12",children:[(0,B.jsx)(yg,{current:!1===n?0:!0===s?2:1}),!1===n&&(0,B.jsx)("div",{className:"".concat(hN," my-5 col-md-10 mx-auto"),children:(0,B.jsx)("p",{className:"mx-auto",children:h.homepage_prompt})}),(0,B.jsxs)("div",{className:"mt-4 row justify-content-center",hidden:!0===n,children:[(0,B.jsx)("div",{className:"col-md-5",children:(0,B.jsx)(al,{set:"group_a",mode:"Training"})}),(0,B.jsx)("div",{className:"col-md-5",children:(0,B.jsx)(al,{set:"group_b",mode:"Training"})})]})]}),(0,B.jsx)("div",{className:"mx-auto mt-5 col-md-12 align-self-center",children:(0,B.jsx)(dN,{getMLClassifier:function(e){m.current=e},onAddDataStart:function(){a(!0),p("training")},onTrainComplete:g,showDownload:!bN,trainingState:f,params:{train:{epochs:20},evaluate:{batchSize:32},save:{}}})})]})]}),(0,B.jsx)(ag,{})]})})]}):(0,B.jsx)("p",{children:"Loading.."})};t.render((0,B.jsx)(e.StrictMode,{children:(0,B.jsx)(_N,{dataType:"lunch"})}),document.getElementById("root"))}()})();
//# sourceMappingURL=main.2dfcb1c1.js.map